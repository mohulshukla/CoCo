/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/page";
exports.ids = ["app/page"];
exports.modules = {

/***/ "../../client/components/action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/client/components/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/client/components/action-async-storage.external.js");

/***/ }),

/***/ "./request-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/client/components/request-async-storage.external" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/client/components/request-async-storage.external");

/***/ }),

/***/ "../../client/components/request-async-storage.external":
/*!********************************************************************************!*\
  !*** external "next/dist/client/components/request-async-storage.external.js" ***!
  \********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/client/components/request-async-storage.external.js");

/***/ }),

/***/ "./static-generation-async-storage.external":
/*!***************************************************************************************!*\
  !*** external "next/dist/client/components/static-generation-async-storage.external" ***!
  \***************************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/client/components/static-generation-async-storage.external");

/***/ }),

/***/ "../../client/components/static-generation-async-storage.external":
/*!******************************************************************************************!*\
  !*** external "next/dist/client/components/static-generation-async-storage.external.js" ***!
  \******************************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/client/components/static-generation-async-storage.external.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fpage&page=%2Fpage&appPaths=%2Fpage&pagePath=private-next-app-dir%2Fpage.tsx&appDir=%2FUsers%2Fkevinizadi%2Fwebsockets%2FCoCo%2Ffrontend%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fkevinizadi%2Fwebsockets%2FCoCo%2Ffrontend&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fpage&page=%2Fpage&appPaths=%2Fpage&pagePath=private-next-app-dir%2Fpage.tsx&appDir=%2FUsers%2Fkevinizadi%2Fwebsockets%2FCoCo%2Ffrontend%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fkevinizadi%2Fwebsockets%2FCoCo%2Ffrontend&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GlobalError: () => (/* reexport default from dynamic */ next_dist_client_components_error_boundary__WEBPACK_IMPORTED_MODULE_2___default.a),\n/* harmony export */   __next_app__: () => (/* binding */ __next_app__),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   pages: () => (/* binding */ pages),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   tree: () => (/* binding */ tree)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_page_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-page/module.compiled */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/module.compiled.js?5bc9\");\n/* harmony import */ var next_dist_server_future_route_modules_app_page_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_page_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_client_components_error_boundary__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/client/components/error-boundary */ \"(rsc)/./node_modules/next/dist/client/components/error-boundary.js\");\n/* harmony import */ var next_dist_client_components_error_boundary__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_client_components_error_boundary__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next/dist/server/app-render/entry-base */ \"(rsc)/./node_modules/next/dist/server/app-render/entry-base.js\");\n/* harmony import */ var next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_3__) if([\"default\",\"tree\",\"pages\",\"GlobalError\",\"originalPathname\",\"__next_app__\",\"routeModule\"].indexOf(__WEBPACK_IMPORT_KEY__) < 0) __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => next_dist_server_app_render_entry_base__WEBPACK_IMPORTED_MODULE_3__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n\"TURBOPACK { transition: next-ssr }\";\n\n\n// We inject the tree and pages here so that we can use them in the route\n// module.\nconst tree = {\n        children: [\n        '',\n        {\n        children: ['__PAGE__', {}, {\n          page: [() => Promise.resolve(/*! import() eager */).then(__webpack_require__.bind(__webpack_require__, /*! ./app/page.tsx */ \"(rsc)/./app/page.tsx\")), \"/Users/kevinizadi/websockets/CoCo/frontend/app/page.tsx\"],\n          \n        }]\n      },\n        {\n        'layout': [() => Promise.resolve(/*! import() eager */).then(__webpack_require__.bind(__webpack_require__, /*! ./app/layout.tsx */ \"(rsc)/./app/layout.tsx\")), \"/Users/kevinizadi/websockets/CoCo/frontend/app/layout.tsx\"],\n'not-found': [() => Promise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! next/dist/client/components/not-found-error */ \"(rsc)/./node_modules/next/dist/client/components/not-found-error.js\", 23)), \"next/dist/client/components/not-found-error\"],\n        \n      }\n      ]\n      }.children;\nconst pages = [\"/Users/kevinizadi/websockets/CoCo/frontend/app/page.tsx\"];\n\n\nconst __next_app_require__ = __webpack_require__\nconst __next_app_load_chunk__ = () => Promise.resolve()\nconst originalPathname = \"/page\";\nconst __next_app__ = {\n    require: __next_app_require__,\n    loadChunk: __next_app_load_chunk__\n};\n\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_app_page_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppPageRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_PAGE,\n        page: \"/page\",\n        pathname: \"/\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\",\n        appPaths: []\n    },\n    userland: {\n        loaderTree: tree\n    }\n});\n\n//# sourceMappingURL=app-page.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZwYWdlJnBhZ2U9JTJGcGFnZSZhcHBQYXRocz0lMkZwYWdlJnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGcGFnZS50c3gmYXBwRGlyPSUyRlVzZXJzJTJGa2V2aW5pemFkaSUyRndlYnNvY2tldHMlMkZDb0NvJTJGZnJvbnRlbmQlMkZhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPSUyRlVzZXJzJTJGa2V2aW5pemFkaSUyRndlYnNvY2tldHMlMkZDb0NvJTJGZnJvbnRlbmQmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxhQUFhLHNCQUFzQjtBQUNpRTtBQUNyQztBQUMvRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQ0FBaUM7QUFDakMsdUJBQXVCLHdJQUE0RjtBQUNuSDtBQUNBLFNBQVM7QUFDVCxPQUFPO0FBQ1A7QUFDQSx5QkFBeUIsNElBQThGO0FBQ3ZILG9CQUFvQiwwTkFBZ0Y7QUFDcEc7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ3VCO0FBQzZEO0FBQ3BGLDZCQUE2QixtQkFBbUI7QUFDaEQ7QUFDTztBQUNBO0FBQ1A7QUFDQTtBQUNBO0FBQ3VEO0FBQ3ZEO0FBQ08sd0JBQXdCLDhHQUFrQjtBQUNqRDtBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92aWJlLTNkLWNvZGUvPzM3ZTciXSwic291cmNlc0NvbnRlbnQiOlsiXCJUVVJCT1BBQ0sgeyB0cmFuc2l0aW9uOiBuZXh0LXNzciB9XCI7XG5pbXBvcnQgeyBBcHBQYWdlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcGFnZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG4vLyBXZSBpbmplY3QgdGhlIHRyZWUgYW5kIHBhZ2VzIGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCB0cmVlID0ge1xuICAgICAgICBjaGlsZHJlbjogW1xuICAgICAgICAnJyxcbiAgICAgICAge1xuICAgICAgICBjaGlsZHJlbjogWydfX1BBR0VfXycsIHt9LCB7XG4gICAgICAgICAgcGFnZTogWygpID0+IGltcG9ydCgvKiB3ZWJwYWNrTW9kZTogXCJlYWdlclwiICovIFwiL1VzZXJzL2tldmluaXphZGkvd2Vic29ja2V0cy9Db0NvL2Zyb250ZW5kL2FwcC9wYWdlLnRzeFwiKSwgXCIvVXNlcnMva2V2aW5pemFkaS93ZWJzb2NrZXRzL0NvQ28vZnJvbnRlbmQvYXBwL3BhZ2UudHN4XCJdLFxuICAgICAgICAgIFxuICAgICAgICB9XVxuICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAnbGF5b3V0JzogWygpID0+IGltcG9ydCgvKiB3ZWJwYWNrTW9kZTogXCJlYWdlclwiICovIFwiL1VzZXJzL2tldmluaXphZGkvd2Vic29ja2V0cy9Db0NvL2Zyb250ZW5kL2FwcC9sYXlvdXQudHN4XCIpLCBcIi9Vc2Vycy9rZXZpbml6YWRpL3dlYnNvY2tldHMvQ29Dby9mcm9udGVuZC9hcHAvbGF5b3V0LnRzeFwiXSxcbidub3QtZm91bmQnOiBbKCkgPT4gaW1wb3J0KC8qIHdlYnBhY2tNb2RlOiBcImVhZ2VyXCIgKi8gXCJuZXh0L2Rpc3QvY2xpZW50L2NvbXBvbmVudHMvbm90LWZvdW5kLWVycm9yXCIpLCBcIm5leHQvZGlzdC9jbGllbnQvY29tcG9uZW50cy9ub3QtZm91bmQtZXJyb3JcIl0sXG4gICAgICAgIFxuICAgICAgfVxuICAgICAgXVxuICAgICAgfS5jaGlsZHJlbjtcbmNvbnN0IHBhZ2VzID0gW1wiL1VzZXJzL2tldmluaXphZGkvd2Vic29ja2V0cy9Db0NvL2Zyb250ZW5kL2FwcC9wYWdlLnRzeFwiXTtcbmV4cG9ydCB7IHRyZWUsIHBhZ2VzIH07XG5leHBvcnQgeyBkZWZhdWx0IGFzIEdsb2JhbEVycm9yIH0gZnJvbSBcIm5leHQvZGlzdC9jbGllbnQvY29tcG9uZW50cy9lcnJvci1ib3VuZGFyeVwiO1xuY29uc3QgX19uZXh0X2FwcF9yZXF1aXJlX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fXG5jb25zdCBfX25leHRfYXBwX2xvYWRfY2h1bmtfXyA9ICgpID0+IFByb21pc2UucmVzb2x2ZSgpXG5leHBvcnQgY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL3BhZ2VcIjtcbmV4cG9ydCBjb25zdCBfX25leHRfYXBwX18gPSB7XG4gICAgcmVxdWlyZTogX19uZXh0X2FwcF9yZXF1aXJlX18sXG4gICAgbG9hZENodW5rOiBfX25leHRfYXBwX2xvYWRfY2h1bmtfX1xufTtcbmV4cG9ydCAqIGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2FwcC1yZW5kZXIvZW50cnktYmFzZVwiO1xuLy8gQ3JlYXRlIGFuZCBleHBvcnQgdGhlIHJvdXRlIG1vZHVsZSB0aGF0IHdpbGwgYmUgY29uc3VtZWQuXG5leHBvcnQgY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUGFnZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUEFHRSxcbiAgICAgICAgcGFnZTogXCIvcGFnZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvXCIsXG4gICAgICAgIC8vIFRoZSBmb2xsb3dpbmcgYXJlbid0IHVzZWQgaW4gcHJvZHVjdGlvbi5cbiAgICAgICAgYnVuZGxlUGF0aDogXCJcIixcbiAgICAgICAgZmlsZW5hbWU6IFwiXCIsXG4gICAgICAgIGFwcFBhdGhzOiBbXVxuICAgIH0sXG4gICAgdXNlcmxhbmQ6IHtcbiAgICAgICAgbG9hZGVyVHJlZTogdHJlZVxuICAgIH1cbn0pO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcGFnZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fpage&page=%2Fpage&appPaths=%2Fpage&pagePath=private-next-app-dir%2Fpage.tsx&appDir=%2FUsers%2Fkevinizadi%2Fwebsockets%2FCoCo%2Ffrontend%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fkevinizadi%2Fwebsockets%2FCoCo%2Ffrontend&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%2FUsers%2Fkevinizadi%2Fwebsockets%2FCoCo%2Ffrontend%2Fapp%2Fglobals.css&modules=%2FUsers%2Fkevinizadi%2Fwebsockets%2FCoCo%2Ffrontend%2Fnode_modules%2Fnext%2Ffont%2Fgoogle%2Ftarget.css%3F%7B%22path%22%3A%22app%2Flayout.tsx%22%2C%22import%22%3A%22Inter%22%2C%22arguments%22%3A%5B%7B%22subsets%22%3A%5B%22latin%22%5D%7D%5D%2C%22variableName%22%3A%22inter%22%7D&server=true!":
/*!*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%2FUsers%2Fkevinizadi%2Fwebsockets%2FCoCo%2Ffrontend%2Fapp%2Fglobals.css&modules=%2FUsers%2Fkevinizadi%2Fwebsockets%2FCoCo%2Ffrontend%2Fnode_modules%2Fnext%2Ffont%2Fgoogle%2Ftarget.css%3F%7B%22path%22%3A%22app%2Flayout.tsx%22%2C%22import%22%3A%22Inter%22%2C%22arguments%22%3A%5B%7B%22subsets%22%3A%5B%22latin%22%5D%7D%5D%2C%22variableName%22%3A%22inter%22%7D&server=true! ***!
  \*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%2FUsers%2Fkevinizadi%2Fwebsockets%2FCoCo%2Ffrontend%2Fapp%2Fpage.tsx&server=true!":
/*!************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%2FUsers%2Fkevinizadi%2Fwebsockets%2FCoCo%2Ffrontend%2Fapp%2Fpage.tsx&server=true! ***!
  \************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

eval("Promise.resolve(/*! import() eager */).then(__webpack_require__.bind(__webpack_require__, /*! ./app/page.tsx */ \"(ssr)/./app/page.tsx\"))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWZsaWdodC1jbGllbnQtZW50cnktbG9hZGVyLmpzP21vZHVsZXM9JTJGVXNlcnMlMkZrZXZpbml6YWRpJTJGd2Vic29ja2V0cyUyRkNvQ28lMkZmcm9udGVuZCUyRmFwcCUyRnBhZ2UudHN4JnNlcnZlcj10cnVlISIsIm1hcHBpbmdzIjoiQUFBQSIsInNvdXJjZXMiOlsid2VicGFjazovL3ZpYmUtM2QtY29kZS8/YmUxMSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQoLyogd2VicGFja01vZGU6IFwiZWFnZXJcIiAqLyBcIi9Vc2Vycy9rZXZpbml6YWRpL3dlYnNvY2tldHMvQ29Dby9mcm9udGVuZC9hcHAvcGFnZS50c3hcIikiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%2FUsers%2Fkevinizadi%2Fwebsockets%2FCoCo%2Ffrontend%2Fapp%2Fpage.tsx&server=true!\n");

/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%2FUsers%2Fkevinizadi%2Fwebsockets%2FCoCo%2Ffrontend%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fapp-router.js&modules=%2FUsers%2Fkevinizadi%2Fwebsockets%2FCoCo%2Ffrontend%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Ferror-boundary.js&modules=%2FUsers%2Fkevinizadi%2Fwebsockets%2FCoCo%2Ffrontend%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Flayout-router.js&modules=%2FUsers%2Fkevinizadi%2Fwebsockets%2FCoCo%2Ffrontend%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fnot-found-boundary.js&modules=%2FUsers%2Fkevinizadi%2Fwebsockets%2FCoCo%2Ffrontend%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Frender-from-template-context.js&modules=%2FUsers%2Fkevinizadi%2Fwebsockets%2FCoCo%2Ffrontend%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fstatic-generation-searchparams-bailout-provider.js&server=true!":
/*!****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%2FUsers%2Fkevinizadi%2Fwebsockets%2FCoCo%2Ffrontend%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fapp-router.js&modules=%2FUsers%2Fkevinizadi%2Fwebsockets%2FCoCo%2Ffrontend%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Ferror-boundary.js&modules=%2FUsers%2Fkevinizadi%2Fwebsockets%2FCoCo%2Ffrontend%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Flayout-router.js&modules=%2FUsers%2Fkevinizadi%2Fwebsockets%2FCoCo%2Ffrontend%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fnot-found-boundary.js&modules=%2FUsers%2Fkevinizadi%2Fwebsockets%2FCoCo%2Ffrontend%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Frender-from-template-context.js&modules=%2FUsers%2Fkevinizadi%2Fwebsockets%2FCoCo%2Ffrontend%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fstatic-generation-searchparams-bailout-provider.js&server=true! ***!
  \****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __unused_webpack_exports, __webpack_require__) => {

eval("Promise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/app-router.js */ \"(ssr)/./node_modules/next/dist/client/components/app-router.js\", 23));\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/error-boundary.js */ \"(ssr)/./node_modules/next/dist/client/components/error-boundary.js\", 23));\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/layout-router.js */ \"(ssr)/./node_modules/next/dist/client/components/layout-router.js\", 23));\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/not-found-boundary.js */ \"(ssr)/./node_modules/next/dist/client/components/not-found-boundary.js\", 23));\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/render-from-template-context.js */ \"(ssr)/./node_modules/next/dist/client/components/render-from-template-context.js\", 23));\nPromise.resolve(/*! import() eager */).then(__webpack_require__.t.bind(__webpack_require__, /*! ./node_modules/next/dist/client/components/static-generation-searchparams-bailout-provider.js */ \"(ssr)/./node_modules/next/dist/client/components/static-generation-searchparams-bailout-provider.js\", 23))//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWZsaWdodC1jbGllbnQtZW50cnktbG9hZGVyLmpzP21vZHVsZXM9JTJGVXNlcnMlMkZrZXZpbml6YWRpJTJGd2Vic29ja2V0cyUyRkNvQ28lMkZmcm9udGVuZCUyRm5vZGVfbW9kdWxlcyUyRm5leHQlMkZkaXN0JTJGY2xpZW50JTJGY29tcG9uZW50cyUyRmFwcC1yb3V0ZXIuanMmbW9kdWxlcz0lMkZVc2VycyUyRmtldmluaXphZGklMkZ3ZWJzb2NrZXRzJTJGQ29DbyUyRmZyb250ZW5kJTJGbm9kZV9tb2R1bGVzJTJGbmV4dCUyRmRpc3QlMkZjbGllbnQlMkZjb21wb25lbnRzJTJGZXJyb3ItYm91bmRhcnkuanMmbW9kdWxlcz0lMkZVc2VycyUyRmtldmluaXphZGklMkZ3ZWJzb2NrZXRzJTJGQ29DbyUyRmZyb250ZW5kJTJGbm9kZV9tb2R1bGVzJTJGbmV4dCUyRmRpc3QlMkZjbGllbnQlMkZjb21wb25lbnRzJTJGbGF5b3V0LXJvdXRlci5qcyZtb2R1bGVzPSUyRlVzZXJzJTJGa2V2aW5pemFkaSUyRndlYnNvY2tldHMlMkZDb0NvJTJGZnJvbnRlbmQlMkZub2RlX21vZHVsZXMlMkZuZXh0JTJGZGlzdCUyRmNsaWVudCUyRmNvbXBvbmVudHMlMkZub3QtZm91bmQtYm91bmRhcnkuanMmbW9kdWxlcz0lMkZVc2VycyUyRmtldmluaXphZGklMkZ3ZWJzb2NrZXRzJTJGQ29DbyUyRmZyb250ZW5kJTJGbm9kZV9tb2R1bGVzJTJGbmV4dCUyRmRpc3QlMkZjbGllbnQlMkZjb21wb25lbnRzJTJGcmVuZGVyLWZyb20tdGVtcGxhdGUtY29udGV4dC5qcyZtb2R1bGVzPSUyRlVzZXJzJTJGa2V2aW5pemFkaSUyRndlYnNvY2tldHMlMkZDb0NvJTJGZnJvbnRlbmQlMkZub2RlX21vZHVsZXMlMkZuZXh0JTJGZGlzdCUyRmNsaWVudCUyRmNvbXBvbmVudHMlMkZzdGF0aWMtZ2VuZXJhdGlvbi1zZWFyY2hwYXJhbXMtYmFpbG91dC1wcm92aWRlci5qcyZzZXJ2ZXI9dHJ1ZSEiLCJtYXBwaW5ncyI6IkFBQUEsa09BQXNJO0FBQ3RJLDBPQUEwSTtBQUMxSSx3T0FBeUk7QUFDekksa1BBQThJO0FBQzlJLHNRQUF3SjtBQUN4SiIsInNvdXJjZXMiOlsid2VicGFjazovL3ZpYmUtM2QtY29kZS8/ODBhMyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQoLyogd2VicGFja01vZGU6IFwiZWFnZXJcIiAqLyBcIi9Vc2Vycy9rZXZpbml6YWRpL3dlYnNvY2tldHMvQ29Dby9mcm9udGVuZC9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2NsaWVudC9jb21wb25lbnRzL2FwcC1yb3V0ZXIuanNcIik7XG5pbXBvcnQoLyogd2VicGFja01vZGU6IFwiZWFnZXJcIiAqLyBcIi9Vc2Vycy9rZXZpbml6YWRpL3dlYnNvY2tldHMvQ29Dby9mcm9udGVuZC9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2NsaWVudC9jb21wb25lbnRzL2Vycm9yLWJvdW5kYXJ5LmpzXCIpO1xuaW1wb3J0KC8qIHdlYnBhY2tNb2RlOiBcImVhZ2VyXCIgKi8gXCIvVXNlcnMva2V2aW5pemFkaS93ZWJzb2NrZXRzL0NvQ28vZnJvbnRlbmQvbm9kZV9tb2R1bGVzL25leHQvZGlzdC9jbGllbnQvY29tcG9uZW50cy9sYXlvdXQtcm91dGVyLmpzXCIpO1xuaW1wb3J0KC8qIHdlYnBhY2tNb2RlOiBcImVhZ2VyXCIgKi8gXCIvVXNlcnMva2V2aW5pemFkaS93ZWJzb2NrZXRzL0NvQ28vZnJvbnRlbmQvbm9kZV9tb2R1bGVzL25leHQvZGlzdC9jbGllbnQvY29tcG9uZW50cy9ub3QtZm91bmQtYm91bmRhcnkuanNcIik7XG5pbXBvcnQoLyogd2VicGFja01vZGU6IFwiZWFnZXJcIiAqLyBcIi9Vc2Vycy9rZXZpbml6YWRpL3dlYnNvY2tldHMvQ29Dby9mcm9udGVuZC9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2NsaWVudC9jb21wb25lbnRzL3JlbmRlci1mcm9tLXRlbXBsYXRlLWNvbnRleHQuanNcIik7XG5pbXBvcnQoLyogd2VicGFja01vZGU6IFwiZWFnZXJcIiAqLyBcIi9Vc2Vycy9rZXZpbml6YWRpL3dlYnNvY2tldHMvQ29Dby9mcm9udGVuZC9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2NsaWVudC9jb21wb25lbnRzL3N0YXRpYy1nZW5lcmF0aW9uLXNlYXJjaHBhcmFtcy1iYWlsb3V0LXByb3ZpZGVyLmpzXCIpIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?modules=%2FUsers%2Fkevinizadi%2Fwebsockets%2FCoCo%2Ffrontend%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fapp-router.js&modules=%2FUsers%2Fkevinizadi%2Fwebsockets%2FCoCo%2Ffrontend%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Ferror-boundary.js&modules=%2FUsers%2Fkevinizadi%2Fwebsockets%2FCoCo%2Ffrontend%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Flayout-router.js&modules=%2FUsers%2Fkevinizadi%2Fwebsockets%2FCoCo%2Ffrontend%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fnot-found-boundary.js&modules=%2FUsers%2Fkevinizadi%2Fwebsockets%2FCoCo%2Ffrontend%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Frender-from-template-context.js&modules=%2FUsers%2Fkevinizadi%2Fwebsockets%2FCoCo%2Ffrontend%2Fnode_modules%2Fnext%2Fdist%2Fclient%2Fcomponents%2Fstatic-generation-searchparams-bailout-provider.js&server=true!\n");

/***/ }),

/***/ "(ssr)/./app/PreviewShape/Model3DPreviewShape.tsx":
/*!**************************************************!*\
  !*** ./app/PreviewShape/Model3DPreviewShape.tsx ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Model3DPreviewShapeUtil: () => (/* binding */ Model3DPreviewShapeUtil)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _lib_vibe3DCode__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/vibe3DCode */ \"(ssr)/./app/lib/vibe3DCode.tsx\");\n/* harmony import */ var _store_appStore__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/store/appStore */ \"(ssr)/./app/store/appStore.ts\");\n/* harmony import */ var _tldraw_tldraw__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @tldraw/tldraw */ \"(ssr)/./node_modules/@tldraw/tldraw/dist-esm/index.mjs\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_4__);\n/* eslint-disable react-hooks/rules-of-hooks */ \n\n\n\n\nclass Model3DPreviewShapeUtil extends _tldraw_tldraw__WEBPACK_IMPORTED_MODULE_3__.BaseBoxShapeUtil {\n    static{\n        this.type = \"model3d\";\n    }\n    getDefaultProps() {\n        return {\n            threeJsCode: \"\",\n            objectCode: \"\",\n            gltfUrl: \"\",\n            isGltf: false,\n            w: 960 * 2 / 3,\n            h: 540 * 2 / 3,\n            selectedShapes: []\n        };\n    }\n    component(shape) {\n        const isEditing = (0,_tldraw_tldraw__WEBPACK_IMPORTED_MODULE_3__.useIsEditing)(shape.id);\n        const toast = (0,_tldraw_tldraw__WEBPACK_IMPORTED_MODULE_3__.useToasts)();\n        const { addObjectFromCode, addObjectWithGltf } = (0,_store_appStore__WEBPACK_IMPORTED_MODULE_2__.useObjectStore)();\n        const { activeTab, setActiveTab } = (0,_store_appStore__WEBPACK_IMPORTED_MODULE_2__.useTabStore)();\n        const [isRegenerating, setIsRegenerating] = (0,react__WEBPACK_IMPORTED_MODULE_4__.useState)(false);\n        const [isEditingModel, setIsEditingModel] = (0,react__WEBPACK_IMPORTED_MODULE_4__.useState)(false);\n        // Listen for custom editing state change events\n        (0,react__WEBPACK_IMPORTED_MODULE_4__.useEffect)(()=>{\n            const handleEditingStateChange = (event)=>{\n                const customEvent = event;\n                if (customEvent.detail && customEvent.detail.elementId === shape.id) {\n                    setIsEditingModel(customEvent.detail.isEditing);\n                }\n            };\n            window.addEventListener(\"model3d-editing-state-change\", handleEditingStateChange);\n            return ()=>{\n                window.removeEventListener(\"model3d-editing-state-change\", handleEditingStateChange);\n            };\n        }, [\n            shape.id\n        ]);\n        // Listen for add-gltf-object events\n        (0,react__WEBPACK_IMPORTED_MODULE_4__.useEffect)(()=>{\n            const handleAddGltfObject = (event)=>{\n                const customEvent = event;\n                if (customEvent.detail && customEvent.detail.url) {\n                    // Check if this event is for this specific shape\n                    if (customEvent.detail.shapeId && customEvent.detail.shapeId !== shape.id) {\n                        return; // Skip if this event is for a different shape\n                    }\n                    if (activeTab !== \"threejs\") {\n                        setActiveTab(\"threejs\");\n                        // Wait for tab switch to complete before adding object\n                        setTimeout(()=>{\n                            addObjectWithGltf(customEvent.detail.url);\n                        }, 100);\n                    } else {\n                        // Already on threejs tab, add object directly\n                        addObjectWithGltf(customEvent.detail.url);\n                    }\n                }\n            };\n            window.addEventListener(\"add-gltf-object\", handleAddGltfObject);\n            return ()=>{\n                window.removeEventListener(\"add-gltf-object\", handleAddGltfObject);\n            };\n        }, [\n            activeTab,\n            setActiveTab,\n            addObjectWithGltf,\n            shape.id\n        ]);\n        // Prepare the HTML with the Three.js code embedded\n        const htmlToUse = shape.props.isGltf && shape.props.gltfUrl ? `<!DOCTYPE html>\n<html>\n<head>\n    <meta charset=\"utf-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>3D Model Preview</title>\n    <style>\n        body { \n            margin: 0; \n            padding: 0; \n            overflow: hidden; \n            width: 100%; \n            height: 100%;\n            background-color: transparent;\n        }\n        canvas { \n            display: block; \n            width: 100% !important; \n            height: 100% !important;\n        }\n        /* Help tooltip */\n        .help-tooltip {\n            position: absolute;\n            bottom: 10px;\n            left: 10px;\n            background: rgba(0,0,0,0.7);\n            color: white;\n            padding: 8px 12px;\n            border-radius: 4px;\n            font-family: sans-serif;\n            font-size: 12px;\n            opacity: 0.7;\n            pointer-events: none;\n        }\n    </style>\n</head>\n<body>\n    <div class=\"help-tooltip\">\n        <p>Left-click + drag: Rotate</p>\n        <p>Right-click + drag: Pan</p>\n        <p>Scroll: Zoom</p>\n    </div>\n    <script type=\"module\">\n    import * as THREE from \"https://esm.sh/three\";\n    import { OrbitControls } from \"https://esm.sh/three/examples/jsm/controls/OrbitControls.js\";\n    import { GLTFLoader } from \"https://esm.sh/three/examples/jsm/loaders/GLTFLoader.js\";\n    \n    // Set up scene\n    const scene = new THREE.Scene();\n    scene.background = new THREE.Color(0xf0f0f0);\n    \n    // Set up camera\n    const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);\n    camera.position.set(0, 0, 5);\n    \n    // Set up renderer\n    const renderer = new THREE.WebGLRenderer({ antialias: true });\n    renderer.setSize(window.innerWidth, window.innerHeight);\n    renderer.setPixelRatio(window.devicePixelRatio);\n    renderer.shadowMap.enabled = true;\n    document.body.appendChild(renderer.domElement);\n    \n    // Controls\n    const controls = new OrbitControls(camera, renderer.domElement);\n    controls.enableDamping = true;\n    \n    // Enhanced lighting setup\n    // Ambient light for global illumination\n    const ambientLight = new THREE.AmbientLight(0xffffff, 0.6);\n    scene.add(ambientLight);\n    \n    // Main directional light (sun-like)\n    const mainLight = new THREE.DirectionalLight(0xffffff, 1.2);\n    mainLight.position.set(10, 10, 10);\n    // mainLight.castShadow = true;\n    // Improve shadow quality\n    mainLight.shadow.mapSize.width = 2048;\n    mainLight.shadow.mapSize.height = 2048;\n    mainLight.shadow.camera.near = 0.5;\n    mainLight.shadow.camera.far = 50;\n    mainLight.shadow.bias = -0.0001;\n    scene.add(mainLight);\n    \n    // Secondary fill light from the opposite side\n    const fillLight = new THREE.DirectionalLight(0xffffee, 0.8);\n    fillLight.position.set(-10, 5, -10);\n    scene.add(fillLight);\n    \n    // Rim light to highlight edges\n    const rimLight = new THREE.DirectionalLight(0xeeeeff, 0.6);\n    rimLight.position.set(0, -10, -15);\n    scene.add(rimLight);\n    \n    // Soft light from below for better dimension\n    const bottomLight = new THREE.DirectionalLight(0xeeeeff, 0.4);\n    bottomLight.position.set(0, -10, 0);\n    scene.add(bottomLight);\n    \n    // Add hemisphere light for more natural outdoor-like lighting\n    const hemiLight = new THREE.HemisphereLight(0xffffff, 0x444444, 0.7);\n    hemiLight.position.set(0, 20, 0);\n    scene.add(hemiLight);\n    \n    // Environment lighting for reflections (if model has reflective materials)\n    renderer.outputEncoding = THREE.sRGBEncoding;\n    renderer.toneMapping = THREE.ACESFilmicToneMapping;\n    renderer.toneMappingExposure = 1.2;\n    \n    // Add a circular ground plate\n    const groundRadius = 10;\n    const groundGeometry = new THREE.CircleGeometry(groundRadius, 72);\n    // Rotate the ground plate to be horizontal (it's vertical by default)\n    groundGeometry.rotateX(-Math.PI / 2);\n    \n    // Create a nice material for the ground\n    const groundMaterial = new THREE.MeshStandardMaterial({\n      color: 0x888888,\n      roughness: 0.8,\n      metalness: 0.2,\n      side: THREE.DoubleSide,\n    });\n    \n    const groundPlate = new THREE.Mesh(groundGeometry, groundMaterial);\n    groundPlate.receiveShadow = true;\n    groundPlate.position.y = -2; // Slightly below origin to avoid z-fighting\n    scene.add(groundPlate);\n    \n    // Load GLTF model\n    const loader = new GLTFLoader();\n    loader.load('${shape.props.gltfUrl}', (gltf) => {\n      const model = gltf.scene;\n      \n      // Center model\n      const box = new THREE.Box3().setFromObject(model);\n      const center = box.getCenter(new THREE.Vector3());\n      const size = box.getSize(new THREE.Vector3());\n      \n      // Reset model position to center\n      model.position.x = -center.x;\n      model.position.y = -center.y;\n      model.position.z = -center.z;\n      \n      // Scale model to fit view\n      const maxDim = Math.max(size.x, size.y, size.z);\n      if (maxDim > 0) {\n        const scale = 3 / maxDim;\n        model.scale.set(scale, scale, scale);\n      }\n      \n      // Add spotlight directly aimed at the model for better visibility\n      const spotLight = new THREE.SpotLight(0xffffff, 1.5);\n      spotLight.position.set(0, 10, 0);\n      spotLight.angle = Math.PI / 4;\n      spotLight.penumbra = 0.1;\n      spotLight.decay = 0;\n      spotLight.distance = 50;\n      spotLight.castShadow = true;\n      spotLight.shadow.bias = -0.0001;\n      spotLight.shadow.mapSize.width = 1024;\n      spotLight.shadow.mapSize.height = 1024;\n      scene.add(spotLight);\n      \n      // Target the spotlight at the model's center\n      spotLight.target = model;\n      scene.add(spotLight.target);\n      \n      // Enhance model materials for better visibility\n      model.traverse((node) => {\n        if (node instanceof THREE.Mesh) {\n          if (node.material) {\n            // For each material in the model, increase brightness\n            const modifyMaterial = (material) => {\n              // Increase the overall brightness\n              if (material.color) {\n                // Store original color for reference\n                if (!material.userData) material.userData = {};\n                material.userData.originalColor = material.color.clone();\n                \n                // Brighten the color (multiply RGB values to make it brighter)\n                const brightenFactor = 10;  // Adjust as needed\n                material.color.r = Math.min(material.color.r * brightenFactor, 1);\n                material.color.g = Math.min(material.color.g * brightenFactor, 1);\n                material.color.b = Math.min(material.color.b * brightenFactor, 1);\n              }\n              \n              // Add slight emissive glow to make model stand out\n              if (material.emissive) {\n                material.emissiveIntensity = 0.4;\n                material.emissive = new THREE.Color(0x333333);\n              }\n              \n              // Increase material contrast\n              if (material.roughness !== undefined) {\n                material.roughness = Math.max(material.roughness * 0.8, 0.1);\n              }\n              \n              // Enhance specularity for more visual pop\n              if (material.metalness !== undefined) {\n                material.metalness = Math.min(material.metalness + 0.1, 1.0);\n              }\n            };\n            \n            // Apply to individual material or material array\n            if (Array.isArray(node.material)) {\n              node.material.forEach(modifyMaterial);\n            } else {\n              modifyMaterial(node.material);\n            }\n          }\n        }\n      });\n      \n      scene.add(model);\n      \n      // Add a subtle outline effect to make the model stand out\n      const edgeGlow = new THREE.Group();\n      const edgeLight1 = new THREE.PointLight(0xffffcc, 0.6, 10);\n      edgeLight1.position.set(2, 2, 2);\n      const edgeLight2 = new THREE.PointLight(0xccffff, 0.6, 10);\n      edgeLight2.position.set(-2, 1, -2);\n      edgeGlow.add(edgeLight1, edgeLight2);\n      scene.add(edgeGlow);\n    }, \n    // Progress callback\n    (xhr) => {\n      console.log((xhr.loaded / xhr.total * 100) + '% loaded');\n    },\n    // Error callback\n    (error) => {\n      console.error('Error loading GLTF model:', error);\n    });\n    \n    // Handle window resize\n    window.addEventListener('resize', () => {\n      camera.aspect = window.innerWidth / window.innerHeight;\n      camera.updateProjectionMatrix();\n      renderer.setSize(window.innerWidth, window.innerHeight);\n    });\n    \n    // Animation loop\n    function animate() {\n      requestAnimationFrame(animate);\n      controls.update();\n      renderer.render(scene, camera);\n    }\n    \n    animate();\n    \n    // Prevent zooming issues\n    document.body.addEventListener('wheel', e => { \n        if (!e.ctrlKey) return; \n        e.preventDefault(); \n        return \n    }, { passive: false });\n    </script>\n</body>\n</html>` : shape.props.threeJsCode ? `<!DOCTYPE html>\n<html>\n<head>\n    <meta charset=\"utf-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>3D Model Preview</title>\n    <style>\n        body { \n            margin: 0; \n            padding: 0; \n            overflow: hidden; \n            width: 100%; \n            height: 100%;\n            background-color: transparent;\n        }\n        canvas { \n            display: block; \n            width: 100% !important; \n            height: 100% !important;\n        }\n        /* Help tooltip */\n        .help-tooltip {\n            position: absolute;\n            bottom: 10px;\n            left: 10px;\n            background: rgba(0,0,0,0.7);\n            color: white;\n            padding: 8px 12px;\n            border-radius: 4px;\n            font-family: sans-serif;\n            font-size: 12px;\n            opacity: 0.7;\n            pointer-events: none;\n        }\n    </style>\n</head>\n<body>\n    <div class=\"help-tooltip\">\n        <p>Left-click + drag: Rotate</p>\n        <p>Right-click + drag: Pan</p>\n        <p>Scroll: Zoom</p>\n    </div>\n    <script type=\"module\">\n    import * as THREE from \"https://esm.sh/three\";\n    import { OrbitControls } from \"https://esm.sh/three/examples/jsm/controls/OrbitControls.js\";\n    ${shape.props.threeJsCode}\n      // Prevent zooming issues\n      document.body.addEventListener('wheel', e => { \n          if (!e.ctrlKey) return; \n          e.preventDefault(); \n          return \n      }, { passive: false });\n    </script>\n</body>\n</html>` : \"\";\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_tldraw_tldraw__WEBPACK_IMPORTED_MODULE_3__.HTMLContainer, {\n            className: \"tl-embed-container\",\n            id: shape.id,\n            children: [\n                htmlToUse ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"iframe\", {\n                            id: `iframe-1-${shape.id}`,\n                            srcDoc: htmlToUse,\n                            width: (0,_tldraw_tldraw__WEBPACK_IMPORTED_MODULE_3__.toDomPrecision)(shape.props.w),\n                            height: (0,_tldraw_tldraw__WEBPACK_IMPORTED_MODULE_3__.toDomPrecision)(shape.props.h),\n                            draggable: false,\n                            style: {\n                                pointerEvents: isEditing ? \"auto\" : \"none\",\n                                border: \"1px solid var(--color-panel-contrast)\",\n                                borderRadius: \"var(--radius-2)\",\n                                backgroundColor: \"rgba(0,0,0,0.1)\"\n                            }\n                        }, void 0, false, {\n                            fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/PreviewShape/Model3DPreviewShape.tsx\",\n                            lineNumber: 427,\n                            columnNumber: 13\n                        }, this),\n                        (isRegenerating || isEditingModel) && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            style: {\n                                position: \"absolute\",\n                                top: 0,\n                                left: 0,\n                                width: \"100%\",\n                                height: \"100%\",\n                                display: \"flex\",\n                                flexDirection: \"column\",\n                                alignItems: \"center\",\n                                justifyContent: \"center\",\n                                backgroundColor: \"rgba(0,0,0,0.7)\",\n                                color: \"white\",\n                                borderRadius: \"var(--radius-2)\",\n                                zIndex: 100\n                            },\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_tldraw_tldraw__WEBPACK_IMPORTED_MODULE_3__.DefaultSpinner, {}, void 0, false, {\n                                    fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/PreviewShape/Model3DPreviewShape.tsx\",\n                                    lineNumber: 458,\n                                    columnNumber: 17\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    style: {\n                                        marginTop: 10,\n                                        fontSize: 14\n                                    },\n                                    children: isRegenerating ? \"Regenerating 3D model...\" : \"Editing 3D model...\"\n                                }, void 0, false, {\n                                    fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/PreviewShape/Model3DPreviewShape.tsx\",\n                                    lineNumber: 459,\n                                    columnNumber: 17\n                                }, this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/PreviewShape/Model3DPreviewShape.tsx\",\n                            lineNumber: 441,\n                            columnNumber: 15\n                        }, this)\n                    ]\n                }, void 0, true) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    style: {\n                        width: \"100%\",\n                        height: \"100%\",\n                        backgroundColor: \"var(--color-muted-2)\",\n                        display: \"flex\",\n                        alignItems: \"center\",\n                        justifyContent: \"center\",\n                        border: \"1px solid var(--color-muted-1)\"\n                    },\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_tldraw_tldraw__WEBPACK_IMPORTED_MODULE_3__.DefaultSpinner, {}, void 0, false, {\n                        fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/PreviewShape/Model3DPreviewShape.tsx\",\n                        lineNumber: 477,\n                        columnNumber: 13\n                    }, this)\n                }, void 0, false, {\n                    fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/PreviewShape/Model3DPreviewShape.tsx\",\n                    lineNumber: 466,\n                    columnNumber: 11\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    style: {\n                        position: \"absolute\",\n                        top: 15,\n                        right: -40,\n                        height: 40,\n                        width: 40,\n                        display: \"flex\",\n                        flexDirection: \"column\",\n                        alignItems: \"left\",\n                        justifyContent: \"center\",\n                        cursor: \"pointer\",\n                        pointerEvents: \"all\",\n                        paddingLeft: 5,\n                        paddingTop: 5,\n                        gap: 5\n                    },\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_tldraw_tldraw__WEBPACK_IMPORTED_MODULE_3__.Icon, {\n                            icon: \"duplicate\",\n                            onTouchStart: ()=>{\n                                if (navigator && navigator.clipboard) {\n                                    navigator.clipboard.writeText(shape.props.threeJsCode);\n                                    toast.addToast({\n                                        icon: \"duplicate\",\n                                        title: \"Model code copied to clipboard\"\n                                    });\n                                }\n                            },\n                            onClick: ()=>{\n                                if (navigator && navigator.clipboard) {\n                                    navigator.clipboard.writeText(shape.props.threeJsCode);\n                                    toast.addToast({\n                                        icon: \"duplicate\",\n                                        title: \"Model code copied to clipboard\"\n                                    });\n                                }\n                            },\n                            onPointerDown: (e)=>e.stopPropagation()\n                        }, void 0, false, {\n                            fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/PreviewShape/Model3DPreviewShape.tsx\",\n                            lineNumber: 498,\n                            columnNumber: 11\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_tldraw_tldraw__WEBPACK_IMPORTED_MODULE_3__.Icon, {\n                            icon: \"redo\",\n                            onTouchStart: async ()=>{\n                                setIsRegenerating(true);\n                                this.editor.setSelectedShapes(shape.props.selectedShapes);\n                                await (0,_lib_vibe3DCode__WEBPACK_IMPORTED_MODULE_1__.vibe3DCode)(this.editor, shape.id);\n                                setIsRegenerating(false);\n                                // Exit editing mode after regenerating the 3D preview\n                                this.editor.selectNone();\n                            },\n                            onClick: async ()=>{\n                                setIsRegenerating(true);\n                                this.editor.setSelectedShapes(shape.props.selectedShapes);\n                                await (0,_lib_vibe3DCode__WEBPACK_IMPORTED_MODULE_1__.vibe3DCode)(this.editor, shape.id);\n                                setIsRegenerating(false);\n                                // Exit editing mode after regenerating the 3D preview\n                                this.editor.selectNone();\n                            },\n                            onPointerDown: (e)=>e.stopPropagation()\n                        }, void 0, false, {\n                            fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/PreviewShape/Model3DPreviewShape.tsx\",\n                            lineNumber: 520,\n                            columnNumber: 11\n                        }, this),\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_tldraw_tldraw__WEBPACK_IMPORTED_MODULE_3__.Icon, {\n                            icon: \"plus\",\n                            onTouchStart: async ()=>{\n                                if (shape.props.isGltf && shape.props.gltfUrl) {\n                                    // Handle GLTF model\n                                    if (activeTab !== \"threejs\") {\n                                        setActiveTab(\"threejs\");\n                                        // Wait for tab switch to complete before adding object\n                                        setTimeout(()=>{\n                                            const result = addObjectWithGltf(shape.props.gltfUrl);\n                                            if (!result) {\n                                                toast.addToast({\n                                                    icon: \"warning-triangle\",\n                                                    title: \"Failed to add 3D model.\"\n                                                });\n                                            }\n                                        }, 100); // Short delay to ensure tab context is ready\n                                    } else {\n                                        // Already on threejs tab, add object directly\n                                        const result = addObjectWithGltf(shape.props.gltfUrl);\n                                        if (!result) {\n                                            toast.addToast({\n                                                icon: \"warning-triangle\",\n                                                title: \"Failed to add 3D model.\"\n                                            });\n                                        }\n                                    }\n                                } else if (shape.props.threeJsCode) {\n                                    // Handle ThreeJS code\n                                    const res = await fetch(\"http://localhost:8000/api/groq/parse\", {\n                                        method: \"POST\",\n                                        body: shape.props.threeJsCode\n                                    });\n                                    const actualCode = await res.json();\n                                    console.log(actualCode);\n                                    const objectCode = actualCode.content;\n                                    if (activeTab !== \"threejs\") {\n                                        setActiveTab(\"threejs\");\n                                        // Wait for tab switch to complete before adding object\n                                        setTimeout(()=>{\n                                            const result = addObjectFromCode(objectCode);\n                                            if (!result) {\n                                                toast.addToast({\n                                                    icon: \"warning-triangle\",\n                                                    title: \"Failed to add object.\"\n                                                });\n                                            }\n                                        }, 100); // Short delay to ensure tab context is ready\n                                    } else {\n                                        // Already on threejs tab, add object directly\n                                        const result = addObjectFromCode(objectCode);\n                                        if (!result) {\n                                            toast.addToast({\n                                                icon: \"warning-triangle\",\n                                                title: \"Failed to add object.\"\n                                            });\n                                        }\n                                    }\n                                }\n                            },\n                            onClick: async ()=>{\n                                if (shape.props.isGltf && shape.props.gltfUrl) {\n                                    // Handle GLTF model\n                                    if (activeTab !== \"threejs\") {\n                                        setActiveTab(\"threejs\");\n                                        // Wait for tab switch to complete before adding object\n                                        setTimeout(()=>{\n                                            const result = addObjectWithGltf(shape.props.gltfUrl);\n                                            if (!result) {\n                                                toast.addToast({\n                                                    icon: \"warning-triangle\",\n                                                    title: \"Failed to add 3D model.\"\n                                                });\n                                            }\n                                        }, 100); // Short delay to ensure tab context is ready\n                                    } else {\n                                        // Already on threejs tab, add object directly\n                                        const result = addObjectWithGltf(shape.props.gltfUrl);\n                                        if (!result) {\n                                            toast.addToast({\n                                                icon: \"warning-triangle\",\n                                                title: \"Failed to add 3D model.\"\n                                            });\n                                        }\n                                    }\n                                } else if (shape.props.threeJsCode) {\n                                    // Handle ThreeJS code\n                                    const res = await fetch(\"http://localhost:8000/api/groq/parse\", {\n                                        method: \"POST\",\n                                        body: shape.props.threeJsCode\n                                    });\n                                    const actualCode = await res.json();\n                                    console.log(actualCode);\n                                    const objectCode = actualCode.content;\n                                    if (activeTab !== \"threejs\") {\n                                        setActiveTab(\"threejs\");\n                                        // Wait for tab switch to complete before adding object\n                                        setTimeout(()=>{\n                                            const result = addObjectFromCode(objectCode);\n                                            if (!result) {\n                                                toast.addToast({\n                                                    icon: \"warning-triangle\",\n                                                    title: \"Failed to add object.\"\n                                                });\n                                            }\n                                        }, 100); // Short delay to ensure tab context is ready\n                                    } else {\n                                        // Already on threejs tab, add object directly\n                                        const result = addObjectFromCode(objectCode);\n                                        if (!result) {\n                                            toast.addToast({\n                                                icon: \"warning-triangle\",\n                                                title: \"Failed to add object.\"\n                                            });\n                                        }\n                                    }\n                                }\n                            },\n                            onPointerDown: (e)=>e.stopPropagation()\n                        }, void 0, false, {\n                            fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/PreviewShape/Model3DPreviewShape.tsx\",\n                            lineNumber: 540,\n                            columnNumber: 12\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/PreviewShape/Model3DPreviewShape.tsx\",\n                    lineNumber: 480,\n                    columnNumber: 9\n                }, this),\n                htmlToUse && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    style: {\n                        textAlign: \"center\",\n                        position: \"absolute\",\n                        bottom: isEditing ? -40 : 0,\n                        padding: 4,\n                        fontFamily: \"inherit\",\n                        fontSize: 12,\n                        left: 0,\n                        width: \"100%\",\n                        display: \"flex\",\n                        alignItems: \"center\",\n                        justifyContent: \"center\",\n                        pointerEvents: \"none\"\n                    },\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                        style: {\n                            background: \"var(--color-panel)\",\n                            padding: \"4px 12px\",\n                            borderRadius: 99,\n                            border: \"1px solid var(--color-muted-1)\"\n                        },\n                        children: isEditing ? \"Click the canvas to exit\" : \"Double click to interact with 3D model\"\n                    }, void 0, false, {\n                        fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/PreviewShape/Model3DPreviewShape.tsx\",\n                        lineNumber: 680,\n                        columnNumber: 13\n                    }, this)\n                }, void 0, false, {\n                    fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/PreviewShape/Model3DPreviewShape.tsx\",\n                    lineNumber: 664,\n                    columnNumber: 11\n                }, this)\n            ]\n        }, void 0, true, {\n            fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/PreviewShape/Model3DPreviewShape.tsx\",\n            lineNumber: 424,\n            columnNumber: 7\n        }, this);\n    }\n    toSvg(shape, _ctx) {\n        const g = document.createElementNS(\"http://www.w3.org/2000/svg\", \"g\");\n        return new Promise((resolve, _)=>{\n            if (window === undefined) return resolve(g);\n            const windowListener = (event)=>{\n                if (event.data.screenshot && event.data?.shapeid === shape.id) {\n                    const image = document.createElementNS(\"http://www.w3.org/2000/svg\", \"image\");\n                    image.setAttributeNS(\"http://www.w3.org/1999/xlink\", \"href\", event.data.screenshot);\n                    image.setAttribute(\"width\", shape.props.w.toString());\n                    image.setAttribute(\"height\", shape.props.h.toString());\n                    g.appendChild(image);\n                    window.removeEventListener(\"message\", windowListener);\n                    clearTimeout(timeOut);\n                    resolve(g);\n                }\n            };\n            const timeOut = setTimeout(()=>{\n                resolve(g);\n                window.removeEventListener(\"message\", windowListener);\n            }, 2000);\n            window.addEventListener(\"message\", windowListener);\n            // Request a screenshot from the iframe\n            const firstLevelIframe = document.getElementById(`iframe-1-${shape.id}`);\n            if (firstLevelIframe) {\n                firstLevelIframe.contentWindow.postMessage({\n                    action: \"take-screenshot\",\n                    shapeid: shape.id\n                }, \"*\");\n            } else {\n                console.log(\"first level iframe not found or not accessible\");\n            }\n        });\n    }\n    indicator(shape) {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"rect\", {\n            width: shape.props.w,\n            height: shape.props.h\n        }, void 0, false, {\n            fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/PreviewShape/Model3DPreviewShape.tsx\",\n            lineNumber: 739,\n            columnNumber: 12\n        }, this);\n    }\n    constructor(...args){\n        super(...args);\n        this.canEdit = ()=>true;\n        this.isAspectRatioLocked = ()=>false;\n        this.canResize = ()=>true;\n        this.canBind = ()=>false;\n        this.canUnmount = ()=>false;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9hcHAvUHJldmlld1NoYXBlL01vZGVsM0RQcmV2aWV3U2hhcGUudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQUEsNkNBQTZDO0FBQ0E7QUFDaUI7QUFZdkM7QUFDb0I7QUFlcEMsTUFBTVksZ0NBQWdDVCw0REFBZ0JBOzthQUMzQ1UsT0FBTzs7SUFFdkJDLGtCQUFnRDtRQUM5QyxPQUFPO1lBQ0xDLGFBQWE7WUFDYkMsWUFBWTtZQUNaQyxTQUFTO1lBQ1RDLFFBQVE7WUFDUkMsR0FBRyxNQUFPLElBQUs7WUFDZkMsR0FBRyxNQUFPLElBQUs7WUFDZkMsZ0JBQWdCLEVBQUU7UUFDcEI7SUFDRjtJQVFTQyxVQUFVQyxLQUEwQixFQUFFO1FBQzdDLE1BQU1DLFlBQVloQiw0REFBWUEsQ0FBQ2UsTUFBTUUsRUFBRTtRQUN2QyxNQUFNQyxRQUFRakIseURBQVNBO1FBQ3ZCLE1BQU0sRUFBRWtCLGlCQUFpQixFQUFFQyxpQkFBaUIsRUFBRSxHQUFHM0IsK0RBQWNBO1FBQy9ELE1BQU0sRUFBRTRCLFNBQVMsRUFBRUMsWUFBWSxFQUFFLEdBQUc1Qiw0REFBV0E7UUFDL0MsTUFBTSxDQUFDNkIsZ0JBQWdCQyxrQkFBa0IsR0FBR3RCLCtDQUFRQSxDQUFDO1FBQ3JELE1BQU0sQ0FBQ3VCLGdCQUFnQkMsa0JBQWtCLEdBQUd4QiwrQ0FBUUEsQ0FBQztRQUVyRCxnREFBZ0Q7UUFDaERDLGdEQUFTQSxDQUFDO1lBQ1IsTUFBTXdCLDJCQUEyQixDQUFDQztnQkFDaEMsTUFBTUMsY0FBY0Q7Z0JBQ3BCLElBQUlDLFlBQVlDLE1BQU0sSUFBSUQsWUFBWUMsTUFBTSxDQUFDQyxTQUFTLEtBQUtoQixNQUFNRSxFQUFFLEVBQUU7b0JBQ25FUyxrQkFBa0JHLFlBQVlDLE1BQU0sQ0FBQ2QsU0FBUztnQkFDaEQ7WUFDRjtZQUVBZ0IsT0FBT0MsZ0JBQWdCLENBQUMsZ0NBQWdDTjtZQUV4RCxPQUFPO2dCQUNMSyxPQUFPRSxtQkFBbUIsQ0FBQyxnQ0FBZ0NQO1lBQzdE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ZCxFQUFFZSxXQUFXLENBQUNKO29CQUNkaEYsT0FBT0UsbUJBQW1CLENBQUMsV0FBVzBFO29CQUN0Q1MsYUFBYUM7b0JBQ2JiLFFBQVFKO2dCQUNWO1lBQ0Y7WUFFQSxNQUFNaUIsVUFBVWhGLFdBQVc7Z0JBQ3pCbUUsUUFBUUo7Z0JBQ1JyRSxPQUFPRSxtQkFBbUIsQ0FBQyxXQUFXMEU7WUFDeEMsR0FBRztZQUVINUUsT0FBT0MsZ0JBQWdCLENBQUMsV0FBVzJFO1lBRW5DLHVDQUF1QztZQUN2QyxNQUFNVyxtQkFBbUJqQixTQUFTa0IsY0FBYyxDQUFDLENBQUMsU0FBUyxFQUFFekcsTUFBTUUsRUFBRSxDQUFDLENBQUM7WUFDdkUsSUFBSXNHLGtCQUFrQjtnQkFDcEJBLGlCQUFpQkUsYUFBYSxDQUFFQyxXQUFXLENBQ3pDO29CQUFFQyxRQUFRO29CQUFtQlosU0FBU2hHLE1BQU1FLEVBQUU7Z0JBQUMsR0FDL0M7WUFFSixPQUFPO2dCQUNMeUUsUUFBUUMsR0FBRyxDQUFDO1lBQ2Q7UUFDRjtJQUNGO0lBRUFpQyxVQUFVN0csS0FBMEIsRUFBRTtRQUNwQyxxQkFBTyw4REFBQzhHO1lBQUtqRixPQUFPN0IsTUFBTXlCLEtBQUssQ0FBQzdCLENBQUM7WUFBRWtDLFFBQVE5QixNQUFNeUIsS0FBSyxDQUFDNUIsQ0FBQzs7Ozs7O0lBQzFEOzs7YUF0ckJTa0gsVUFBVSxJQUFNO2FBQ2hCQyxzQkFBc0IsSUFBTTthQUM1QkMsWUFBWSxJQUFNO2FBQ2xCQyxVQUFVLElBQU07YUFDaEJDLGFBQWEsSUFBTTs7QUFtckI5QiIsInNvdXJjZXMiOlsid2VicGFjazovL3ZpYmUtM2QtY29kZS8uL2FwcC9QcmV2aWV3U2hhcGUvTW9kZWwzRFByZXZpZXdTaGFwZS50c3g/OWU5ZSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiBlc2xpbnQtZGlzYWJsZSByZWFjdC1ob29rcy9ydWxlcy1vZi1ob29rcyAqL1xuaW1wb3J0IHsgdmliZTNEQ29kZSB9IGZyb20gJ0AvbGliL3ZpYmUzRENvZGUnXG5pbXBvcnQgeyB1c2VPYmplY3RTdG9yZSwgdXNlVGFiU3RvcmUgfSBmcm9tICdAL3N0b3JlL2FwcFN0b3JlJ1xuaW1wb3J0IHtcbiAgQmFzZUJveFNoYXBlVXRpbCxcbiAgRGVmYXVsdFNwaW5uZXIsXG4gIEhUTUxDb250YWluZXIsXG4gIEljb24sXG4gIFN2Z0V4cG9ydENvbnRleHQsXG4gIFRMQmFzZVNoYXBlLFxuICBUTFNoYXBlLFxuICB0b0RvbVByZWNpc2lvbixcbiAgdXNlSXNFZGl0aW5nLFxuICB1c2VUb2FzdHMsXG59IGZyb20gJ0B0bGRyYXcvdGxkcmF3J1xuaW1wb3J0IHsgdXNlU3RhdGUsIHVzZUVmZmVjdCB9IGZyb20gJ3JlYWN0J1xuXG5leHBvcnQgdHlwZSBNb2RlbDNEUHJldmlld1NoYXBlID0gVExCYXNlU2hhcGU8XG4gICdtb2RlbDNkJyxcbiAge1xuICAgIHRocmVlSnNDb2RlOiBzdHJpbmdcbiAgICBvYmplY3RDb2RlOiBzdHJpbmdcbiAgICBnbHRmVXJsOiBzdHJpbmdcbiAgICBpc0dsdGY6IGJvb2xlYW5cbiAgICB3OiBudW1iZXJcbiAgICBoOiBudW1iZXJcbiAgICBzZWxlY3RlZFNoYXBlczogVExTaGFwZVtdXG4gIH1cbj5cblxuZXhwb3J0IGNsYXNzIE1vZGVsM0RQcmV2aWV3U2hhcGVVdGlsIGV4dGVuZHMgQmFzZUJveFNoYXBlVXRpbDxNb2RlbDNEUHJldmlld1NoYXBlPiB7XG4gIHN0YXRpYyBvdmVycmlkZSB0eXBlID0gJ21vZGVsM2QnIGFzIGNvbnN0XG5cbiAgZ2V0RGVmYXVsdFByb3BzKCk6IE1vZGVsM0RQcmV2aWV3U2hhcGVbJ3Byb3BzJ10ge1xuICAgIHJldHVybiB7XG4gICAgICB0aHJlZUpzQ29kZTogJycsXG4gICAgICBvYmplY3RDb2RlOiAnJyxcbiAgICAgIGdsdGZVcmw6ICcnLFxuICAgICAgaXNHbHRmOiBmYWxzZSxcbiAgICAgIHc6ICg5NjAgKiAyKSAvIDMsXG4gICAgICBoOiAoNTQwICogMikgLyAzLFxuICAgICAgc2VsZWN0ZWRTaGFwZXM6IFtdLFxuICAgIH1cbiAgfVxuXG4gIG92ZXJyaWRlIGNhbkVkaXQgPSAoKSA9PiB0cnVlXG4gIG92ZXJyaWRlIGlzQXNwZWN0UmF0aW9Mb2NrZWQgPSAoKSA9PiBmYWxzZVxuICBvdmVycmlkZSBjYW5SZXNpemUgPSAoKSA9PiB0cnVlXG4gIG92ZXJyaWRlIGNhbkJpbmQgPSAoKSA9PiBmYWxzZVxuICBvdmVycmlkZSBjYW5Vbm1vdW50ID0gKCkgPT4gZmFsc2VcblxuICBvdmVycmlkZSBjb21wb25lbnQoc2hhcGU6IE1vZGVsM0RQcmV2aWV3U2hhcGUpIHtcbiAgICBjb25zdCBpc0VkaXRpbmcgPSB1c2VJc0VkaXRpbmcoc2hhcGUuaWQpXG4gICAgY29uc3QgdG9hc3QgPSB1c2VUb2FzdHMoKVxuICAgIGNvbnN0IHsgYWRkT2JqZWN0RnJvbUNvZGUsIGFkZE9iamVjdFdpdGhHbHRmIH0gPSB1c2VPYmplY3RTdG9yZSgpXG4gICAgY29uc3QgeyBhY3RpdmVUYWIsIHNldEFjdGl2ZVRhYiB9ID0gdXNlVGFiU3RvcmUoKVxuICAgIGNvbnN0IFtpc1JlZ2VuZXJhdGluZywgc2V0SXNSZWdlbmVyYXRpbmddID0gdXNlU3RhdGUoZmFsc2UpXG4gICAgY29uc3QgW2lzRWRpdGluZ01vZGVsLCBzZXRJc0VkaXRpbmdNb2RlbF0gPSB1c2VTdGF0ZShmYWxzZSlcblxuICAgIC8vIExpc3RlbiBmb3IgY3VzdG9tIGVkaXRpbmcgc3RhdGUgY2hhbmdlIGV2ZW50c1xuICAgIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgICBjb25zdCBoYW5kbGVFZGl0aW5nU3RhdGVDaGFuZ2UgPSAoZXZlbnQ6IEV2ZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IGN1c3RvbUV2ZW50ID0gZXZlbnQgYXMgQ3VzdG9tRXZlbnQ7XG4gICAgICAgIGlmIChjdXN0b21FdmVudC5kZXRhaWwgJiYgY3VzdG9tRXZlbnQuZGV0YWlsLmVsZW1lbnRJZCA9PT0gc2hhcGUuaWQpIHtcbiAgICAgICAgICBzZXRJc0VkaXRpbmdNb2RlbChjdXN0b21FdmVudC5kZXRhaWwuaXNFZGl0aW5nKTtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21vZGVsM2QtZWRpdGluZy1zdGF0ZS1jaGFuZ2UnLCBoYW5kbGVFZGl0aW5nU3RhdGVDaGFuZ2UpO1xuXG4gICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW9kZWwzZC1lZGl0aW5nLXN0YXRlLWNoYW5nZScsIGhhbmRsZUVkaXRpbmdTdGF0ZUNoYW5nZSk7XG4gICAgICB9O1xuICAgIH0sIFtzaGFwZS5pZF0pO1xuXG4gICAgLy8gTGlzdGVuIGZvciBhZGQtZ2x0Zi1vYmplY3QgZXZlbnRzXG4gICAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAgIGNvbnN0IGhhbmRsZUFkZEdsdGZPYmplY3QgPSAoZXZlbnQ6IEV2ZW50KSA9PiB7XG4gICAgICAgIGNvbnN0IGN1c3RvbUV2ZW50ID0gZXZlbnQgYXMgQ3VzdG9tRXZlbnQ7XG4gICAgICAgIGlmIChjdXN0b21FdmVudC5kZXRhaWwgJiYgY3VzdG9tRXZlbnQuZGV0YWlsLnVybCkge1xuICAgICAgICAgIC8vIENoZWNrIGlmIHRoaXMgZXZlbnQgaXMgZm9yIHRoaXMgc3BlY2lmaWMgc2hhcGVcbiAgICAgICAgICBpZiAoY3VzdG9tRXZlbnQuZGV0YWlsLnNoYXBlSWQgJiYgY3VzdG9tRXZlbnQuZGV0YWlsLnNoYXBlSWQgIT09IHNoYXBlLmlkKSB7XG4gICAgICAgICAgICByZXR1cm47IC8vIFNraXAgaWYgdGhpcyBldmVudCBpcyBmb3IgYSBkaWZmZXJlbnQgc2hhcGVcbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgaWYgKGFjdGl2ZVRhYiAhPT0gJ3RocmVlanMnKSB7XG4gICAgICAgICAgICBzZXRBY3RpdmVUYWIoJ3RocmVlanMnKTtcbiAgICAgICAgICAgIC8vIFdhaXQgZm9yIHRhYiBzd2l0Y2ggdG8gY29tcGxldGUgYmVmb3JlIGFkZGluZyBvYmplY3RcbiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgICBhZGRPYmplY3RXaXRoR2x0ZihjdXN0b21FdmVudC5kZXRhaWwudXJsKTtcbiAgICAgICAgICAgIH0sIDEwMCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIEFscmVhZHkgb24gdGhyZWVqcyB0YWIsIGFkZCBvYmplY3QgZGlyZWN0bHlcbiAgICAgICAgICAgIGFkZE9iamVjdFdpdGhHbHRmKGN1c3RvbUV2ZW50LmRldGFpbC51cmwpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2FkZC1nbHRmLW9iamVjdCcsIGhhbmRsZUFkZEdsdGZPYmplY3QpO1xuXG4gICAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignYWRkLWdsdGYtb2JqZWN0JywgaGFuZGxlQWRkR2x0Zk9iamVjdCk7XG4gICAgICB9O1xuICAgIH0sIFthY3RpdmVUYWIsIHNldEFjdGl2ZVRhYiwgYWRkT2JqZWN0V2l0aEdsdGYsIHNoYXBlLmlkXSk7XG5cbiAgICAvLyBQcmVwYXJlIHRoZSBIVE1MIHdpdGggdGhlIFRocmVlLmpzIGNvZGUgZW1iZWRkZWRcbiAgICBjb25zdCBodG1sVG9Vc2UgPSBzaGFwZS5wcm9wcy5pc0dsdGYgJiYgc2hhcGUucHJvcHMuZ2x0ZlVybCBcbiAgICAgID8gYDwhRE9DVFlQRSBodG1sPlxuPGh0bWw+XG48aGVhZD5cbiAgICA8bWV0YSBjaGFyc2V0PVwidXRmLThcIj5cbiAgICA8bWV0YSBuYW1lPVwidmlld3BvcnRcIiBjb250ZW50PVwid2lkdGg9ZGV2aWNlLXdpZHRoLCBpbml0aWFsLXNjYWxlPTEuMFwiPlxuICAgIDx0aXRsZT4zRCBNb2RlbCBQcmV2aWV3PC90aXRsZT5cbiAgICA8c3R5bGU+XG4gICAgICAgIGJvZHkgeyBcbiAgICAgICAgICAgIG1hcmdpbjogMDsgXG4gICAgICAgICAgICBwYWRkaW5nOiAwOyBcbiAgICAgICAgICAgIG92ZXJmbG93OiBoaWRkZW47IFxuICAgICAgICAgICAgd2lkdGg6IDEwMCU7IFxuICAgICAgICAgICAgaGVpZ2h0OiAxMDAlO1xuICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7XG4gICAgICAgIH1cbiAgICAgICAgY2FudmFzIHsgXG4gICAgICAgICAgICBkaXNwbGF5OiBibG9jazsgXG4gICAgICAgICAgICB3aWR0aDogMTAwJSAhaW1wb3J0YW50OyBcbiAgICAgICAgICAgIGhlaWdodDogMTAwJSAhaW1wb3J0YW50O1xuICAgICAgICB9XG4gICAgICAgIC8qIEhlbHAgdG9vbHRpcCAqL1xuICAgICAgICAuaGVscC10b29sdGlwIHtcbiAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgICAgIGJvdHRvbTogMTBweDtcbiAgICAgICAgICAgIGxlZnQ6IDEwcHg7XG4gICAgICAgICAgICBiYWNrZ3JvdW5kOiByZ2JhKDAsMCwwLDAuNyk7XG4gICAgICAgICAgICBjb2xvcjogd2hpdGU7XG4gICAgICAgICAgICBwYWRkaW5nOiA4cHggMTJweDtcbiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgICAgICAgIGZvbnQtZmFtaWx5OiBzYW5zLXNlcmlmO1xuICAgICAgICAgICAgZm9udC1zaXplOiAxMnB4O1xuICAgICAgICAgICAgb3BhY2l0eTogMC43O1xuICAgICAgICAgICAgcG9pbnRlci1ldmVudHM6IG5vbmU7XG4gICAgICAgIH1cbiAgICA8L3N0eWxlPlxuPC9oZWFkPlxuPGJvZHk+XG4gICAgPGRpdiBjbGFzcz1cImhlbHAtdG9vbHRpcFwiPlxuICAgICAgICA8cD5MZWZ0LWNsaWNrICsgZHJhZzogUm90YXRlPC9wPlxuICAgICAgICA8cD5SaWdodC1jbGljayArIGRyYWc6IFBhbjwvcD5cbiAgICAgICAgPHA+U2Nyb2xsOiBab29tPC9wPlxuICAgIDwvZGl2PlxuICAgIDxzY3JpcHQgdHlwZT1cIm1vZHVsZVwiPlxuICAgIGltcG9ydCAqIGFzIFRIUkVFIGZyb20gXCJodHRwczovL2VzbS5zaC90aHJlZVwiO1xuICAgIGltcG9ydCB7IE9yYml0Q29udHJvbHMgfSBmcm9tIFwiaHR0cHM6Ly9lc20uc2gvdGhyZWUvZXhhbXBsZXMvanNtL2NvbnRyb2xzL09yYml0Q29udHJvbHMuanNcIjtcbiAgICBpbXBvcnQgeyBHTFRGTG9hZGVyIH0gZnJvbSBcImh0dHBzOi8vZXNtLnNoL3RocmVlL2V4YW1wbGVzL2pzbS9sb2FkZXJzL0dMVEZMb2FkZXIuanNcIjtcbiAgICBcbiAgICAvLyBTZXQgdXAgc2NlbmVcbiAgICBjb25zdCBzY2VuZSA9IG5ldyBUSFJFRS5TY2VuZSgpO1xuICAgIHNjZW5lLmJhY2tncm91bmQgPSBuZXcgVEhSRUUuQ29sb3IoMHhmMGYwZjApO1xuICAgIFxuICAgIC8vIFNldCB1cCBjYW1lcmFcbiAgICBjb25zdCBjYW1lcmEgPSBuZXcgVEhSRUUuUGVyc3BlY3RpdmVDYW1lcmEoNzUsIHdpbmRvdy5pbm5lcldpZHRoIC8gd2luZG93LmlubmVySGVpZ2h0LCAwLjEsIDEwMDApO1xuICAgIGNhbWVyYS5wb3NpdGlvbi5zZXQoMCwgMCwgNSk7XG4gICAgXG4gICAgLy8gU2V0IHVwIHJlbmRlcmVyXG4gICAgY29uc3QgcmVuZGVyZXIgPSBuZXcgVEhSRUUuV2ViR0xSZW5kZXJlcih7IGFudGlhbGlhczogdHJ1ZSB9KTtcbiAgICByZW5kZXJlci5zZXRTaXplKHdpbmRvdy5pbm5lcldpZHRoLCB3aW5kb3cuaW5uZXJIZWlnaHQpO1xuICAgIHJlbmRlcmVyLnNldFBpeGVsUmF0aW8od2luZG93LmRldmljZVBpeGVsUmF0aW8pO1xuICAgIHJlbmRlcmVyLnNoYWRvd01hcC5lbmFibGVkID0gdHJ1ZTtcbiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHJlbmRlcmVyLmRvbUVsZW1lbnQpO1xuICAgIFxuICAgIC8vIENvbnRyb2xzXG4gICAgY29uc3QgY29udHJvbHMgPSBuZXcgT3JiaXRDb250cm9scyhjYW1lcmEsIHJlbmRlcmVyLmRvbUVsZW1lbnQpO1xuICAgIGNvbnRyb2xzLmVuYWJsZURhbXBpbmcgPSB0cnVlO1xuICAgIFxuICAgIC8vIEVuaGFuY2VkIGxpZ2h0aW5nIHNldHVwXG4gICAgLy8gQW1iaWVudCBsaWdodCBmb3IgZ2xvYmFsIGlsbHVtaW5hdGlvblxuICAgIGNvbnN0IGFtYmllbnRMaWdodCA9IG5ldyBUSFJFRS5BbWJpZW50TGlnaHQoMHhmZmZmZmYsIDAuNik7XG4gICAgc2NlbmUuYWRkKGFtYmllbnRMaWdodCk7XG4gICAgXG4gICAgLy8gTWFpbiBkaXJlY3Rpb25hbCBsaWdodCAoc3VuLWxpa2UpXG4gICAgY29uc3QgbWFpbkxpZ2h0ID0gbmV3IFRIUkVFLkRpcmVjdGlvbmFsTGlnaHQoMHhmZmZmZmYsIDEuMik7XG4gICAgbWFpbkxpZ2h0LnBvc2l0aW9uLnNldCgxMCwgMTAsIDEwKTtcbiAgICAvLyBtYWluTGlnaHQuY2FzdFNoYWRvdyA9IHRydWU7XG4gICAgLy8gSW1wcm92ZSBzaGFkb3cgcXVhbGl0eVxuICAgIG1haW5MaWdodC5zaGFkb3cubWFwU2l6ZS53aWR0aCA9IDIwNDg7XG4gICAgbWFpbkxpZ2h0LnNoYWRvdy5tYXBTaXplLmhlaWdodCA9IDIwNDg7XG4gICAgbWFpbkxpZ2h0LnNoYWRvdy5jYW1lcmEubmVhciA9IDAuNTtcbiAgICBtYWluTGlnaHQuc2hhZG93LmNhbWVyYS5mYXIgPSA1MDtcbiAgICBtYWluTGlnaHQuc2hhZG93LmJpYXMgPSAtMC4wMDAxO1xuICAgIHNjZW5lLmFkZChtYWluTGlnaHQpO1xuICAgIFxuICAgIC8vIFNlY29uZGFyeSBmaWxsIGxpZ2h0IGZyb20gdGhlIG9wcG9zaXRlIHNpZGVcbiAgICBjb25zdCBmaWxsTGlnaHQgPSBuZXcgVEhSRUUuRGlyZWN0aW9uYWxMaWdodCgweGZmZmZlZSwgMC44KTtcbiAgICBmaWxsTGlnaHQucG9zaXRpb24uc2V0KC0xMCwgNSwgLTEwKTtcbiAgICBzY2VuZS5hZGQoZmlsbExpZ2h0KTtcbiAgICBcbiAgICAvLyBSaW0gbGlnaHQgdG8gaGlnaGxpZ2h0IGVkZ2VzXG4gICAgY29uc3QgcmltTGlnaHQgPSBuZXcgVEhSRUUuRGlyZWN0aW9uYWxMaWdodCgweGVlZWVmZiwgMC42KTtcbiAgICByaW1MaWdodC5wb3NpdGlvbi5zZXQoMCwgLTEwLCAtMTUpO1xuICAgIHNjZW5lLmFkZChyaW1MaWdodCk7XG4gICAgXG4gICAgLy8gU29mdCBsaWdodCBmcm9tIGJlbG93IGZvciBiZXR0ZXIgZGltZW5zaW9uXG4gICAgY29uc3QgYm90dG9tTGlnaHQgPSBuZXcgVEhSRUUuRGlyZWN0aW9uYWxMaWdodCgweGVlZWVmZiwgMC40KTtcbiAgICBib3R0b21MaWdodC5wb3NpdGlvbi5zZXQoMCwgLTEwLCAwKTtcbiAgICBzY2VuZS5hZGQoYm90dG9tTGlnaHQpO1xuICAgIFxuICAgIC8vIEFkZCBoZW1pc3BoZXJlIGxpZ2h0IGZvciBtb3JlIG5hdHVyYWwgb3V0ZG9vci1saWtlIGxpZ2h0aW5nXG4gICAgY29uc3QgaGVtaUxpZ2h0ID0gbmV3IFRIUkVFLkhlbWlzcGhlcmVMaWdodCgweGZmZmZmZiwgMHg0NDQ0NDQsIDAuNyk7XG4gICAgaGVtaUxpZ2h0LnBvc2l0aW9uLnNldCgwLCAyMCwgMCk7XG4gICAgc2NlbmUuYWRkKGhlbWlMaWdodCk7XG4gICAgXG4gICAgLy8gRW52aXJvbm1lbnQgbGlnaHRpbmcgZm9yIHJlZmxlY3Rpb25zIChpZiBtb2RlbCBoYXMgcmVmbGVjdGl2ZSBtYXRlcmlhbHMpXG4gICAgcmVuZGVyZXIub3V0cHV0RW5jb2RpbmcgPSBUSFJFRS5zUkdCRW5jb2Rpbmc7XG4gICAgcmVuZGVyZXIudG9uZU1hcHBpbmcgPSBUSFJFRS5BQ0VTRmlsbWljVG9uZU1hcHBpbmc7XG4gICAgcmVuZGVyZXIudG9uZU1hcHBpbmdFeHBvc3VyZSA9IDEuMjtcbiAgICBcbiAgICAvLyBBZGQgYSBjaXJjdWxhciBncm91bmQgcGxhdGVcbiAgICBjb25zdCBncm91bmRSYWRpdXMgPSAxMDtcbiAgICBjb25zdCBncm91bmRHZW9tZXRyeSA9IG5ldyBUSFJFRS5DaXJjbGVHZW9tZXRyeShncm91bmRSYWRpdXMsIDcyKTtcbiAgICAvLyBSb3RhdGUgdGhlIGdyb3VuZCBwbGF0ZSB0byBiZSBob3Jpem9udGFsIChpdCdzIHZlcnRpY2FsIGJ5IGRlZmF1bHQpXG4gICAgZ3JvdW5kR2VvbWV0cnkucm90YXRlWCgtTWF0aC5QSSAvIDIpO1xuICAgIFxuICAgIC8vIENyZWF0ZSBhIG5pY2UgbWF0ZXJpYWwgZm9yIHRoZSBncm91bmRcbiAgICBjb25zdCBncm91bmRNYXRlcmlhbCA9IG5ldyBUSFJFRS5NZXNoU3RhbmRhcmRNYXRlcmlhbCh7XG4gICAgICBjb2xvcjogMHg4ODg4ODgsXG4gICAgICByb3VnaG5lc3M6IDAuOCxcbiAgICAgIG1ldGFsbmVzczogMC4yLFxuICAgICAgc2lkZTogVEhSRUUuRG91YmxlU2lkZSxcbiAgICB9KTtcbiAgICBcbiAgICBjb25zdCBncm91bmRQbGF0ZSA9IG5ldyBUSFJFRS5NZXNoKGdyb3VuZEdlb21ldHJ5LCBncm91bmRNYXRlcmlhbCk7XG4gICAgZ3JvdW5kUGxhdGUucmVjZWl2ZVNoYWRvdyA9IHRydWU7XG4gICAgZ3JvdW5kUGxhdGUucG9zaXRpb24ueSA9IC0yOyAvLyBTbGlnaHRseSBiZWxvdyBvcmlnaW4gdG8gYXZvaWQgei1maWdodGluZ1xuICAgIHNjZW5lLmFkZChncm91bmRQbGF0ZSk7XG4gICAgXG4gICAgLy8gTG9hZCBHTFRGIG1vZGVsXG4gICAgY29uc3QgbG9hZGVyID0gbmV3IEdMVEZMb2FkZXIoKTtcbiAgICBsb2FkZXIubG9hZCgnJHtzaGFwZS5wcm9wcy5nbHRmVXJsfScsIChnbHRmKSA9PiB7XG4gICAgICBjb25zdCBtb2RlbCA9IGdsdGYuc2NlbmU7XG4gICAgICBcbiAgICAgIC8vIENlbnRlciBtb2RlbFxuICAgICAgY29uc3QgYm94ID0gbmV3IFRIUkVFLkJveDMoKS5zZXRGcm9tT2JqZWN0KG1vZGVsKTtcbiAgICAgIGNvbnN0IGNlbnRlciA9IGJveC5nZXRDZW50ZXIobmV3IFRIUkVFLlZlY3RvcjMoKSk7XG4gICAgICBjb25zdCBzaXplID0gYm94LmdldFNpemUobmV3IFRIUkVFLlZlY3RvcjMoKSk7XG4gICAgICBcbiAgICAgIC8vIFJlc2V0IG1vZGVsIHBvc2l0aW9uIHRvIGNlbnRlclxuICAgICAgbW9kZWwucG9zaXRpb24ueCA9IC1jZW50ZXIueDtcbiAgICAgIG1vZGVsLnBvc2l0aW9uLnkgPSAtY2VudGVyLnk7XG4gICAgICBtb2RlbC5wb3NpdGlvbi56ID0gLWNlbnRlci56O1xuICAgICAgXG4gICAgICAvLyBTY2FsZSBtb2RlbCB0byBmaXQgdmlld1xuICAgICAgY29uc3QgbWF4RGltID0gTWF0aC5tYXgoc2l6ZS54LCBzaXplLnksIHNpemUueik7XG4gICAgICBpZiAobWF4RGltID4gMCkge1xuICAgICAgICBjb25zdCBzY2FsZSA9IDMgLyBtYXhEaW07XG4gICAgICAgIG1vZGVsLnNjYWxlLnNldChzY2FsZSwgc2NhbGUsIHNjYWxlKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gQWRkIHNwb3RsaWdodCBkaXJlY3RseSBhaW1lZCBhdCB0aGUgbW9kZWwgZm9yIGJldHRlciB2aXNpYmlsaXR5XG4gICAgICBjb25zdCBzcG90TGlnaHQgPSBuZXcgVEhSRUUuU3BvdExpZ2h0KDB4ZmZmZmZmLCAxLjUpO1xuICAgICAgc3BvdExpZ2h0LnBvc2l0aW9uLnNldCgwLCAxMCwgMCk7XG4gICAgICBzcG90TGlnaHQuYW5nbGUgPSBNYXRoLlBJIC8gNDtcbiAgICAgIHNwb3RMaWdodC5wZW51bWJyYSA9IDAuMTtcbiAgICAgIHNwb3RMaWdodC5kZWNheSA9IDA7XG4gICAgICBzcG90TGlnaHQuZGlzdGFuY2UgPSA1MDtcbiAgICAgIHNwb3RMaWdodC5jYXN0U2hhZG93ID0gdHJ1ZTtcbiAgICAgIHNwb3RMaWdodC5zaGFkb3cuYmlhcyA9IC0wLjAwMDE7XG4gICAgICBzcG90TGlnaHQuc2hhZG93Lm1hcFNpemUud2lkdGggPSAxMDI0O1xuICAgICAgc3BvdExpZ2h0LnNoYWRvdy5tYXBTaXplLmhlaWdodCA9IDEwMjQ7XG4gICAgICBzY2VuZS5hZGQoc3BvdExpZ2h0KTtcbiAgICAgIFxuICAgICAgLy8gVGFyZ2V0IHRoZSBzcG90bGlnaHQgYXQgdGhlIG1vZGVsJ3MgY2VudGVyXG4gICAgICBzcG90TGlnaHQudGFyZ2V0ID0gbW9kZWw7XG4gICAgICBzY2VuZS5hZGQoc3BvdExpZ2h0LnRhcmdldCk7XG4gICAgICBcbiAgICAgIC8vIEVuaGFuY2UgbW9kZWwgbWF0ZXJpYWxzIGZvciBiZXR0ZXIgdmlzaWJpbGl0eVxuICAgICAgbW9kZWwudHJhdmVyc2UoKG5vZGUpID0+IHtcbiAgICAgICAgaWYgKG5vZGUgaW5zdGFuY2VvZiBUSFJFRS5NZXNoKSB7XG4gICAgICAgICAgaWYgKG5vZGUubWF0ZXJpYWwpIHtcbiAgICAgICAgICAgIC8vIEZvciBlYWNoIG1hdGVyaWFsIGluIHRoZSBtb2RlbCwgaW5jcmVhc2UgYnJpZ2h0bmVzc1xuICAgICAgICAgICAgY29uc3QgbW9kaWZ5TWF0ZXJpYWwgPSAobWF0ZXJpYWwpID0+IHtcbiAgICAgICAgICAgICAgLy8gSW5jcmVhc2UgdGhlIG92ZXJhbGwgYnJpZ2h0bmVzc1xuICAgICAgICAgICAgICBpZiAobWF0ZXJpYWwuY29sb3IpIHtcbiAgICAgICAgICAgICAgICAvLyBTdG9yZSBvcmlnaW5hbCBjb2xvciBmb3IgcmVmZXJlbmNlXG4gICAgICAgICAgICAgICAgaWYgKCFtYXRlcmlhbC51c2VyRGF0YSkgbWF0ZXJpYWwudXNlckRhdGEgPSB7fTtcbiAgICAgICAgICAgICAgICBtYXRlcmlhbC51c2VyRGF0YS5vcmlnaW5hbENvbG9yID0gbWF0ZXJpYWwuY29sb3IuY2xvbmUoKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBCcmlnaHRlbiB0aGUgY29sb3IgKG11bHRpcGx5IFJHQiB2YWx1ZXMgdG8gbWFrZSBpdCBicmlnaHRlcilcbiAgICAgICAgICAgICAgICBjb25zdCBicmlnaHRlbkZhY3RvciA9IDEwOyAgLy8gQWRqdXN0IGFzIG5lZWRlZFxuICAgICAgICAgICAgICAgIG1hdGVyaWFsLmNvbG9yLnIgPSBNYXRoLm1pbihtYXRlcmlhbC5jb2xvci5yICogYnJpZ2h0ZW5GYWN0b3IsIDEpO1xuICAgICAgICAgICAgICAgIG1hdGVyaWFsLmNvbG9yLmcgPSBNYXRoLm1pbihtYXRlcmlhbC5jb2xvci5nICogYnJpZ2h0ZW5GYWN0b3IsIDEpO1xuICAgICAgICAgICAgICAgIG1hdGVyaWFsLmNvbG9yLmIgPSBNYXRoLm1pbihtYXRlcmlhbC5jb2xvci5iICogYnJpZ2h0ZW5GYWN0b3IsIDEpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAvLyBBZGQgc2xpZ2h0IGVtaXNzaXZlIGdsb3cgdG8gbWFrZSBtb2RlbCBzdGFuZCBvdXRcbiAgICAgICAgICAgICAgaWYgKG1hdGVyaWFsLmVtaXNzaXZlKSB7XG4gICAgICAgICAgICAgICAgbWF0ZXJpYWwuZW1pc3NpdmVJbnRlbnNpdHkgPSAwLjQ7XG4gICAgICAgICAgICAgICAgbWF0ZXJpYWwuZW1pc3NpdmUgPSBuZXcgVEhSRUUuQ29sb3IoMHgzMzMzMzMpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAvLyBJbmNyZWFzZSBtYXRlcmlhbCBjb250cmFzdFxuICAgICAgICAgICAgICBpZiAobWF0ZXJpYWwucm91Z2huZXNzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBtYXRlcmlhbC5yb3VnaG5lc3MgPSBNYXRoLm1heChtYXRlcmlhbC5yb3VnaG5lc3MgKiAwLjgsIDAuMSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIC8vIEVuaGFuY2Ugc3BlY3VsYXJpdHkgZm9yIG1vcmUgdmlzdWFsIHBvcFxuICAgICAgICAgICAgICBpZiAobWF0ZXJpYWwubWV0YWxuZXNzICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBtYXRlcmlhbC5tZXRhbG5lc3MgPSBNYXRoLm1pbihtYXRlcmlhbC5tZXRhbG5lc3MgKyAwLjEsIDEuMCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIEFwcGx5IHRvIGluZGl2aWR1YWwgbWF0ZXJpYWwgb3IgbWF0ZXJpYWwgYXJyYXlcbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KG5vZGUubWF0ZXJpYWwpKSB7XG4gICAgICAgICAgICAgIG5vZGUubWF0ZXJpYWwuZm9yRWFjaChtb2RpZnlNYXRlcmlhbCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBtb2RpZnlNYXRlcmlhbChub2RlLm1hdGVyaWFsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBzY2VuZS5hZGQobW9kZWwpO1xuICAgICAgXG4gICAgICAvLyBBZGQgYSBzdWJ0bGUgb3V0bGluZSBlZmZlY3QgdG8gbWFrZSB0aGUgbW9kZWwgc3RhbmQgb3V0XG4gICAgICBjb25zdCBlZGdlR2xvdyA9IG5ldyBUSFJFRS5Hcm91cCgpO1xuICAgICAgY29uc3QgZWRnZUxpZ2h0MSA9IG5ldyBUSFJFRS5Qb2ludExpZ2h0KDB4ZmZmZmNjLCAwLjYsIDEwKTtcbiAgICAgIGVkZ2VMaWdodDEucG9zaXRpb24uc2V0KDIsIDIsIDIpO1xuICAgICAgY29uc3QgZWRnZUxpZ2h0MiA9IG5ldyBUSFJFRS5Qb2ludExpZ2h0KDB4Y2NmZmZmLCAwLjYsIDEwKTtcbiAgICAgIGVkZ2VMaWdodDIucG9zaXRpb24uc2V0KC0yLCAxLCAtMik7XG4gICAgICBlZGdlR2xvdy5hZGQoZWRnZUxpZ2h0MSwgZWRnZUxpZ2h0Mik7XG4gICAgICBzY2VuZS5hZGQoZWRnZUdsb3cpO1xuICAgIH0sIFxuICAgIC8vIFByb2dyZXNzIGNhbGxiYWNrXG4gICAgKHhocikgPT4ge1xuICAgICAgY29uc29sZS5sb2coKHhoci5sb2FkZWQgLyB4aHIudG90YWwgKiAxMDApICsgJyUgbG9hZGVkJyk7XG4gICAgfSxcbiAgICAvLyBFcnJvciBjYWxsYmFja1xuICAgIChlcnJvcikgPT4ge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgbG9hZGluZyBHTFRGIG1vZGVsOicsIGVycm9yKTtcbiAgICB9KTtcbiAgICBcbiAgICAvLyBIYW5kbGUgd2luZG93IHJlc2l6ZVxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCAoKSA9PiB7XG4gICAgICBjYW1lcmEuYXNwZWN0ID0gd2luZG93LmlubmVyV2lkdGggLyB3aW5kb3cuaW5uZXJIZWlnaHQ7XG4gICAgICBjYW1lcmEudXBkYXRlUHJvamVjdGlvbk1hdHJpeCgpO1xuICAgICAgcmVuZGVyZXIuc2V0U2l6ZSh3aW5kb3cuaW5uZXJXaWR0aCwgd2luZG93LmlubmVySGVpZ2h0KTtcbiAgICB9KTtcbiAgICBcbiAgICAvLyBBbmltYXRpb24gbG9vcFxuICAgIGZ1bmN0aW9uIGFuaW1hdGUoKSB7XG4gICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoYW5pbWF0ZSk7XG4gICAgICBjb250cm9scy51cGRhdGUoKTtcbiAgICAgIHJlbmRlcmVyLnJlbmRlcihzY2VuZSwgY2FtZXJhKTtcbiAgICB9XG4gICAgXG4gICAgYW5pbWF0ZSgpO1xuICAgIFxuICAgIC8vIFByZXZlbnQgem9vbWluZyBpc3N1ZXNcbiAgICBkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoJ3doZWVsJywgZSA9PiB7IFxuICAgICAgICBpZiAoIWUuY3RybEtleSkgcmV0dXJuOyBcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOyBcbiAgICAgICAgcmV0dXJuIFxuICAgIH0sIHsgcGFzc2l2ZTogZmFsc2UgfSk7XG4gICAgPC9zY3JpcHQ+XG48L2JvZHk+XG48L2h0bWw+YFxuICAgICAgOiBzaGFwZS5wcm9wcy50aHJlZUpzQ29kZVxuICAgICAgICA/IGA8IURPQ1RZUEUgaHRtbD5cbjxodG1sPlxuPGhlYWQ+XG4gICAgPG1ldGEgY2hhcnNldD1cInV0Zi04XCI+XG4gICAgPG1ldGEgbmFtZT1cInZpZXdwb3J0XCIgY29udGVudD1cIndpZHRoPWRldmljZS13aWR0aCwgaW5pdGlhbC1zY2FsZT0xLjBcIj5cbiAgICA8dGl0bGU+M0QgTW9kZWwgUHJldmlldzwvdGl0bGU+XG4gICAgPHN0eWxlPlxuICAgICAgICBib2R5IHsgXG4gICAgICAgICAgICBtYXJnaW46IDA7IFxuICAgICAgICAgICAgcGFkZGluZzogMDsgXG4gICAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuOyBcbiAgICAgICAgICAgIHdpZHRoOiAxMDAlOyBcbiAgICAgICAgICAgIGhlaWdodDogMTAwJTtcbiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50O1xuICAgICAgICB9XG4gICAgICAgIGNhbnZhcyB7IFxuICAgICAgICAgICAgZGlzcGxheTogYmxvY2s7IFxuICAgICAgICAgICAgd2lkdGg6IDEwMCUgIWltcG9ydGFudDsgXG4gICAgICAgICAgICBoZWlnaHQ6IDEwMCUgIWltcG9ydGFudDtcbiAgICAgICAgfVxuICAgICAgICAvKiBIZWxwIHRvb2x0aXAgKi9cbiAgICAgICAgLmhlbHAtdG9vbHRpcCB7XG4gICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgICAgICBib3R0b206IDEwcHg7XG4gICAgICAgICAgICBsZWZ0OiAxMHB4O1xuICAgICAgICAgICAgYmFja2dyb3VuZDogcmdiYSgwLDAsMCwwLjcpO1xuICAgICAgICAgICAgY29sb3I6IHdoaXRlO1xuICAgICAgICAgICAgcGFkZGluZzogOHB4IDEycHg7XG4gICAgICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICAgICAgICBmb250LWZhbWlseTogc2Fucy1zZXJpZjtcbiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTJweDtcbiAgICAgICAgICAgIG9wYWNpdHk6IDAuNztcbiAgICAgICAgICAgIHBvaW50ZXItZXZlbnRzOiBub25lO1xuICAgICAgICB9XG4gICAgPC9zdHlsZT5cbjwvaGVhZD5cbjxib2R5PlxuICAgIDxkaXYgY2xhc3M9XCJoZWxwLXRvb2x0aXBcIj5cbiAgICAgICAgPHA+TGVmdC1jbGljayArIGRyYWc6IFJvdGF0ZTwvcD5cbiAgICAgICAgPHA+UmlnaHQtY2xpY2sgKyBkcmFnOiBQYW48L3A+XG4gICAgICAgIDxwPlNjcm9sbDogWm9vbTwvcD5cbiAgICA8L2Rpdj5cbiAgICA8c2NyaXB0IHR5cGU9XCJtb2R1bGVcIj5cbiAgICBpbXBvcnQgKiBhcyBUSFJFRSBmcm9tIFwiaHR0cHM6Ly9lc20uc2gvdGhyZWVcIjtcbiAgICBpbXBvcnQgeyBPcmJpdENvbnRyb2xzIH0gZnJvbSBcImh0dHBzOi8vZXNtLnNoL3RocmVlL2V4YW1wbGVzL2pzbS9jb250cm9scy9PcmJpdENvbnRyb2xzLmpzXCI7XG4gICAgJHtzaGFwZS5wcm9wcy50aHJlZUpzQ29kZX1cbiAgICAgIC8vIFByZXZlbnQgem9vbWluZyBpc3N1ZXNcbiAgICAgIGRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcignd2hlZWwnLCBlID0+IHsgXG4gICAgICAgICAgaWYgKCFlLmN0cmxLZXkpIHJldHVybjsgXG4gICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOyBcbiAgICAgICAgICByZXR1cm4gXG4gICAgICB9LCB7IHBhc3NpdmU6IGZhbHNlIH0pO1xuICAgIDwvc2NyaXB0PlxuPC9ib2R5PlxuPC9odG1sPmBcbiAgICAgIDogJydcblxuICAgIHJldHVybiAoXG4gICAgICA8SFRNTENvbnRhaW5lciBjbGFzc05hbWU9XCJ0bC1lbWJlZC1jb250YWluZXJcIiBpZD17c2hhcGUuaWR9PlxuICAgICAgICB7aHRtbFRvVXNlID8gKFxuICAgICAgICAgIDw+XG4gICAgICAgICAgICA8aWZyYW1lXG4gICAgICAgICAgICAgIGlkPXtgaWZyYW1lLTEtJHtzaGFwZS5pZH1gfVxuICAgICAgICAgICAgICBzcmNEb2M9e2h0bWxUb1VzZX1cbiAgICAgICAgICAgICAgd2lkdGg9e3RvRG9tUHJlY2lzaW9uKHNoYXBlLnByb3BzLncpfVxuICAgICAgICAgICAgICBoZWlnaHQ9e3RvRG9tUHJlY2lzaW9uKHNoYXBlLnByb3BzLmgpfVxuICAgICAgICAgICAgICBkcmFnZ2FibGU9e2ZhbHNlfVxuICAgICAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgICAgIHBvaW50ZXJFdmVudHM6IGlzRWRpdGluZyA/ICdhdXRvJyA6ICdub25lJyxcbiAgICAgICAgICAgICAgICBib3JkZXI6ICcxcHggc29saWQgdmFyKC0tY29sb3ItcGFuZWwtY29udHJhc3QpJyxcbiAgICAgICAgICAgICAgICBib3JkZXJSYWRpdXM6ICd2YXIoLS1yYWRpdXMtMiknLFxuICAgICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogJ3JnYmEoMCwwLDAsMC4xKScsXG4gICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAvPlxuICAgICAgICAgICAgeyhpc1JlZ2VuZXJhdGluZyB8fCBpc0VkaXRpbmdNb2RlbCkgJiYgKFxuICAgICAgICAgICAgICA8ZGl2IFxuICAgICAgICAgICAgICAgIHN0eWxlPXt7XG4gICAgICAgICAgICAgICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgICAgICAgICAgICAgICAgIHRvcDogMCxcbiAgICAgICAgICAgICAgICAgIGxlZnQ6IDAsXG4gICAgICAgICAgICAgICAgICB3aWR0aDogJzEwMCUnLFxuICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAnMTAwJScsXG4gICAgICAgICAgICAgICAgICBkaXNwbGF5OiAnZmxleCcsXG4gICAgICAgICAgICAgICAgICBmbGV4RGlyZWN0aW9uOiAnY29sdW1uJyxcbiAgICAgICAgICAgICAgICAgIGFsaWduSXRlbXM6ICdjZW50ZXInLFxuICAgICAgICAgICAgICAgICAganVzdGlmeUNvbnRlbnQ6ICdjZW50ZXInLFxuICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiAncmdiYSgwLDAsMCwwLjcpJyxcbiAgICAgICAgICAgICAgICAgIGNvbG9yOiAnd2hpdGUnLFxuICAgICAgICAgICAgICAgICAgYm9yZGVyUmFkaXVzOiAndmFyKC0tcmFkaXVzLTIpJyxcbiAgICAgICAgICAgICAgICAgIHpJbmRleDogMTAwLFxuICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8RGVmYXVsdFNwaW5uZXIgLz5cbiAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IG1hcmdpblRvcDogMTAsIGZvbnRTaXplOiAxNCB9fT5cbiAgICAgICAgICAgICAgICAgIHtpc1JlZ2VuZXJhdGluZyA/ICdSZWdlbmVyYXRpbmcgM0QgbW9kZWwuLi4nIDogJ0VkaXRpbmcgM0QgbW9kZWwuLi4nfVxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICl9XG4gICAgICAgICAgPC8+XG4gICAgICAgICkgOiAoXG4gICAgICAgICAgPGRpdlxuICAgICAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICAgICAgd2lkdGg6ICcxMDAlJyxcbiAgICAgICAgICAgICAgaGVpZ2h0OiAnMTAwJScsXG4gICAgICAgICAgICAgIGJhY2tncm91bmRDb2xvcjogJ3ZhcigtLWNvbG9yLW11dGVkLTIpJyxcbiAgICAgICAgICAgICAgZGlzcGxheTogJ2ZsZXgnLFxuICAgICAgICAgICAgICBhbGlnbkl0ZW1zOiAnY2VudGVyJyxcbiAgICAgICAgICAgICAganVzdGlmeUNvbnRlbnQ6ICdjZW50ZXInLFxuICAgICAgICAgICAgICBib3JkZXI6ICcxcHggc29saWQgdmFyKC0tY29sb3ItbXV0ZWQtMSknLFxuICAgICAgICAgICAgfX1cbiAgICAgICAgICA+XG4gICAgICAgICAgICA8RGVmYXVsdFNwaW5uZXIgLz5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKX1cbiAgICAgICAgPGRpdlxuICAgICAgICAgIHN0eWxlPXt7XG4gICAgICAgICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgICAgICAgICAgIHRvcDogMTUsXG4gICAgICAgICAgICByaWdodDogLTQwLFxuICAgICAgICAgICAgaGVpZ2h0OiA0MCxcbiAgICAgICAgICAgIHdpZHRoOiA0MCxcbiAgICAgICAgICAgIGRpc3BsYXk6ICdmbGV4JyxcbiAgICAgICAgICAgIGZsZXhEaXJlY3Rpb246ICdjb2x1bW4nLFxuICAgICAgICAgICAgYWxpZ25JdGVtczogJ2xlZnQnLFxuICAgICAgICAgICAganVzdGlmeUNvbnRlbnQ6ICdjZW50ZXInLFxuICAgICAgICAgICAgY3Vyc29yOiAncG9pbnRlcicsXG4gICAgICAgICAgICBwb2ludGVyRXZlbnRzOiAnYWxsJyxcbiAgICAgICAgICAgIHBhZGRpbmdMZWZ0OiA1LFxuICAgICAgICAgICAgcGFkZGluZ1RvcDogNSxcbiAgICAgICAgICAgIGdhcDogNVxuICAgICAgICAgIH19XG4gICAgICAgID5cbiAgICAgICAgICA8SWNvblxuICAgICAgICAgICAgaWNvbj1cImR1cGxpY2F0ZVwiXG4gICAgICAgICAgICBvblRvdWNoU3RhcnQ9eygpID0+IHtcbiAgICAgICAgICAgICAgaWYgKG5hdmlnYXRvciAmJiBuYXZpZ2F0b3IuY2xpcGJvYXJkKSB7XG4gICAgICAgICAgICAgICAgbmF2aWdhdG9yLmNsaXBib2FyZC53cml0ZVRleHQoc2hhcGUucHJvcHMudGhyZWVKc0NvZGUpXG4gICAgICAgICAgICAgICAgdG9hc3QuYWRkVG9hc3Qoe1xuICAgICAgICAgICAgICAgICAgaWNvbjogJ2R1cGxpY2F0ZScsXG4gICAgICAgICAgICAgICAgICB0aXRsZTogJ01vZGVsIGNvZGUgY29waWVkIHRvIGNsaXBib2FyZCcsXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfX1cbiAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHtcbiAgICAgICAgICAgICAgaWYgKG5hdmlnYXRvciAmJiBuYXZpZ2F0b3IuY2xpcGJvYXJkKSB7XG4gICAgICAgICAgICAgICAgbmF2aWdhdG9yLmNsaXBib2FyZC53cml0ZVRleHQoc2hhcGUucHJvcHMudGhyZWVKc0NvZGUpXG4gICAgICAgICAgICAgICAgdG9hc3QuYWRkVG9hc3Qoe1xuICAgICAgICAgICAgICAgICAgaWNvbjogJ2R1cGxpY2F0ZScsXG4gICAgICAgICAgICAgICAgICB0aXRsZTogJ01vZGVsIGNvZGUgY29waWVkIHRvIGNsaXBib2FyZCcsXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfX1cbiAgICAgICAgICAgIG9uUG9pbnRlckRvd249eyhlKSA9PiBlLnN0b3BQcm9wYWdhdGlvbigpfVxuICAgICAgICAgIC8+XG4gICAgICAgICAgPEljb24gXG4gICAgICAgICAgICBpY29uPVwicmVkb1wiXG4gICAgICAgICAgICBvblRvdWNoU3RhcnQ9e2FzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgc2V0SXNSZWdlbmVyYXRpbmcodHJ1ZSk7XG4gICAgICAgICAgICAgIHRoaXMuZWRpdG9yLnNldFNlbGVjdGVkU2hhcGVzKHNoYXBlLnByb3BzLnNlbGVjdGVkU2hhcGVzKTtcbiAgICAgICAgICAgICAgYXdhaXQgdmliZTNEQ29kZSh0aGlzLmVkaXRvciwgc2hhcGUuaWQpO1xuICAgICAgICAgICAgICBzZXRJc1JlZ2VuZXJhdGluZyhmYWxzZSk7XG4gICAgICAgICAgICAgIC8vIEV4aXQgZWRpdGluZyBtb2RlIGFmdGVyIHJlZ2VuZXJhdGluZyB0aGUgM0QgcHJldmlld1xuICAgICAgICAgICAgICB0aGlzLmVkaXRvci5zZWxlY3ROb25lKCk7XG4gICAgICAgICAgICB9fVxuICAgICAgICAgICAgb25DbGljaz17YXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICBzZXRJc1JlZ2VuZXJhdGluZyh0cnVlKTtcbiAgICAgICAgICAgICAgdGhpcy5lZGl0b3Iuc2V0U2VsZWN0ZWRTaGFwZXMoc2hhcGUucHJvcHMuc2VsZWN0ZWRTaGFwZXMpO1xuICAgICAgICAgICAgICBhd2FpdCB2aWJlM0RDb2RlKHRoaXMuZWRpdG9yLCBzaGFwZS5pZCk7XG4gICAgICAgICAgICAgIHNldElzUmVnZW5lcmF0aW5nKGZhbHNlKTtcbiAgICAgICAgICAgICAgLy8gRXhpdCBlZGl0aW5nIG1vZGUgYWZ0ZXIgcmVnZW5lcmF0aW5nIHRoZSAzRCBwcmV2aWV3XG4gICAgICAgICAgICAgIHRoaXMuZWRpdG9yLnNlbGVjdE5vbmUoKTtcbiAgICAgICAgICAgIH19XG4gICAgICAgICAgICBvblBvaW50ZXJEb3duPXsoZSkgPT4gZS5zdG9wUHJvcGFnYXRpb24oKX1cbiAgICAgICAgICAgLz5cbiAgICAgICAgICAgPEljb24gXG4gICAgICAgICAgICBpY29uPVwicGx1c1wiXG4gICAgICAgICAgICBvblRvdWNoU3RhcnQ9e2FzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgaWYgKHNoYXBlLnByb3BzLmlzR2x0ZiAmJiBzaGFwZS5wcm9wcy5nbHRmVXJsKSB7XG4gICAgICAgICAgICAgICAgLy8gSGFuZGxlIEdMVEYgbW9kZWxcbiAgICAgICAgICAgICAgICBpZiAoYWN0aXZlVGFiICE9PSAndGhyZWVqcycpIHtcbiAgICAgICAgICAgICAgICAgIHNldEFjdGl2ZVRhYigndGhyZWVqcycpO1xuICAgICAgICAgICAgICAgICAgLy8gV2FpdCBmb3IgdGFiIHN3aXRjaCB0byBjb21wbGV0ZSBiZWZvcmUgYWRkaW5nIG9iamVjdFxuICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGFkZE9iamVjdFdpdGhHbHRmKHNoYXBlLnByb3BzLmdsdGZVcmwpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICAgIHRvYXN0LmFkZFRvYXN0KHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGljb246ICd3YXJuaW5nLXRyaWFuZ2xlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnRmFpbGVkIHRvIGFkZCAzRCBtb2RlbC4nLFxuICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9LCAxMDApOyAvLyBTaG9ydCBkZWxheSB0byBlbnN1cmUgdGFiIGNvbnRleHQgaXMgcmVhZHlcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgLy8gQWxyZWFkeSBvbiB0aHJlZWpzIHRhYiwgYWRkIG9iamVjdCBkaXJlY3RseVxuICAgICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYWRkT2JqZWN0V2l0aEdsdGYoc2hhcGUucHJvcHMuZ2x0ZlVybCk7XG4gICAgICAgICAgICAgICAgICBpZiAoIXJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICB0b2FzdC5hZGRUb2FzdCh7XG4gICAgICAgICAgICAgICAgICAgICAgaWNvbjogJ3dhcm5pbmctdHJpYW5nbGUnLFxuICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnRmFpbGVkIHRvIGFkZCAzRCBtb2RlbC4nLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAoc2hhcGUucHJvcHMudGhyZWVKc0NvZGUpIHtcbiAgICAgICAgICAgICAgICAvLyBIYW5kbGUgVGhyZWVKUyBjb2RlXG4gICAgICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goXCJodHRwOi8vbG9jYWxob3N0OjgwMDAvYXBpL2dyb3EvcGFyc2VcIiwge1xuICAgICAgICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgICAgICAgICAgIGJvZHk6IHNoYXBlLnByb3BzLnRocmVlSnNDb2RlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgY29uc3QgYWN0dWFsQ29kZSA9IGF3YWl0IHJlcy5qc29uKCk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYWN0dWFsQ29kZSk7XG4gICAgICAgICAgICAgICAgY29uc3Qgb2JqZWN0Q29kZSA9IGFjdHVhbENvZGUuY29udGVudDtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiAoYWN0aXZlVGFiICE9PSAndGhyZWVqcycpIHtcbiAgICAgICAgICAgICAgICAgIHNldEFjdGl2ZVRhYigndGhyZWVqcycpO1xuICAgICAgICAgICAgICAgICAgLy8gV2FpdCBmb3IgdGFiIHN3aXRjaCB0byBjb21wbGV0ZSBiZWZvcmUgYWRkaW5nIG9iamVjdFxuICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGFkZE9iamVjdEZyb21Db2RlKG9iamVjdENvZGUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICAgIHRvYXN0LmFkZFRvYXN0KHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGljb246ICd3YXJuaW5nLXRyaWFuZ2xlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnRmFpbGVkIHRvIGFkZCBvYmplY3QuJyxcbiAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfSwgMTAwKTsgLy8gU2hvcnQgZGVsYXkgdG8gZW5zdXJlIHRhYiBjb250ZXh0IGlzIHJlYWR5XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIC8vIEFscmVhZHkgb24gdGhyZWVqcyB0YWIsIGFkZCBvYmplY3QgZGlyZWN0bHlcbiAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGFkZE9iamVjdEZyb21Db2RlKG9iamVjdENvZGUpO1xuICAgICAgICAgICAgICAgICAgaWYgKCFyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgdG9hc3QuYWRkVG9hc3Qoe1xuICAgICAgICAgICAgICAgICAgICAgIGljb246ICd3YXJuaW5nLXRyaWFuZ2xlJyxcbiAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ0ZhaWxlZCB0byBhZGQgb2JqZWN0LicsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfX1cbiAgICAgICAgICAgIG9uQ2xpY2s9e2FzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgaWYgKHNoYXBlLnByb3BzLmlzR2x0ZiAmJiBzaGFwZS5wcm9wcy5nbHRmVXJsKSB7XG4gICAgICAgICAgICAgICAgLy8gSGFuZGxlIEdMVEYgbW9kZWxcbiAgICAgICAgICAgICAgICBpZiAoYWN0aXZlVGFiICE9PSAndGhyZWVqcycpIHtcbiAgICAgICAgICAgICAgICAgIHNldEFjdGl2ZVRhYigndGhyZWVqcycpO1xuICAgICAgICAgICAgICAgICAgLy8gV2FpdCBmb3IgdGFiIHN3aXRjaCB0byBjb21wbGV0ZSBiZWZvcmUgYWRkaW5nIG9iamVjdFxuICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGFkZE9iamVjdFdpdGhHbHRmKHNoYXBlLnByb3BzLmdsdGZVcmwpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICAgIHRvYXN0LmFkZFRvYXN0KHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGljb246ICd3YXJuaW5nLXRyaWFuZ2xlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnRmFpbGVkIHRvIGFkZCAzRCBtb2RlbC4nLFxuICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9LCAxMDApOyAvLyBTaG9ydCBkZWxheSB0byBlbnN1cmUgdGFiIGNvbnRleHQgaXMgcmVhZHlcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgLy8gQWxyZWFkeSBvbiB0aHJlZWpzIHRhYiwgYWRkIG9iamVjdCBkaXJlY3RseVxuICAgICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYWRkT2JqZWN0V2l0aEdsdGYoc2hhcGUucHJvcHMuZ2x0ZlVybCk7XG4gICAgICAgICAgICAgICAgICBpZiAoIXJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICB0b2FzdC5hZGRUb2FzdCh7XG4gICAgICAgICAgICAgICAgICAgICAgaWNvbjogJ3dhcm5pbmctdHJpYW5nbGUnLFxuICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnRmFpbGVkIHRvIGFkZCAzRCBtb2RlbC4nLFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0gZWxzZSBpZiAoc2hhcGUucHJvcHMudGhyZWVKc0NvZGUpIHtcbiAgICAgICAgICAgICAgICAvLyBIYW5kbGUgVGhyZWVKUyBjb2RlXG4gICAgICAgICAgICAgICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2goXCJodHRwOi8vbG9jYWxob3N0OjgwMDAvYXBpL2dyb3EvcGFyc2VcIiwge1xuICAgICAgICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgICAgICAgICAgIGJvZHk6IHNoYXBlLnByb3BzLnRocmVlSnNDb2RlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgY29uc3QgYWN0dWFsQ29kZSA9IGF3YWl0IHJlcy5qc29uKCk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYWN0dWFsQ29kZSk7XG4gICAgICAgICAgICAgICAgY29uc3Qgb2JqZWN0Q29kZSA9IGFjdHVhbENvZGUuY29udGVudDtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBpZiAoYWN0aXZlVGFiICE9PSAndGhyZWVqcycpIHtcbiAgICAgICAgICAgICAgICAgIHNldEFjdGl2ZVRhYigndGhyZWVqcycpO1xuICAgICAgICAgICAgICAgICAgLy8gV2FpdCBmb3IgdGFiIHN3aXRjaCB0byBjb21wbGV0ZSBiZWZvcmUgYWRkaW5nIG9iamVjdFxuICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGFkZE9iamVjdEZyb21Db2RlKG9iamVjdENvZGUpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICAgIHRvYXN0LmFkZFRvYXN0KHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGljb246ICd3YXJuaW5nLXRyaWFuZ2xlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnRmFpbGVkIHRvIGFkZCBvYmplY3QuJyxcbiAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfSwgMTAwKTsgLy8gU2hvcnQgZGVsYXkgdG8gZW5zdXJlIHRhYiBjb250ZXh0IGlzIHJlYWR5XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIC8vIEFscmVhZHkgb24gdGhyZWVqcyB0YWIsIGFkZCBvYmplY3QgZGlyZWN0bHlcbiAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGFkZE9iamVjdEZyb21Db2RlKG9iamVjdENvZGUpO1xuICAgICAgICAgICAgICAgICAgaWYgKCFyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgdG9hc3QuYWRkVG9hc3Qoe1xuICAgICAgICAgICAgICAgICAgICAgIGljb246ICd3YXJuaW5nLXRyaWFuZ2xlJyxcbiAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ0ZhaWxlZCB0byBhZGQgb2JqZWN0LicsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfX1cbiAgICAgICAgICAgIG9uUG9pbnRlckRvd249eyhlKSA9PiBlLnN0b3BQcm9wYWdhdGlvbigpfVxuICAgICAgICAgICAvPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAge2h0bWxUb1VzZSAmJiAoXG4gICAgICAgICAgPGRpdlxuICAgICAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICAgICAgdGV4dEFsaWduOiAnY2VudGVyJyxcbiAgICAgICAgICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXG4gICAgICAgICAgICAgIGJvdHRvbTogaXNFZGl0aW5nID8gLTQwIDogMCxcbiAgICAgICAgICAgICAgcGFkZGluZzogNCxcbiAgICAgICAgICAgICAgZm9udEZhbWlseTogJ2luaGVyaXQnLFxuICAgICAgICAgICAgICBmb250U2l6ZTogMTIsXG4gICAgICAgICAgICAgIGxlZnQ6IDAsXG4gICAgICAgICAgICAgIHdpZHRoOiAnMTAwJScsXG4gICAgICAgICAgICAgIGRpc3BsYXk6ICdmbGV4JyxcbiAgICAgICAgICAgICAgYWxpZ25JdGVtczogJ2NlbnRlcicsXG4gICAgICAgICAgICAgIGp1c3RpZnlDb250ZW50OiAnY2VudGVyJyxcbiAgICAgICAgICAgICAgcG9pbnRlckV2ZW50czogJ25vbmUnLFxuICAgICAgICAgICAgfX1cbiAgICAgICAgICA+XG4gICAgICAgICAgICA8c3BhblxuICAgICAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6ICd2YXIoLS1jb2xvci1wYW5lbCknLFxuICAgICAgICAgICAgICAgIHBhZGRpbmc6ICc0cHggMTJweCcsXG4gICAgICAgICAgICAgICAgYm9yZGVyUmFkaXVzOiA5OSxcbiAgICAgICAgICAgICAgICBib3JkZXI6ICcxcHggc29saWQgdmFyKC0tY29sb3ItbXV0ZWQtMSknLFxuICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICB7aXNFZGl0aW5nID8gJ0NsaWNrIHRoZSBjYW52YXMgdG8gZXhpdCcgOiAnRG91YmxlIGNsaWNrIHRvIGludGVyYWN0IHdpdGggM0QgbW9kZWwnfVxuICAgICAgICAgICAgPC9zcGFuPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApfVxuICAgICAgPC9IVE1MQ29udGFpbmVyPlxuICAgIClcbiAgfVxuXG4gIG92ZXJyaWRlIHRvU3ZnKFxuICAgIHNoYXBlOiBNb2RlbDNEUHJldmlld1NoYXBlLFxuICAgIF9jdHg6IFN2Z0V4cG9ydENvbnRleHRcbiAgKTogU1ZHRWxlbWVudCB8IFByb21pc2U8U1ZHRWxlbWVudD4ge1xuICAgIGNvbnN0IGcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywgJ2cnKVxuICAgIFxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgXykgPT4ge1xuICAgICAgaWYgKHdpbmRvdyA9PT0gdW5kZWZpbmVkKSByZXR1cm4gcmVzb2x2ZShnKVxuICAgICAgXG4gICAgICBjb25zdCB3aW5kb3dMaXN0ZW5lciA9IChldmVudDogTWVzc2FnZUV2ZW50KSA9PiB7XG4gICAgICAgIGlmIChldmVudC5kYXRhLnNjcmVlbnNob3QgJiYgZXZlbnQuZGF0YT8uc2hhcGVpZCA9PT0gc2hhcGUuaWQpIHtcbiAgICAgICAgICBjb25zdCBpbWFnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCAnaW1hZ2UnKVxuICAgICAgICAgIGltYWdlLnNldEF0dHJpYnV0ZU5TKCdodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rJywgJ2hyZWYnLCBldmVudC5kYXRhLnNjcmVlbnNob3QpXG4gICAgICAgICAgaW1hZ2Uuc2V0QXR0cmlidXRlKCd3aWR0aCcsIHNoYXBlLnByb3BzLncudG9TdHJpbmcoKSlcbiAgICAgICAgICBpbWFnZS5zZXRBdHRyaWJ1dGUoJ2hlaWdodCcsIHNoYXBlLnByb3BzLmgudG9TdHJpbmcoKSlcbiAgICAgICAgICBnLmFwcGVuZENoaWxkKGltYWdlKVxuICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgd2luZG93TGlzdGVuZXIpXG4gICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVPdXQpXG4gICAgICAgICAgcmVzb2x2ZShnKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIGNvbnN0IHRpbWVPdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgcmVzb2x2ZShnKVxuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIHdpbmRvd0xpc3RlbmVyKVxuICAgICAgfSwgMjAwMClcbiAgICAgIFxuICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCB3aW5kb3dMaXN0ZW5lcilcbiAgICAgIFxuICAgICAgLy8gUmVxdWVzdCBhIHNjcmVlbnNob3QgZnJvbSB0aGUgaWZyYW1lXG4gICAgICBjb25zdCBmaXJzdExldmVsSWZyYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYGlmcmFtZS0xLSR7c2hhcGUuaWR9YCkgYXMgSFRNTElGcmFtZUVsZW1lbnRcbiAgICAgIGlmIChmaXJzdExldmVsSWZyYW1lKSB7XG4gICAgICAgIGZpcnN0TGV2ZWxJZnJhbWUuY29udGVudFdpbmRvdyEucG9zdE1lc3NhZ2UoXG4gICAgICAgICAgeyBhY3Rpb246ICd0YWtlLXNjcmVlbnNob3QnLCBzaGFwZWlkOiBzaGFwZS5pZCB9LFxuICAgICAgICAgICcqJ1xuICAgICAgICApXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLmxvZygnZmlyc3QgbGV2ZWwgaWZyYW1lIG5vdCBmb3VuZCBvciBub3QgYWNjZXNzaWJsZScpXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIGluZGljYXRvcihzaGFwZTogTW9kZWwzRFByZXZpZXdTaGFwZSkge1xuICAgIHJldHVybiA8cmVjdCB3aWR0aD17c2hhcGUucHJvcHMud30gaGVpZ2h0PXtzaGFwZS5wcm9wcy5ofSAvPlxuICB9XG59XG4iXSwibmFtZXMiOlsidmliZTNEQ29kZSIsInVzZU9iamVjdFN0b3JlIiwidXNlVGFiU3RvcmUiLCJCYXNlQm94U2hhcGVVdGlsIiwiRGVmYXVsdFNwaW5uZXIiLCJIVE1MQ29udGFpbmVyIiwiSWNvbiIsInRvRG9tUHJlY2lzaW9uIiwidXNlSXNFZGl0aW5nIiwidXNlVG9hc3RzIiwidXNlU3RhdGUiLCJ1c2VFZmZlY3QiLCJNb2RlbDNEUHJldmlld1NoYXBlVXRpbCIsInR5cGUiLCJnZXREZWZhdWx0UHJvcHMiLCJ0aHJlZUpzQ29kZSIsIm9iamVjdENvZGUiLCJnbHRmVXJsIiwiaXNHbHRmIiwidyIsImgiLCJzZWxlY3RlZFNoYXBlcyIsImNvbXBvbmVudCIsInNoYXBlIiwiaXNFZGl0aW5nIiwiaWQiLCJ0b2FzdCIsImFkZE9iamVjdEZyb21Db2RlIiwiYWRkT2JqZWN0V2l0aEdsdGYiLCJhY3RpdmVUYWIiLCJzZXRBY3RpdmVUYWIiLCJpc1JlZ2VuZXJhdGluZyIsInNldElzUmVnZW5lcmF0aW5nIiwiaXNFZGl0aW5nTW9kZWwiLCJzZXRJc0VkaXRpbmdNb2RlbCIsImhhbmRsZUVkaXRpbmdTdGF0ZUNoYW5nZSIsImV2ZW50IiwiY3VzdG9tRXZlbnQiLCJkZXRhaWwiLCJlbGVtZW50SWQiLCJ3aW5kb3ciLCJhZGRFdmVudExpc3RlbmVyIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImhhbmRsZUFkZEdsdGZPYmplY3QiLCJ1cmwiLCJzaGFwZUlkIiwic2V0VGltZW91dCIsImh0bWxUb1VzZSIsInByb3BzIiwiY2xhc3NOYW1lIiwiaWZyYW1lIiwic3JjRG9jIiwid2lkdGgiLCJoZWlnaHQiLCJkcmFnZ2FibGUiLCJzdHlsZSIsInBvaW50ZXJFdmVudHMiLCJib3JkZXIiLCJib3JkZXJSYWRpdXMiLCJiYWNrZ3JvdW5kQ29sb3IiLCJkaXYiLCJwb3NpdGlvbiIsInRvcCIsImxlZnQiLCJkaXNwbGF5IiwiZmxleERpcmVjdGlvbiIsImFsaWduSXRlbXMiLCJqdXN0aWZ5Q29udGVudCIsImNvbG9yIiwiekluZGV4IiwibWFyZ2luVG9wIiwiZm9udFNpemUiLCJyaWdodCIsImN1cnNvciIsInBhZGRpbmdMZWZ0IiwicGFkZGluZ1RvcCIsImdhcCIsImljb24iLCJvblRvdWNoU3RhcnQiLCJuYXZpZ2F0b3IiLCJjbGlwYm9hcmQiLCJ3cml0ZVRleHQiLCJhZGRUb2FzdCIsInRpdGxlIiwib25DbGljayIsIm9uUG9pbnRlckRvd24iLCJlIiwic3RvcFByb3BhZ2F0aW9uIiwiZWRpdG9yIiwic2V0U2VsZWN0ZWRTaGFwZXMiLCJzZWxlY3ROb25lIiwicmVzdWx0IiwicmVzIiwiZmV0Y2giLCJtZXRob2QiLCJib2R5IiwiYWN0dWFsQ29kZSIsImpzb24iLCJjb25zb2xlIiwibG9nIiwiY29udGVudCIsInRleHRBbGlnbiIsImJvdHRvbSIsInBhZGRpbmciLCJmb250RmFtaWx5Iiwic3BhbiIsImJhY2tncm91bmQiLCJ0b1N2ZyIsIl9jdHgiLCJnIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50TlMiLCJQcm9taXNlIiwicmVzb2x2ZSIsIl8iLCJ1bmRlZmluZWQiLCJ3aW5kb3dMaXN0ZW5lciIsImRhdGEiLCJzY3JlZW5zaG90Iiwic2hhcGVpZCIsImltYWdlIiwic2V0QXR0cmlidXRlTlMiLCJzZXRBdHRyaWJ1dGUiLCJ0b1N0cmluZyIsImFwcGVuZENoaWxkIiwiY2xlYXJUaW1lb3V0IiwidGltZU91dCIsImZpcnN0TGV2ZWxJZnJhbWUiLCJnZXRFbGVtZW50QnlJZCIsImNvbnRlbnRXaW5kb3ciLCJwb3N0TWVzc2FnZSIsImFjdGlvbiIsImluZGljYXRvciIsInJlY3QiLCJjYW5FZGl0IiwiaXNBc3BlY3RSYXRpb0xvY2tlZCIsImNhblJlc2l6ZSIsImNhbkJpbmQiLCJjYW5Vbm1vdW50Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./app/PreviewShape/Model3DPreviewShape.tsx\n");

/***/ }),

/***/ "(ssr)/./app/PreviewShape/PreviewShape.tsx":
/*!*******************************************!*\
  !*** ./app/PreviewShape/PreviewShape.tsx ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PreviewShapeUtil: () => (/* binding */ PreviewShapeUtil)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _tldraw_tldraw__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tldraw/tldraw */ \"(ssr)/./node_modules/@tldraw/tldraw/dist-esm/index.mjs\");\n/* eslint-disable react-hooks/rules-of-hooks */ \n\nclass PreviewShapeUtil extends _tldraw_tldraw__WEBPACK_IMPORTED_MODULE_1__.BaseBoxShapeUtil {\n    static{\n        this.type = \"response\";\n    }\n    getDefaultProps() {\n        return {\n            html: \"\",\n            w: 960 * 2 / 3,\n            h: 540 * 2 / 3\n        };\n    }\n    component(shape) {\n        const isEditing = (0,_tldraw_tldraw__WEBPACK_IMPORTED_MODULE_1__.useIsEditing)(shape.id);\n        const toast = (0,_tldraw_tldraw__WEBPACK_IMPORTED_MODULE_1__.useToasts)();\n        const boxShadow = (0,_tldraw_tldraw__WEBPACK_IMPORTED_MODULE_1__.useValue)(\"box shadow\", ()=>{\n            const rotation = this.editor.getShapePageTransform(shape).rotation();\n            return getRotatedBoxShadow(rotation);\n        }, [\n            this.editor\n        ]);\n        // Kind of a hack—we're preventing users from pinching-zooming into the iframe\n        const htmlToUse = shape.props.html.replace(`</body>`, `<script src=\"https://unpkg.com/html2canvas\"></script><script>\n\t\t\t// send the screenshot to the parent window\n  \t\t\twindow.addEventListener('message', function(event) {\n    \t\tif (event.data.action === 'take-screenshot' && event.data.shapeid === \"${shape.id}\") {\n      \t\thtml2canvas(document.body, {useCors : true}).then(function(canvas) {\n        \t\tconst data = canvas.toDataURL('image/png');\n        \t\twindow.parent.postMessage({screenshot: data, shapeid: \"${shape.id}\"}, \"*\");\n      \t\t});\n    \t\t}\n  \t\t\t}, false);\n\t\t\tdocument.body.addEventListener('wheel', e => { if (!e.ctrlKey) return; e.preventDefault(); return }, { passive: false })</script>\n</body>`);\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_tldraw_tldraw__WEBPACK_IMPORTED_MODULE_1__.HTMLContainer, {\n            className: \"tl-embed-container\",\n            id: shape.id,\n            children: [\n                htmlToUse ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"iframe\", {\n                    id: `iframe-1-${shape.id}`,\n                    srcDoc: htmlToUse,\n                    width: (0,_tldraw_tldraw__WEBPACK_IMPORTED_MODULE_1__.toDomPrecision)(shape.props.w),\n                    height: (0,_tldraw_tldraw__WEBPACK_IMPORTED_MODULE_1__.toDomPrecision)(shape.props.h),\n                    draggable: false,\n                    style: {\n                        pointerEvents: isEditing ? \"auto\" : \"none\",\n                        boxShadow,\n                        border: \"1px solid var(--color-panel-contrast)\",\n                        borderRadius: \"var(--radius-2)\"\n                    }\n                }, void 0, false, {\n                    fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/PreviewShape/PreviewShape.tsx\",\n                    lineNumber: 76,\n                    columnNumber: 6\n                }, this) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    style: {\n                        width: \"100%\",\n                        height: \"100%\",\n                        backgroundColor: \"var(--color-muted-2)\",\n                        display: \"flex\",\n                        alignItems: \"center\",\n                        justifyContent: \"center\",\n                        border: \"1px solid var(--color-muted-1)\"\n                    },\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_tldraw_tldraw__WEBPACK_IMPORTED_MODULE_1__.DefaultSpinner, {}, void 0, false, {\n                        fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/PreviewShape/PreviewShape.tsx\",\n                        lineNumber: 101,\n                        columnNumber: 7\n                    }, this)\n                }, void 0, false, {\n                    fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/PreviewShape/PreviewShape.tsx\",\n                    lineNumber: 90,\n                    columnNumber: 6\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    style: {\n                        position: \"absolute\",\n                        top: 0,\n                        right: -40,\n                        height: 40,\n                        width: 40,\n                        display: \"flex\",\n                        alignItems: \"center\",\n                        justifyContent: \"center\",\n                        cursor: \"pointer\",\n                        pointerEvents: \"all\"\n                    },\n                    onClick: ()=>{\n                        if (navigator && navigator.clipboard) {\n                            navigator.clipboard.writeText(shape.props.html);\n                            toast.addToast({\n                                icon: \"duplicate\",\n                                title: \"Copied to clipboard\"\n                            });\n                        }\n                    },\n                    onPointerDown: _tldraw_tldraw__WEBPACK_IMPORTED_MODULE_1__.stopEventPropagation,\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_tldraw_tldraw__WEBPACK_IMPORTED_MODULE_1__.Icon, {\n                        icon: \"duplicate\"\n                    }, void 0, false, {\n                        fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/PreviewShape/PreviewShape.tsx\",\n                        lineNumber: 128,\n                        columnNumber: 6\n                    }, this)\n                }, void 0, false, {\n                    fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/PreviewShape/PreviewShape.tsx\",\n                    lineNumber: 104,\n                    columnNumber: 5\n                }, this),\n                htmlToUse && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    style: {\n                        textAlign: \"center\",\n                        position: \"absolute\",\n                        bottom: isEditing ? -40 : 0,\n                        padding: 4,\n                        fontFamily: \"inherit\",\n                        fontSize: 12,\n                        left: 0,\n                        width: \"100%\",\n                        display: \"flex\",\n                        alignItems: \"center\",\n                        justifyContent: \"center\",\n                        pointerEvents: \"none\"\n                    },\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                        style: {\n                            background: \"var(--color-panel)\",\n                            padding: \"4px 12px\",\n                            borderRadius: 99,\n                            border: \"1px solid var(--color-muted-1)\"\n                        },\n                        children: isEditing ? \"Click the canvas to exit\" : \"Double click to interact\"\n                    }, void 0, false, {\n                        fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/PreviewShape/PreviewShape.tsx\",\n                        lineNumber: 147,\n                        columnNumber: 7\n                    }, this)\n                }, void 0, false, {\n                    fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/PreviewShape/PreviewShape.tsx\",\n                    lineNumber: 131,\n                    columnNumber: 6\n                }, this)\n            ]\n        }, void 0, true, {\n            fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/PreviewShape/PreviewShape.tsx\",\n            lineNumber: 74,\n            columnNumber: 4\n        }, this);\n    }\n    toSvg(shape, _ctx) {\n        const g = document.createElementNS(\"http://www.w3.org/2000/svg\", \"g\");\n        // while screenshot is the same as the old one, keep waiting for a new one\n        return new Promise((resolve, _)=>{\n            if (window === undefined) return resolve(g);\n            const windowListener = (event)=>{\n                if (event.data.screenshot && event.data?.shapeid === shape.id) {\n                    const image = document.createElementNS(\"http://www.w3.org/2000/svg\", \"image\");\n                    image.setAttributeNS(\"http://www.w3.org/1999/xlink\", \"href\", event.data.screenshot);\n                    image.setAttribute(\"width\", shape.props.w.toString());\n                    image.setAttribute(\"height\", shape.props.h.toString());\n                    g.appendChild(image);\n                    window.removeEventListener(\"message\", windowListener);\n                    clearTimeout(timeOut);\n                    resolve(g);\n                }\n            };\n            const timeOut = setTimeout(()=>{\n                resolve(g);\n                window.removeEventListener(\"message\", windowListener);\n            }, 2000);\n            window.addEventListener(\"message\", windowListener);\n            //request new screenshot\n            const firstLevelIframe = document.getElementById(`iframe-1-${shape.id}`);\n            if (firstLevelIframe) {\n                firstLevelIframe.contentWindow.postMessage({\n                    action: \"take-screenshot\",\n                    shapeid: shape.id\n                }, \"*\");\n            } else {\n                console.log(\"first level iframe not found or not accessible\");\n            }\n        });\n    }\n    indicator(shape) {\n        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"rect\", {\n            width: shape.props.w,\n            height: shape.props.h\n        }, void 0, false, {\n            fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/PreviewShape/PreviewShape.tsx\",\n            lineNumber: 199,\n            columnNumber: 10\n        }, this);\n    }\n    constructor(...args){\n        super(...args);\n        this.canEdit = ()=>true;\n        this.isAspectRatioLocked = ()=>false;\n        this.canResize = ()=>true;\n        this.canBind = ()=>false;\n        this.canUnmount = ()=>false;\n    }\n}\nfunction getRotatedBoxShadow(rotation) {\n    const cssStrings = ROTATING_BOX_SHADOWS.map((shadow)=>{\n        const { offsetX, offsetY, blur, spread, color } = shadow;\n        const vec = new _tldraw_tldraw__WEBPACK_IMPORTED_MODULE_1__.Vec(offsetX, offsetY);\n        const { x, y } = vec.rot(-rotation);\n        return `${x}px ${y}px ${blur}px ${spread}px ${color}`;\n    });\n    return cssStrings.join(\", \");\n}\nconst ROTATING_BOX_SHADOWS = [\n    {\n        offsetX: 0,\n        offsetY: 2,\n        blur: 4,\n        spread: -1,\n        color: \"#0000003a\"\n    },\n    {\n        offsetX: 0,\n        offsetY: 3,\n        blur: 12,\n        spread: -2,\n        color: \"#0000001f\"\n    }\n];\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9hcHAvUHJldmlld1NoYXBlL1ByZXZpZXdTaGFwZS50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBLDZDQUE2QztBQWN0QjtBQVdoQixNQUFNVSx5QkFBeUJWLDREQUFnQkE7O2FBQ3JDVyxPQUFPOztJQUV2QkMsa0JBQXlDO1FBQ3hDLE9BQU87WUFDTkMsTUFBTTtZQUNOQyxHQUFHLE1BQU8sSUFBSztZQUNmQyxHQUFHLE1BQU8sSUFBSztRQUNoQjtJQUNEO0lBUVNDLFVBQVVDLEtBQW1CLEVBQUU7UUFDdkMsTUFBTUMsWUFBWVgsNERBQVlBLENBQUNVLE1BQU1FLEVBQUU7UUFDdkMsTUFBTUMsUUFBUVoseURBQVNBO1FBRXZCLE1BQU1hLFlBQVlaLHdEQUFRQSxDQUN6QixjQUNBO1lBQ0MsTUFBTWEsV0FBVyxJQUFJLENBQUNDLE1BQU0sQ0FBQ0MscUJBQXFCLENBQUNQLE9BQVFLLFFBQVE7WUFDbkUsT0FBT0csb0JBQW9CSDtRQUM1QixHQUNBO1lBQUMsSUFBSSxDQUFDQyxNQUFNO1NBQUM7UUFHZCw4RUFBOEU7UUFDOUUsTUFBTUcsWUFBWVQsTUFBTVUsS0FBSyxDQUFDZCxJQUFJLENBQUNlLE9BQU8sQ0FDekMsQ0FBQyxPQUFPLENBQUMsRUFDVCxDQUFDOzs7NkVBR3lFLEVBQUVYLE1BQU1FLEVBQUUsQ0FBQzs7O2lFQUd2QixFQUFFRixNQUFNRSxFQUFFLENBQUM7Ozs7O09BS3JFLENBQUM7UUFHTixxQkFDQyw4REFBQ2pCLHlEQUFhQTtZQUFDMkIsV0FBVTtZQUFxQlYsSUFBSUYsTUFBTUUsRUFBRTs7Z0JBQ3hETywwQkFDQSw4REFBQ0k7b0JBQ0FYLElBQUksQ0FBQyxTQUFTLEVBQUVGLE1BQU1FLEVBQUUsQ0FBQyxDQUFDO29CQUMxQlksUUFBUUw7b0JBQ1JNLE9BQU8xQiw4REFBY0EsQ0FBQ1csTUFBTVUsS0FBSyxDQUFDYixDQUFDO29CQUNuQ21CLFFBQVEzQiw4REFBY0EsQ0FBQ1csTUFBTVUsS0FBSyxDQUFDWixDQUFDO29CQUNw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UjtDQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdmliZS0zZC1jb2RlLy4vYXBwL1ByZXZpZXdTaGFwZS9QcmV2aWV3U2hhcGUudHN4PzY4NTEiXSwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgcmVhY3QtaG9va3MvcnVsZXMtb2YtaG9va3MgKi9cbmltcG9ydCB7XG5cdEJhc2VCb3hTaGFwZVV0aWwsXG5cdERlZmF1bHRTcGlubmVyLFxuXHRIVE1MQ29udGFpbmVyLFxuXHRJY29uLFxuXHRTdmdFeHBvcnRDb250ZXh0LFxuXHRUTEJhc2VTaGFwZSxcblx0VmVjLFxuXHRzdG9wRXZlbnRQcm9wYWdhdGlvbixcblx0dG9Eb21QcmVjaXNpb24sXG5cdHVzZUlzRWRpdGluZyxcblx0dXNlVG9hc3RzLFxuXHR1c2VWYWx1ZSxcbn0gZnJvbSAnQHRsZHJhdy90bGRyYXcnXG5cbmV4cG9ydCB0eXBlIFByZXZpZXdTaGFwZSA9IFRMQmFzZVNoYXBlPFxuXHQncmVzcG9uc2UnLFxuXHR7XG5cdFx0aHRtbDogc3RyaW5nXG5cdFx0dzogbnVtYmVyXG5cdFx0aDogbnVtYmVyXG5cdH1cbj5cblxuZXhwb3J0IGNsYXNzIFByZXZpZXdTaGFwZVV0aWwgZXh0ZW5kcyBCYXNlQm94U2hhcGVVdGlsPFByZXZpZXdTaGFwZT4ge1xuXHRzdGF0aWMgb3ZlcnJpZGUgdHlwZSA9ICdyZXNwb25zZScgYXMgY29uc3RcblxuXHRnZXREZWZhdWx0UHJvcHMoKTogUHJldmlld1NoYXBlWydwcm9wcyddIHtcblx0XHRyZXR1cm4ge1xuXHRcdFx0aHRtbDogJycsXG5cdFx0XHR3OiAoOTYwICogMikgLyAzLFxuXHRcdFx0aDogKDU0MCAqIDIpIC8gMyxcblx0XHR9XG5cdH1cblxuXHRvdmVycmlkZSBjYW5FZGl0ID0gKCkgPT4gdHJ1ZVxuXHRvdmVycmlkZSBpc0FzcGVjdFJhdGlvTG9ja2VkID0gKCkgPT4gZmFsc2Vcblx0b3ZlcnJpZGUgY2FuUmVzaXplID0gKCkgPT4gdHJ1ZVxuXHRvdmVycmlkZSBjYW5CaW5kID0gKCkgPT4gZmFsc2Vcblx0b3ZlcnJpZGUgY2FuVW5tb3VudCA9ICgpID0+IGZhbHNlXG5cblx0b3ZlcnJpZGUgY29tcG9uZW50KHNoYXBlOiBQcmV2aWV3U2hhcGUpIHtcblx0XHRjb25zdCBpc0VkaXRpbmcgPSB1c2VJc0VkaXRpbmcoc2hhcGUuaWQpXG5cdFx0Y29uc3QgdG9hc3QgPSB1c2VUb2FzdHMoKVxuXG5cdFx0Y29uc3QgYm94U2hhZG93ID0gdXNlVmFsdWUoXG5cdFx0XHQnYm94IHNoYWRvdycsXG5cdFx0XHQoKSA9PiB7XG5cdFx0XHRcdGNvbnN0IHJvdGF0aW9uID0gdGhpcy5lZGl0b3IuZ2V0U2hhcGVQYWdlVHJhbnNmb3JtKHNoYXBlKSEucm90YXRpb24oKVxuXHRcdFx0XHRyZXR1cm4gZ2V0Um90YXRlZEJveFNoYWRvdyhyb3RhdGlvbilcblx0XHRcdH0sXG5cdFx0XHRbdGhpcy5lZGl0b3JdXG5cdFx0KVxuXG5cdFx0Ly8gS2luZCBvZiBhIGhhY2vigJR3ZSdyZSBwcmV2ZW50aW5nIHVzZXJzIGZyb20gcGluY2hpbmctem9vbWluZyBpbnRvIHRoZSBpZnJhbWVcblx0XHRjb25zdCBodG1sVG9Vc2UgPSBzaGFwZS5wcm9wcy5odG1sLnJlcGxhY2UoXG5cdFx0XHRgPC9ib2R5PmAsXG5cdFx0XHRgPHNjcmlwdCBzcmM9XCJodHRwczovL3VucGtnLmNvbS9odG1sMmNhbnZhc1wiPjwvc2NyaXB0PjxzY3JpcHQ+XG5cdFx0XHQvLyBzZW5kIHRoZSBzY3JlZW5zaG90IHRvIHRoZSBwYXJlbnQgd2luZG93XG4gIFx0XHRcdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICBcdFx0aWYgKGV2ZW50LmRhdGEuYWN0aW9uID09PSAndGFrZS1zY3JlZW5zaG90JyAmJiBldmVudC5kYXRhLnNoYXBlaWQgPT09IFwiJHtzaGFwZS5pZH1cIikge1xuICAgICAgXHRcdGh0bWwyY2FudmFzKGRvY3VtZW50LmJvZHksIHt1c2VDb3JzIDogdHJ1ZX0pLnRoZW4oZnVuY3Rpb24oY2FudmFzKSB7XG4gICAgICAgIFx0XHRjb25zdCBkYXRhID0gY2FudmFzLnRvRGF0YVVSTCgnaW1hZ2UvcG5nJyk7XG4gICAgICAgIFx0XHR3aW5kb3cucGFyZW50LnBvc3RNZXNzYWdlKHtzY3JlZW5zaG90OiBkYXRhLCBzaGFwZWlkOiBcIiR7c2hhcGUuaWR9XCJ9LCBcIipcIik7XG4gICAgICBcdFx0fSk7XG4gICAgXHRcdH1cbiAgXHRcdFx0fSwgZmFsc2UpO1xuXHRcdFx0ZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKCd3aGVlbCcsIGUgPT4geyBpZiAoIWUuY3RybEtleSkgcmV0dXJuOyBlLnByZXZlbnREZWZhdWx0KCk7IHJldHVybiB9LCB7IHBhc3NpdmU6IGZhbHNlIH0pPC9zY3JpcHQ+XG48L2JvZHk+YFxuXHRcdClcblxuXHRcdHJldHVybiAoXG5cdFx0XHQ8SFRNTENvbnRhaW5lciBjbGFzc05hbWU9XCJ0bC1lbWJlZC1jb250YWluZXJcIiBpZD17c2hhcGUuaWR9PlxuXHRcdFx0XHR7aHRtbFRvVXNlID8gKFxuXHRcdFx0XHRcdDxpZnJhbWVcblx0XHRcdFx0XHRcdGlkPXtgaWZyYW1lLTEtJHtzaGFwZS5pZH1gfVxuXHRcdFx0XHRcdFx0c3JjRG9jPXtodG1sVG9Vc2V9XG5cdFx0XHRcdFx0XHR3aWR0aD17dG9Eb21QcmVjaXNpb24oc2hhcGUucHJvcHMudyl9XG5cdFx0XHRcdFx0XHRoZWlnaHQ9e3RvRG9tUHJlY2lzaW9uKHNoYXBlLnByb3BzLmgpfVxuXHRcdFx0XHRcdFx0ZHJhZ2dhYmxlPXtmYWxzZX1cblx0XHRcdFx0XHRcdHN0eWxlPXt7XG5cdFx0XHRcdFx0XHRcdHBvaW50ZXJFdmVudHM6IGlzRWRpdGluZyA/ICdhdXRvJyA6ICdub25lJyxcblx0XHRcdFx0XHRcdFx0Ym94U2hhZG93LFxuXHRcdFx0XHRcdFx0XHRib3JkZXI6ICcxcHggc29saWQgdmFyKC0tY29sb3ItcGFuZWwtY29udHJhc3QpJyxcblx0XHRcdFx0XHRcdFx0Ym9yZGVyUmFkaXVzOiAndmFyKC0tcmFkaXVzLTIpJyxcblx0XHRcdFx0XHRcdH19XG5cdFx0XHRcdFx0Lz5cblx0XHRcdFx0KSA6IChcblx0XHRcdFx0XHQ8ZGl2XG5cdFx0XHRcdFx0XHRzdHlsZT17e1xuXHRcdFx0XHRcdFx0XHR3aWR0aDogJzEwMCUnLFxuXHRcdFx0XHRcdFx0XHRoZWlnaHQ6ICcxMDAlJyxcblx0XHRcdFx0XHRcdFx0YmFja2dyb3VuZENvbG9yOiAndmFyKC0tY29sb3ItbXV0ZWQtMiknLFxuXHRcdFx0XHRcdFx0XHRkaXNwbGF5OiAnZmxleCcsXG5cdFx0XHRcdFx0XHRcdGFsaWduSXRlbXM6ICdjZW50ZXInLFxuXHRcdFx0XHRcdFx0XHRqdXN0aWZ5Q29udGVudDogJ2NlbnRlcicsXG5cdFx0XHRcdFx0XHRcdGJvcmRlcjogJzFweCBzb2xpZCB2YXIoLS1jb2xvci1tdXRlZC0xKScsXG5cdFx0XHRcdFx0XHR9fVxuXHRcdFx0XHRcdD5cblx0XHRcdFx0XHRcdDxEZWZhdWx0U3Bpbm5lciAvPlxuXHRcdFx0XHRcdDwvZGl2PlxuXHRcdFx0XHQpfVxuXHRcdFx0XHQ8ZGl2XG5cdFx0XHRcdFx0c3R5bGU9e3tcblx0XHRcdFx0XHRcdHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxuXHRcdFx0XHRcdFx0dG9wOiAwLFxuXHRcdFx0XHRcdFx0cmlnaHQ6IC00MCxcblx0XHRcdFx0XHRcdGhlaWdodDogNDAsXG5cdFx0XHRcdFx0XHR3aWR0aDogNDAsXG5cdFx0XHRcdFx0XHRkaXNwbGF5OiAnZmxleCcsXG5cdFx0XHRcdFx0XHRhbGlnbkl0ZW1zOiAnY2VudGVyJyxcblx0XHRcdFx0XHRcdGp1c3RpZnlDb250ZW50OiAnY2VudGVyJyxcblx0XHRcdFx0XHRcdGN1cnNvcjogJ3BvaW50ZXInLFxuXHRcdFx0XHRcdFx0cG9pbnRlckV2ZW50czogJ2FsbCcsXG5cdFx0XHRcdFx0fX1cblx0XHRcdFx0XHRvbkNsaWNrPXsoKSA9PiB7XG5cdFx0XHRcdFx0XHRpZiAobmF2aWdhdG9yICYmIG5hdmlnYXRvci5jbGlwYm9hcmQpIHtcblx0XHRcdFx0XHRcdFx0bmF2aWdhdG9yLmNsaXBib2FyZC53cml0ZVRleHQoc2hhcGUucHJvcHMuaHRtbClcblx0XHRcdFx0XHRcdFx0dG9hc3QuYWRkVG9hc3Qoe1xuXHRcdFx0XHRcdFx0XHRcdGljb246ICdkdXBsaWNhdGUnLFxuXHRcdFx0XHRcdFx0XHRcdHRpdGxlOiAnQ29waWVkIHRvIGNsaXBib2FyZCcsXG5cdFx0XHRcdFx0XHRcdH0pXG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fX1cblx0XHRcdFx0XHRvblBvaW50ZXJEb3duPXtzdG9wRXZlbnRQcm9wYWdhdGlvbn1cblx0XHRcdFx0PlxuXHRcdFx0XHRcdDxJY29uIGljb249XCJkdXBsaWNhdGVcIiAvPlxuXHRcdFx0XHQ8L2Rpdj5cblx0XHRcdFx0e2h0bWxUb1VzZSAmJiAoXG5cdFx0XHRcdFx0PGRpdlxuXHRcdFx0XHRcdFx0c3R5bGU9e3tcblx0XHRcdFx0XHRcdFx0dGV4dEFsaWduOiAnY2VudGVyJyxcblx0XHRcdFx0XHRcdFx0cG9zaXRpb246ICdhYnNvbHV0ZScsXG5cdFx0XHRcdFx0XHRcdGJvdHRvbTogaXNFZGl0aW5nID8gLTQwIDogMCxcblx0XHRcdFx0XHRcdFx0cGFkZGluZzogNCxcblx0XHRcdFx0XHRcdFx0Zm9udEZhbWlseTogJ2luaGVyaXQnLFxuXHRcdFx0XHRcdFx0XHRmb250U2l6ZTogMTIsXG5cdFx0XHRcdFx0XHRcdGxlZnQ6IDAsXG5cdFx0XHRcdFx0XHRcdHdpZHRoOiAnMTAwJScsXG5cdFx0XHRcdFx0XHRcdGRpc3BsYXk6ICdmbGV4Jyxcblx0XHRcdFx0XHRcdFx0YWxpZ25JdGVtczogJ2NlbnRlcicsXG5cdFx0XHRcdFx0XHRcdGp1c3RpZnlDb250ZW50OiAnY2VudGVyJyxcblx0XHRcdFx0XHRcdFx0cG9pbnRlckV2ZW50czogJ25vbmUnLFxuXHRcdFx0XHRcdFx0fX1cblx0XHRcdFx0XHQ+XG5cdFx0XHRcdFx0XHQ8c3BhblxuXHRcdFx0XHRcdFx0XHRzdHlsZT17e1xuXHRcdFx0XHRcdFx0XHRcdGJhY2tncm91bmQ6ICd2YXIoLS1jb2xvci1wYW5lbCknLFxuXHRcdFx0XHRcdFx0XHRcdHBhZGRpbmc6ICc0cHggMTJweCcsXG5cdFx0XHRcdFx0XHRcdFx0Ym9yZGVyUmFkaXVzOiA5OSxcblx0XHRcdFx0XHRcdFx0XHRib3JkZXI6ICcxcHggc29saWQgdmFyKC0tY29sb3ItbXV0ZWQtMSknLFxuXHRcdFx0XHRcdFx0XHR9fVxuXHRcdFx0XHRcdFx0PlxuXHRcdFx0XHRcdFx0XHR7aXNFZGl0aW5nID8gJ0NsaWNrIHRoZSBjYW52YXMgdG8gZXhpdCcgOiAnRG91YmxlIGNsaWNrIHRvIGludGVyYWN0J31cblx0XHRcdFx0XHRcdDwvc3Bhbj5cblx0XHRcdFx0XHQ8L2Rpdj5cblx0XHRcdFx0KX1cblx0XHRcdDwvSFRNTENvbnRhaW5lcj5cblx0XHQpXG5cdH1cblxuXHRvdmVycmlkZSB0b1N2ZyhzaGFwZTogUHJldmlld1NoYXBlLCBfY3R4OiBTdmdFeHBvcnRDb250ZXh0KTogU1ZHRWxlbWVudCB8IFByb21pc2U8U1ZHRWxlbWVudD4ge1xuXHRcdGNvbnN0IGcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJywgJ2cnKVxuXHRcdC8vIHdoaWxlIHNjcmVlbnNob3QgaXMgdGhlIHNhbWUgYXMgdGhlIG9sZCBvbmUsIGtlZXAgd2FpdGluZyBmb3IgYSBuZXcgb25lXG5cdFx0cmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCBfKSA9PiB7XG5cdFx0XHRpZiAod2luZG93ID09PSB1bmRlZmluZWQpIHJldHVybiByZXNvbHZlKGcpXG5cdFx0XHRjb25zdCB3aW5kb3dMaXN0ZW5lciA9IChldmVudDogTWVzc2FnZUV2ZW50KSA9PiB7XG5cdFx0XHRcdGlmIChldmVudC5kYXRhLnNjcmVlbnNob3QgJiYgZXZlbnQuZGF0YT8uc2hhcGVpZCA9PT0gc2hhcGUuaWQpIHtcblx0XHRcdFx0XHRjb25zdCBpbWFnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUygnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnLCAnaW1hZ2UnKVxuXHRcdFx0XHRcdGltYWdlLnNldEF0dHJpYnV0ZU5TKCdodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rJywgJ2hyZWYnLCBldmVudC5kYXRhLnNjcmVlbnNob3QpXG5cdFx0XHRcdFx0aW1hZ2Uuc2V0QXR0cmlidXRlKCd3aWR0aCcsIHNoYXBlLnByb3BzLncudG9TdHJpbmcoKSlcblx0XHRcdFx0XHRpbWFnZS5zZXRBdHRyaWJ1dGUoJ2hlaWdodCcsIHNoYXBlLnByb3BzLmgudG9TdHJpbmcoKSlcblx0XHRcdFx0XHRnLmFwcGVuZENoaWxkKGltYWdlKVxuXHRcdFx0XHRcdHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgd2luZG93TGlzdGVuZXIpXG5cdFx0XHRcdFx0Y2xlYXJUaW1lb3V0KHRpbWVPdXQpXG5cdFx0XHRcdFx0cmVzb2x2ZShnKVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRjb25zdCB0aW1lT3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XG5cdFx0XHRcdHJlc29sdmUoZylcblx0XHRcdFx0d2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCB3aW5kb3dMaXN0ZW5lcilcblx0XHRcdH0sIDIwMDApXG5cdFx0XHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIHdpbmRvd0xpc3RlbmVyKVxuXHRcdFx0Ly9yZXF1ZXN0IG5ldyBzY3JlZW5zaG90XG5cdFx0XHRjb25zdCBmaXJzdExldmVsSWZyYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYGlmcmFtZS0xLSR7c2hhcGUuaWR9YCkgYXMgSFRNTElGcmFtZUVsZW1lbnRcblx0XHRcdGlmIChmaXJzdExldmVsSWZyYW1lKSB7XG5cdFx0XHRcdGZpcnN0TGV2ZWxJZnJhbWUuY29udGVudFdpbmRvdyEucG9zdE1lc3NhZ2UoXG5cdFx0XHRcdFx0eyBhY3Rpb246ICd0YWtlLXNjcmVlbnNob3QnLCBzaGFwZWlkOiBzaGFwZS5pZCB9LFxuXHRcdFx0XHRcdCcqJ1xuXHRcdFx0XHQpXG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRjb25zb2xlLmxvZygnZmlyc3QgbGV2ZWwgaWZyYW1lIG5vdCBmb3VuZCBvciBub3QgYWNjZXNzaWJsZScpXG5cdFx0XHR9XG5cdFx0fSlcblx0fVxuXG5cdGluZGljYXRvcihzaGFwZTogUHJldmlld1NoYXBlKSB7XG5cdFx0cmV0dXJuIDxyZWN0IHdpZHRoPXtzaGFwZS5wcm9wcy53fSBoZWlnaHQ9e3NoYXBlLnByb3BzLmh9IC8+XG5cdH1cbn1cblxuZnVuY3Rpb24gZ2V0Um90YXRlZEJveFNoYWRvdyhyb3RhdGlvbjogbnVtYmVyKSB7XG5cdGNvbnN0IGNzc1N0cmluZ3MgPSBST1RBVElOR19CT1hfU0hBRE9XUy5tYXAoKHNoYWRvdykgPT4ge1xuXHRcdGNvbnN0IHsgb2Zmc2V0WCwgb2Zmc2V0WSwgYmx1ciwgc3ByZWFkLCBjb2xvciB9ID0gc2hhZG93XG5cdFx0Y29uc3QgdmVjID0gbmV3IFZlYyhvZmZzZXRYLCBvZmZzZXRZKVxuXHRcdGNvbnN0IHsgeCwgeSB9ID0gdmVjLnJvdCgtcm90YXRpb24pXG5cdFx0cmV0dXJuIGAke3h9cHggJHt5fXB4ICR7Ymx1cn1weCAke3NwcmVhZH1weCAke2NvbG9yfWBcblx0fSlcblx0cmV0dXJuIGNzc1N0cmluZ3Muam9pbignLCAnKVxufVxuXG5jb25zdCBST1RBVElOR19CT1hfU0hBRE9XUyA9IFtcblx0e1xuXHRcdG9mZnNldFg6IDAsXG5cdFx0b2Zmc2V0WTogMixcblx0XHRibHVyOiA0LFxuXHRcdHNwcmVhZDogLTEsXG5cdFx0Y29sb3I6ICcjMDAwMDAwM2EnLFxuXHR9LFxuXHR7XG5cdFx0b2Zmc2V0WDogMCxcblx0XHRvZmZzZXRZOiAzLFxuXHRcdGJsdXI6IDEyLFxuXHRcdHNwcmVhZDogLTIsXG5cdFx0Y29sb3I6ICcjMDAwMDAwMWYnLFxuXHR9LFxuXVxuIl0sIm5hbWVzIjpbIkJhc2VCb3hTaGFwZVV0aWwiLCJEZWZhdWx0U3Bpbm5lciIsIkhUTUxDb250YWluZXIiLCJJY29uIiwiVmVjIiwic3RvcEV2ZW50UHJvcGFnYXRpb24iLCJ0b0RvbVByZWNpc2lvbiIsInVzZUlzRWRpdGluZyIsInVzZVRvYXN0cyIsInVzZVZhbHVlIiwiUHJldmlld1NoYXBlVXRpbCIsInR5cGUiLCJnZXREZWZhdWx0UHJvcHMiLCJodG1sIiwidyIsImgiLCJjb21wb25lbnQiLCJzaGFwZSIsImlzRWRpdGluZyIsImlkIiwidG9hc3QiLCJib3hTaGFkb3ciLCJyb3RhdGlvbiIsImVkaXRvciIsImdldFNoYXBlUGFnZVRyYW5zZm9ybSIsImdldFJvdGF0ZWRCb3hTaGFkb3ciLCJodG1sVG9Vc2UiLCJwcm9wcyIsInJlcGxhY2UiLCJjbGFzc05hbWUiLCJpZnJhbWUiLCJzcmNEb2MiLCJ3aWR0aCIsImhlaWdodCIsImRyYWdnYWJsZSIsInN0eWxlIiwicG9pbnRlckV2ZW50cyIsImJvcmRlciIsImJvcmRlclJhZGl1cyIsImRpdiIsImJhY2tncm91bmRDb2xvciIsImRpc3BsYXkiLCJhbGlnbkl0ZW1zIiwianVzdGlmeUNvbnRlbnQiLCJwb3NpdGlvbiIsInRvcCIsInJpZ2h0IiwiY3Vyc29yIiwib25DbGljayIsIm5hdmlnYXRvciIsImNsaXBib2FyZCIsIndyaXRlVGV4dCIsImFkZFRvYXN0IiwiaWNvbiIsInRpdGxlIiwib25Qb2ludGVyRG93biIsInRleHRBbGlnbiIsImJvdHRvbSIsInBhZGRpbmciLCJmb250RmFtaWx5IiwiZm9udFNpemUiLCJsZWZ0Iiwic3BhbiIsImJhY2tncm91bmQiLCJ0b1N2ZyIsIl9jdHgiLCJnIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50TlMiLCJQcm9taXNlIiwicmVzb2x2ZSIsIl8iLCJ3aW5kb3ciLCJ1bmRlZmluZWQiLCJ3aW5kb3dMaXN0ZW5lciIsImV2ZW50IiwiZGF0YSIsInNjcmVlbnNob3QiLCJzaGFwZWlkIiwiaW1hZ2UiLCJzZXRBdHRyaWJ1dGVOUyIsInNldEF0dHJpYnV0ZSIsInRvU3RyaW5nIiwiYXBwZW5kQ2hpbGQiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiY2xlYXJUaW1lb3V0IiwidGltZU91dCIsInNldFRpbWVvdXQiLCJhZGRFdmVudExpc3RlbmVyIiwiZmlyc3RMZXZlbElmcmFtZSIsImdldEVsZW1lbnRCeUlkIiwiY29udGVudFdpbmRvdyIsInBvc3RNZXNzYWdlIiwiYWN0aW9uIiwiY29uc29sZSIsImxvZyIsImluZGljYXRvciIsInJlY3QiLCJjYW5FZGl0IiwiaXNBc3BlY3RSYXRpb0xvY2tlZCIsImNhblJlc2l6ZSIsImNhbkJpbmQiLCJjYW5Vbm1vdW50IiwiY3NzU3RyaW5ncyIsIlJPVEFUSU5HX0JPWF9TSEFET1dTIiwibWFwIiwic2hhZG93Iiwib2Zmc2V0WCIsIm9mZnNldFkiLCJibHVyIiwic3ByZWFkIiwiY29sb3IiLCJ2ZWMiLCJ4IiwieSIsInJvdCIsImpvaW4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./app/PreviewShape/PreviewShape.tsx\n");

/***/ }),

/***/ "(ssr)/./app/components/AutoDrawButton.tsx":
/*!*******************************************!*\
  !*** ./app/components/AutoDrawButton.tsx ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AutoDrawButton: () => (/* binding */ AutoDrawButton)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _tldraw_tldraw__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @tldraw/tldraw */ \"(ssr)/./node_modules/@tldraw/tldraw/dist-esm/index.mjs\");\n/* harmony import */ var _lib_vibe3DCode__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../lib/vibe3DCode */ \"(ssr)/./app/lib/vibe3DCode.tsx\");\n\n\n\n\nfunction AutoDrawButton() {\n    const [enabled, setEnabled] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const editor = (0,_tldraw_tldraw__WEBPACK_IMPORTED_MODULE_2__.useEditor)();\n    const { addToast } = (0,_tldraw_tldraw__WEBPACK_IMPORTED_MODULE_2__.useToasts)();\n    // Toggle auto-drawing feature\n    const handleClick = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(()=>{\n        setEnabled((prev)=>!prev);\n    }, []);\n    // Create a custom implementation for useAutoModel\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (!enabled || !editor) return;\n        // Create an array to store shape IDs and a ref for the timeout\n        const drawingShapes = [];\n        let timeout = null;\n        // Add initial toast notification\n        addToast({\n            title: \"Auto 3D Enabled\",\n            description: \"Draw something and pause for 3 seconds to generate a 3D model\",\n            icon: \"check\"\n        });\n        // Function to generate 3D model when drawing pauses\n        const generate3DModel = async ()=>{\n            if (drawingShapes.length === 0) return;\n            try {\n                // Select all the shapes we've tracked\n                editor.selectNone();\n                drawingShapes.forEach((id)=>{\n                    const shape = editor.getShape(id);\n                    if (shape) {\n                        editor.select(id);\n                    }\n                });\n                // Show a toast while generating\n                addToast({\n                    id: \"generating-3d\",\n                    title: \"Generating 3D Model\",\n                    description: \"Creating a 3D model from your drawing...\",\n                    icon: \"external-link\"\n                });\n                // Call the vibe3DCode function\n                try {\n                    await (0,_lib_vibe3DCode__WEBPACK_IMPORTED_MODULE_3__.vibe3DCode)(editor);\n                } catch (e) {\n                    console.error(e);\n                    addToast({\n                        icon: \"cross-2\",\n                        title: \"Something went wrong\",\n                        description: e.message.slice(0, 100)\n                    });\n                }\n                // Success toast\n                addToast({\n                    title: \"Success!\",\n                    description: \"3D model created\",\n                    icon: \"check\"\n                });\n                // Clear the tracked shapes\n                drawingShapes.length = 0;\n            } catch (error) {\n                console.error(\"Error generating 3D model:\", error);\n                // Error toast\n                addToast({\n                    title: \"Error\",\n                    description: error.message || \"Failed to generate 3D model\",\n                    icon: \"cross\"\n                });\n            }\n        };\n        // Listen for drawing events\n        const handleChangeEvent = (change)=>{\n            // Handle shape updates\n            if (change.changes?.updated) {\n                for (const entry of Object.values(change.changes.updated)){\n                    const [from, to] = Array.isArray(entry) ? entry : [\n                        null,\n                        null\n                    ];\n                    if (from && to && \"typeName\" in from && \"typeName\" in to && from.typeName === \"shape\" && to.typeName === \"shape\" && \"type\" in to && to.type === \"draw\" && \"id\" in to) {\n                        // Track the shape ID\n                        const shapeId = to.id;\n                        if (!drawingShapes.includes(shapeId)) {\n                            drawingShapes.push(shapeId);\n                        }\n                        // Reset the timeout\n                        if (timeout) {\n                            clearTimeout(timeout);\n                        }\n                        // Set a new timeout\n                        timeout = setTimeout(generate3DModel, 3000);\n                    }\n                }\n            }\n            // Handle new shapes\n            if (change.changes?.added) {\n                for (const record of Object.values(change.changes.added)){\n                    if (record && typeof record === \"object\" && \"typeName\" in record && record.typeName === \"shape\" && \"type\" in record && record.type === \"draw\" && \"id\" in record) {\n                        // Track the shape ID\n                        const shapeId = record.id;\n                        if (!drawingShapes.includes(shapeId)) {\n                            drawingShapes.push(shapeId);\n                        }\n                        // Reset the timeout\n                        if (timeout) {\n                            clearTimeout(timeout);\n                        }\n                        // Set a new timeout\n                        timeout = setTimeout(generate3DModel, 3000);\n                    }\n                }\n            }\n            // Handle removed shapes (erased or deleted)\n            if (change.changes?.removed) {\n                let removedShapes = false;\n                for (const record of Object.values(change.changes.removed)){\n                    if (record && typeof record === \"object\" && \"typeName\" in record && record.typeName === \"shape\" && \"id\" in record) {\n                        const shapeId = record.id;\n                        const index = drawingShapes.indexOf(shapeId);\n                        if (index !== -1) {\n                            // Remove the shape ID from our tracking array\n                            drawingShapes.splice(index, 1);\n                            removedShapes = true;\n                        }\n                    }\n                }\n                // If shapes were removed and we still have some left, reset the timeout\n                if (removedShapes && drawingShapes.length > 0) {\n                    if (timeout) {\n                        clearTimeout(timeout);\n                    }\n                    timeout = setTimeout(generate3DModel, 3000);\n                }\n            }\n            // Check for potentially removed shapes (like after undo)\n            const stillExists = drawingShapes.filter((id)=>!!editor.getShape(id));\n            // If we lost some shapes, update our tracking array\n            if (stillExists.length !== drawingShapes.length) {\n                // Replace the array contents with only shapes that still exist\n                drawingShapes.length = 0;\n                stillExists.forEach((id)=>drawingShapes.push(id));\n                // Reset the timeout if we still have shapes\n                if (drawingShapes.length > 0) {\n                    if (timeout) {\n                        clearTimeout(timeout);\n                    }\n                    timeout = setTimeout(generate3DModel, 3000);\n                }\n            }\n        };\n        // Register the event listener\n        const cleanup = editor.store.listen(handleChangeEvent, {\n            source: \"user\",\n            scope: \"all\"\n        });\n        // Return cleanup function\n        return ()=>{\n            cleanup();\n            if (timeout) {\n                clearTimeout(timeout);\n            }\n            addToast({\n                title: \"Auto 3D Disabled\",\n                description: \"Automatic 3D model generation turned off\",\n                icon: \"cross\"\n            });\n        };\n    }, [\n        enabled,\n        editor,\n        addToast\n    ]);\n    // Sync/refresh icon as an SVG\n    const SyncIcon = ()=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n            width: \"16\",\n            height: \"16\",\n            viewBox: \"0 0 24 24\",\n            fill: \"none\",\n            stroke: \"currentColor\",\n            strokeWidth: \"2\",\n            strokeLinecap: \"round\",\n            strokeLinejoin: \"round\",\n            className: enabled ? \"rotating\" : \"\",\n            style: {\n                animation: enabled ? \"rotate 2s linear infinite\" : \"none\"\n            },\n            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                d: \"M21.5 2v6h-6M21.34 15.57a10 10 0 1 1-.57-8.38\"\n            }, void 0, false, {\n                fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/components/AutoDrawButton.tsx\",\n                lineNumber: 234,\n                columnNumber: 7\n            }, this)\n        }, void 0, false, {\n            fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/components/AutoDrawButton.tsx\",\n            lineNumber: 220,\n            columnNumber: 5\n        }, this);\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n        className: \"autoDrawButton\",\n        onClick: handleClick,\n        style: {\n            backgroundColor: enabled ? \"#007bff\" : \"#6c757d\",\n            color: \"white\",\n            marginLeft: \"-3px\",\n            padding: \"6px 12px\",\n            borderRadius: \"4px\",\n            border: \"none\",\n            cursor: \"pointer\",\n            fontSize: \"18px\",\n            fontWeight: 400,\n            display: \"flex\",\n            alignItems: \"center\",\n            justifyContent: \"center\",\n            gap: \"3px\",\n            transition: \"all 0.2s ease\"\n        },\n        onMouseEnter: (e)=>{\n            e.currentTarget.style.boxShadow = \"0 4px 8px rgba(0,0,0,0.15)\";\n            e.currentTarget.style.backgroundColor = enabled ? \"#0069d9\" : \"#5a6268\";\n        },\n        onMouseLeave: (e)=>{\n            e.currentTarget.style.boxShadow = \"0 2px 4px rgba(0,0,0,0.1)\";\n            e.currentTarget.style.backgroundColor = enabled ? \"#007bff\" : \"#6c757d\";\n        },\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(SyncIcon, {}, void 0, false, {\n                fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/components/AutoDrawButton.tsx\",\n                lineNumber: 267,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                children: [\n                    \"Auto 3D \",\n                    enabled ? \"(ON)\" : \"(OFF)\"\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/components/AutoDrawButton.tsx\",\n                lineNumber: 268,\n                columnNumber: 7\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/components/AutoDrawButton.tsx\",\n        lineNumber: 239,\n        columnNumber: 5\n    }, this);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9hcHAvY29tcG9uZW50cy9BdXRvRHJhd0J1dHRvbi50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBd0Q7QUFDUTtBQUNsQjtBQUV2QyxTQUFTTTtJQUNkLE1BQU0sQ0FBQ0MsU0FBU0MsV0FBVyxHQUFHTiwrQ0FBUUEsQ0FBQztJQUN2QyxNQUFNTyxTQUFTTix5REFBU0E7SUFDeEIsTUFBTSxFQUFFTyxRQUFRLEVBQUUsR0FBR04seURBQVNBO0lBRTlCLDhCQUE4QjtJQUM5QixNQUFNTyxjQUFjWCxrREFBV0EsQ0FBQztRQUM5QlEsV0FBV0ksQ0FBQUEsT0FBUSxDQUFDQTtJQUN0QixHQUFHLEVBQUU7SUFFTCxrREFBa0Q7SUFDbERYLGdEQUFTQSxDQUFDO1FBQ1IsSUFBSSxDQUFDTSxXQUFXLENBQUNFLFFBQVE7UUFFekIsK0RBQStEO1FBQy9ELE1BQU1JLGdCQUE2QixFQUFFO1FBQ3JDLElBQUlDLFVBQWlDO1FBRXJDLGlDQUFpQztRQUNqQ0osU0FBUztZQUNQSyxPQUFPO1lBQ1BDLGFBQWE7WUFDYkMsTUFBTTtRQUNSO1FBRUEsb0RBQW9EO1FBQ3BELE1BQU1DLGtCQUFrQjtZQUN0QixJQUFJTCxjQUFjTSxNQUFNLEtBQUssR0FBRztZQUVoQyxJQUFJO2dCQUNGLHNDQUFzQztnQkFDdENWLE9BQU9XLFVBQVU7Z0JBQ2pCUCxjQUFjUSxPQUFPLENBQUNDLENBQUFBO29CQUNwQixNQUFNQyxRQUFRZCxPQUFPZSxRQUFRLENBQUNGO29CQUM5QixJQUFJQyxPQUFPO3dCQUNUZCxPQUFPZ0IsTUFBTSxDQUFDSDtvQkFDaEI7Z0JBQ0Y7Z0JBRUEsZ0NBQWdDO2dCQUNoQ1osU0FBUztvQkFDUFksSUFBSTtvQkFDSlAsT0FBTztvQkFDUEMsYUFBYTtvQkFDYkMsTUFBTTtnQkFDUjtnQkFFQSwrQkFBK0I7Z0JBQy9CLElBQUk7b0JBQ0EsTUFBTVosMkRBQVVBLENBQUNJO2dCQUNyQixFQUFFLE9BQU9pQixHQUFHO29CQUNSQyxRQUFRQyxLQUFLLENBQUNGO29CQUNkaEIsU0FBUzt3QkFDTE8sTUFBTTt3QkFDTkYsT0FBTzt3QkFDUEMsYUFBYSxFQUFhYSxPQUFPLENBQUNDLEtBQUssQ0FBQyxHQUFHO29CQUMvQztnQkFDSjtnQkFFQSxnQkFBZ0I7Z0JBQ2hCcEIsU0FBUztvQkFDUEssT0FBTztvQkFDUEMsYUFBYTtvQkFDYkMsTUFBTTtnQkFDUjtnQkFFQSwyQkFBMkI7Z0JBQzNCSixjQUFjTSxNQUFNLEdBQUc7WUFDekIsRUFBRSxPQUFPUyxPQUFZO2dCQUNuQkQsUUFBUUMsS0FBSyxDQUFDLDhCQUE4QkE7Z0JBRTVDLGNBQWM7Z0JBQ2RsQixTQUFTO29CQUNQSyxPQUFPO29CQUNQQyxhQUFhWSxNQUFNQyxPQUFPLElBQUk7b0JBQzlCWixNQUFNO2dCQUNSO1lBQ0Y7UUFDRjtRQUVBLDRCQUE0QjtRQUM1QixNQUFNYyxvQkFBb0IsQ0FBQ0M7WUFDekIsdUJBQXVCO1lBQ3ZCLElBQUlBLE9BQU9DLE9BQU8sRUFBRUMsU0FBUztnQkFDM0IsS0FBSyxNQUFNQyxTQUFTQyxPQUFPQyxNQUFNLENBQUNMLE9BQU9DLE9BQU8sQ0FBQ0MsT0FBTyxFQUFHO29CQUN6RCxNQUFNLENBQUNJLE1BQU1DLEdBQUcsR0FBR0MsTUFBTUMsT0FBTyxDQUFDTixTQUFTQSxRQUFRO3dCQUFDO3dCQUFNO3FCQUFLO29CQUU5RCxJQUNFRyxRQUNBQyxNQUNBLGNBQWNELFFBQ2QsY0FBY0MsTUFDZEQsS0FBS0ksUUFBUSxLQUFLLFdBQ2xCSCxHQUFHRyxRQUFRLEtBQUssV0FDaEIsVUFBVUgsTUFDVkEsR0FBR0ksSUFBSSxLQUFLLFVBQ1osUUFBUUosSUFDUjt3QkFDQSxxQkFBcUI7d0JBQ3JCLE1BQU1LLFVBQVVMLEdBQUdqQixFQUFFO3dCQUNyQixJQUFJLENBQUNULGNBQWNnQyxRQUFRLENBQUNELFVBQVU7NEJBQ3BDL0IsY0FBY2lDLElBQUksQ0FBQ0Y7d0JBQ3JCO3dCQUVBLG9CQUFvQjt3QkFDcEIsSUFBSTlCLFNBQVM7NEJBQ1hpQyxhQUFhakM7d0JBQ2Y7d0JBRUEsb0JBQW9CO3dCQUNwQkEsVUFBVWtDLFdBQVc5QixpQkFBaUI7b0JBQ3hDO2dCQUNGO1lBQ0Y7WUFFQSxvQkFBb0I7WUFDcEIsSUFBSWMsT0FBT0MsT0FBTyxFQUFFZ0IsT0FBTztnQkFDekIsS0FBSyxNQUFNQyxVQUFVZCxPQUFPQyxNQUFNLENBQUNMLE9BQU9DLE9BQU8sQ0FBQ2dCLEtBQUssRUFBRztvQkFDeEQsSUFDRUMsVUFDQSxPQUFPQSxXQUFXLFlBQ2xCLGNBQWNBLFVBQ2RBLE9BQU9SLFFBQVEsS0FBSyxXQUNwQixVQUFVUSxVQUNWQSxPQUFPUCxJQUFJLEtBQUssVUFDaEIsUUFBUU8sUUFDUjt3QkFDQSxxQkFBcUI7d0JBQ3JCLE1BQU1OLFVBQVVNLE9BQU81QixFQUFFO3dCQUN6QixJQUFJLENBQUNULGNBQWNnQyxRQUFRLENBQUNELFVBQVU7NEJBQ3BDL0IsY0FBY2lDLElBQUksQ0FBQ0Y7d0JBQ3JCO3dCQUVBLG9CQUFvQjt3QkFDcEIsSUFBSTlCLFNBQVM7NEJBQ1hpQyxhQUFhakM7d0JBQ2Y7d0JBRUEsb0JBQW9CO3dCQUNwQkEsVUFBVWtDLFdBQVc5QixpQkFBaUI7b0JBQ3hDO2dCQUNGO1lBQ0Y7WUFFQSw0Q0FBNEM7WUFDNUMsSUFBSWMsT0FBT0MsT0FBTyxFQUFFa0IsU0FBUztnQkFDM0IsSUFBSUMsZ0JBQWdCO2dCQUVwQixLQUFLLE1BQU1GLFVBQVVkLE9BQU9DLE1BQU0sQ0FBQ0wsT0FBT0MsT0FBTyxDQUFDa0IsT0FBTyxFQUFHO29CQUMxRCxJQUNFRCxVQUNBLE9BQU9BLFdBQVcsWUFDbEIsY0FBY0EsVUFDZEEsT0FBT1IsUUFBUSxLQUFLLFdBQ3BCLFFBQVFRLFFBQ1I7d0JBQ0EsTUFBTU4sVUFBVU0sT0FBTzVCLEVBQUU7d0JBQ3pCLE1BQU0rQixRQUFReEMsY0FBY3lDLE9BQU8sQ0FBQ1Y7d0JBRXBDLElBQUlTLFVBQVUsQ0FBQyxHQUFHOzRCQUNoQiw4Q0FBOEM7NEJBQzlDeEMsY0FBYzBDLE1BQU0sQ0FBQ0YsT0FBTzs0QkFDNUJELGdCQUFnQjt3QkFDbEI7b0JBQ0Y7Z0JBQ0Y7Z0JBRUEsd0VBQXdFO2dCQUN4RSxJQUFJQSxpQkFBaUJ2QyxjQUFjTSxNQUFNLEdBQUcsR0FBRztvQkFDN0MsSUFBSUwsU0FBUzt3QkFDWGlDLGFBQWFqQztvQkFDZjtvQkFDQUEsVUFBVWtDLFdBQVc5QixpQkFBaUI7Z0JBQ3hDO1lBQ0Y7WUFFQSx5REFBeUQ7WUFDekQsTUFBTXNDLGNBQWMzQyxjQUFjNEMsTUFBTSxDQUFDbkMsQ0FBQUEsS0FBTSxDQUFDLENBQUNiLE9BQU9lLFFBQVEsQ0FBQ0Y7WUFFakUsb0RBQW9EO1lBQ3BELElBQUlrQyxZQUFZckMsTUFBTSxLQUFLTixjQUFjTSxNQUFNLEVBQUU7Z0JBQy9DLCtEQUErRDtnQkFDL0ROLGNBQWNNLE1BQU0sR0FBRztnQkFDdkJxQyxZQUFZbkMsT0FBTyxDQUFDQyxDQUFBQSxLQUFNVCxjQUFjaUMsSUFBSSxDQUFDeEI7Z0JBRTdDLDRDQUE0QztnQkFDNUMsSUFBSVQsY0FBY00sTUFBTSxHQUFHLEdBQUc7b0JBQzVCLElBQUlMLFNBQVM7d0JBQ1hpQyxhQUFhakM7b0JBQ2Y7b0JBQ0FBLFVBQVVrQyxXQUFXOUIsaUJBQWlCO2dCQUN4QztZQUNGO1FBQ0Y7UUFFQSw4QkFBOEI7UUFDOUIsTUFBTXdDLFVBQVVqRCxPQUFPa0QsS0FBSyxDQUFDQyxNQUFNLENBQUM3QixtQkFBbUI7WUFBRThCLFFBQVE7WUFBUUMsT0FBTztRQUFNO1FBRXRGLDBCQUEwQjtRQUMxQixPQUFPO1lBQ0xKO1lBQ0EsSUFBSTVDLFNBQVM7Z0JBQ1hpQyxhQUFhakM7WUFDZjtZQUVBSixTQUFTO2dCQUNQSyxPQUFPO2dCQUNQQyxhQUFhO2dCQUNiQyxNQUFNO1lBQ1I7UUFDRjtJQUNGLEdBQUc7UUFBQ1Y7UUFBU0U7UUFBUUM7S0FBUztJQUU5Qiw4QkFBOEI7SUFDOUIsTUFBTXFELFdBQVcsa0JBQ2YsOERBQUNDO1lBQ0NDLE9BQU07WUFDTkMsUUFBTztZQUNQQyxTQUFRO1lBQ1JDLE1BQUs7WUFDTEMsUUFBTztZQUNQQyxhQUFZO1lBQ1pDLGVBQWM7WUFDZEMsZ0JBQWU7WUFDZkMsV0FBV2xFLFVBQVUsYUFBYTtZQUNsQ21FLE9BQU87Z0JBQ0xDLFdBQVdwRSxVQUFVLDhCQUE4QjtZQUNyRDtzQkFFQSw0RUFBQ3FFO2dCQUFLQyxHQUFFOzs7Ozs7Ozs7OztJQUlaLHFCQUNFLDhEQUFDQztRQUNDTCxXQUFVO1FBQ1ZNLFNBQVNwRTtRQUNUK0QsT0FBTztZQUNMTSxpQkFBaUJ6RSxVQUFVLFlBQVk7WUFDdkMwRSxPQUFPO1lBQ1BDLFlBQVk7WUFDWkMsU0FBUztZQUNUQyxjQUFjO1lBQ2RDLFFBQVE7WUFDUkMsUUFBUTtZQUNSQyxVQUFVO1lBQ1ZDLFlBQVk7WUFDWkMsU0FBUztZQUNUQyxZQUFZO1lBQ1pDLGdCQUFnQjtZQUNoQkMsS0FBSztZQUNMQyxZQUFZO1FBQ2Q7UUFDQUMsY0FBYyxDQUFDcEU7WUFDYkEsRUFBRXFFLGFBQWEsQ0FBQ3JCLEtBQUssQ0FBQ3NCLFNBQVMsR0FBRztZQUNsQ3RFLEVBQUVxRSxhQUFhLENBQUNyQixLQUFLLENBQUNNLGVBQWUsR0FBR3pFLFVBQVUsWUFBWTtRQUNoRTtRQUNBMEYsY0FBYyxDQUFDdkU7WUFDYkEsRUFBRXFFLGFBQWEsQ0FBQ3JCLEtBQUssQ0FBQ3NCLFNBQVMsR0FBRztZQUNsQ3RFLEVBQUVxRSxhQUFhLENBQUNyQixLQUFLLENBQUNNLGVBQWUsR0FBR3pFLFVBQVUsWUFBWTtRQUNoRTs7MEJBRUEsOERBQUN3RDs7Ozs7MEJBQ0QsOERBQUNtQzs7b0JBQUs7b0JBQVMzRixVQUFVLFNBQVM7Ozs7Ozs7Ozs7Ozs7QUFHeEMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92aWJlLTNkLWNvZGUvLi9hcHAvY29tcG9uZW50cy9BdXRvRHJhd0J1dHRvbi50c3g/YTIxNSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1c2VDYWxsYmFjaywgdXNlRWZmZWN0LCB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0J1xuaW1wb3J0IHsgdXNlRWRpdG9yLCB1c2VUb2FzdHMsIFRMU2hhcGVJZCB9IGZyb20gJ0B0bGRyYXcvdGxkcmF3J1xuaW1wb3J0IHsgdmliZTNEQ29kZSB9IGZyb20gJy4uL2xpYi92aWJlM0RDb2RlJ1xuXG5leHBvcnQgZnVuY3Rpb24gQXV0b0RyYXdCdXR0b24oKSB7XG4gIGNvbnN0IFtlbmFibGVkLCBzZXRFbmFibGVkXSA9IHVzZVN0YXRlKGZhbHNlKVxuICBjb25zdCBlZGl0b3IgPSB1c2VFZGl0b3IoKVxuICBjb25zdCB7IGFkZFRvYXN0IH0gPSB1c2VUb2FzdHMoKVxuICBcbiAgLy8gVG9nZ2xlIGF1dG8tZHJhd2luZyBmZWF0dXJlXG4gIGNvbnN0IGhhbmRsZUNsaWNrID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xuICAgIHNldEVuYWJsZWQocHJldiA9PiAhcHJldilcbiAgfSwgW10pXG4gIFxuICAvLyBDcmVhdGUgYSBjdXN0b20gaW1wbGVtZW50YXRpb24gZm9yIHVzZUF1dG9Nb2RlbFxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghZW5hYmxlZCB8fCAhZWRpdG9yKSByZXR1cm5cbiAgICBcbiAgICAvLyBDcmVhdGUgYW4gYXJyYXkgdG8gc3RvcmUgc2hhcGUgSURzIGFuZCBhIHJlZiBmb3IgdGhlIHRpbWVvdXRcbiAgICBjb25zdCBkcmF3aW5nU2hhcGVzOiBUTFNoYXBlSWRbXSA9IFtdXG4gICAgbGV0IHRpbWVvdXQ6IE5vZGVKUy5UaW1lb3V0IHwgbnVsbCA9IG51bGxcbiAgICBcbiAgICAvLyBBZGQgaW5pdGlhbCB0b2FzdCBub3RpZmljYXRpb25cbiAgICBhZGRUb2FzdCh7XG4gICAgICB0aXRsZTogJ0F1dG8gM0QgRW5hYmxlZCcsXG4gICAgICBkZXNjcmlwdGlvbjogJ0RyYXcgc29tZXRoaW5nIGFuZCBwYXVzZSBmb3IgMyBzZWNvbmRzIHRvIGdlbmVyYXRlIGEgM0QgbW9kZWwnLFxuICAgICAgaWNvbjogJ2NoZWNrJyxcbiAgICB9KVxuICAgIFxuICAgIC8vIEZ1bmN0aW9uIHRvIGdlbmVyYXRlIDNEIG1vZGVsIHdoZW4gZHJhd2luZyBwYXVzZXNcbiAgICBjb25zdCBnZW5lcmF0ZTNETW9kZWwgPSBhc3luYyAoKSA9PiB7XG4gICAgICBpZiAoZHJhd2luZ1NoYXBlcy5sZW5ndGggPT09IDApIHJldHVyblxuICAgICAgXG4gICAgICB0cnkge1xuICAgICAgICAvLyBTZWxlY3QgYWxsIHRoZSBzaGFwZXMgd2UndmUgdHJhY2tlZFxuICAgICAgICBlZGl0b3Iuc2VsZWN0Tm9uZSgpXG4gICAgICAgIGRyYXdpbmdTaGFwZXMuZm9yRWFjaChpZCA9PiB7XG4gICAgICAgICAgY29uc3Qgc2hhcGUgPSBlZGl0b3IuZ2V0U2hhcGUoaWQpXG4gICAgICAgICAgaWYgKHNoYXBlKSB7XG4gICAgICAgICAgICBlZGl0b3Iuc2VsZWN0KGlkKVxuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgXG4gICAgICAgIC8vIFNob3cgYSB0b2FzdCB3aGlsZSBnZW5lcmF0aW5nXG4gICAgICAgIGFkZFRvYXN0KHtcbiAgICAgICAgICBpZDogJ2dlbmVyYXRpbmctM2QnLFxuICAgICAgICAgIHRpdGxlOiAnR2VuZXJhdGluZyAzRCBNb2RlbCcsXG4gICAgICAgICAgZGVzY3JpcHRpb246ICdDcmVhdGluZyBhIDNEIG1vZGVsIGZyb20geW91ciBkcmF3aW5nLi4uJyxcbiAgICAgICAgICBpY29uOiAnZXh0ZXJuYWwtbGluaycsXG4gICAgICAgIH0pXG4gICAgICAgIFxuICAgICAgICAvLyBDYWxsIHRoZSB2aWJlM0RDb2RlIGZ1bmN0aW9uXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCB2aWJlM0RDb2RlKGVkaXRvcilcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlKVxuICAgICAgICAgICAgYWRkVG9hc3Qoe1xuICAgICAgICAgICAgICAgIGljb246ICdjcm9zcy0yJyxcbiAgICAgICAgICAgICAgICB0aXRsZTogJ1NvbWV0aGluZyB3ZW50IHdyb25nJyxcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogKGUgYXMgRXJyb3IpLm1lc3NhZ2Uuc2xpY2UoMCwgMTAwKSxcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIFN1Y2Nlc3MgdG9hc3RcbiAgICAgICAgYWRkVG9hc3Qoe1xuICAgICAgICAgIHRpdGxlOiAnU3VjY2VzcyEnLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiAnM0QgbW9kZWwgY3JlYXRlZCcsXG4gICAgICAgICAgaWNvbjogJ2NoZWNrJyxcbiAgICAgICAgfSlcbiAgICAgICAgXG4gICAgICAgIC8vIENsZWFyIHRoZSB0cmFja2VkIHNoYXBlc1xuICAgICAgICBkcmF3aW5nU2hhcGVzLmxlbmd0aCA9IDBcbiAgICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZ2VuZXJhdGluZyAzRCBtb2RlbDonLCBlcnJvcilcbiAgICAgICAgXG4gICAgICAgIC8vIEVycm9yIHRvYXN0XG4gICAgICAgIGFkZFRvYXN0KHtcbiAgICAgICAgICB0aXRsZTogJ0Vycm9yJyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogZXJyb3IubWVzc2FnZSB8fCAnRmFpbGVkIHRvIGdlbmVyYXRlIDNEIG1vZGVsJyxcbiAgICAgICAgICBpY29uOiAnY3Jvc3MnLFxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvLyBMaXN0ZW4gZm9yIGRyYXdpbmcgZXZlbnRzXG4gICAgY29uc3QgaGFuZGxlQ2hhbmdlRXZlbnQgPSAoY2hhbmdlOiBhbnkpID0+IHtcbiAgICAgIC8vIEhhbmRsZSBzaGFwZSB1cGRhdGVzXG4gICAgICBpZiAoY2hhbmdlLmNoYW5nZXM/LnVwZGF0ZWQpIHtcbiAgICAgICAgZm9yIChjb25zdCBlbnRyeSBvZiBPYmplY3QudmFsdWVzKGNoYW5nZS5jaGFuZ2VzLnVwZGF0ZWQpKSB7XG4gICAgICAgICAgY29uc3QgW2Zyb20sIHRvXSA9IEFycmF5LmlzQXJyYXkoZW50cnkpID8gZW50cnkgOiBbbnVsbCwgbnVsbF1cbiAgICAgICAgICBcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICBmcm9tICYmIFxuICAgICAgICAgICAgdG8gJiYgXG4gICAgICAgICAgICAndHlwZU5hbWUnIGluIGZyb20gJiYgXG4gICAgICAgICAgICAndHlwZU5hbWUnIGluIHRvICYmIFxuICAgICAgICAgICAgZnJvbS50eXBlTmFtZSA9PT0gJ3NoYXBlJyAmJiBcbiAgICAgICAgICAgIHRvLnR5cGVOYW1lID09PSAnc2hhcGUnICYmIFxuICAgICAgICAgICAgJ3R5cGUnIGluIHRvICYmIFxuICAgICAgICAgICAgdG8udHlwZSA9PT0gJ2RyYXcnICYmXG4gICAgICAgICAgICAnaWQnIGluIHRvXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICAvLyBUcmFjayB0aGUgc2hhcGUgSURcbiAgICAgICAgICAgIGNvbnN0IHNoYXBlSWQgPSB0by5pZCBhcyBUTFNoYXBlSWRcbiAgICAgICAgICAgIGlmICghZHJhd2luZ1NoYXBlcy5pbmNsdWRlcyhzaGFwZUlkKSkge1xuICAgICAgICAgICAgICBkcmF3aW5nU2hhcGVzLnB1c2goc2hhcGVJZClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gUmVzZXQgdGhlIHRpbWVvdXRcbiAgICAgICAgICAgIGlmICh0aW1lb3V0KSB7XG4gICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBTZXQgYSBuZXcgdGltZW91dFxuICAgICAgICAgICAgdGltZW91dCA9IHNldFRpbWVvdXQoZ2VuZXJhdGUzRE1vZGVsLCAzMDAwKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBIYW5kbGUgbmV3IHNoYXBlc1xuICAgICAgaWYgKGNoYW5nZS5jaGFuZ2VzPy5hZGRlZCkge1xuICAgICAgICBmb3IgKGNvbnN0IHJlY29yZCBvZiBPYmplY3QudmFsdWVzKGNoYW5nZS5jaGFuZ2VzLmFkZGVkKSkge1xuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIHJlY29yZCAmJiBcbiAgICAgICAgICAgIHR5cGVvZiByZWNvcmQgPT09ICdvYmplY3QnICYmIFxuICAgICAgICAgICAgJ3R5cGVOYW1lJyBpbiByZWNvcmQgJiYgXG4gICAgICAgICAgICByZWNvcmQudHlwZU5hbWUgPT09ICdzaGFwZScgJiYgXG4gICAgICAgICAgICAndHlwZScgaW4gcmVjb3JkICYmIFxuICAgICAgICAgICAgcmVjb3JkLnR5cGUgPT09ICdkcmF3JyAmJlxuICAgICAgICAgICAgJ2lkJyBpbiByZWNvcmRcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIC8vIFRyYWNrIHRoZSBzaGFwZSBJRFxuICAgICAgICAgICAgY29uc3Qgc2hhcGVJZCA9IHJlY29yZC5pZCBhcyBUTFNoYXBlSWRcbiAgICAgICAgICAgIGlmICghZHJhd2luZ1NoYXBlcy5pbmNsdWRlcyhzaGFwZUlkKSkge1xuICAgICAgICAgICAgICBkcmF3aW5nU2hhcGVzLnB1c2goc2hhcGVJZClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gUmVzZXQgdGhlIHRpbWVvdXRcbiAgICAgICAgICAgIGlmICh0aW1lb3V0KSB7XG4gICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBTZXQgYSBuZXcgdGltZW91dFxuICAgICAgICAgICAgdGltZW91dCA9IHNldFRpbWVvdXQoZ2VuZXJhdGUzRE1vZGVsLCAzMDAwKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBIYW5kbGUgcmVtb3ZlZCBzaGFwZXMgKGVyYXNlZCBvciBkZWxldGVkKVxuICAgICAgaWYgKGNoYW5nZS5jaGFuZ2VzPy5yZW1vdmVkKSB7XG4gICAgICAgIGxldCByZW1vdmVkU2hhcGVzID0gZmFsc2VcbiAgICAgICAgXG4gICAgICAgIGZvciAoY29uc3QgcmVjb3JkIG9mIE9iamVjdC52YWx1ZXMoY2hhbmdlLmNoYW5nZXMucmVtb3ZlZCkpIHtcbiAgICAgICAgICBpZiAoXG4gICAgICAgICAgICByZWNvcmQgJiYgXG4gICAgICAgICAgICB0eXBlb2YgcmVjb3JkID09PSAnb2JqZWN0JyAmJiBcbiAgICAgICAgICAgICd0eXBlTmFtZScgaW4gcmVjb3JkICYmIFxuICAgICAgICAgICAgcmVjb3JkLnR5cGVOYW1lID09PSAnc2hhcGUnICYmIFxuICAgICAgICAgICAgJ2lkJyBpbiByZWNvcmRcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIGNvbnN0IHNoYXBlSWQgPSByZWNvcmQuaWQgYXMgVExTaGFwZUlkXG4gICAgICAgICAgICBjb25zdCBpbmRleCA9IGRyYXdpbmdTaGFwZXMuaW5kZXhPZihzaGFwZUlkKVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgICAgICAgICAgIC8vIFJlbW92ZSB0aGUgc2hhcGUgSUQgZnJvbSBvdXIgdHJhY2tpbmcgYXJyYXlcbiAgICAgICAgICAgICAgZHJhd2luZ1NoYXBlcy5zcGxpY2UoaW5kZXgsIDEpXG4gICAgICAgICAgICAgIHJlbW92ZWRTaGFwZXMgPSB0cnVlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBJZiBzaGFwZXMgd2VyZSByZW1vdmVkIGFuZCB3ZSBzdGlsbCBoYXZlIHNvbWUgbGVmdCwgcmVzZXQgdGhlIHRpbWVvdXRcbiAgICAgICAgaWYgKHJlbW92ZWRTaGFwZXMgJiYgZHJhd2luZ1NoYXBlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgaWYgKHRpbWVvdXQpIHtcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KVxuICAgICAgICAgIH1cbiAgICAgICAgICB0aW1lb3V0ID0gc2V0VGltZW91dChnZW5lcmF0ZTNETW9kZWwsIDMwMDApXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gQ2hlY2sgZm9yIHBvdGVudGlhbGx5IHJlbW92ZWQgc2hhcGVzIChsaWtlIGFmdGVyIHVuZG8pXG4gICAgICBjb25zdCBzdGlsbEV4aXN0cyA9IGRyYXdpbmdTaGFwZXMuZmlsdGVyKGlkID0+ICEhZWRpdG9yLmdldFNoYXBlKGlkKSlcbiAgICAgIFxuICAgICAgLy8gSWYgd2UgbG9zdCBzb21lIHNoYXBlcywgdXBkYXRlIG91ciB0cmFja2luZyBhcnJheVxuICAgICAgaWYgKHN0aWxsRXhpc3RzLmxlbmd0aCAhPT0gZHJhd2luZ1NoYXBlcy5sZW5ndGgpIHtcbiAgICAgICAgLy8gUmVwbGFjZSB0aGUgYXJyYXkgY29udGVudHMgd2l0aCBvbmx5IHNoYXBlcyB0aGF0IHN0aWxsIGV4aXN0XG4gICAgICAgIGRyYXdpbmdTaGFwZXMubGVuZ3RoID0gMFxuICAgICAgICBzdGlsbEV4aXN0cy5mb3JFYWNoKGlkID0+IGRyYXdpbmdTaGFwZXMucHVzaChpZCkpXG4gICAgICAgIFxuICAgICAgICAvLyBSZXNldCB0aGUgdGltZW91dCBpZiB3ZSBzdGlsbCBoYXZlIHNoYXBlc1xuICAgICAgICBpZiAoZHJhd2luZ1NoYXBlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgaWYgKHRpbWVvdXQpIHtcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KVxuICAgICAgICAgIH1cbiAgICAgICAgICB0aW1lb3V0ID0gc2V0VGltZW91dChnZW5lcmF0ZTNETW9kZWwsIDMwMDApXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLy8gUmVnaXN0ZXIgdGhlIGV2ZW50IGxpc3RlbmVyXG4gICAgY29uc3QgY2xlYW51cCA9IGVkaXRvci5zdG9yZS5saXN0ZW4oaGFuZGxlQ2hhbmdlRXZlbnQsIHsgc291cmNlOiAndXNlcicsIHNjb3BlOiAnYWxsJyB9KVxuICAgIFxuICAgIC8vIFJldHVybiBjbGVhbnVwIGZ1bmN0aW9uXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGNsZWFudXAoKVxuICAgICAgaWYgKHRpbWVvdXQpIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpXG4gICAgICB9XG4gICAgICBcbiAgICAgIGFkZFRvYXN0KHtcbiAgICAgICAgdGl0bGU6ICdBdXRvIDNEIERpc2FibGVkJyxcbiAgICAgICAgZGVzY3JpcHRpb246ICdBdXRvbWF0aWMgM0QgbW9kZWwgZ2VuZXJhdGlvbiB0dXJuZWQgb2ZmJyxcbiAgICAgICAgaWNvbjogJ2Nyb3NzJyxcbiAgICAgIH0pXG4gICAgfVxuICB9LCBbZW5hYmxlZCwgZWRpdG9yLCBhZGRUb2FzdF0pXG5cbiAgLy8gU3luYy9yZWZyZXNoIGljb24gYXMgYW4gU1ZHXG4gIGNvbnN0IFN5bmNJY29uID0gKCkgPT4gKFxuICAgIDxzdmcgXG4gICAgICB3aWR0aD1cIjE2XCIgXG4gICAgICBoZWlnaHQ9XCIxNlwiIFxuICAgICAgdmlld0JveD1cIjAgMCAyNCAyNFwiIFxuICAgICAgZmlsbD1cIm5vbmVcIiBcbiAgICAgIHN0cm9rZT1cImN1cnJlbnRDb2xvclwiIFxuICAgICAgc3Ryb2tlV2lkdGg9XCIyXCIgXG4gICAgICBzdHJva2VMaW5lY2FwPVwicm91bmRcIiBcbiAgICAgIHN0cm9rZUxpbmVqb2luPVwicm91bmRcIlxuICAgICAgY2xhc3NOYW1lPXtlbmFibGVkID8gXCJyb3RhdGluZ1wiIDogXCJcIn1cbiAgICAgIHN0eWxlPXt7XG4gICAgICAgIGFuaW1hdGlvbjogZW5hYmxlZCA/ICdyb3RhdGUgMnMgbGluZWFyIGluZmluaXRlJyA6ICdub25lJ1xuICAgICAgfX1cbiAgICA+XG4gICAgICA8cGF0aCBkPVwiTTIxLjUgMnY2aC02TTIxLjM0IDE1LjU3YTEwIDEwIDAgMSAxLS41Ny04LjM4XCIgLz5cbiAgICA8L3N2Zz5cbiAgKVxuXG4gIHJldHVybiAoXG4gICAgPGJ1dHRvbiBcbiAgICAgIGNsYXNzTmFtZT1cImF1dG9EcmF3QnV0dG9uXCIgXG4gICAgICBvbkNsaWNrPXtoYW5kbGVDbGlja31cbiAgICAgIHN0eWxlPXt7IFxuICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IGVuYWJsZWQgPyAnIzAwN2JmZicgOiAnIzZjNzU3ZCcsXG4gICAgICAgIGNvbG9yOiAnd2hpdGUnLFxuICAgICAgICBtYXJnaW5MZWZ0OiAnLTNweCcsXG4gICAgICAgIHBhZGRpbmc6ICc2cHggMTJweCcsXG4gICAgICAgIGJvcmRlclJhZGl1czogJzRweCcsXG4gICAgICAgIGJvcmRlcjogJ25vbmUnLFxuICAgICAgICBjdXJzb3I6ICdwb2ludGVyJyxcbiAgICAgICAgZm9udFNpemU6ICcxOHB4JyxcbiAgICAgICAgZm9udFdlaWdodDogNDAwLFxuICAgICAgICBkaXNwbGF5OiAnZmxleCcsXG4gICAgICAgIGFsaWduSXRlbXM6ICdjZW50ZXInLFxuICAgICAgICBqdXN0aWZ5Q29udGVudDogJ2NlbnRlcicsXG4gICAgICAgIGdhcDogJzNweCcsXG4gICAgICAgIHRyYW5zaXRpb246ICdhbGwgMC4ycyBlYXNlJyxcbiAgICAgIH19XG4gICAgICBvbk1vdXNlRW50ZXI9eyhlKSA9PiB7XG4gICAgICAgIGUuY3VycmVudFRhcmdldC5zdHlsZS5ib3hTaGFkb3cgPSAnMCA0cHggOHB4IHJnYmEoMCwwLDAsMC4xNSknO1xuICAgICAgICBlLmN1cnJlbnRUYXJnZXQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gZW5hYmxlZCA/ICcjMDA2OWQ5JyA6ICcjNWE2MjY4JztcbiAgICAgIH19XG4gICAgICBvbk1vdXNlTGVhdmU9eyhlKSA9PiB7XG4gICAgICAgIGUuY3VycmVudFRhcmdldC5zdHlsZS5ib3hTaGFkb3cgPSAnMCAycHggNHB4IHJnYmEoMCwwLDAsMC4xKSc7XG4gICAgICAgIGUuY3VycmVudFRhcmdldC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBlbmFibGVkID8gJyMwMDdiZmYnIDogJyM2Yzc1N2QnO1xuICAgICAgfX1cbiAgICA+XG4gICAgICA8U3luY0ljb24gLz5cbiAgICAgIDxzcGFuPkF1dG8gM0Qge2VuYWJsZWQgPyAnKE9OKScgOiAnKE9GRiknfTwvc3Bhbj5cbiAgICA8L2J1dHRvbj5cbiAgKVxufSBcbiJdLCJuYW1lcyI6WyJ1c2VDYWxsYmFjayIsInVzZUVmZmVjdCIsInVzZVN0YXRlIiwidXNlRWRpdG9yIiwidXNlVG9hc3RzIiwidmliZTNEQ29kZSIsIkF1dG9EcmF3QnV0dG9uIiwiZW5hYmxlZCIsInNldEVuYWJsZWQiLCJlZGl0b3IiLCJhZGRUb2FzdCIsImhhbmRsZUNsaWNrIiwicHJldiIsImRyYXdpbmdTaGFwZXMiLCJ0aW1lb3V0IiwidGl0bGUiLCJkZXNjcmlwdGlvbiIsImljb24iLCJnZW5lcmF0ZTNETW9kZWwiLCJsZW5ndGgiLCJzZWxlY3ROb25lIiwiZm9yRWFjaCIsImlkIiwic2hhcGUiLCJnZXRTaGFwZSIsInNlbGVjdCIsImUiLCJjb25zb2xlIiwiZXJyb3IiLCJtZXNzYWdlIiwic2xpY2UiLCJoYW5kbGVDaGFuZ2VFdmVudCIsImNoYW5nZSIsImNoYW5nZXMiLCJ1cGRhdGVkIiwiZW50cnkiLCJPYmplY3QiLCJ2YWx1ZXMiLCJmcm9tIiwidG8iLCJBcnJheSIsImlzQXJyYXkiLCJ0eXBlTmFtZSIsInR5cGUiLCJzaGFwZUlkIiwiaW5jbHVkZXMiLCJwdXNoIiwiY2xlYXJUaW1lb3V0Iiwic2V0VGltZW91dCIsImFkZGVkIiwicmVjb3JkIiwicmVtb3ZlZCIsInJlbW92ZWRTaGFwZXMiLCJpbmRleCIsImluZGV4T2YiLCJzcGxpY2UiLCJzdGlsbEV4aXN0cyIsImZpbHRlciIsImNsZWFudXAiLCJzdG9yZSIsImxpc3RlbiIsInNvdXJjZSIsInNjb3BlIiwiU3luY0ljb24iLCJzdmciLCJ3aWR0aCIsImhlaWdodCIsInZpZXdCb3giLCJmaWxsIiwic3Ryb2tlIiwic3Ryb2tlV2lkdGgiLCJzdHJva2VMaW5lY2FwIiwic3Ryb2tlTGluZWpvaW4iLCJjbGFzc05hbWUiLCJzdHlsZSIsImFuaW1hdGlvbiIsInBhdGgiLCJkIiwiYnV0dG9uIiwib25DbGljayIsImJhY2tncm91bmRDb2xvciIsImNvbG9yIiwibWFyZ2luTGVmdCIsInBhZGRpbmciLCJib3JkZXJSYWRpdXMiLCJib3JkZXIiLCJjdXJzb3IiLCJmb250U2l6ZSIsImZvbnRXZWlnaHQiLCJkaXNwbGF5IiwiYWxpZ25JdGVtcyIsImp1c3RpZnlDb250ZW50IiwiZ2FwIiwidHJhbnNpdGlvbiIsIm9uTW91c2VFbnRlciIsImN1cnJlbnRUYXJnZXQiLCJib3hTaGFkb3ciLCJvbk1vdXNlTGVhdmUiLCJzcGFuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./app/components/AutoDrawButton.tsx\n");

/***/ }),

/***/ "(ssr)/./app/components/ImproveDrawingButton.tsx":
/*!*************************************************!*\
  !*** ./app/components/ImproveDrawingButton.tsx ***!
  \*************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ImproveDrawingButton: () => (/* binding */ ImproveDrawingButton)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var styled_jsx_style__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! styled-jsx/style */ \"(ssr)/./node_modules/styled-jsx/style.js\");\n/* harmony import */ var styled_jsx_style__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(styled_jsx_style__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _tldraw_tldraw__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @tldraw/tldraw */ \"(ssr)/./node_modules/@tldraw/tldraw/dist-esm/index.mjs\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _lib_improveDrawing__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../lib/improveDrawing */ \"(ssr)/./app/lib/improveDrawing.tsx\");\n\n\n\n\n\nfunction ImproveDrawingButton() {\n    const editor = (0,_tldraw_tldraw__WEBPACK_IMPORTED_MODULE_2__.useEditor)();\n    const { addToast } = (0,_tldraw_tldraw__WEBPACK_IMPORTED_MODULE_2__.useToasts)();\n    const [isImproving, setIsImproving] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(false);\n    const handleClick = (0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)(async ()=>{\n        try {\n            // Get the selected shapes to track them during improvement\n            const selectedShapes = editor.getSelectedShapes();\n            if (selectedShapes.length === 0) {\n                addToast({\n                    icon: \"cross-2\",\n                    title: \"Select something first\",\n                    description: \"Please select a shape to improve\"\n                });\n                return;\n            }\n            // Filter out non-drawable shapes if needed\n            const drawableShapes = selectedShapes.filter((shape)=>shape.type !== \"model3d\");\n            if (drawableShapes.length === 0) {\n                addToast({\n                    icon: \"cross-2\",\n                    title: \"No drawable shapes\",\n                    description: \"Select shapes that can be improved (not 3D models)\"\n                });\n                return;\n            }\n            // Start loading state\n            setIsImproving(true);\n            // Call actual improve drawing function\n            await (0,_lib_improveDrawing__WEBPACK_IMPORTED_MODULE_4__.improveDrawing)(editor);\n        } catch (e) {\n            console.error(\"Error in improve drawing workflow:\", e);\n            addToast({\n                icon: \"cross-2\",\n                title: \"Something went wrong\",\n                description: e.message.slice(0, 100)\n            });\n        } finally{\n            // Reset state\n            setIsImproving(false);\n        }\n    }, [\n        editor,\n        addToast\n    ]);\n    // Magic wand icon as an SVG\n    const MagicWandIcon = ()=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n            width: \"16\",\n            height: \"16\",\n            viewBox: \"0 0 24 24\",\n            fill: \"none\",\n            stroke: \"currentColor\",\n            strokeWidth: \"2\",\n            strokeLinecap: \"round\",\n            strokeLinejoin: \"round\",\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"line\", {\n                    x1: \"4\",\n                    y1: \"20\",\n                    x2: \"20\",\n                    y2: \"4\"\n                }, void 0, false, {\n                    fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/components/ImproveDrawingButton.tsx\",\n                    lineNumber: 66,\n                    columnNumber: 7\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"line\", {\n                    x1: \"15\",\n                    y1: \"4\",\n                    x2: \"20\",\n                    y2: \"4\"\n                }, void 0, false, {\n                    fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/components/ImproveDrawingButton.tsx\",\n                    lineNumber: 67,\n                    columnNumber: 7\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"line\", {\n                    x1: \"20\",\n                    y1: \"9\",\n                    x2: \"20\",\n                    y2: \"4\"\n                }, void 0, false, {\n                    fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/components/ImproveDrawingButton.tsx\",\n                    lineNumber: 68,\n                    columnNumber: 7\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"line\", {\n                    x1: \"4\",\n                    y1: \"20\",\n                    x2: \"9\",\n                    y2: \"20\"\n                }, void 0, false, {\n                    fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/components/ImproveDrawingButton.tsx\",\n                    lineNumber: 69,\n                    columnNumber: 7\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"line\", {\n                    x1: \"4\",\n                    y1: \"20\",\n                    x2: \"4\",\n                    y2: \"15\"\n                }, void 0, false, {\n                    fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/components/ImproveDrawingButton.tsx\",\n                    lineNumber: 70,\n                    columnNumber: 7\n                }, this)\n            ]\n        }, void 0, true, {\n            fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/components/ImproveDrawingButton.tsx\",\n            lineNumber: 56,\n            columnNumber: 5\n        }, this);\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n        className: \"improveDrawingButton\",\n        onClick: handleClick,\n        disabled: isImproving,\n        style: {\n            backgroundColor: isImproving ? \"#9a86d5\" : \"#7B5BD6\",\n            color: \"white\",\n            marginLeft: \"-3px\",\n            padding: \"6px 12px\",\n            borderRadius: \"4px\",\n            border: \"none\",\n            cursor: isImproving ? \"not-allowed\" : \"pointer\",\n            fontSize: \"18px\",\n            fontWeight: 400,\n            display: \"flex\",\n            alignItems: \"center\",\n            justifyContent: \"center\",\n            gap: \"3px\",\n            transition: \"all 0.2s ease\",\n            opacity: isImproving ? 0.8 : 1\n        },\n        onMouseEnter: (e)=>{\n            if (!isImproving) {\n                e.currentTarget.style.backgroundColor = \"#6545B8\";\n                e.currentTarget.style.boxShadow = \"0 4px 8px rgba(0,0,0,0.15)\";\n            }\n        },\n        onMouseLeave: (e)=>{\n            if (!isImproving) {\n                e.currentTarget.style.backgroundColor = \"#7B5BD6\";\n                e.currentTarget.style.boxShadow = \"0 2px 4px rgba(0,0,0,0.1)\";\n            }\n        },\n        children: isImproving ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    style: {\n                        width: \"14px\",\n                        height: \"14px\",\n                        border: \"2px solid rgba(255,255,255,0.3)\",\n                        borderRadius: \"50%\",\n                        borderTop: \"2px solid white\",\n                        animation: \"spin 1s linear infinite\"\n                    },\n                    className: \"jsx-776cdcbc0448e4ea\" + \" \" + \"loading-spinner\"\n                }, void 0, false, {\n                    fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/components/ImproveDrawingButton.tsx\",\n                    lineNumber: 111,\n                    columnNumber: 11\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                    className: \"jsx-776cdcbc0448e4ea\",\n                    children: \"Improving...\"\n                }, void 0, false, {\n                    fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/components/ImproveDrawingButton.tsx\",\n                    lineNumber: 119,\n                    columnNumber: 11\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)((styled_jsx_style__WEBPACK_IMPORTED_MODULE_1___default()), {\n                    id: \"776cdcbc0448e4ea\",\n                    children: \"@-webkit-keyframes spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-moz-keyframes spin{0%{-moz-transform:rotate(0deg);transform:rotate(0deg)}100%{-moz-transform:rotate(360deg);transform:rotate(360deg)}}@-o-keyframes spin{0%{-o-transform:rotate(0deg);transform:rotate(0deg)}100%{-o-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes spin{0%{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}\"\n                }, void 0, false, void 0, this)\n            ]\n        }, void 0, true) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(MagicWandIcon, {}, void 0, false, {\n                    fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/components/ImproveDrawingButton.tsx\",\n                    lineNumber: 129,\n                    columnNumber: 11\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                    children: \"Improve Drawing\"\n                }, void 0, false, {\n                    fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/components/ImproveDrawingButton.tsx\",\n                    lineNumber: 130,\n                    columnNumber: 11\n                }, this)\n            ]\n        }, void 0, true)\n    }, void 0, false, {\n        fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/components/ImproveDrawingButton.tsx\",\n        lineNumber: 75,\n        columnNumber: 5\n    }, this);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9hcHAvY29tcG9uZW50cy9JbXByb3ZlRHJhd2luZ0J1dHRvbi50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBcUQ7QUFDUjtBQUNTO0FBRS9DLFNBQVNLO0lBQ2QsTUFBTUMsU0FBU04seURBQVNBO0lBQ3hCLE1BQU0sRUFBRU8sUUFBUSxFQUFFLEdBQUdOLHlEQUFTQTtJQUM5QixNQUFNLENBQUNPLGFBQWFDLGVBQWUsR0FBR04sK0NBQVFBLENBQUM7SUFFL0MsTUFBTU8sY0FBY1Isa0RBQVdBLENBQUM7UUFDOUIsSUFBSTtZQUNGLDJEQUEyRDtZQUMzRCxNQUFNUyxpQkFBaUJMLE9BQU9NLGlCQUFpQjtZQUMvQyxJQUFJRCxlQUFlRSxNQUFNLEtBQUssR0FBRztnQkFDL0JOLFNBQVM7b0JBQ1BPLE1BQU07b0JBQ05DLE9BQU87b0JBQ1BDLGFBQWE7Z0JBQ2Y7Z0JBQ0E7WUFDRjtZQUVBLDJDQUEyQztZQUMzQyxNQUFNQyxpQkFBaUJOLGVBQWVPLE1BQU0sQ0FBQyxDQUFDQyxRQUFVQSxNQUFNQyxJQUFJLEtBQUs7WUFFdkUsSUFBSUgsZUFBZUosTUFBTSxLQUFLLEdBQUc7Z0JBQy9CTixTQUFTO29CQUNQTyxNQUFNO29CQUNOQyxPQUFPO29CQUNQQyxhQUFhO2dCQUNmO2dCQUNBO1lBQ0Y7WUFFQSxzQkFBc0I7WUFDdEJQLGVBQWU7WUFFZix1Q0FBdUM7WUFDdkMsTUFBTUwsbUVBQWNBLENBQUNFO1FBRXZCLEVBQUUsT0FBT2UsR0FBRztZQUNWQyxRQUFRQyxLQUFLLENBQUMsc0NBQXNDRjtZQUNwRGQsU0FBUztnQkFDUE8sTUFBTTtnQkFDTkMsT0FBTztnQkFDUEMsYUFBYSxFQUFhUSxPQUFPLENBQUNDLEtBQUssQ0FBQyxHQUFHO1lBQzdDO1FBQ0YsU0FBVTtZQUNSLGNBQWM7WUFDZGhCLGVBQWU7UUFDakI7SUFDRixHQUFHO1FBQUNIO1FBQVFDO0tBQVM7SUFFckIsNEJBQTRCO0lBQzVCLE1BQU1tQixnQkFBZ0Isa0JBQ3BCLDhEQUFDQztZQUNDQyxPQUFNO1lBQ05DLFFBQU87WUFDUEMsU0FBUTtZQUNSQyxNQUFLO1lBQ0xDLFFBQU87WUFDUEMsYUFBWTtZQUNaQyxlQUFjO1lBQ2RDLGdCQUFlOzs4QkFFZiw4REFBQ0M7b0JBQUtDLElBQUc7b0JBQUlDLElBQUc7b0JBQUtDLElBQUc7b0JBQUtDLElBQUc7Ozs7Ozs4QkFDaEMsOERBQUNKO29CQUFLQyxJQUFHO29CQUFLQyxJQUFHO29CQUFJQyxJQUFHO29CQUFLQyxJQUFHOzs7Ozs7OEJBQ2hDLDhEQUFDSjtvQkFBS0MsSUFBRztvQkFBS0MsSUFBRztvQkFBSUMsSUFBRztvQkFBS0MsSUFBRzs7Ozs7OzhCQUNoQyw4REFBQ0o7b0JBQUtDLElBQUc7b0JBQUlDLElBQUc7b0JBQUtDLElBQUc7b0JBQUlDLElBQUc7Ozs7Ozs4QkFDL0IsOERBQUNKO29CQUFLQyxJQUFHO29CQUFJQyxJQUFHO29CQUFLQyxJQUFHO29CQUFJQyxJQUFHOzs7Ozs7Ozs7Ozs7SUFJbkMscUJBQ0UsOERBQUNDO1FBQ0NDLFdBQVU7UUFDVkMsU0FBU2pDO1FBQ1RrQyxVQUFVcEM7UUFDVnFDLE9BQU87WUFDTEMsaUJBQWlCdEMsY0FBYyxZQUFZO1lBQzNDdUMsT0FBTztZQUNQQyxZQUFZO1lBQ1pDLFNBQVM7WUFDVEMsY0FBYztZQUNkQyxRQUFRO1lBQ1JDLFFBQVE1QyxjQUFjLGdCQUFnQjtZQUN0QzZDLFVBQVU7WUFDVkMsWUFBWTtZQUNaQyxTQUFTO1lBQ1RDLFlBQVk7WUFDWkMsZ0JBQWdCO1lBQ2hCQyxLQUFLO1lBQ0xDLFlBQVk7WUFDWkMsU0FBU3BELGNBQWMsTUFBTTtRQUMvQjtRQUNBcUQsY0FBYyxDQUFDeEM7WUFDYixJQUFJLENBQUNiLGFBQWE7Z0JBQ2hCYSxFQUFFeUMsYUFBYSxDQUFDakIsS0FBSyxDQUFDQyxlQUFlLEdBQUc7Z0JBQ3hDekIsRUFBRXlDLGFBQWEsQ0FBQ2pCLEtBQUssQ0FBQ2tCLFNBQVMsR0FBRztZQUNwQztRQUNGO1FBQ0FDLGNBQWMsQ0FBQzNDO1lBQ2IsSUFBSSxDQUFDYixhQUFhO2dCQUNoQmEsRUFBRXlDLGFBQWEsQ0FBQ2pCLEtBQUssQ0FBQ0MsZUFBZSxHQUFHO2dCQUN4Q3pCLEVBQUV5QyxhQUFhLENBQUNqQixLQUFLLENBQUNrQixTQUFTLEdBQUc7WUFDcEM7UUFDRjtrQkFFQ3ZELDRCQUNDOzs4QkFDRSw4REFBQ3lEO29CQUFnQ3BCLE9BQU87d0JBQ3RDakIsT0FBTzt3QkFDUEMsUUFBUTt3QkFDUnNCLFFBQVE7d0JBQ1JELGNBQWM7d0JBQ2RnQixXQUFXO3dCQUNYQyxXQUFXO29CQUNiOzhEQVBlOzs7Ozs7OEJBUWYsOERBQUNDOzs4QkFBSzs7Ozs7Ozs7Ozs7eUNBU1I7OzhCQUNFLDhEQUFDMUM7Ozs7OzhCQUNELDhEQUFDMEM7OEJBQUs7Ozs7Ozs7Ozs7Ozs7QUFLaEIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92aWJlLTNkLWNvZGUvLi9hcHAvY29tcG9uZW50cy9JbXByb3ZlRHJhd2luZ0J1dHRvbi50c3g/NjM0YiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1c2VFZGl0b3IsIHVzZVRvYXN0cyB9IGZyb20gJ0B0bGRyYXcvdGxkcmF3J1xuaW1wb3J0IHsgdXNlQ2FsbGJhY2ssIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnXG5pbXBvcnQgeyBpbXByb3ZlRHJhd2luZyB9IGZyb20gJy4uL2xpYi9pbXByb3ZlRHJhd2luZydcblxuZXhwb3J0IGZ1bmN0aW9uIEltcHJvdmVEcmF3aW5nQnV0dG9uKCkge1xuICBjb25zdCBlZGl0b3IgPSB1c2VFZGl0b3IoKVxuICBjb25zdCB7IGFkZFRvYXN0IH0gPSB1c2VUb2FzdHMoKVxuICBjb25zdCBbaXNJbXByb3ZpbmcsIHNldElzSW1wcm92aW5nXSA9IHVzZVN0YXRlKGZhbHNlKVxuXG4gIGNvbnN0IGhhbmRsZUNsaWNrID0gdXNlQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICAvLyBHZXQgdGhlIHNlbGVjdGVkIHNoYXBlcyB0byB0cmFjayB0aGVtIGR1cmluZyBpbXByb3ZlbWVudFxuICAgICAgY29uc3Qgc2VsZWN0ZWRTaGFwZXMgPSBlZGl0b3IuZ2V0U2VsZWN0ZWRTaGFwZXMoKVxuICAgICAgaWYgKHNlbGVjdGVkU2hhcGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBhZGRUb2FzdCh7XG4gICAgICAgICAgaWNvbjogJ2Nyb3NzLTInLFxuICAgICAgICAgIHRpdGxlOiAnU2VsZWN0IHNvbWV0aGluZyBmaXJzdCcsXG4gICAgICAgICAgZGVzY3JpcHRpb246ICdQbGVhc2Ugc2VsZWN0IGEgc2hhcGUgdG8gaW1wcm92ZScsXG4gICAgICAgIH0pXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuXG4gICAgICAvLyBGaWx0ZXIgb3V0IG5vbi1kcmF3YWJsZSBzaGFwZXMgaWYgbmVlZGVkXG4gICAgICBjb25zdCBkcmF3YWJsZVNoYXBlcyA9IHNlbGVjdGVkU2hhcGVzLmZpbHRlcigoc2hhcGUpID0+IHNoYXBlLnR5cGUgIT09ICdtb2RlbDNkJylcbiAgICAgIFxuICAgICAgaWYgKGRyYXdhYmxlU2hhcGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBhZGRUb2FzdCh7XG4gICAgICAgICAgaWNvbjogJ2Nyb3NzLTInLFxuICAgICAgICAgIHRpdGxlOiAnTm8gZHJhd2FibGUgc2hhcGVzJyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJ1NlbGVjdCBzaGFwZXMgdGhhdCBjYW4gYmUgaW1wcm92ZWQgKG5vdCAzRCBtb2RlbHMpJyxcbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG5cbiAgICAgIC8vIFN0YXJ0IGxvYWRpbmcgc3RhdGVcbiAgICAgIHNldElzSW1wcm92aW5nKHRydWUpXG4gICAgICBcbiAgICAgIC8vIENhbGwgYWN0dWFsIGltcHJvdmUgZHJhd2luZyBmdW5jdGlvblxuICAgICAgYXdhaXQgaW1wcm92ZURyYXdpbmcoZWRpdG9yKVxuICAgICAgXG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgaW4gaW1wcm92ZSBkcmF3aW5nIHdvcmtmbG93OicsIGUpXG4gICAgICBhZGRUb2FzdCh7XG4gICAgICAgIGljb246ICdjcm9zcy0yJyxcbiAgICAgICAgdGl0bGU6ICdTb21ldGhpbmcgd2VudCB3cm9uZycsXG4gICAgICAgIGRlc2NyaXB0aW9uOiAoZSBhcyBFcnJvcikubWVzc2FnZS5zbGljZSgwLCAxMDApLFxuICAgICAgfSlcbiAgICB9IGZpbmFsbHkge1xuICAgICAgLy8gUmVzZXQgc3RhdGVcbiAgICAgIHNldElzSW1wcm92aW5nKGZhbHNlKVxuICAgIH1cbiAgfSwgW2VkaXRvciwgYWRkVG9hc3RdKVxuXG4gIC8vIE1hZ2ljIHdhbmQgaWNvbiBhcyBhbiBTVkdcbiAgY29uc3QgTWFnaWNXYW5kSWNvbiA9ICgpID0+IChcbiAgICA8c3ZnIFxuICAgICAgd2lkdGg9XCIxNlwiIFxuICAgICAgaGVpZ2h0PVwiMTZcIiBcbiAgICAgIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiBcbiAgICAgIGZpbGw9XCJub25lXCIgXG4gICAgICBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBcbiAgICAgIHN0cm9rZVdpZHRoPVwiMlwiIFxuICAgICAgc3Ryb2tlTGluZWNhcD1cInJvdW5kXCIgXG4gICAgICBzdHJva2VMaW5lam9pbj1cInJvdW5kXCJcbiAgICA+XG4gICAgICA8bGluZSB4MT1cIjRcIiB5MT1cIjIwXCIgeDI9XCIyMFwiIHkyPVwiNFwiIC8+XG4gICAgICA8bGluZSB4MT1cIjE1XCIgeTE9XCI0XCIgeDI9XCIyMFwiIHkyPVwiNFwiIC8+XG4gICAgICA8bGluZSB4MT1cIjIwXCIgeTE9XCI5XCIgeDI9XCIyMFwiIHkyPVwiNFwiIC8+XG4gICAgICA8bGluZSB4MT1cIjRcIiB5MT1cIjIwXCIgeDI9XCI5XCIgeTI9XCIyMFwiIC8+XG4gICAgICA8bGluZSB4MT1cIjRcIiB5MT1cIjIwXCIgeDI9XCI0XCIgeTI9XCIxNVwiIC8+XG4gICAgPC9zdmc+XG4gIClcblxuICByZXR1cm4gKFxuICAgIDxidXR0b24gXG4gICAgICBjbGFzc05hbWU9XCJpbXByb3ZlRHJhd2luZ0J1dHRvblwiIFxuICAgICAgb25DbGljaz17aGFuZGxlQ2xpY2t9XG4gICAgICBkaXNhYmxlZD17aXNJbXByb3Zpbmd9XG4gICAgICBzdHlsZT17eyBcbiAgICAgICAgYmFja2dyb3VuZENvbG9yOiBpc0ltcHJvdmluZyA/ICcjOWE4NmQ1JyA6ICcjN0I1QkQ2JyxcbiAgICAgICAgY29sb3I6ICd3aGl0ZScsXG4gICAgICAgIG1hcmdpbkxlZnQ6ICctM3B4JyxcbiAgICAgICAgcGFkZGluZzogJzZweCAxMnB4JyxcbiAgICAgICAgYm9yZGVyUmFkaXVzOiAnNHB4JyxcbiAgICAgICAgYm9yZGVyOiAnbm9uZScsXG4gICAgICAgIGN1cnNvcjogaXNJbXByb3ZpbmcgPyAnbm90LWFsbG93ZWQnIDogJ3BvaW50ZXInLFxuICAgICAgICBmb250U2l6ZTogJzE4cHgnLFxuICAgICAgICBmb250V2VpZ2h0OiA0MDAsXG4gICAgICAgIGRpc3BsYXk6ICdmbGV4JyxcbiAgICAgICAgYWxpZ25JdGVtczogJ2NlbnRlcicsXG4gICAgICAgIGp1c3RpZnlDb250ZW50OiAnY2VudGVyJyxcbiAgICAgICAgZ2FwOiAnM3B4JyxcbiAgICAgICAgdHJhbnNpdGlvbjogJ2FsbCAwLjJzIGVhc2UnLFxuICAgICAgICBvcGFjaXR5OiBpc0ltcHJvdmluZyA/IDAuOCA6IDEsXG4gICAgICB9fVxuICAgICAgb25Nb3VzZUVudGVyPXsoZSkgPT4ge1xuICAgICAgICBpZiAoIWlzSW1wcm92aW5nKSB7XG4gICAgICAgICAgZS5jdXJyZW50VGFyZ2V0LnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICcjNjU0NUI4JztcbiAgICAgICAgICBlLmN1cnJlbnRUYXJnZXQuc3R5bGUuYm94U2hhZG93ID0gJzAgNHB4IDhweCByZ2JhKDAsMCwwLDAuMTUpJztcbiAgICAgICAgfVxuICAgICAgfX1cbiAgICAgIG9uTW91c2VMZWF2ZT17KGUpID0+IHtcbiAgICAgICAgaWYgKCFpc0ltcHJvdmluZykge1xuICAgICAgICAgIGUuY3VycmVudFRhcmdldC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAnIzdCNUJENic7XG4gICAgICAgICAgZS5jdXJyZW50VGFyZ2V0LnN0eWxlLmJveFNoYWRvdyA9ICcwIDJweCA0cHggcmdiYSgwLDAsMCwwLjEpJztcbiAgICAgICAgfVxuICAgICAgfX1cbiAgICA+XG4gICAgICB7aXNJbXByb3ZpbmcgPyAoXG4gICAgICAgIDw+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJsb2FkaW5nLXNwaW5uZXJcIiBzdHlsZT17e1xuICAgICAgICAgICAgd2lkdGg6ICcxNHB4JyxcbiAgICAgICAgICAgIGhlaWdodDogJzE0cHgnLFxuICAgICAgICAgICAgYm9yZGVyOiAnMnB4IHNvbGlkIHJnYmEoMjU1LDI1NSwyNTUsMC4zKScsXG4gICAgICAgICAgICBib3JkZXJSYWRpdXM6ICc1MCUnLFxuICAgICAgICAgICAgYm9yZGVyVG9wOiAnMnB4IHNvbGlkIHdoaXRlJyxcbiAgICAgICAgICAgIGFuaW1hdGlvbjogJ3NwaW4gMXMgbGluZWFyIGluZmluaXRlJyxcbiAgICAgICAgICB9fSAvPlxuICAgICAgICAgIDxzcGFuPkltcHJvdmluZy4uLjwvc3Bhbj5cbiAgICAgICAgICA8c3R5bGUganN4PntgXG4gICAgICAgICAgICBAa2V5ZnJhbWVzIHNwaW4ge1xuICAgICAgICAgICAgICAwJSB7IHRyYW5zZm9ybTogcm90YXRlKDBkZWcpOyB9XG4gICAgICAgICAgICAgIDEwMCUgeyB0cmFuc2Zvcm06IHJvdGF0ZSgzNjBkZWcpOyB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgYH08L3N0eWxlPlxuICAgICAgICA8Lz5cbiAgICAgICkgOiAoXG4gICAgICAgIDw+XG4gICAgICAgICAgPE1hZ2ljV2FuZEljb24gLz5cbiAgICAgICAgICA8c3Bhbj5JbXByb3ZlIERyYXdpbmc8L3NwYW4+XG4gICAgICAgIDwvPlxuICAgICAgKX1cbiAgICA8L2J1dHRvbj5cbiAgKVxufVxuIl0sIm5hbWVzIjpbInVzZUVkaXRvciIsInVzZVRvYXN0cyIsInVzZUNhbGxiYWNrIiwidXNlU3RhdGUiLCJpbXByb3ZlRHJhd2luZyIsIkltcHJvdmVEcmF3aW5nQnV0dG9uIiwiZWRpdG9yIiwiYWRkVG9hc3QiLCJpc0ltcHJvdmluZyIsInNldElzSW1wcm92aW5nIiwiaGFuZGxlQ2xpY2siLCJzZWxlY3RlZFNoYXBlcyIsImdldFNlbGVjdGVkU2hhcGVzIiwibGVuZ3RoIiwiaWNvbiIsInRpdGxlIiwiZGVzY3JpcHRpb24iLCJkcmF3YWJsZVNoYXBlcyIsImZpbHRlciIsInNoYXBlIiwidHlwZSIsImUiLCJjb25zb2xlIiwiZXJyb3IiLCJtZXNzYWdlIiwic2xpY2UiLCJNYWdpY1dhbmRJY29uIiwic3ZnIiwid2lkdGgiLCJoZWlnaHQiLCJ2aWV3Qm94IiwiZmlsbCIsInN0cm9rZSIsInN0cm9rZVdpZHRoIiwic3Ryb2tlTGluZWNhcCIsInN0cm9rZUxpbmVqb2luIiwibGluZSIsIngxIiwieTEiLCJ4MiIsInkyIiwiYnV0dG9uIiwiY2xhc3NOYW1lIiwib25DbGljayIsImRpc2FibGVkIiwic3R5bGUiLCJiYWNrZ3JvdW5kQ29sb3IiLCJjb2xvciIsIm1hcmdpbkxlZnQiLCJwYWRkaW5nIiwiYm9yZGVyUmFkaXVzIiwiYm9yZGVyIiwiY3Vyc29yIiwiZm9udFNpemUiLCJmb250V2VpZ2h0IiwiZGlzcGxheSIsImFsaWduSXRlbXMiLCJqdXN0aWZ5Q29udGVudCIsImdhcCIsInRyYW5zaXRpb24iLCJvcGFjaXR5Iiwib25Nb3VzZUVudGVyIiwiY3VycmVudFRhcmdldCIsImJveFNoYWRvdyIsIm9uTW91c2VMZWF2ZSIsImRpdiIsImJvcmRlclRvcCIsImFuaW1hdGlvbiIsInNwYW4iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./app/components/ImproveDrawingButton.tsx\n");

/***/ }),

/***/ "(ssr)/./app/components/TestAddCodeButton.tsx":
/*!**********************************************!*\
  !*** ./app/components/TestAddCodeButton.tsx ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ TestAddCodeButton)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _store_appStore__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/store/appStore */ \"(ssr)/./app/store/appStore.ts\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\nfunction TestAddCodeButton({ activeTab, setActiveTab }) {\n    const { addObjectFromCode } = (0,_store_appStore__WEBPACK_IMPORTED_MODULE_1__.useObjectStore)();\n    const [message, setMessage] = (0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(null);\n    const handleAddCode = ()=>{\n        const result = addObjectFromCode(`\n\t\t\t// Create a new cube with a random color\n\t\t\tconst colors = [0x00ff00, 0xff0000, 0x0000ff, 0xffff00, 0xff00ff, 0x00ffff];\n\t\t\tconst randomColor = colors[Math.floor(Math.random() * colors.length)];\n\t\t\t\n\t\t\tconst cube = new THREE.Mesh(\n\t\t\t\tnew THREE.BoxGeometry(1, 1, 1),\n\t\t\t\tnew THREE.MeshStandardMaterial({ color: randomColor })\n\t\t\t);\n\t\t\t\n\t\t\t// Position in front of the camera\n\t\t\tcube.position.set(0, 1.5, -3);\n            \n            return cube;\n\t\t`);\n        if (result) {\n            // If currently in 2D view, show message about switching to 3D\n            if (activeTab === \"tldraw\") {\n                setMessage(\"Object added! Switching to 3D World...\");\n                setTimeout(()=>{\n                    setActiveTab(\"threejs\");\n                    setTimeout(()=>setMessage(null), 1000);\n                }, 500);\n            } else {\n                setMessage(\"Object added!\");\n                setTimeout(()=>setMessage(null), 2000);\n            }\n        } else {\n            setMessage(\"Failed to add object.\");\n            setTimeout(()=>setMessage(null), 3000);\n        }\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n        children: message && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            style: {\n                position: \"fixed\",\n                zIndex: 10001,\n                bottom: \"140px\",\n                right: \"20px\",\n                padding: \"10px\",\n                backgroundColor: \"rgba(0,0,0,0.7)\",\n                color: \"white\",\n                borderRadius: \"5px\",\n                maxWidth: \"250px\",\n                fontSize: \"14px\"\n            },\n            children: message\n        }, void 0, false, {\n            fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/components/TestAddCodeButton.tsx\",\n            lineNumber: 73,\n            columnNumber: 5\n        }, this)\n    }, void 0, false);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9hcHAvY29tcG9uZW50cy9UZXN0QWRkQ29kZUJ1dHRvbi50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFpRDtBQUNqQjtBQVNqQixTQUFTRSxrQkFBa0IsRUFBRUMsU0FBUyxFQUFFQyxZQUFZLEVBQTBCO0lBQzVGLE1BQU0sRUFBRUMsaUJBQWlCLEVBQUUsR0FBR0wsK0RBQWNBO0lBQzVDLE1BQU0sQ0FBQ00sU0FBU0MsV0FBVyxHQUFHTiwrQ0FBUUEsQ0FBZ0I7SUFFdEQsTUFBTU8sZ0JBQWdCO1FBQ3JCLE1BQU1DLFNBQVNKLGtCQUFrQixDQUFDOzs7Ozs7Ozs7Ozs7OztFQWNsQyxDQUFDO1FBRUQsSUFBSUksUUFBUTtZQUNYLDhEQUE4RDtZQUM5RCxJQUFJTixjQUFjLFVBQVU7Z0JBQzNCSSxXQUFXO2dCQUNYRyxXQUFXO29CQUNWTixhQUFhO29CQUNiTSxXQUFXLElBQU1ILFdBQVcsT0FBTztnQkFDcEMsR0FBRztZQUNKLE9BQU87Z0JBQ05BLFdBQVc7Z0JBQ1hHLFdBQVcsSUFBTUgsV0FBVyxPQUFPO1lBQ3BDO1FBQ0QsT0FBTztZQUNOQSxXQUFXO1lBQ1hHLFdBQVcsSUFBTUgsV0FBVyxPQUFPO1FBQ3BDO0lBQ0Q7SUFFQSxxQkFDQztrQkFxQkVELHlCQUNBLDhEQUFDSztZQUFJQyxPQUFPO2dCQUNYQyxVQUFVO2dCQUNWQyxRQUFRO2dCQUNSQyxRQUFRO2dCQUNSQyxPQUFPO2dCQUNQQyxTQUFTO2dCQUNUQyxpQkFBaUI7Z0JBQ2pCQyxPQUFPO2dCQUNQQyxjQUFjO2dCQUNkQyxVQUFVO2dCQUNWQyxVQUFVO1lBQ1g7c0JBQ0VoQjs7Ozs7OztBQUtOIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdmliZS0zZC1jb2RlLy4vYXBwL2NvbXBvbmVudHMvVGVzdEFkZENvZGVCdXR0b24udHN4PzIwZWUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlT2JqZWN0U3RvcmUgfSBmcm9tICdAL3N0b3JlL2FwcFN0b3JlJ1xuaW1wb3J0IHsgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCdcblxudHlwZSBUYWJUeXBlID0gJ3RsZHJhdycgfCAndGhyZWVqcydcblxuaW50ZXJmYWNlIFRlc3RBZGRDb2RlQnV0dG9uUHJvcHMge1xuXHRhY3RpdmVUYWI6IFRhYlR5cGVcblx0c2V0QWN0aXZlVGFiOiAodGFiOiBUYWJUeXBlKSA9PiB2b2lkXG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFRlc3RBZGRDb2RlQnV0dG9uKHsgYWN0aXZlVGFiLCBzZXRBY3RpdmVUYWIgfTogVGVzdEFkZENvZGVCdXR0b25Qcm9wcykge1xuXHRjb25zdCB7IGFkZE9iamVjdEZyb21Db2RlIH0gPSB1c2VPYmplY3RTdG9yZSgpXG5cdGNvbnN0IFttZXNzYWdlLCBzZXRNZXNzYWdlXSA9IHVzZVN0YXRlPHN0cmluZyB8IG51bGw+KG51bGwpXG5cdFxuXHRjb25zdCBoYW5kbGVBZGRDb2RlID0gKCkgPT4ge1xuXHRcdGNvbnN0IHJlc3VsdCA9IGFkZE9iamVjdEZyb21Db2RlKGBcblx0XHRcdC8vIENyZWF0ZSBhIG5ldyBjdWJlIHdpdGggYSByYW5kb20gY29sb3Jcblx0XHRcdGNvbnN0IGNvbG9ycyA9IFsweDAwZmYwMCwgMHhmZjAwMDAsIDB4MDAwMGZmLCAweGZmZmYwMCwgMHhmZjAwZmYsIDB4MDBmZmZmXTtcblx0XHRcdGNvbnN0IHJhbmRvbUNvbG9yID0gY29sb3JzW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGNvbG9ycy5sZW5ndGgpXTtcblx0XHRcdFxuXHRcdFx0Y29uc3QgY3ViZSA9IG5ldyBUSFJFRS5NZXNoKFxuXHRcdFx0XHRuZXcgVEhSRUUuQm94R2VvbWV0cnkoMSwgMSwgMSksXG5cdFx0XHRcdG5ldyBUSFJFRS5NZXNoU3RhbmRhcmRNYXRlcmlhbCh7IGNvbG9yOiByYW5kb21Db2xvciB9KVxuXHRcdFx0KTtcblx0XHRcdFxuXHRcdFx0Ly8gUG9zaXRpb24gaW4gZnJvbnQgb2YgdGhlIGNhbWVyYVxuXHRcdFx0Y3ViZS5wb3NpdGlvbi5zZXQoMCwgMS41LCAtMyk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHJldHVybiBjdWJlO1xuXHRcdGApXG5cdFx0XG5cdFx0aWYgKHJlc3VsdCkge1xuXHRcdFx0Ly8gSWYgY3VycmVudGx5IGluIDJEIHZpZXcsIHNob3cgbWVzc2FnZSBhYm91dCBzd2l0Y2hpbmcgdG8gM0Rcblx0XHRcdGlmIChhY3RpdmVUYWIgPT09ICd0bGRyYXcnKSB7XG5cdFx0XHRcdHNldE1lc3NhZ2UoJ09iamVjdCBhZGRlZCEgU3dpdGNoaW5nIHRvIDNEIFdvcmxkLi4uJylcblx0XHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XG5cdFx0XHRcdFx0c2V0QWN0aXZlVGFiKCd0aHJlZWpzJylcblx0XHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHNldE1lc3NhZ2UobnVsbCksIDEwMDApXG5cdFx0XHRcdH0sIDUwMClcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHNldE1lc3NhZ2UoJ09iamVjdCBhZGRlZCEnKVxuXHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHNldE1lc3NhZ2UobnVsbCksIDIwMDApXG5cdFx0XHR9XG5cdFx0fSBlbHNlIHtcblx0XHRcdHNldE1lc3NhZ2UoJ0ZhaWxlZCB0byBhZGQgb2JqZWN0LicpXG5cdFx0XHRzZXRUaW1lb3V0KCgpID0+IHNldE1lc3NhZ2UobnVsbCksIDMwMDApXG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIChcblx0XHQ8PlxuXHRcdFx0ey8qIDxidXR0b25cblx0XHRcdFx0Y2xhc3NOYW1lPVwidmliZTNEQ29kZUJ1dHRvblwiXG5cdFx0XHRcdHN0eWxlPXt7XG5cdFx0XHRcdFx0cG9zaXRpb246ICdmaXhlZCcsXG5cdFx0XHRcdFx0ekluZGV4OiAxMDAwMCxcblx0XHRcdFx0XHRib3R0b206ICc4MHB4Jyxcblx0XHRcdFx0XHRyaWdodDogJzIwcHgnLFxuXHRcdFx0XHRcdHBhZGRpbmc6ICc2cHggMTJweCcsXG5cdFx0XHRcdFx0Zm9udFdlaWdodDogJzQwMCcsXG5cdFx0XHRcdFx0YmFja2dyb3VuZENvbG9yOiAnIzAwN2JmZicsXG5cdFx0XHRcdFx0Y29sb3I6ICd3aGl0ZScsXG5cdFx0XHRcdFx0Ym9yZGVyUmFkaXVzOiAnNHB4Jyxcblx0XHRcdFx0XHRjdXJzb3I6ICdwb2ludGVyJyxcblx0XHRcdFx0XHRmb250U2l6ZTogJzE4cHgnXG5cdFx0XHRcdH19XG5cdFx0XHRcdG9uQ2xpY2s9e2hhbmRsZUFkZENvZGV9XG5cdFx0XHQ+XG5cdFx0XHRcdEFkZCBDb2RlXG5cdFx0XHQ8L2J1dHRvbj4gKi99XG5cdFx0XHRcblx0XHRcdHttZXNzYWdlICYmIChcblx0XHRcdFx0PGRpdiBzdHlsZT17e1xuXHRcdFx0XHRcdHBvc2l0aW9uOiAnZml4ZWQnLFxuXHRcdFx0XHRcdHpJbmRleDogMTAwMDEsXG5cdFx0XHRcdFx0Ym90dG9tOiAnMTQwcHgnLFxuXHRcdFx0XHRcdHJpZ2h0OiAnMjBweCcsXG5cdFx0XHRcdFx0cGFkZGluZzogJzEwcHgnLFxuXHRcdFx0XHRcdGJhY2tncm91bmRDb2xvcjogJ3JnYmEoMCwwLDAsMC43KScsXG5cdFx0XHRcdFx0Y29sb3I6ICd3aGl0ZScsXG5cdFx0XHRcdFx0Ym9yZGVyUmFkaXVzOiAnNXB4Jyxcblx0XHRcdFx0XHRtYXhXaWR0aDogJzI1MHB4Jyxcblx0XHRcdFx0XHRmb250U2l6ZTogJzE0cHgnXG5cdFx0XHRcdH19PlxuXHRcdFx0XHRcdHttZXNzYWdlfVxuXHRcdFx0XHQ8L2Rpdj5cblx0XHRcdCl9XG5cdFx0PC8+XG5cdClcbn1cbiJdLCJuYW1lcyI6WyJ1c2VPYmplY3RTdG9yZSIsInVzZVN0YXRlIiwiVGVzdEFkZENvZGVCdXR0b24iLCJhY3RpdmVUYWIiLCJzZXRBY3RpdmVUYWIiLCJhZGRPYmplY3RGcm9tQ29kZSIsIm1lc3NhZ2UiLCJzZXRNZXNzYWdlIiwiaGFuZGxlQWRkQ29kZSIsInJlc3VsdCIsInNldFRpbWVvdXQiLCJkaXYiLCJzdHlsZSIsInBvc2l0aW9uIiwiekluZGV4IiwiYm90dG9tIiwicmlnaHQiLCJwYWRkaW5nIiwiYmFja2dyb3VuZENvbG9yIiwiY29sb3IiLCJib3JkZXJSYWRpdXMiLCJtYXhXaWR0aCIsImZvbnRTaXplIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./app/components/TestAddCodeButton.tsx\n");

/***/ }),

/***/ "(ssr)/./app/components/TldrawLogo.tsx":
/*!***************************************!*\
  !*** ./app/components/TldrawLogo.tsx ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   TldrawLogo: () => (/* binding */ TldrawLogo)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _tldraw_tldraw__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @tldraw/tldraw */ \"(ssr)/./node_modules/@tldraw/tldraw/dist-esm/index.mjs\");\n\n\nfunction TldrawLogo() {\n    const breakpoint = (0,_tldraw_tldraw__WEBPACK_IMPORTED_MODULE_1__.useBreakpoint)();\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"a\", {\n        className: `tldrawLogo ${breakpoint < 5 ? \"tldrawLogo__mobile\" : \"\"}`,\n        href: \"https://www.tldraw.dev\",\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n            width: \"110\",\n            height: \"40\",\n            viewBox: \"0 0 71 18\",\n            fill: \"none\",\n            style: {\n                padding: 8\n            },\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                    fillRule: \"evenodd\",\n                    clipRule: \"evenodd\",\n                    d: \"M0 1.97802C0 0.88559 0.848303 0 1.89474 0H16.1053C17.1517 0 18 0.885591 18 1.97802V16.022C18 17.1144 17.1517 18 16.1053 18H1.89474C0.848303 18 0 17.1144 0 16.022V1.97802ZM10.6264 5.14801C10.6264 5.58302 10.4777 5.95212 10.1803 6.25531C9.88296 6.5585 9.52095 6.71009 9.0943 6.71009C8.65471 6.71009 8.28624 6.5585 7.98888 6.25531C7.69151 5.95212 7.54283 5.58302 7.54283 5.14801C7.54283 4.71301 7.69151 4.34391 7.98888 4.04072C8.28624 3.73753 8.65471 3.58594 9.0943 3.58594C9.52095 3.58594 9.88296 3.73753 10.1803 4.04072C10.4777 4.34391 10.6264 4.71301 10.6264 5.14801ZM7.52344 10.6224C7.52344 10.1874 7.67212 9.81831 7.96948 9.51512C8.27978 9.19875 8.65471 9.04056 9.0943 9.04056C9.50802 9.04056 9.87003 9.19875 10.1803 9.51512C10.4906 9.81831 10.6716 10.161 10.7233 10.5433C10.8268 11.2552 10.6975 11.9604 10.3355 12.659C9.98639 13.3577 9.48216 13.8916 8.82279 14.2607C8.46078 14.4716 8.16342 14.465 7.9307 14.2409C7.71091 14.03 7.77555 13.7795 8.12463 13.4895C8.31856 13.3445 8.48017 13.16 8.60946 12.9359C8.73875 12.7118 8.82279 12.4811 8.86158 12.2438C8.87451 12.1384 8.82925 12.0856 8.72582 12.0856C8.46725 12.0724 8.2022 11.9274 7.9307 11.6506C7.65919 11.3738 7.52344 11.0311 7.52344 10.6224Z\",\n                    fill: \"#000000\"\n                }, void 0, false, {\n                    fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/components/TldrawLogo.tsx\",\n                    lineNumber: 17,\n                    columnNumber: 5\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                    d: \"M34.156 14.5761C34.2636 14.5761 34.3174 14.5223 34.3174 14.4147V12.2234C34.3174 12.0073 34.1422 11.8321 33.9261 11.8321H33.6424C33.5543 11.8321 33.4859 11.8076 33.437 11.7587C33.3978 11.7196 33.3783 11.6609 33.3783 11.5826V3.73207C33.3783 3.62446 33.3245 3.57065 33.2168 3.57065H30.7467C30.5306 3.57065 30.3554 3.74585 30.3554 3.96196V12.463C30.3554 13.1674 30.556 13.6957 30.9571 14.0478C31.3582 14.4 31.8717 14.5761 32.4978 14.5761H34.156Z\",\n                    fill: \"#000000\"\n                }, void 0, false, {\n                    fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/components/TldrawLogo.tsx\",\n                    lineNumber: 23,\n                    columnNumber: 5\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                    d: \"M29.0935 12.2087C29.0935 11.9926 28.9183 11.8174 28.7022 11.8174H27.6701C27.3375 11.8174 27.1125 11.7587 26.9951 11.6413C26.8484 11.5043 26.775 11.2842 26.775 10.981V9.68478C26.775 9.46867 26.9502 9.29348 27.1663 9.29348H28.7022C28.9183 9.29348 29.0935 9.11829 29.0935 8.90217V6.71087C29.0935 6.60326 29.0397 6.54946 28.9321 6.54946H27.1663C26.9502 6.54946 26.775 6.37426 26.775 6.15815V4.46576C26.775 4.35815 26.7212 4.30435 26.6136 4.30435H24.2315C24.0154 4.30435 23.8402 4.47954 23.8402 4.69565V6.15815C23.8402 6.37426 23.665 6.54946 23.4489 6.54946H23.087C22.8708 6.54946 22.6957 6.72465 22.6957 6.94076V9.13207C22.6957 9.23967 22.7495 9.29348 22.8571 9.29348H23.4489C23.665 9.29348 23.8402 9.46867 23.8402 9.68478V11.2011C23.8402 12.3359 24.1386 13.1821 24.7353 13.7397C25.3321 14.2973 26.1978 14.5761 27.3326 14.5761H28.9321C29.0397 14.5761 29.0935 14.5223 29.0935 14.4147V12.2087Z\",\n                    fill: \"#000000\"\n                }, void 0, false, {\n                    fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/components/TldrawLogo.tsx\",\n                    lineNumber: 27,\n                    columnNumber: 5\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                    fillRule: \"evenodd\",\n                    clipRule: \"evenodd\",\n                    d: \"M37.6867 6.40272C38.1367 6.40272 38.5231 6.51522 38.8459 6.74022C39.1499 6.94586 39.4008 7.21279 39.5985 7.54101C39.6332 7.59855 39.6947 7.63533 39.7619 7.63533C39.8638 7.63533 39.9464 7.55268 39.9464 7.45074V3.96196C39.9464 3.74584 40.1216 3.57065 40.3377 3.57065H42.7198C42.8274 3.57065 42.8812 3.62446 42.8812 3.73207V14.1848C42.8812 14.4009 42.706 14.5761 42.4899 14.5761H40.1079C40.0002 14.5761 39.9464 14.5223 39.9464 14.4147V13.5333C39.9464 13.4285 39.8614 13.3435 39.7566 13.3435C39.692 13.3435 39.6321 13.3765 39.596 13.4301C39.3462 13.8013 39.0668 14.1051 38.7579 14.3413C38.4252 14.5957 38.0095 14.7228 37.5106 14.7228C36.8356 14.7228 36.3024 14.4929 35.9111 14.0332C35.5198 13.5734 35.3242 12.9571 35.3242 12.1842V9.10272C35.3242 8.26141 35.5247 7.60109 35.9258 7.12174C36.3367 6.64239 36.9236 6.40272 37.6867 6.40272ZM38.4204 11.9348C38.528 12.0522 38.7187 12.1109 38.9926 12.1109C39.2693 12.1109 39.5126 12.0774 39.7224 12.0105C39.8636 11.9655 39.9464 11.8265 39.9464 11.6783V9.35616C39.9464 9.22533 39.8827 9.09961 39.7647 9.04299C39.6723 8.9986 39.5763 8.9647 39.4769 8.94131C39.3106 8.89239 39.1492 8.86793 38.9926 8.86793C38.4937 8.86793 38.2443 9.11739 38.2443 9.6163V11.3772C38.2443 11.6413 38.303 11.8272 38.4204 11.9348Z\",\n                    fill: \"#000000\"\n                }, void 0, false, {\n                    fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/components/TldrawLogo.tsx\",\n                    lineNumber: 31,\n                    columnNumber: 5\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                    d: \"M47.1839 14.5761C47.4001 14.5761 47.5752 14.4009 47.5752 14.1848V10.0559C47.5752 9.91955 47.6451 9.79072 47.7678 9.73131C47.8883 9.67299 48.0148 9.62487 48.1475 9.58696C48.353 9.51848 48.5829 9.48424 48.8372 9.48424C49.0231 9.48424 49.1992 9.49891 49.3655 9.52826C49.5291 9.55553 49.6884 9.59123 49.8436 9.63539C49.8671 9.64209 49.8915 9.64565 49.916 9.64565C50.0577 9.64565 50.1725 9.5308 50.1725 9.38912V6.71087C50.1725 6.64239 50.1481 6.5837 50.0992 6.53478C50.0698 6.50544 50.016 6.47609 49.9378 6.44674C49.8595 6.41739 49.7421 6.40272 49.5856 6.40272C49.1258 6.40272 48.7589 6.54457 48.485 6.82826C48.2423 7.07994 48.0533 7.44725 47.918 7.93019C47.8966 8.00665 47.8277 8.06087 47.7483 8.06087C47.6527 8.06087 47.5752 7.9834 47.5752 7.88783V6.71087C47.5752 6.60326 47.5214 6.54946 47.4138 6.54946H44.9878C44.7716 6.54946 44.5964 6.72465 44.5964 6.94076V14.4147C44.5964 14.5223 44.6502 14.5761 44.7579 14.5761H47.1839Z\",\n                    fill: \"#000000\"\n                }, void 0, false, {\n                    fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/components/TldrawLogo.tsx\",\n                    lineNumber: 37,\n                    columnNumber: 5\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                    fillRule: \"evenodd\",\n                    clipRule: \"evenodd\",\n                    d: \"M58.368 9.41087V11.788C58.368 11.9085 58.4096 11.9874 58.4929 12.0246C58.5165 12.0351 58.5407 12.0441 58.5651 12.0526C58.5923 12.0621 58.6196 12.0668 58.6468 12.0668H58.6664C58.8825 12.0668 59.0577 12.242 59.0577 12.4582V14.4147C59.0577 14.5223 59.0039 14.5761 58.8963 14.5761H57.9131C57.4338 14.5761 56.9936 14.4783 56.5925 14.2826C56.2443 14.1085 55.9774 13.857 55.7919 13.528C55.7494 13.4526 55.6716 13.4022 55.585 13.4022C55.5009 13.4022 55.4244 13.4497 55.3826 13.5227C55.1746 13.8859 54.9029 14.1735 54.5675 14.3853C54.2055 14.6103 53.7408 14.7228 53.1734 14.7228C52.4887 14.7228 51.9457 14.537 51.5446 14.1652C51.1436 13.7935 50.943 13.2897 50.943 12.6538V12.0815C50.943 11.3967 51.1436 10.8587 51.5446 10.4674C51.9555 10.0761 52.5327 9.88044 53.2762 9.88044H55.3305C55.444 9.88044 55.5359 9.78846 55.5359 9.675C55.5359 9.33261 55.443 9.10272 55.2571 8.98533C55.0811 8.85815 54.7387 8.79457 54.23 8.79457C53.3815 8.79457 52.5424 8.91812 51.7129 9.16522C51.6889 9.17237 51.664 9.17609 51.6389 9.17609C51.4977 9.17609 51.3832 9.06162 51.3832 8.92041V7.0337C51.3832 6.96522 51.3979 6.9163 51.4273 6.88696C51.4957 6.81848 51.6816 6.74511 51.9849 6.66685C52.2979 6.58859 52.6745 6.52011 53.1148 6.46141C53.5647 6.39294 54.0245 6.3587 54.4941 6.3587C55.8343 6.3587 56.8126 6.60326 57.4289 7.09239C58.055 7.57174 58.368 8.34457 58.368 9.41087ZM54.1566 12.6098C54.5823 12.6098 54.9796 12.5136 55.3484 12.3213C55.4677 12.259 55.5359 12.1319 55.5359 11.9972V11.6951C55.5359 11.479 55.3608 11.3038 55.1446 11.3038H54.1859C54.0196 11.3038 53.8925 11.3478 53.8044 11.4359C53.7262 11.5337 53.687 11.6511 53.687 11.788V12.1402C53.687 12.4533 53.8436 12.6098 54.1566 12.6098Z\",\n                    fill: \"#000000\"\n                }, void 0, false, {\n                    fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/components/TldrawLogo.tsx\",\n                    lineNumber: 41,\n                    columnNumber: 5\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                    d: \"M64.2831 6.54946C64.1006 6.54946 63.9423 6.67566 63.9017 6.85362C63.6938 7.76648 63.5017 8.62378 63.3255 9.42554C63.1518 10.2575 63.0208 11.0466 62.9326 11.7931C62.922 11.8821 62.8468 11.9495 62.7573 11.9495C62.6585 11.9495 62.5792 11.8681 62.5807 11.7694C62.5921 11.0174 62.5616 10.2655 62.4891 9.51359C62.4206 8.70163 62.3326 7.79674 62.225 6.79891C62.2152 6.69131 62.1956 6.62283 62.1663 6.59348C62.1369 6.56413 62.0929 6.54946 62.0342 6.54946H59.9316C59.6887 6.54946 59.5045 6.76857 59.5457 7.008C59.7421 8.14646 59.9308 9.28491 60.1119 10.4234C60.3271 11.7147 60.5424 12.9571 60.7576 14.1505C60.7911 14.3014 60.8282 14.4092 60.8689 14.4739C60.8815 14.4939 60.8984 14.5108 60.918 14.5242C60.9687 14.5588 61.0228 14.5761 61.0804 14.5761H63.6985C63.8764 14.5761 64.032 14.456 64.0769 14.2839C64.1528 13.9935 64.2202 13.7339 64.2793 13.5049C64.3576 13.2016 64.426 12.9033 64.4847 12.6098C64.5434 12.3163 64.6021 11.9935 64.6608 11.6413C64.7227 11.3145 64.7885 10.9198 64.8583 10.4574C64.8714 10.3704 64.9461 10.306 65.034 10.306C65.1228 10.306 65.1979 10.3717 65.2098 10.4597C65.2695 10.902 65.3213 11.2812 65.3652 11.5973C65.4239 11.9397 65.4777 12.2429 65.5266 12.5071C65.5853 12.7614 65.644 13.0207 65.7027 13.2848C65.7614 13.5391 65.8299 13.8326 65.9081 14.1652C65.95 14.3076 65.9919 14.4106 66.0338 14.4741C66.0468 14.4939 66.0637 14.5108 66.0832 14.5242C66.1339 14.5588 66.188 14.5761 66.2456 14.5761H68.9092C69.0998 14.5761 69.2627 14.4388 69.2949 14.251L69.9141 10.6435C70.1391 9.33261 70.3592 8.03152 70.5744 6.74022C70.5842 6.61304 70.5402 6.54946 70.4424 6.54946H68.1855C67.9841 6.54946 67.8155 6.70245 67.7962 6.90299C67.712 7.77975 67.6353 8.61081 67.5663 9.3962C67.5027 10.2129 67.4729 11.0044 67.4767 11.7706C67.4772 11.8691 67.3978 11.9495 67.2993 11.9495C67.2091 11.9495 67.1334 11.8815 67.123 11.7918C67.0341 11.0294 66.8982 10.2455 66.7152 9.44022C66.5293 8.57935 66.3239 7.66957 66.0989 6.71087C66.0695 6.60326 66.0108 6.54946 65.9228 6.54946H64.2831Z\",\n                    fill: \"#000000\"\n                }, void 0, false, {\n                    fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/components/TldrawLogo.tsx\",\n                    lineNumber: 47,\n                    columnNumber: 5\n                }, this)\n            ]\n        }, void 0, true, {\n            fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/components/TldrawLogo.tsx\",\n            lineNumber: 10,\n            columnNumber: 4\n        }, this)\n    }, void 0, false, {\n        fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/components/TldrawLogo.tsx\",\n        lineNumber: 6,\n        columnNumber: 3\n    }, this);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9hcHAvY29tcG9uZW50cy9UbGRyYXdMb2dvLnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUE4QztBQUV2QyxTQUFTQztJQUNmLE1BQU1DLGFBQWFGLDZEQUFhQTtJQUNoQyxxQkFDQyw4REFBQ0c7UUFDQUMsV0FBVyxDQUFDLFdBQVcsRUFBRUYsYUFBYSxJQUFJLHVCQUF1QixHQUFHLENBQUM7UUFDckVHLE1BQUs7a0JBRUwsNEVBQUNDO1lBQ0FDLE9BQU07WUFDTkMsUUFBTztZQUNQQyxTQUFRO1lBQ1JDLE1BQUs7WUFDTEMsT0FBTztnQkFBRUMsU0FBUztZQUFFOzs4QkFFcEIsOERBQUNDO29CQUNBQyxVQUFTO29CQUNUQyxVQUFTO29CQUNUQyxHQUFFO29CQUNGTixNQUFLOzs7Ozs7OEJBRU4sOERBQUNHO29CQUNBRyxHQUFFO29CQUNGTixNQUFLOzs7Ozs7OEJBRU4sOERBQUNHO29CQUNBRyxHQUFFO29CQUNGTixNQUFLOzs7Ozs7OEJBRU4sOERBQUNHO29CQUNBQyxVQUFTO29CQUNUQyxVQUFTO29CQUNUQyxHQUFFO29CQUNGTixNQUFLOzs7Ozs7OEJBRU4sOERBQUNHO29CQUNBRyxHQUFFO29CQUNGTixNQUFLOzs7Ozs7OEJBRU4sOERBQUNHO29CQUNBQyxVQUFTO29CQUNUQyxVQUFTO29CQUNUQyxHQUFFO29CQUNGTixNQUFLOzs7Ozs7OEJBRU4sOERBQUNHO29CQUNBRyxHQUFFO29CQUNGTixNQUFLOzs7Ozs7Ozs7Ozs7Ozs7OztBQUtWIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdmliZS0zZC1jb2RlLy4vYXBwL2NvbXBvbmVudHMvVGxkcmF3TG9nby50c3g/ZDU3YiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1c2VCcmVha3BvaW50IH0gZnJvbSAnQHRsZHJhdy90bGRyYXcnXG5cbmV4cG9ydCBmdW5jdGlvbiBUbGRyYXdMb2dvKCkge1xuXHRjb25zdCBicmVha3BvaW50ID0gdXNlQnJlYWtwb2ludCgpXG5cdHJldHVybiAoXG5cdFx0PGFcblx0XHRcdGNsYXNzTmFtZT17YHRsZHJhd0xvZ28gJHticmVha3BvaW50IDwgNSA/ICd0bGRyYXdMb2dvX19tb2JpbGUnIDogJyd9YH1cblx0XHRcdGhyZWY9XCJodHRwczovL3d3dy50bGRyYXcuZGV2XCJcblx0XHQ+XG5cdFx0XHQ8c3ZnXG5cdFx0XHRcdHdpZHRoPVwiMTEwXCJcblx0XHRcdFx0aGVpZ2h0PVwiNDBcIlxuXHRcdFx0XHR2aWV3Qm94PVwiMCAwIDcxIDE4XCJcblx0XHRcdFx0ZmlsbD1cIm5vbmVcIlxuXHRcdFx0XHRzdHlsZT17eyBwYWRkaW5nOiA4IH19XG5cdFx0XHQ+XG5cdFx0XHRcdDxwYXRoXG5cdFx0XHRcdFx0ZmlsbFJ1bGU9XCJldmVub2RkXCJcblx0XHRcdFx0XHRjbGlwUnVsZT1cImV2ZW5vZGRcIlxuXHRcdFx0XHRcdGQ9XCJNMCAxLjk3ODAyQzAgMC44ODU1OSAwLjg0ODMwMyAwIDEuODk0NzQgMEgxNi4xMDUzQzE3LjE1MTcgMCAxOCAwLjg4NTU5MSAxOCAxLjk3ODAyVjE2LjAyMkMxOCAxNy4xMTQ0IDE3LjE1MTcgMTggMTYuMTA1MyAxOEgxLjg5NDc0QzAuODQ4MzAzIDE4IDAgMTcuMTE0NCAwIDE2LjAyMlYxLjk3ODAyWk0xMC42MjY0IDUuMTQ4MDFDMTAuNjI2NCA1LjU4MzAyIDEwLjQ3NzcgNS45NTIxMiAxMC4xODAzIDYuMjU1MzFDOS44ODI5NiA2LjU1ODUgOS41MjA5NSA2LjcxMDA5IDkuMDk0MyA2LjcxMDA5QzguNjU0NzEgNi43MTAwOSA4LjI4NjI0IDYuNTU4NSA3Ljk4ODg4IDYuMjU1MzFDNy42OTE1MSA1Ljk1MjEyIDcuNTQyODMgNS41ODMwMiA3LjU0MjgzIDUuMTQ4MDFDNy41NDI4MyA0LjcxMzAxIDcuNjkxNTEgNC4zNDM5MSA3Ljk4ODg4IDQuMDQwNzJDOC4yODYyNCAzLjczNzUzIDguNjU0NzEgMy41ODU5NCA5LjA5NDMgMy41ODU5NEM5LjUyMDk1IDMuNTg1OTQgOS44ODI5NiAzLjczNzUzIDEwLjE4MDMgNC4wNDA3MkMxMC40Nzc3IDQuMzQzOTEgMTAuNjI2NCA0LjcxMzAxIDEwLjYyNjQgNS4xNDgwMVpNNy41MjM0NCAxMC42MjI0QzcuNTIzNDQgMTAuMTg3NCA3LjY3MjEyIDkuODE4MzEgNy45Njk0OCA5LjUxNTEyQzguMjc5NzggOS4xOTg3NSA4LjY1NDcxIDkuMDQwNTYgOS4wOTQzIDkuMDQwNTZDOS41MDgwMiA5LjA0MDU2IDkuODcwMDMgOS4xOTg3NSAxMC4xODAzIDkuNTE1MTJDMTAuNDkwNiA5LjgxODMxIDEwLjY3MTYgMTAuMTYxIDEwLjcyMzMgMTAuNTQzM0MxMC44MjY4IDExLjI1NTIgMTAuNjk3NSAxMS45NjA0IDEwLjMzNTUgMTIuNjU5QzkuOTg2MzkgMTMuMzU3NyA5LjQ4MjE2IDEzLjg5MTYgOC44MjI3OSAxNC4yNjA3QzguNDYwNzggMTQuNDcxNiA4LjE2MzQyIDE0LjQ2NSA3LjkzMDcgMTQuMjQwOUM3LjcxMDkxIDE0LjAzIDcuNzc1NTUgMTMuNzc5NSA4LjEyNDYzIDEzLjQ4OTVDOC4zMTg1NiAxMy4zNDQ1IDguNDgwMTcgMTMuMTYgOC42MDk0NiAxMi45MzU5QzguNzM4NzUgMTIuNzExOCA4LjgyMjc5IDEyLjQ4MTEgOC44NjE1OCAxMi4yNDM4QzguODc0NTEgMTIuMTM4NCA4LjgyOTI1IDEyLjA4NTYgOC43MjU4MiAxMi4wODU2QzguNDY3MjUgMTIuMDcyNCA4LjIwMjIgMTEuOTI3NCA3LjkzMDcgMTEuNjUwNkM3LjY1OTE5IDExLjM3MzggNy41MjM0NCAxMS4wMzExIDcuNTIzNDQgMTAuNjIyNFpcIlxuXHRcdFx0XHRcdGZpbGw9XCIjMDAwMDAwXCJcblx0XHRcdFx0Lz5cblx0XHRcdFx0PHBhdGhcblx0XHRcdFx0XHRkPVwiTTM0LjE1NiAxNC41NzYxQzM0LjI2MzYgMTQuNTc2MSAzNC4zMTc0IDE0LjUyMjMgMzQuMzE3NCAxNC40MTQ3VjEyLjIyMzRDMzQuMzE3NCAxMi4wMDczIDM0LjE0MjIgMTEuODMyMSAzMy45MjYxIDExLjgzMjFIMzMuNjQyNEMzMy41NTQzIDExLjgzMjEgMzMuNDg1OSAxMS44MDc2IDMzLjQzNyAxMS43NTg3QzMzLjM5NzggMTEuNzE5NiAzMy4zNzgzIDExLjY2MDkgMzMuMzc4MyAxMS41ODI2VjMuNzMyMDdDMzMuMzc4MyAzLjYyNDQ2IDMzLjMyNDUgMy41NzA2NSAzMy4yMTY4IDMuNTcwNjVIMzAuNzQ2N0MzMC41MzA2IDMuNTcwNjUgMzAuMzU1NCAzLjc0NTg1IDMwLjM1NTQgMy45NjE5NlYxMi40NjNDMzAuMzU1NCAxMy4xNjc0IDMwLjU1NiAxMy42OTU3IDMwLjk1NzEgMTQuMDQ3OEMzMS4zNTgyIDE0LjQgMzEuODcxNyAxNC41NzYxIDMyLjQ5NzggMTQuNTc2MUgzNC4xNTZaXCJcblx0XHRcdFx0XHRmaWxsPVwiIzAwMDAwMFwiXG5cdFx0XHRcdC8+XG5cdFx0XHRcdDxwYXRoXG5cdFx0XHRcdFx0ZD1cIk0yOS4wOTM1IDEyLjIwODdDMjkuMDkzNSAxMS45OTI2IDI4LjkxODMgMTEuODE3NCAyOC43MDIyIDExLjgxNzRIMjcuNjcwMUMyNy4zMzc1IDExLjgxNzQgMjcuMTEyNSAxMS43NTg3IDI2Ljk5NTEgMTEuNjQxM0MyNi44NDg0IDExLjUwNDMgMjYuNzc1IDExLjI4NDIgMjYuNzc1IDEwLjk4MVY5LjY4NDc4QzI2Ljc3NSA5LjQ2ODY3IDI2Ljk1MDIgOS4yOTM0OCAyNy4xNjYzIDkuMjkzNDhIMjguNzAyMkMyOC45MTgzIDkuMjkzNDggMjkuMDkzNSA5LjExODI5IDI5LjA5MzUgOC45MDIxN1Y2LjcxMDg3QzI5LjA5MzUgNi42MDMyNiAyOS4wMzk3IDYuNTQ5NDYgMjguOTMyMSA2LjU0OTQ2SDI3LjE2NjNDMjYuOTUwMiA2LjU0OTQ2IDI2Ljc3NSA2LjM3NDI2IDI2Ljc3NSA2LjE1ODE1VjQuNDY1NzZDMjYuNzc1IDQuMzU4MTUgMjYuNzIxMiA0LjMwNDM1IDI2LjYxMzYgNC4zMDQzNUgyNC4yMzE1QzI0LjAxNTQgNC4zMDQzNSAyMy44NDAyIDQuNDc5NTQgMjMuODQwMiA0LjY5NTY1VjYuMTU4MTVDMjMuODQwMiA2LjM3NDI2IDIzLjY2NSA2LjU0OTQ2IDIzLjQ0ODkgNi41NDk0NkgyMy4wODdDMjIuODcwOCA2LjU0OTQ2IDIyLjY5NTcgNi43MjQ2NSAyMi42OTU3IDYuOTQwNzZWOS4xMzIwN0MyMi42OTU3IDkuMjM5NjcgMjIuNzQ5NSA5LjI5MzQ4IDIyLjg1NzEgOS4yOTM0OEgyMy40NDg5QzIzLjY2NSA5LjI5MzQ4IDIzLjg0MDIgOS40Njg2NyAyMy44NDAyIDkuNjg0NzhWMTEuMjAxMUMyMy44NDAyIDEyLjMzNTkgMjQuMTM4NiAxMy4xODIxIDI0LjczNTMgMTMuNzM5N0MyNS4zMzIxIDE0LjI5NzMgMjYuMTk3OCAxNC41NzYxIDI3LjMzMjYgMTQuNTc2MUgyOC45MzIxQzI5LjAzOTcgMTQuNTc2MSAyOS4wOTM1IDE0LjUyMjMgMjkuMDkzNSAxNC40MTQ3VjEyLjIwODdaXCJcblx0XHRcdFx0XHRmaWxsPVwiIzAwMDAwMFwiXG5cdFx0XHRcdC8+XG5cdFx0XHRcdDxwYXRoXG5cdFx0XHRcdFx0ZmlsbFJ1bGU9XCJldmVub2RkXCJcblx0XHRcdFx0XHRjbGlwUnVsZT1cImV2ZW5vZGRcIlxuXHRcdFx0XHRcdGQ9XCJNMzcuNjg2NyA2LjQwMjcyQzM4LjEzNjcgNi40MDI3MiAzOC41MjMxIDYuNTE1MjIgMzguODQ1OSA2Ljc0MDIyQzM5LjE0OTkgNi45NDU4NiAzOS40MDA4IDcuMjEyNzkgMzkuNTk4NSA3LjU0MTAxQzM5LjYzMzIgNy41OTg1NSAzOS42OTQ3IDcuNjM1MzMgMzkuNzYxOSA3LjYzNTMzQzM5Ljg2MzggNy42MzUzMyAzOS45NDY0IDcuNTUyNjggMzkuOTQ2NCA3LjQ1MDc0VjMuOTYxOTZDMzkuOTQ2NCAzLjc0NTg0IDQwLjEyMTYgMy41NzA2NSA0MC4zMzc3IDMuNTcwNjVINDIuNzE5OEM0Mi44Mjc0IDMuNTcwNjUgNDIuODgxMiAzLjYyNDQ2IDQyLjg4MTIgMy43MzIwN1YxNC4xODQ4QzQyLjg4MTIgMTQuNDAwOSA0Mi43MDYgMTQuNTc2MSA0Mi40ODk5IDE0LjU3NjFINDAuMTA3OUM0MC4wMDAyIDE0LjU3NjEgMzkuOTQ2NCAxNC41MjIzIDM5Ljk0NjQgMTQuNDE0N1YxMy41MzMzQzM5Ljk0NjQgMTMuNDI4NSAzOS44NjE0IDEzLjM0MzUgMzkuNzU2NiAxMy4zNDM1QzM5LjY5MiAxMy4zNDM1IDM5LjYzMjEgMTMuMzc2NSAzOS41OTYgMTMuNDMwMUMzOS4zNDYyIDEzLjgwMTMgMzkuMDY2OCAxNC4xMDUxIDM4Ljc1NzkgMTQuMzQxM0MzOC40MjUyIDE0LjU5NTcgMzguMDA5NSAxNC43MjI4IDM3LjUxMDYgMTQuNzIyOEMzNi44MzU2IDE0LjcyMjggMzYuMzAyNCAxNC40OTI5IDM1LjkxMTEgMTQuMDMzMkMzNS41MTk4IDEzLjU3MzQgMzUuMzI0MiAxMi45NTcxIDM1LjMyNDIgMTIuMTg0MlY5LjEwMjcyQzM1LjMyNDIgOC4yNjE0MSAzNS41MjQ3IDcuNjAxMDkgMzUuOTI1OCA3LjEyMTc0QzM2LjMzNjcgNi42NDIzOSAzNi45MjM2IDYuNDAyNzIgMzcuNjg2NyA2LjQwMjcyWk0zOC40MjA0IDExLjkzNDhDMzguNTI4IDEyLjA1MjIgMzguNzE4NyAxMi4xMTA5IDM4Ljk5MjYgMTIuMTEwOUMzOS4yNjkzIDEyLjExMDkgMzkuNTEyNiAxMi4wNzc0IDM5LjcyMjQgMTIuMDEwNUMzOS44NjM2IDExLjk2NTUgMzkuOTQ2NCAxMS44MjY1IDM5Ljk0NjQgMTEuNjc4M1Y5LjM1NjE2QzM5Ljk0NjQgOS4yMjUzMyAzOS44ODI3IDkuMDk5NjEgMzkuNzY0NyA5LjA0Mjk5QzM5LjY3MjMgOC45OTg2IDM5LjU3NjMgOC45NjQ3IDM5LjQ3NjkgOC45NDEzMUMzOS4zMTA2IDguODkyMzkgMzkuMTQ5MiA4Ljg2NzkzIDM4Ljk5MjYgOC44Njc5M0MzOC40OTM3IDguODY3OTMgMzguMjQ0MyA5LjExNzM5IDM4LjI0NDMgOS42MTYzVjExLjM3NzJDMzguMjQ0MyAxMS42NDEzIDM4LjMwMyAxMS44MjcyIDM4LjQyMDQgMTEuOTM0OFpcIlxuXHRcdFx0XHRcdGZpbGw9XCIjMDAwMDAwXCJcblx0XHRcdFx0Lz5cblx0XHRcdFx0PHBhdGhcblx0XHRcdFx0XHRkPVwiTTQ3LjE4MzkgMTQuNTc2MUM0Ny40MDAxIDE0LjU3NjEgNDcuNTc1MiAxNC40MDA5IDQ3LjU3NTIgMTQuMTg0OFYxMC4wNTU5QzQ3LjU3NTIgOS45MTk1NSA0Ny42NDUxIDkuNzkwNzIgNDcuNzY3OCA5LjczMTMxQzQ3Ljg4ODMgOS42NzI5OSA0OC4wMTQ4IDkuNjI0ODcgNDguMTQ3NSA5LjU4Njk2QzQ4LjM1MyA5LjUxODQ4IDQ4LjU4MjkgOS40ODQyNCA0OC44MzcyIDkuNDg0MjRDNDkuMDIzMSA5LjQ4NDI0IDQ5LjE5OTIgOS40OTg5MSA0OS4zNjU1IDkuNTI4MjZDNDkuNTI5MSA5LjU1NTUzIDQ5LjY4ODQgOS41OTEyMyA0OS44NDM2IDkuNjM1MzlDNDkuODY3MSA5LjY0MjA5IDQ5Ljg5MTUgOS42NDU2NSA0OS45MTYgOS42NDU2NUM1MC4wNTc3IDkuNjQ1NjUgNTAuMTcyNSA5LjUzMDggNTAuMTcyNSA5LjM4OTEyVjYuNzEwODdDNTAuMTcyNSA2LjY0MjM5IDUwLjE0ODEgNi41ODM3IDUwLjA5OTIgNi41MzQ3OEM1MC4wNjk4IDYuNTA1NDQgNTAuMDE2IDYuNDc2MDkgNDkuOTM3OCA2LjQ0Njc0QzQ5Ljg1OTUgNi40MTczOSA0OS43NDIxIDYuNDAyNzIgNDkuNTg1NiA2LjQwMjcyQzQ5LjEyNTggNi40MDI3MiA0OC43NTg5IDYuNTQ0NTcgNDguNDg1IDYuODI4MjZDNDguMjQyMyA3LjA3OTk0IDQ4LjA1MzMgNy40NDcyNSA0Ny45MTggNy45MzAxOUM0Ny44OTY2IDguMDA2NjUgNDcuODI3NyA4LjA2MDg3IDQ3Ljc0ODMgOC4wNjA4N0M0Ny42NTI3IDguMDYwODcgNDcuNTc1MiA3Ljk4MzQgNDcuNTc1MiA3Ljg4NzgzVjYuNzEwODdDNDcuNTc1MiA2LjYwMzI2IDQ3LjUyMTQgNi41NDk0NiA0Ny40MTM4IDYuNTQ5NDZINDQuOTg3OEM0NC43NzE2IDYuNTQ5NDYgNDQuNTk2NCA2LjcyNDY1IDQ0LjU5NjQgNi45NDA3NlYxNC40MTQ3QzQ0LjU5NjQgMTQuNTIyMyA0NC42NTAyIDE0LjU3NjEgNDQuNzU3OSAxNC41NzYxSDQ3LjE4MzlaXCJcblx0XHRcdFx0XHRmaWxsPVwiIzAwMDAwMFwiXG5cdFx0XHRcdC8+XG5cdFx0XHRcdDxwYXRoXG5cdFx0XHRcdFx0ZmlsbFJ1bGU9XCJldmVub2RkXCJcblx0XHRcdFx0XHRjbGlwUnVsZT1cImV2ZW5vZGRcIlxuXHRcdFx0XHRcdGQ9XCJNNTguMzY4IDkuNDEwODdWMTEuNzg4QzU4LjM2OCAxMS45MDg1IDU4LjQwOTYgMTEuOTg3NCA1OC40OTI5IDEyLjAyNDZDNTguNTE2NSAxMi4wMzUxIDU4LjU0MDcgMTIuMDQ0MSA1OC41NjUxIDEyLjA1MjZDNTguNTkyMyAxMi4wNjIxIDU4LjYxOTYgMTIuMDY2OCA1OC42NDY4IDEyLjA2NjhINTguNjY2NEM1OC44ODI1IDEyLjA2NjggNTkuMDU3NyAxMi4yNDIgNTkuMDU3NyAxMi40NTgyVjE0LjQxNDdDNTkuMDU3NyAxNC41MjIzIDU5LjAwMzkgMTQuNTc2MSA1OC44OTYzIDE0LjU3NjFINTcuOTEzMUM1Ny40MzM4IDE0LjU3NjEgNTYuOTkzNiAxNC40NzgzIDU2LjU5MjUgMTQuMjgyNkM1Ni4yNDQzIDE0LjEwODUgNTUuOTc3NCAxMy44NTcgNTUuNzkxOSAxMy41MjhDNTUuNzQ5NCAxMy40NTI2IDU1LjY3MTYgMTMuNDAyMiA1NS41ODUgMTMuNDAyMkM1NS41MDA5IDEzLjQwMjIgNTUuNDI0NCAxMy40NDk3IDU1LjM4MjYgMTMuNTIyN0M1NS4xNzQ2IDEzLjg4NTkgNTQuOTAyOSAxNC4xNzM1IDU0LjU2NzUgMTQuMzg1M0M1NC4yMDU1IDE0LjYxMDMgNTMuNzQwOCAxNC43MjI4IDUzLjE3MzQgMTQuNzIyOEM1Mi40ODg3IDE0LjcyMjggNTEuOTQ1NyAxNC41MzcgNTEuNTQ0NiAxNC4xNjUyQzUxLjE0MzYgMTMuNzkzNSA1MC45NDMgMTMuMjg5NyA1MC45NDMgMTIuNjUzOFYxMi4wODE1QzUwLjk0MyAxMS4zOTY3IDUxLjE0MzYgMTAuODU4NyA1MS41NDQ2IDEwLjQ2NzRDNTEuOTU1NSAxMC4wNzYxIDUyLjUzMjcgOS44ODA0NCA1My4yNzYyIDkuODgwNDRINTUuMzMwNUM1NS40NDQgOS44ODA0NCA1NS41MzU5IDkuNzg4NDYgNTUuNTM1OSA5LjY3NUM1NS41MzU5IDkuMzMyNjEgNTUuNDQzIDkuMTAyNzIgNTUuMjU3MSA4Ljk4NTMzQzU1LjA4MTEgOC44NTgxNSA1NC43Mzg3IDguNzk0NTcgNTQuMjMgOC43OTQ1N0M1My4zODE1IDguNzk0NTcgNTIuNTQyNCA4LjkxODEyIDUxLjcxMjkgOS4xNjUyMkM1MS42ODg5IDkuMTcyMzcgNTEuNjY0IDkuMTc2MDkgNTEuNjM4OSA5LjE3NjA5QzUxLjQ5NzcgOS4xNzYwOSA1MS4zODMyIDkuMDYxNjIgNTEuMzgzMiA4LjkyMDQxVjcuMDMzN0M1MS4zODMyIDYuOTY1MjIgNTEuMzk3OSA2LjkxNjMgNTEuNDI3MyA2Ljg4Njk2QzUxLjQ5NTcgNi44MTg0OCA1MS42ODE2IDYuNzQ1MTEgNTEuOTg0OSA2LjY2Njg1QzUyLjI5NzkgNi41ODg1OSA1Mi42NzQ1IDYuNTIwMTEgNTMuMTE0OCA2LjQ2MTQxQzUzLjU2NDcgNi4zOTI5NCA1NC4wMjQ1IDYuMzU4NyA1NC40OTQxIDYuMzU4N0M1NS44MzQzIDYuMzU4NyA1Ni44MTI2IDYuNjAzMjYgNTcuNDI4OSA3LjA5MjM5QzU4LjA1NSA3LjU3MTc0IDU4LjM2OCA4LjM0NDU3IDU4LjM2OCA5LjQxMDg3Wk01NC4xNTY2IDEyLjYwOThDNTQuNTgyMyAxMi42MDk4IDU0Ljk3OTYgMTIuNTEzNiA1NS4zNDg0IDEyLjMyMTNDNTUuNDY3NyAxMi4yNTkgNTUuNTM1OSAxMi4xMzE5IDU1LjUzNTkgMTEuOTk3MlYxMS42OTUxQzU1LjUzNTkgMTEuNDc5IDU1LjM2MDggMTEuMzAzOCA1NS4xNDQ2IDExLjMwMzhINTQuMTg1OUM1NC4wMTk2IDExLjMwMzggNTMuODkyNSAxMS4zNDc4IDUzLjgwNDQgMTEuNDM1OUM1My43MjYyIDExLjUzMzcgNTMuNjg3IDExLjY1MTEgNTMuNjg3IDExLjc4OFYxMi4xNDAyQzUzLjY4NyAxMi40NTMzIDUzLjg0MzYgMTIuNjA5OCA1NC4xNTY2IDEyLjYwOThaXCJcblx0XHRcdFx0XHRmaWxsPVwiIzAwMDAwMFwiXG5cdFx0XHRcdC8+XG5cdFx0XHRcdDxwYXRoXG5cdFx0XHRcdFx0ZD1cIk02NC4yODMxIDYuNTQ5NDZDNjQuMTAwNiA2LjU0OTQ2IDYzLjk0MjMgNi42NzU2NiA2My45MDE3IDYuODUzNjJDNjMuNjkzOCA3Ljc2NjQ4IDYzLjUwMTcgOC42MjM3OCA2My4zMjU1IDkuNDI1NTRDNjMuMTUxOCAxMC4yNTc1IDYzLjAyMDggMTEuMDQ2NiA2Mi45MzI2IDExLjc5MzFDNjIuOTIyIDExLjg4MjEgNjIuODQ2OCAxMS45NDk1IDYyLjc1NzMgMTEuOTQ5NUM2Mi42NTg1IDExLjk0OTUgNjIuNTc5MiAxMS44NjgxIDYyLjU4MDcgMTEuNzY5NEM2Mi41OTIxIDExLjAxNzQgNjIuNTYxNiAxMC4yNjU1IDYyLjQ4OTEgOS41MTM1OUM2Mi40MjA2IDguNzAxNjMgNjIuMzMyNiA3Ljc5Njc0IDYyLjIyNSA2Ljc5ODkxQzYyLjIxNTIgNi42OTEzMSA2Mi4xOTU2IDYuNjIyODMgNjIuMTY2MyA2LjU5MzQ4QzYyLjEzNjkgNi41NjQxMyA2Mi4wOTI5IDYuNTQ5NDYgNjIuMDM0MiA2LjU0OTQ2SDU5LjkzMTZDNTkuNjg4NyA2LjU0OTQ2IDU5LjUwNDUgNi43Njg1NyA1OS41NDU3IDcuMDA4QzU5Ljc0MjEgOC4xNDY0NiA1OS45MzA4IDkuMjg0OTEgNjAuMTExOSAxMC40MjM0QzYwLjMyNzEgMTEuNzE0NyA2MC41NDI0IDEyLjk1NzEgNjAuNzU3NiAxNC4xNTA1QzYwLjc5MTEgMTQuMzAxNCA2MC44MjgyIDE0LjQwOTIgNjAuODY4OSAxNC40NzM5QzYwLjg4MTUgMTQuNDkzOSA2MC44OTg0IDE0LjUxMDggNjAuOTE4IDE0LjUyNDJDNjAuOTY4NyAxNC41NTg4IDYxLjAyMjggMTQuNTc2MSA2MS4wODA0IDE0LjU3NjFINjMuNjk4NUM2My44NzY0IDE0LjU3NjEgNjQuMDMyIDE0LjQ1NiA2NC4wNzY5IDE0LjI4MzlDNjQuMTUyOCAxMy45OTM1IDY0LjIyMDIgMTMuNzMzOSA2NC4yNzkzIDEzLjUwNDlDNjQuMzU3NiAxMy4yMDE2IDY0LjQyNiAxMi45MDMzIDY0LjQ4NDcgMTIuNjA5OEM2NC41NDM0IDEyLjMxNjMgNjQuNjAyMSAxMS45OTM1IDY0LjY2MDggMTEuNjQxM0M2NC43MjI3IDExLjMxNDUgNjQuNzg4NSAxMC45MTk4IDY0Ljg1ODMgMTAuNDU3NEM2NC44NzE0IDEwLjM3MDQgNjQuOTQ2MSAxMC4zMDYgNjUuMDM0IDEwLjMwNkM2NS4xMjI4IDEwLjMwNiA2NS4xOTc5IDEwLjM3MTcgNjUuMjA5OCAxMC40NTk3QzY1LjI2OTUgMTAuOTAyIDY1LjMyMTMgMTEuMjgxMiA2NS4zNjUyIDExLjU5NzNDNjUuNDIzOSAxMS45Mzk3IDY1LjQ3NzcgMTIuMjQyOSA2NS41MjY2IDEyLjUwNzFDNjUuNTg1MyAxMi43NjE0IDY1LjY0NCAxMy4wMjA3IDY1LjcwMjcgMTMuMjg0OEM2NS43NjE0IDEzLjUzOTEgNjUuODI5OSAxMy44MzI2IDY1LjkwODEgMTQuMTY1MkM2NS45NSAxNC4zMDc2IDY1Ljk5MTkgMTQuNDEwNiA2Ni4wMzM4IDE0LjQ3NDFDNjYuMDQ2OCAxNC40OTM5IDY2LjA2MzcgMTQuNTEwOCA2Ni4wODMyIDE0LjUyNDJDNjYuMTMzOSAxNC41NTg4IDY2LjE4OCAxNC41NzYxIDY2LjI0NTYgMTQuNTc2MUg2OC45MDkyQzY5LjA5OTggMTQuNTc2MSA2OS4yNjI3IDE0LjQzODggNjkuMjk0OSAxNC4yNTFMNjkuOTE0MSAxMC42NDM1QzcwLjEzOTEgOS4zMzI2MSA3MC4zNTkyIDguMDMxNTIgNzAuNTc0NCA2Ljc0MDIyQzcwLjU4NDIgNi42MTMwNCA3MC41NDAyIDYuNTQ5NDYgNzAuNDQyNCA2LjU0OTQ2SDY4LjE4NTVDNjcuOTg0MSA2LjU0OTQ2IDY3LjgxNTUgNi43MDI0NSA2Ny43OTYyIDYuOTAyOTlDNjcuNzEyIDcuNzc5NzUgNjcuNjM1MyA4LjYxMDgxIDY3LjU2NjMgOS4zOTYyQzY3LjUwMjcgMTAuMjEyOSA2Ny40NzI5IDExLjAwNDQgNjcuNDc2NyAxMS43NzA2QzY3LjQ3NzIgMTEuODY5MSA2Ny4zOTc4IDExLjk0OTUgNjcuMjk5MyAxMS45NDk1QzY3LjIwOTEgMTEuOTQ5NSA2Ny4xMzM0IDExLjg4MTUgNjcuMTIzIDExLjc5MThDNjcuMDM0MSAxMS4wMjk0IDY2Ljg5ODIgMTAuMjQ1NSA2Ni43MTUyIDkuNDQwMjJDNjYuNTI5MyA4LjU3OTM1IDY2LjMyMzkgNy42Njk1NyA2Ni4wOTg5IDYuNzEwODdDNjYuMDY5NSA2LjYwMzI2IDY2LjAxMDggNi41NDk0NiA2NS45MjI4IDYuNTQ5NDZINjQuMjgzMVpcIlxuXHRcdFx0XHRcdGZpbGw9XCIjMDAwMDAwXCJcblx0XHRcdFx0Lz5cblx0XHRcdDwvc3ZnPlxuXHRcdDwvYT5cblx0KVxufSJdLCJuYW1lcyI6WyJ1c2VCcmVha3BvaW50IiwiVGxkcmF3TG9nbyIsImJyZWFrcG9pbnQiLCJhIiwiY2xhc3NOYW1lIiwiaHJlZiIsInN2ZyIsIndpZHRoIiwiaGVpZ2h0Iiwidmlld0JveCIsImZpbGwiLCJzdHlsZSIsInBhZGRpbmciLCJwYXRoIiwiZmlsbFJ1bGUiLCJjbGlwUnVsZSIsImQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./app/components/TldrawLogo.tsx\n");

/***/ }),

/***/ "(ssr)/./app/components/Vibe3DCodeButton.tsx":
/*!*********************************************!*\
  !*** ./app/components/Vibe3DCodeButton.tsx ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Vibe3DCodeButton: () => (/* binding */ Vibe3DCodeButton)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var styled_jsx_style__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! styled-jsx/style */ \"(ssr)/./node_modules/styled-jsx/style.js\");\n/* harmony import */ var styled_jsx_style__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(styled_jsx_style__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _tldraw_tldraw__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @tldraw/tldraw */ \"(ssr)/./node_modules/@tldraw/tldraw/dist-esm/index.mjs\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _lib_vibe3DCode__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../lib/vibe3DCode */ \"(ssr)/./app/lib/vibe3DCode.tsx\");\n/* harmony import */ var _lib_edit3DCode__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../lib/edit3DCode */ \"(ssr)/./app/lib/edit3DCode.tsx\");\n\n\n\n\n\n\nfunction Vibe3DCodeButton() {\n    const editor = (0,_tldraw_tldraw__WEBPACK_IMPORTED_MODULE_2__.useEditor)();\n    const { addToast } = (0,_tldraw_tldraw__WEBPACK_IMPORTED_MODULE_2__.useToasts)();\n    const [is3DModelSelected, setIs3DModelSelected] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(false);\n    const [isProcessing, setIsProcessing] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(false);\n    const [thinkingEnabled, setThinkingEnabled] = (0,react__WEBPACK_IMPORTED_MODULE_3__.useState)(true);\n    // Update state whenever selection changes\n    (0,react__WEBPACK_IMPORTED_MODULE_3__.useEffect)(()=>{\n        const handleSelectionChange = ()=>{\n            const selectedShapes = editor.getSelectedShapes();\n            const has3DModel = selectedShapes.some((shape)=>shape.type === \"model3d\");\n            setIs3DModelSelected(has3DModel);\n        };\n        // Check initially\n        handleSelectionChange();\n        // Subscribe to selection changes\n        editor.addListener(\"change\", handleSelectionChange);\n        // Cleanup\n        return ()=>{\n            editor.removeListener(\"change\", handleSelectionChange);\n        };\n    }, [\n        editor\n    ]);\n    const handleToggleThinking = (0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)((e)=>{\n        // Stop event propagation to prevent button click\n        e.stopPropagation();\n        setThinkingEnabled((prev)=>!prev);\n    }, []);\n    const handleClick = (0,react__WEBPACK_IMPORTED_MODULE_3__.useCallback)(async ()=>{\n        if (isProcessing) return; // Prevent multiple clicks\n        try {\n            setIsProcessing(true);\n            if (is3DModelSelected) {\n                // First get the 3D model shape\n                const selectedShapes = editor.getSelectedShapes();\n                const model3dShape = selectedShapes.find((shape)=>shape.type === \"model3d\");\n                if (!model3dShape) {\n                    throw Error(\"Could not find the selected 3D model.\");\n                }\n                // Use edit3DCode with loading state via custom event\n                await (0,_lib_edit3DCode__WEBPACK_IMPORTED_MODULE_5__.edit3DCode)(editor, (isEditing)=>{\n                    const elementId = model3dShape.id;\n                    // Dispatch a custom event to communicate with the component\n                    const event = new CustomEvent(\"model3d-editing-state-change\", {\n                        detail: {\n                            isEditing,\n                            elementId\n                        }\n                    });\n                    window.dispatchEvent(event);\n                });\n            } else {\n                // Otherwise, use vibe3DCode to create a new 3D model\n                await (0,_lib_vibe3DCode__WEBPACK_IMPORTED_MODULE_4__.vibe3DCode)(editor, undefined, thinkingEnabled);\n            }\n        } catch (e) {\n            console.error(e);\n            addToast({\n                icon: \"cross-2\",\n                title: \"Something went wrong\",\n                description: e.message.slice(0, 100)\n            });\n        } finally{\n            setIsProcessing(false);\n        }\n    }, [\n        editor,\n        addToast,\n        is3DModelSelected,\n        isProcessing,\n        thinkingEnabled\n    ]);\n    // 3D cube icon as an SVG\n    const CubeIcon = ()=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n            width: \"16\",\n            height: \"16\",\n            viewBox: \"0 0 24 24\",\n            fill: \"none\",\n            stroke: thinkingEnabled ? \"url(#cubeGradient)\" : \"currentColor\",\n            strokeWidth: \"2\",\n            strokeLinecap: \"round\",\n            strokeLinejoin: \"round\",\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"defs\", {\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"linearGradient\", {\n                        id: \"cubeGradient\",\n                        x1: \"0%\",\n                        y1: \"0%\",\n                        x2: \"100%\",\n                        y2: \"100%\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"stop\", {\n                                offset: \"0%\",\n                                stopColor: \"#ff80ff\"\n                            }, void 0, false, {\n                                fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/components/Vibe3DCodeButton.tsx\",\n                                lineNumber: 95,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"stop\", {\n                                offset: \"100%\",\n                                stopColor: \"#80ffff\"\n                            }, void 0, false, {\n                                fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/components/Vibe3DCodeButton.tsx\",\n                                lineNumber: 96,\n                                columnNumber: 11\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/components/Vibe3DCodeButton.tsx\",\n                        lineNumber: 94,\n                        columnNumber: 9\n                    }, this)\n                }, void 0, false, {\n                    fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/components/Vibe3DCodeButton.tsx\",\n                    lineNumber: 93,\n                    columnNumber: 7\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                    d: \"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z\"\n                }, void 0, false, {\n                    fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/components/Vibe3DCodeButton.tsx\",\n                    lineNumber: 99,\n                    columnNumber: 7\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"polyline\", {\n                    points: \"3.27 6.96 12 12.01 20.73 6.96\"\n                }, void 0, false, {\n                    fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/components/Vibe3DCodeButton.tsx\",\n                    lineNumber: 100,\n                    columnNumber: 7\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"line\", {\n                    x1: \"12\",\n                    y1: \"22.08\",\n                    x2: \"12\",\n                    y2: \"12\"\n                }, void 0, false, {\n                    fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/components/Vibe3DCodeButton.tsx\",\n                    lineNumber: 101,\n                    columnNumber: 7\n                }, this)\n            ]\n        }, void 0, true, {\n            fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/components/Vibe3DCodeButton.tsx\",\n            lineNumber: 83,\n            columnNumber: 5\n        }, this);\n    // Brain icon for AI\n    const BrainIcon = ()=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n            width: \"14\",\n            height: \"14\",\n            viewBox: \"0 0 24 24\",\n            fill: \"none\",\n            stroke: thinkingEnabled ? \"url(#brainGradient)\" : \"white\",\n            strokeWidth: \"2\",\n            strokeLinecap: \"round\",\n            strokeLinejoin: \"round\",\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"defs\", {\n                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"linearGradient\", {\n                        id: \"brainGradient\",\n                        x1: \"0%\",\n                        y1: \"0%\",\n                        x2: \"100%\",\n                        y2: \"100%\",\n                        children: [\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"stop\", {\n                                offset: \"0%\",\n                                stopColor: \"#ff80ff\"\n                            }, void 0, false, {\n                                fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/components/Vibe3DCodeButton.tsx\",\n                                lineNumber: 119,\n                                columnNumber: 11\n                            }, this),\n                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"stop\", {\n                                offset: \"100%\",\n                                stopColor: \"#80ffff\"\n                            }, void 0, false, {\n                                fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/components/Vibe3DCodeButton.tsx\",\n                                lineNumber: 120,\n                                columnNumber: 11\n                            }, this)\n                        ]\n                    }, void 0, true, {\n                        fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/components/Vibe3DCodeButton.tsx\",\n                        lineNumber: 118,\n                        columnNumber: 9\n                    }, this)\n                }, void 0, false, {\n                    fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/components/Vibe3DCodeButton.tsx\",\n                    lineNumber: 117,\n                    columnNumber: 7\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                    d: \"M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 4.44-1.04Z\"\n                }, void 0, false, {\n                    fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/components/Vibe3DCodeButton.tsx\",\n                    lineNumber: 123,\n                    columnNumber: 7\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"path\", {\n                    d: \"M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-4.44-1.04Z\"\n                }, void 0, false, {\n                    fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/components/Vibe3DCodeButton.tsx\",\n                    lineNumber: 124,\n                    columnNumber: 7\n                }, this)\n            ]\n        }, void 0, true, {\n            fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/components/Vibe3DCodeButton.tsx\",\n            lineNumber: 107,\n            columnNumber: 5\n        }, this);\n    // Toggle switch component\n    const ToggleSwitch = ({ enabled, onClick })=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n            onClick: onClick,\n            style: {\n                position: \"relative\",\n                width: \"36px\",\n                height: \"18px\",\n                borderRadius: \"10px\",\n                backgroundColor: enabled ? \"rgba(255,255,255,0.25)\" : \"rgba(255,255,255,0.15)\",\n                cursor: \"pointer\",\n                transition: \"all 0.2s\",\n                marginLeft: \"5px\",\n                border: \"1px solid rgba(255,255,255,0.3)\",\n                display: \"flex\",\n                alignItems: \"center\",\n                padding: \"1px\"\n            },\n            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                style: {\n                    position: \"absolute\",\n                    left: enabled ? \"18px\" : \"2px\",\n                    width: \"14px\",\n                    height: \"14px\",\n                    borderRadius: \"50%\",\n                    backgroundColor: \"#fff\",\n                    transition: \"all 0.2s ease\",\n                    boxShadow: \"0 1px 2px rgba(0,0,0,0.1)\"\n                }\n            }, void 0, false, {\n                fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/components/Vibe3DCodeButton.tsx\",\n                lineNumber: 147,\n                columnNumber: 7\n            }, this)\n        }, void 0, false, {\n            fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/components/Vibe3DCodeButton.tsx\",\n            lineNumber: 130,\n            columnNumber: 5\n        }, this);\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n        className: \"vibe3DCodeButton\",\n        onClick: handleClick,\n        disabled: isProcessing,\n        style: {\n            backgroundColor: isProcessing ? \"#66a6ff\" : \"#007bff\",\n            color: \"white\",\n            marginLeft: \"-3px\",\n            padding: \"6px 12px\",\n            borderRadius: \"4px\",\n            border: \"none\",\n            cursor: isProcessing ? \"not-allowed\" : \"pointer\",\n            fontSize: \"18px\",\n            fontWeight: 400,\n            display: \"flex\",\n            alignItems: \"center\",\n            justifyContent: \"center\",\n            gap: \"3px\",\n            transition: \"all 0.2s ease\",\n            opacity: isProcessing ? 0.8 : 1\n        },\n        onMouseEnter: (e)=>{\n            if (!isProcessing) {\n                e.currentTarget.style.backgroundColor = \"#0069d9\";\n                e.currentTarget.style.boxShadow = \"0 4px 8px rgba(0,0,0,0.15)\";\n            }\n        },\n        onMouseLeave: (e)=>{\n            if (!isProcessing) {\n                e.currentTarget.style.backgroundColor = \"#007bff\";\n                e.currentTarget.style.boxShadow = \"0 2px 4px rgba(0,0,0,0.1)\";\n            }\n        },\n        children: isProcessing ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    style: {\n                        width: \"14px\",\n                        height: \"14px\",\n                        border: \"2px solid rgba(255,255,255,0.3)\",\n                        borderRadius: \"50%\",\n                        borderTop: \"2px solid white\",\n                        animation: \"spin 1s linear infinite\"\n                    },\n                    className: \"jsx-776cdcbc0448e4ea\"\n                }, void 0, false, {\n                    fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/components/Vibe3DCodeButton.tsx\",\n                    lineNumber: 199,\n                    columnNumber: 11\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)((styled_jsx_style__WEBPACK_IMPORTED_MODULE_1___default()), {\n                    id: \"776cdcbc0448e4ea\",\n                    children: \"@-webkit-keyframes spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-moz-keyframes spin{0%{-moz-transform:rotate(0deg);transform:rotate(0deg)}100%{-moz-transform:rotate(360deg);transform:rotate(360deg)}}@-o-keyframes spin{0%{-o-transform:rotate(0deg);transform:rotate(0deg)}100%{-o-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes spin{0%{-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);-moz-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}\"\n                }, void 0, false, void 0, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                    className: \"jsx-776cdcbc0448e4ea\",\n                    children: is3DModelSelected ? \"Editing...\" : \"Creating...\"\n                }, void 0, false, {\n                    fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/components/Vibe3DCodeButton.tsx\",\n                    lineNumber: 215,\n                    columnNumber: 11\n                }, this)\n            ]\n        }, void 0, true) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(CubeIcon, {}, void 0, false, {\n                    fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/components/Vibe3DCodeButton.tsx\",\n                    lineNumber: 219,\n                    columnNumber: 11\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                    style: {\n                        display: \"flex\",\n                        alignItems: \"center\"\n                    },\n                    children: [\n                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"span\", {\n                            children: is3DModelSelected ? \"Edit 3D\" : \"Make 3D\"\n                        }, void 0, false, {\n                            fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/components/Vibe3DCodeButton.tsx\",\n                            lineNumber: 224,\n                            columnNumber: 13\n                        }, this),\n                        !is3DModelSelected && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                            style: {\n                                display: \"flex\",\n                                alignItems: \"center\",\n                                marginLeft: \"8px\",\n                                borderLeft: \"1px solid rgba(255,255,255,0.3)\",\n                                paddingLeft: \"8px\",\n                                height: \"18px\"\n                            },\n                            children: [\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                    style: {\n                                        display: \"flex\",\n                                        alignItems: \"center\",\n                                        gap: \"3px\"\n                                    },\n                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(BrainIcon, {}, void 0, false, {\n                                        fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/components/Vibe3DCodeButton.tsx\",\n                                        lineNumber: 241,\n                                        columnNumber: 19\n                                    }, this)\n                                }, void 0, false, {\n                                    fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/components/Vibe3DCodeButton.tsx\",\n                                    lineNumber: 236,\n                                    columnNumber: 17\n                                }, this),\n                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(ToggleSwitch, {\n                                    enabled: thinkingEnabled,\n                                    onClick: handleToggleThinking\n                                }, void 0, false, {\n                                    fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/components/Vibe3DCodeButton.tsx\",\n                                    lineNumber: 250,\n                                    columnNumber: 17\n                                }, this)\n                            ]\n                        }, void 0, true, {\n                            fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/components/Vibe3DCodeButton.tsx\",\n                            lineNumber: 228,\n                            columnNumber: 15\n                        }, this)\n                    ]\n                }, void 0, true, {\n                    fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/components/Vibe3DCodeButton.tsx\",\n                    lineNumber: 220,\n                    columnNumber: 11\n                }, this)\n            ]\n        }, void 0, true)\n    }, void 0, false, {\n        fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/components/Vibe3DCodeButton.tsx\",\n        lineNumber: 163,\n        columnNumber: 5\n    }, this);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9hcHAvY29tcG9uZW50cy9WaWJlM0RDb2RlQnV0dG9uLnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBcUQ7QUFDRztBQUNWO0FBQ0E7QUFHdkMsU0FBU087SUFDZCxNQUFNQyxTQUFTUix5REFBU0E7SUFDeEIsTUFBTSxFQUFFUyxRQUFRLEVBQUUsR0FBR1IseURBQVNBO0lBQzlCLE1BQU0sQ0FBQ1MsbUJBQW1CQyxxQkFBcUIsR0FBR1IsK0NBQVFBLENBQUM7SUFDM0QsTUFBTSxDQUFDUyxjQUFjQyxnQkFBZ0IsR0FBR1YsK0NBQVFBLENBQUM7SUFDakQsTUFBTSxDQUFDVyxpQkFBaUJDLG1CQUFtQixHQUFHWiwrQ0FBUUEsQ0FBQztJQUV2RCwwQ0FBMEM7SUFDMUNDLGdEQUFTQSxDQUFDO1FBQ1IsTUFBTVksd0JBQXdCO1lBQzVCLE1BQU1DLGlCQUFpQlQsT0FBT1UsaUJBQWlCO1lBQy9DLE1BQU1DLGFBQWFGLGVBQWVHLElBQUksQ0FBQ0MsQ0FBQUEsUUFBU0EsTUFBTUMsSUFBSSxLQUFLO1lBQy9EWCxxQkFBcUJRO1FBQ3ZCO1FBRUEsa0JBQWtCO1FBQ2xCSDtRQUVBLGlDQUFpQztRQUNqQ1IsT0FBT2UsV0FBVyxDQUFDLFVBQVVQO1FBRTdCLFVBQVU7UUFDVixPQUFPO1lBQ0xSLE9BQU9nQixjQUFjLENBQUMsVUFBVVI7UUFDbEM7SUFDRixHQUFHO1FBQUNSO0tBQU87SUFFWCxNQUFNaUIsdUJBQXVCdkIsa0RBQVdBLENBQUMsQ0FBQ3dCO1FBQ3hDLGlEQUFpRDtRQUNqREEsRUFBRUMsZUFBZTtRQUNqQlosbUJBQW1CYSxDQUFBQSxPQUFRLENBQUNBO0lBQzlCLEdBQUcsRUFBRTtJQUVMLE1BQU1DLGNBQWMzQixrREFBV0EsQ0FBQztRQUM5QixJQUFJVSxjQUFjLFFBQVEsMEJBQTBCO1FBRXBELElBQUk7WUFDRkMsZ0JBQWdCO1lBRWhCLElBQUlILG1CQUFtQjtnQkFDckIsK0JBQStCO2dCQUMvQixNQUFNTyxpQkFBaUJULE9B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QkFBSUMsT0FBTzt3QkFDVlEsU0FBUzt3QkFDVEMsWUFBWTtvQkFDZDs7c0NBQ0UsOERBQUNrQjtzQ0FDRS9GLG9CQUFvQixZQUFZOzs7Ozs7d0JBRWxDLENBQUNBLG1DQUNBLDhEQUFDbUU7NEJBQUlDLE9BQU87Z0NBQ1ZRLFNBQVM7Z0NBQ1RDLFlBQVk7Z0NBQ1pILFlBQVk7Z0NBQ1pzQixZQUFZO2dDQUNaQyxhQUFhO2dDQUNidkQsUUFBUTs0QkFDVjs7OENBQ0UsOERBQUN5QjtvQ0FBSUMsT0FBTzt3Q0FDVlEsU0FBUzt3Q0FDVEMsWUFBWTt3Q0FDWlcsS0FBSztvQ0FDUDs4Q0FDRSw0RUFBQ3pCOzs7Ozs7Ozs7OzhDQVNILDhEQUFDQztvQ0FDQ0MsU0FBUzdEO29DQUNUOEQsU0FBU25EOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBUzNCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdmliZS0zZC1jb2RlLy4vYXBwL2NvbXBvbmVudHMvVmliZTNEQ29kZUJ1dHRvbi50c3g/MGYzOCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1c2VFZGl0b3IsIHVzZVRvYXN0cyB9IGZyb20gJ0B0bGRyYXcvdGxkcmF3J1xuaW1wb3J0IHsgdXNlQ2FsbGJhY2ssIHVzZVN0YXRlLCB1c2VFZmZlY3QgfSBmcm9tICdyZWFjdCdcbmltcG9ydCB7IHZpYmUzRENvZGUgfSBmcm9tICcuLi9saWIvdmliZTNEQ29kZSdcbmltcG9ydCB7IGVkaXQzRENvZGUgfSBmcm9tICcuLi9saWIvZWRpdDNEQ29kZSdcbmltcG9ydCB7IE1vZGVsM0RQcmV2aWV3U2hhcGUgfSBmcm9tICcuLi9QcmV2aWV3U2hhcGUvTW9kZWwzRFByZXZpZXdTaGFwZSdcblxuZXhwb3J0IGZ1bmN0aW9uIFZpYmUzRENvZGVCdXR0b24oKSB7XG4gIGNvbnN0IGVkaXRvciA9IHVzZUVkaXRvcigpXG4gIGNvbnN0IHsgYWRkVG9hc3QgfSA9IHVzZVRvYXN0cygpXG4gIGNvbnN0IFtpczNETW9kZWxTZWxlY3RlZCwgc2V0SXMzRE1vZGVsU2VsZWN0ZWRdID0gdXNlU3RhdGUoZmFsc2UpXG4gIGNvbnN0IFtpc1Byb2Nlc3NpbmcsIHNldElzUHJvY2Vzc2luZ10gPSB1c2VTdGF0ZShmYWxzZSlcbiAgY29uc3QgW3RoaW5raW5nRW5hYmxlZCwgc2V0VGhpbmtpbmdFbmFibGVkXSA9IHVzZVN0YXRlKHRydWUpXG4gIFxuICAvLyBVcGRhdGUgc3RhdGUgd2hlbmV2ZXIgc2VsZWN0aW9uIGNoYW5nZXNcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBoYW5kbGVTZWxlY3Rpb25DaGFuZ2UgPSAoKSA9PiB7XG4gICAgICBjb25zdCBzZWxlY3RlZFNoYXBlcyA9IGVkaXRvci5nZXRTZWxlY3RlZFNoYXBlcygpXG4gICAgICBjb25zdCBoYXMzRE1vZGVsID0gc2VsZWN0ZWRTaGFwZXMuc29tZShzaGFwZSA9PiBzaGFwZS50eXBlID09PSAnbW9kZWwzZCcpXG4gICAgICBzZXRJczNETW9kZWxTZWxlY3RlZChoYXMzRE1vZGVsKVxuICAgIH1cbiAgICBcbiAgICAvLyBDaGVjayBpbml0aWFsbHlcbiAgICBoYW5kbGVTZWxlY3Rpb25DaGFuZ2UoKVxuICAgIFxuICAgIC8vIFN1YnNjcmliZSB0byBzZWxlY3Rpb24gY2hhbmdlc1xuICAgIGVkaXRvci5hZGRMaXN0ZW5lcignY2hhbmdlJywgaGFuZGxlU2VsZWN0aW9uQ2hhbmdlKVxuICAgIFxuICAgIC8vIENsZWFudXBcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgZWRpdG9yLnJlbW92ZUxpc3RlbmVyKCdjaGFuZ2UnLCBoYW5kbGVTZWxlY3Rpb25DaGFuZ2UpXG4gICAgfVxuICB9LCBbZWRpdG9yXSlcblxuICBjb25zdCBoYW5kbGVUb2dnbGVUaGlua2luZyA9IHVzZUNhbGxiYWNrKChlOiBSZWFjdC5Nb3VzZUV2ZW50KSA9PiB7XG4gICAgLy8gU3RvcCBldmVudCBwcm9wYWdhdGlvbiB0byBwcmV2ZW50IGJ1dHRvbiBjbGlja1xuICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgc2V0VGhpbmtpbmdFbmFibGVkKHByZXYgPT4gIXByZXYpO1xuICB9LCBbXSk7XG5cbiAgY29uc3QgaGFuZGxlQ2xpY2sgPSB1c2VDYWxsYmFjayhhc3luYyAoKSA9PiB7XG4gICAgaWYgKGlzUHJvY2Vzc2luZykgcmV0dXJuOyAvLyBQcmV2ZW50IG11bHRpcGxlIGNsaWNrc1xuICAgIFxuICAgIHRyeSB7XG4gICAgICBzZXRJc1Byb2Nlc3NpbmcodHJ1ZSk7XG4gICAgICBcbiAgICAgIGlmIChpczNETW9kZWxTZWxlY3RlZCkge1xuICAgICAgICAvLyBGaXJzdCBnZXQgdGhlIDNEIG1vZGVsIHNoYXBlXG4gICAgICAgIGNvbnN0IHNlbGVjdGVkU2hhcGVzID0gZWRpdG9yLmdldFNlbGVjdGVkU2hhcGVzKCk7XG4gICAgICAgIGNvbnN0IG1vZGVsM2RTaGFwZSA9IHNlbGVjdGVkU2hhcGVzLmZpbmQoc2hhcGUgPT4gc2hhcGUudHlwZSA9PT0gJ21vZGVsM2QnKSBhcyBNb2RlbDNEUHJldmlld1NoYXBlO1xuICAgICAgICBcbiAgICAgICAgaWYgKCFtb2RlbDNkU2hhcGUpIHtcbiAgICAgICAgICB0aHJvdyBFcnJvcignQ291bGQgbm90IGZpbmQgdGhlIHNlbGVjdGVkIDNEIG1vZGVsLicpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICAvLyBVc2UgZWRpdDNEQ29kZSB3aXRoIGxvYWRpbmcgc3RhdGUgdmlhIGN1c3RvbSBldmVudFxuICAgICAgICBhd2FpdCBlZGl0M0RDb2RlKGVkaXRvciwgKGlzRWRpdGluZykgPT4ge1xuICAgICAgICAgIGNvbnN0IGVsZW1lbnRJZCA9IG1vZGVsM2RTaGFwZS5pZDtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBEaXNwYXRjaCBhIGN1c3RvbSBldmVudCB0byBjb21tdW5pY2F0ZSB3aXRoIHRoZSBjb21wb25lbnRcbiAgICAgICAgICBjb25zdCBldmVudCA9IG5ldyBDdXN0b21FdmVudCgnbW9kZWwzZC1lZGl0aW5nLXN0YXRlLWNoYW5nZScsIHsgXG4gICAgICAgICAgICBkZXRhaWw6IHsgaXNFZGl0aW5nLCBlbGVtZW50SWQgfSBcbiAgICAgICAgICB9KTtcbiAgICAgICAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudChldmVudCk7XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gT3RoZXJ3aXNlLCB1c2UgdmliZTNEQ29kZSB0byBjcmVhdGUgYSBuZXcgM0QgbW9kZWxcbiAgICAgICAgYXdhaXQgdmliZTNEQ29kZShlZGl0b3IsIHVuZGVmaW5lZCwgdGhpbmtpbmdFbmFibGVkKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGUpXG4gICAgICBhZGRUb2FzdCh7XG4gICAgICAgIGljb246ICdjcm9zcy0yJyxcbiAgICAgICAgdGl0bGU6ICdTb21ldGhpbmcgd2VudCB3cm9uZycsXG4gICAgICAgIGRlc2NyaXB0aW9uOiAoZSBhcyBFcnJvcikubWVzc2FnZS5zbGljZSgwLCAxMDApLFxuICAgICAgfSlcbiAgICB9IGZpbmFsbHkge1xuICAgICAgc2V0SXNQcm9jZXNzaW5nKGZhbHNlKTtcbiAgICB9XG4gIH0sIFtlZGl0b3IsIGFkZFRvYXN0LCBpczNETW9kZWxTZWxlY3RlZCwgaXNQcm9jZXNzaW5nLCB0aGlua2luZ0VuYWJsZWRdKTtcblxuICAvLyAzRCBjdWJlIGljb24gYXMgYW4gU1ZHXG4gIGNvbnN0IEN1YmVJY29uID0gKCkgPT4gKFxuICAgIDxzdmcgXG4gICAgICB3aWR0aD1cIjE2XCIgXG4gICAgICBoZWlnaHQ9XCIxNlwiIFxuICAgICAgdmlld0JveD1cIjAgMCAyNCAyNFwiIFxuICAgICAgZmlsbD1cIm5vbmVcIiBcbiAgICAgIHN0cm9rZT17dGhpbmtpbmdFbmFibGVkID8gXCJ1cmwoI2N1YmVHcmFkaWVudClcIiA6IFwiY3VycmVudENvbG9yXCJ9XG4gICAgICBzdHJva2VXaWR0aD1cIjJcIiBcbiAgICAgIHN0cm9rZUxpbmVjYXA9XCJyb3VuZFwiIFxuICAgICAgc3Ryb2tlTGluZWpvaW49XCJyb3VuZFwiXG4gICAgPlxuICAgICAgPGRlZnM+XG4gICAgICAgIDxsaW5lYXJHcmFkaWVudCBpZD1cImN1YmVHcmFkaWVudFwiIHgxPVwiMCVcIiB5MT1cIjAlXCIgeDI9XCIxMDAlXCIgeTI9XCIxMDAlXCI+XG4gICAgICAgICAgPHN0b3Agb2Zmc2V0PVwiMCVcIiBzdG9wQ29sb3I9XCIjZmY4MGZmXCIgLz5cbiAgICAgICAgICA8c3RvcCBvZmZzZXQ9XCIxMDAlXCIgc3RvcENvbG9yPVwiIzgwZmZmZlwiIC8+XG4gICAgICAgIDwvbGluZWFyR3JhZGllbnQ+XG4gICAgICA8L2RlZnM+XG4gICAgICA8cGF0aCBkPVwiTTIxIDE2VjhhMiAyIDAgMCAwLTEtMS43M2wtNy00YTIgMiAwIDAgMC0yIDBsLTcgNEEyIDIgMCAwIDAgMyA4djhhMiAyIDAgMCAwIDEgMS43M2w3IDRhMiAyIDAgMCAwIDIgMGw3LTRBMiAyIDAgMCAwIDIxIDE2elwiLz5cbiAgICAgIDxwb2x5bGluZSBwb2ludHM9XCIzLjI3IDYuOTYgMTIgMTIuMDEgMjAuNzMgNi45NlwiLz5cbiAgICAgIDxsaW5lIHgxPVwiMTJcIiB5MT1cIjIyLjA4XCIgeDI9XCIxMlwiIHkyPVwiMTJcIi8+XG4gICAgPC9zdmc+XG4gIClcblxuICAvLyBCcmFpbiBpY29uIGZvciBBSVxuICBjb25zdCBCcmFpbkljb24gPSAoKSA9PiAoXG4gICAgPHN2Z1xuICAgICAgd2lkdGg9XCIxNFwiXG4gICAgICBoZWlnaHQ9XCIxNFwiXG4gICAgICB2aWV3Qm94PVwiMCAwIDI0IDI0XCJcbiAgICAgIGZpbGw9XCJub25lXCJcbiAgICAgIHN0cm9rZT17dGhpbmtpbmdFbmFibGVkID8gXCJ1cmwoI2JyYWluR3JhZGllbnQpXCIgOiBcIndoaXRlXCJ9XG4gICAgICBzdHJva2VXaWR0aD1cIjJcIlxuICAgICAgc3Ryb2tlTGluZWNhcD1cInJvdW5kXCJcbiAgICAgIHN0cm9rZUxpbmVqb2luPVwicm91bmRcIlxuICAgID5cbiAgICAgIDxkZWZzPlxuICAgICAgICA8bGluZWFyR3JhZGllbnQgaWQ9XCJicmFpbkdyYWRpZW50XCIgeDE9XCIwJVwiIHkxPVwiMCVcIiB4Mj1cIjEwMCVcIiB5Mj1cIjEwMCVcIj5cbiAgICAgICAgICA8c3RvcCBvZmZzZXQ9XCIwJVwiIHN0b3BDb2xvcj1cIiNmZjgwZmZcIiAvPlxuICAgICAgICAgIDxzdG9wIG9mZnNldD1cIjEwMCVcIiBzdG9wQ29sb3I9XCIjODBmZmZmXCIgLz5cbiAgICAgICAgPC9saW5lYXJHcmFkaWVudD5cbiAgICAgIDwvZGVmcz5cbiAgICAgIDxwYXRoIGQ9XCJNOS41IDJBMi41IDIuNSAwIDAgMSAxMiA0LjV2MTVhMi41IDIuNSAwIDAgMS00Ljk2LjQ0IDIuNSAyLjUgMCAwIDEtMi45Ni0zLjA4IDMgMyAwIDAgMS0uMzQtNS41OCAyLjUgMi41IDAgMCAxIDEuMzItNC4yNCAyLjUgMi41IDAgMCAxIDQuNDQtMS4wNFpcIj48L3BhdGg+XG4gICAgICA8cGF0aCBkPVwiTTE0LjUgMkEyLjUgMi41IDAgMCAwIDEyIDQuNXYxNWEyLjUgMi41IDAgMCAwIDQuOTYuNDQgMi41IDIuNSAwIDAgMCAyLjk2LTMuMDggMyAzIDAgMCAwIC4zNC01LjU4IDIuNSAyLjUgMCAwIDAtMS4zMi00LjI0IDIuNSAyLjUgMCAwIDAtNC40NC0xLjA0WlwiPjwvcGF0aD5cbiAgICA8L3N2Zz5cbiAgKVxuXG4gIC8vIFRvZ2dsZSBzd2l0Y2ggY29tcG9uZW50XG4gIGNvbnN0IFRvZ2dsZVN3aXRjaCA9ICh7IGVuYWJsZWQsIG9uQ2xpY2sgfTogeyBlbmFibGVkOiBib29sZWFuLCBvbkNsaWNrOiAoZTogUmVhY3QuTW91c2VFdmVudCkgPT4gdm9pZCB9KSA9PiAoXG4gICAgPGRpdiBcbiAgICAgIG9uQ2xpY2s9e29uQ2xpY2t9XG4gICAgICBzdHlsZT17e1xuICAgICAgICBwb3NpdGlvbjogJ3JlbGF0aXZlJyxcbiAgICAgICAgd2lkdGg6ICczNnB4JyxcbiAgICAgICAgaGVpZ2h0OiAnMThweCcsXG4gICAgICAgIGJvcmRlclJhZGl1czogJzEwcHgnLFxuICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IGVuYWJsZWQgPyAncmdiYSgyNTUsMjU1LDI1NSwwLjI1KScgOiAncmdiYSgyNTUsMjU1LDI1NSwwLjE1KScsXG4gICAgICAgIGN1cnNvcjogJ3BvaW50ZXInLFxuICAgICAgICB0cmFuc2l0aW9uOiAnYWxsIDAuMnMnLFxuICAgICAgICBtYXJnaW5MZWZ0OiAnNXB4JyxcbiAgICAgICAgYm9yZGVyOiAnMXB4IHNvbGlkIHJnYmEoMjU1LDI1NSwyNTUsMC4zKScsXG4gICAgICAgIGRpc3BsYXk6ICdmbGV4JyxcbiAgICAgICAgYWxpZ25JdGVtczogJ2NlbnRlcicsXG4gICAgICAgIHBhZGRpbmc6ICcxcHgnLFxuICAgICAgfX1cbiAgICA+XG4gICAgICA8ZGl2IFxuICAgICAgICBzdHlsZT17e1xuICAgICAgICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxuICAgICAgICAgIGxlZnQ6IGVuYWJsZWQgPyAnMThweCcgOiAnMnB4JyxcbiAgICAgICAgICB3aWR0aDogJzE0cHgnLFxuICAgICAgICAgIGhlaWdodDogJzE0cHgnLFxuICAgICAgICAgIGJvcmRlclJhZGl1czogJzUwJScsXG4gICAgICAgICAgYmFja2dyb3VuZENvbG9yOiAnI2ZmZicsXG4gICAgICAgICAgdHJhbnNpdGlvbjogJ2FsbCAwLjJzIGVhc2UnLFxuICAgICAgICAgIGJveFNoYWRvdzogJzAgMXB4IDJweCByZ2JhKDAsMCwwLDAuMSknXG4gICAgICAgIH19XG4gICAgICAvPlxuICAgIDwvZGl2PlxuICApO1xuXG4gIHJldHVybiAoXG4gICAgPGJ1dHRvbiBcbiAgICAgIGNsYXNzTmFtZT1cInZpYmUzRENvZGVCdXR0b25cIiBcbiAgICAgIG9uQ2xpY2s9e2hhbmRsZUNsaWNrfVxuICAgICAgZGlzYWJsZWQ9e2lzUHJvY2Vzc2luZ31cbiAgICAgIHN0eWxlPXt7IFxuICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IGlzUHJvY2Vzc2luZyA/ICcjNjZhNmZmJyA6ICcjMDA3YmZmJyxcbiAgICAgICAgY29sb3I6ICd3aGl0ZScsXG4gICAgICAgIG1hcmdpbkxlZnQ6ICctM3B4JyxcbiAgICAgICAgcGFkZGluZzogJzZweCAxMnB4JyxcbiAgICAgICAgYm9yZGVyUmFkaXVzOiAnNHB4JyxcbiAgICAgICAgYm9yZGVyOiAnbm9uZScsXG4gICAgICAgIGN1cnNvcjogaXNQcm9jZXNzaW5nID8gJ25vdC1hbGxvd2VkJyA6ICdwb2ludGVyJyxcbiAgICAgICAgZm9udFNpemU6ICcxOHB4JyxcbiAgICAgICAgZm9udFdlaWdodDogNDAwLFxuICAgICAgICBkaXNwbGF5OiAnZmxleCcsXG4gICAgICAgIGFsaWduSXRlbXM6ICdjZW50ZXInLFxuICAgICAgICBqdXN0aWZ5Q29udGVudDogJ2NlbnRlcicsXG4gICAgICAgIGdhcDogJzNweCcsXG4gICAgICAgIHRyYW5zaXRpb246ICdhbGwgMC4ycyBlYXNlJyxcbiAgICAgICAgb3BhY2l0eTogaXNQcm9jZXNzaW5nID8gMC44IDogMSxcbiAgICAgIH19XG4gICAgICBvbk1vdXNlRW50ZXI9eyhlKSA9PiB7XG4gICAgICAgIGlmICghaXNQcm9jZXNzaW5nKSB7XG4gICAgICAgICAgZS5jdXJyZW50VGFyZ2V0LnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICcjMDA2OWQ5JztcbiAgICAgICAgICBlLmN1cnJlbnRUYXJnZXQuc3R5bGUuYm94U2hhZG93ID0gJzAgNHB4IDhweCByZ2JhKDAsMCwwLDAuMTUpJztcbiAgICAgICAgfVxuICAgICAgfX1cbiAgICAgIG9uTW91c2VMZWF2ZT17KGUpID0+IHtcbiAgICAgICAgaWYgKCFpc1Byb2Nlc3NpbmcpIHtcbiAgICAgICAgICBlLmN1cnJlbnRUYXJnZXQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJyMwMDdiZmYnO1xuICAgICAgICAgIGUuY3VycmVudFRhcmdldC5zdHlsZS5ib3hTaGFkb3cgPSAnMCAycHggNHB4IHJnYmEoMCwwLDAsMC4xKSc7XG4gICAgICAgIH1cbiAgICAgIH19XG4gICAgPlxuICAgICAge2lzUHJvY2Vzc2luZyA/IChcbiAgICAgICAgPD5cbiAgICAgICAgICA8ZGl2IFxuICAgICAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICAgICAgd2lkdGg6ICcxNHB4JyxcbiAgICAgICAgICAgICAgaGVpZ2h0OiAnMTRweCcsXG4gICAgICAgICAgICAgIGJvcmRlcjogJzJweCBzb2xpZCByZ2JhKDI1NSwyNTUsMjU1LDAuMyknLFxuICAgICAgICAgICAgICBib3JkZXJSYWRpdXM6ICc1MCUnLFxuICAgICAgICAgICAgICBib3JkZXJUb3A6ICcycHggc29saWQgd2hpdGUnLFxuICAgICAgICAgICAgICBhbmltYXRpb246ICdzcGluIDFzIGxpbmVhciBpbmZpbml0ZScsXG4gICAgICAgICAgICB9fSBcbiAgICAgICAgICAvPlxuICAgICAgICAgIDxzdHlsZSBqc3g+e2BcbiAgICAgICAgICAgIEBrZXlmcmFtZXMgc3BpbiB7XG4gICAgICAgICAgICAgIDAlIHsgdHJhbnNmb3JtOiByb3RhdGUoMGRlZyk7IH1cbiAgICAgICAgICAgICAgMTAwJSB7IHRyYW5zZm9ybTogcm90YXRlKDM2MGRlZyk7IH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICBgfTwvc3R5bGU+XG4gICAgICAgICAgPHNwYW4+e2lzM0RNb2RlbFNlbGVjdGVkID8gJ0VkaXRpbmcuLi4nIDogJ0NyZWF0aW5nLi4uJ308L3NwYW4+XG4gICAgICAgIDwvPlxuICAgICAgKSA6IChcbiAgICAgICAgPD5cbiAgICAgICAgICA8Q3ViZUljb24gLz5cbiAgICAgICAgICA8ZGl2IHN0eWxlPXt7XG4gICAgICAgICAgICBkaXNwbGF5OiAnZmxleCcsXG4gICAgICAgICAgICBhbGlnbkl0ZW1zOiAnY2VudGVyJ1xuICAgICAgICAgIH19PlxuICAgICAgICAgICAgPHNwYW4+XG4gICAgICAgICAgICAgIHtpczNETW9kZWxTZWxlY3RlZCA/ICdFZGl0IDNEJyA6ICdNYWtlIDNEJ31cbiAgICAgICAgICAgIDwvc3Bhbj5cbiAgICAgICAgICAgIHshaXMzRE1vZGVsU2VsZWN0ZWQgJiYgKFxuICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IFxuICAgICAgICAgICAgICAgIGRpc3BsYXk6ICdmbGV4JyxcbiAgICAgICAgICAgICAgICBhbGlnbkl0ZW1zOiAnY2VudGVyJyxcbiAgICAgICAgICAgICAgICBtYXJnaW5MZWZ0OiAnOHB4JyxcbiAgICAgICAgICAgICAgICBib3JkZXJMZWZ0OiAnMXB4IHNvbGlkIHJnYmEoMjU1LDI1NSwyNTUsMC4zKScsXG4gICAgICAgICAgICAgICAgcGFkZGluZ0xlZnQ6ICc4cHgnLFxuICAgICAgICAgICAgICAgIGhlaWdodDogJzE4cHgnXG4gICAgICAgICAgICAgIH19PlxuICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3tcbiAgICAgICAgICAgICAgICAgIGRpc3BsYXk6ICdmbGV4JyxcbiAgICAgICAgICAgICAgICAgIGFsaWduSXRlbXM6ICdjZW50ZXInLFxuICAgICAgICAgICAgICAgICAgZ2FwOiAnM3B4JyxcbiAgICAgICAgICAgICAgICB9fT5cbiAgICAgICAgICAgICAgICAgIDxCcmFpbkljb24gLz5cbiAgICAgICAgICAgICAgICAgIHsvKiA8c3BhbiBzdHlsZT17eyBcbiAgICAgICAgICAgICAgICAgICAgZm9udFNpemU6ICcxMHB4JywgXG4gICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDAuOSxcbiAgICAgICAgICAgICAgICAgICAgZm9udFdlaWdodDogdGhpbmtpbmdFbmFibGVkID8gJ2JvbGQnIDogJ25vcm1hbCcsXG4gICAgICAgICAgICAgICAgICB9fT5cbiAgICAgICAgICAgICAgICAgICAgQUlcbiAgICAgICAgICAgICAgICAgIDwvc3Bhbj4gKi99XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPFRvZ2dsZVN3aXRjaCBcbiAgICAgICAgICAgICAgICAgIGVuYWJsZWQ9e3RoaW5raW5nRW5hYmxlZH1cbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9e2hhbmRsZVRvZ2dsZVRoaW5raW5nfVxuICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC8+XG4gICAgICApfVxuICAgIDwvYnV0dG9uPlxuICApXG59XG4iXSwibmFtZXMiOlsidXNlRWRpdG9yIiwidXNlVG9hc3RzIiwidXNlQ2FsbGJhY2siLCJ1c2VTdGF0ZSIsInVzZUVmZmVjdCIsInZpYmUzRENvZGUiLCJlZGl0M0RDb2RlIiwiVmliZTNEQ29kZUJ1dHRvbiIsImVkaXRvciIsImFkZFRvYXN0IiwiaXMzRE1vZGVsU2VsZWN0ZWQiLCJzZXRJczNETW9kZWxTZWxlY3RlZCIsImlzUHJvY2Vzc2luZyIsInNldElzUHJvY2Vzc2luZyIsInRoaW5raW5nRW5hYmxlZCIsInNldFRoaW5raW5nRW5hYmxlZCIsImhhbmRsZVNlbGVjdGlvbkNoYW5nZSIsInNlbGVjdGVkU2hhcGVzIiwiZ2V0U2VsZWN0ZWRTaGFwZXMiLCJoYXMzRE1vZGVsIiwic29tZSIsInNoYXBlIiwidHlwZSIsImFkZExpc3RlbmVyIiwicmVtb3ZlTGlzdGVuZXIiLCJoYW5kbGVUb2dnbGVUaGlua2luZyIsImUiLCJzdG9wUHJvcGFnYXRpb24iLCJwcmV2IiwiaGFuZGxlQ2xpY2siLCJtb2RlbDNkU2hhcGUiLCJmaW5kIiwiRXJyb3IiLCJpc0VkaXRpbmciLCJlbGVtZW50SWQiLCJpZCIsImV2ZW50IiwiQ3VzdG9tRXZlbnQiLCJkZXRhaWwiLCJ3aW5kb3ciLCJkaXNwYXRjaEV2ZW50IiwidW5kZWZpbmVkIiwiY29uc29sZSIsImVycm9yIiwiaWNvbiIsInRpdGxlIiwiZGVzY3JpcHRpb24iLCJtZXNzYWdlIiwic2xpY2UiLCJDdWJlSWNvbiIsInN2ZyIsIndpZHRoIiwiaGVpZ2h0Iiwidmlld0JveCIsImZpbGwiLCJzdHJva2UiLCJzdHJva2VXaWR0aCIsInN0cm9rZUxpbmVjYXAiLCJzdHJva2VMaW5lam9pbiIsImRlZnMiLCJsaW5lYXJHcmFkaWVudCIsIngxIiwieTEiLCJ4MiIsInkyIiwic3RvcCIsIm9mZnNldCIsInN0b3BDb2xvciIsInBhdGgiLCJkIiwicG9seWxpbmUiLCJwb2ludHMiLCJsaW5lIiwiQnJhaW5JY29uIiwiVG9nZ2xlU3dpdGNoIiwiZW5hYmxlZCIsIm9uQ2xpY2siLCJkaXYiLCJzdHlsZSIsInBvc2l0aW9uIiwiYm9yZGVyUmFkaXVzIiwiYmFja2dyb3VuZENvbG9yIiwiY3Vyc29yIiwidHJhbnNpdGlvbiIsIm1hcmdpbkxlZnQiLCJib3JkZXIiLCJkaXNwbGF5IiwiYWxpZ25JdGVtcyIsInBhZGRpbmciLCJsZWZ0IiwiYm94U2hhZG93IiwiYnV0dG9uIiwiY2xhc3NOYW1lIiwiZGlzYWJsZWQiLCJjb2xvciIsImZvbnRTaXplIiwiZm9udFdlaWdodCIsImp1c3RpZnlDb250ZW50IiwiZ2FwIiwib3BhY2l0eSIsIm9uTW91c2VFbnRlciIsImN1cnJlbnRUYXJnZXQiLCJvbk1vdXNlTGVhdmUiLCJib3JkZXJUb3AiLCJhbmltYXRpb24iLCJzcGFuIiwiYm9yZGVyTGVmdCIsInBhZGRpbmdMZWZ0Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./app/components/Vibe3DCodeButton.tsx\n");

/***/ }),

/***/ "(ssr)/./app/components/three/Crosshair.tsx":
/*!********************************************!*\
  !*** ./app/components/three/Crosshair.tsx ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Crosshair: () => (/* binding */ Crosshair)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n\n\nfunction Crosshair() {\n    const [isPointerLocked, setIsPointerLocked] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        const checkPointerLock = ()=>{\n            setIsPointerLocked(!!document.pointerLockElement);\n        };\n        // Initial check\n        checkPointerLock();\n        // Add event listener for pointer lock changes\n        document.addEventListener(\"pointerlockchange\", checkPointerLock);\n        return ()=>{\n            document.removeEventListener(\"pointerlockchange\", checkPointerLock);\n        };\n    }, []);\n    // Styling to position the crosshair at the center of the screen\n    const crosshairStyle = {\n        position: \"fixed\",\n        top: \"50%\",\n        left: \"50%\",\n        transform: \"translate(-50%, -50%)\",\n        pointerEvents: \"none\",\n        zIndex: 1000,\n        mixBlendMode: \"difference\",\n        userSelect: \"none\",\n        opacity: isPointerLocked ? 1 : 0.5,\n        transition: \"opacity 0.2s ease-in-out\"\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        style: crosshairStyle,\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"svg\", {\n            width: \"32\",\n            height: \"32\",\n            viewBox: \"0 0 32 32\",\n            fill: \"none\",\n            xmlns: \"http://www.w3.org/2000/svg\",\n            children: [\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"line\", {\n                    x1: \"0\",\n                    y1: \"16\",\n                    x2: \"13\",\n                    y2: \"16\",\n                    stroke: \"white\",\n                    strokeWidth: \"2\"\n                }, void 0, false, {\n                    fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/components/three/Crosshair.tsx\",\n                    lineNumber: 40,\n                    columnNumber: 9\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"line\", {\n                    x1: \"19\",\n                    y1: \"16\",\n                    x2: \"32\",\n                    y2: \"16\",\n                    stroke: \"white\",\n                    strokeWidth: \"2\"\n                }, void 0, false, {\n                    fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/components/three/Crosshair.tsx\",\n                    lineNumber: 41,\n                    columnNumber: 9\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"line\", {\n                    x1: \"16\",\n                    y1: \"0\",\n                    x2: \"16\",\n                    y2: \"13\",\n                    stroke: \"white\",\n                    strokeWidth: \"2\"\n                }, void 0, false, {\n                    fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/components/three/Crosshair.tsx\",\n                    lineNumber: 44,\n                    columnNumber: 9\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"line\", {\n                    x1: \"16\",\n                    y1: \"19\",\n                    x2: \"16\",\n                    y2: \"32\",\n                    stroke: \"white\",\n                    strokeWidth: \"2\"\n                }, void 0, false, {\n                    fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/components/three/Crosshair.tsx\",\n                    lineNumber: 45,\n                    columnNumber: 9\n                }, this),\n                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"circle\", {\n                    cx: \"16\",\n                    cy: \"16\",\n                    r: \"4\",\n                    stroke: \"white\",\n                    strokeWidth: \"2\",\n                    fill: \"none\"\n                }, void 0, false, {\n                    fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/components/three/Crosshair.tsx\",\n                    lineNumber: 48,\n                    columnNumber: 9\n                }, this)\n            ]\n        }, void 0, true, {\n            fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/components/three/Crosshair.tsx\",\n            lineNumber: 38,\n            columnNumber: 7\n        }, this)\n    }, void 0, false, {\n        fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/components/three/Crosshair.tsx\",\n        lineNumber: 37,\n        columnNumber: 5\n    }, this);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9hcHAvY29tcG9uZW50cy90aHJlZS9Dcm9zc2hhaXIudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFtRDtBQUU1QyxTQUFTRztJQUNkLE1BQU0sQ0FBQ0MsaUJBQWlCQyxtQkFBbUIsR0FBR0gsK0NBQVFBLENBQUM7SUFFdkRELGdEQUFTQSxDQUFDO1FBQ1IsTUFBTUssbUJBQW1CO1lBQ3ZCRCxtQkFBbUIsQ0FBQyxDQUFDRSxTQUFTQyxrQkFBa0I7UUFDbEQ7UUFFQSxnQkFBZ0I7UUFDaEJGO1FBRUEsOENBQThDO1FBQzlDQyxTQUFTRSxnQkFBZ0IsQ0FBQyxxQkFBcUJIO1FBRS9DLE9BQU87WUFDTEMsU0FBU0csbUJBQW1CLENBQUMscUJBQXFCSjtRQUNwRDtJQUNGLEdBQUcsRUFBRTtJQUVMLGdFQUFnRTtJQUNoRSxNQUFNSyxpQkFBc0M7UUFDMUNDLFVBQVU7UUFDVkMsS0FBSztRQUNMQyxNQUFNO1FBQ05DLFdBQVc7UUFDWEMsZUFBZTtRQUNmQyxRQUFRO1FBQ1JDLGNBQWM7UUFDZEMsWUFBWTtRQUNaQyxTQUFTaEIsa0JBQWtCLElBQUk7UUFDL0JpQixZQUFZO0lBQ2Q7SUFFQSxxQkFDRSw4REFBQ0M7UUFBSUMsT0FBT1o7a0JBQ1YsNEVBQUNhO1lBQUlDLE9BQU07WUFBS0MsUUFBTztZQUFLQyxTQUFRO1lBQVlDLE1BQUs7WUFBT0MsT0FBTTs7OEJBRWhFLDhEQUFDQztvQkFBS0MsSUFBRztvQkFBSUMsSUFBRztvQkFBS0MsSUFBRztvQkFBS0MsSUFBRztvQkFBS0MsUUFBTztvQkFBUUMsYUFBWTs7Ozs7OzhCQUNoRSw4REFBQ047b0JBQUtDLElBQUc7b0JBQUtDLElBQUc7b0JBQUtDLElBQUc7b0JBQUtDLElBQUc7b0JBQUtDLFFBQU87b0JBQVFDLGFBQVk7Ozs7Ozs4QkFHakUsOERBQUNOO29CQUFLQyxJQUFHO29CQUFLQyxJQUFHO29CQUFJQyxJQUFHO29CQUFLQyxJQUFHO29CQUFLQyxRQUFPO29CQUFRQyxhQUFZOzs7Ozs7OEJBQ2hFLDhEQUFDTjtvQkFBS0MsSUFBRztvQkFBS0MsSUFBRztvQkFBS0MsSUFBRztvQkFBS0MsSUFBRztvQkFBS0MsUUFBTztvQkFBUUMsYUFBWTs7Ozs7OzhCQUdqRSw4REFBQ0M7b0JBQU9DLElBQUc7b0JBQUtDLElBQUc7b0JBQUtDLEdBQUU7b0JBQUlMLFFBQU87b0JBQVFDLGFBQVk7b0JBQUlSLE1BQUs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBSTFFIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdmliZS0zZC1jb2RlLy4vYXBwL2NvbXBvbmVudHMvdGhyZWUvQ3Jvc3NoYWlyLnRzeD8yNGJjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwgeyB1c2VFZmZlY3QsIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xuXG5leHBvcnQgZnVuY3Rpb24gQ3Jvc3NoYWlyKCkge1xuICBjb25zdCBbaXNQb2ludGVyTG9ja2VkLCBzZXRJc1BvaW50ZXJMb2NrZWRdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBjaGVja1BvaW50ZXJMb2NrID0gKCkgPT4ge1xuICAgICAgc2V0SXNQb2ludGVyTG9ja2VkKCEhZG9jdW1lbnQucG9pbnRlckxvY2tFbGVtZW50KTtcbiAgICB9O1xuICAgIFxuICAgIC8vIEluaXRpYWwgY2hlY2tcbiAgICBjaGVja1BvaW50ZXJMb2NrKCk7XG4gICAgXG4gICAgLy8gQWRkIGV2ZW50IGxpc3RlbmVyIGZvciBwb2ludGVyIGxvY2sgY2hhbmdlc1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJsb2NrY2hhbmdlJywgY2hlY2tQb2ludGVyTG9jayk7XG4gICAgXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJsb2NrY2hhbmdlJywgY2hlY2tQb2ludGVyTG9jayk7XG4gICAgfTtcbiAgfSwgW10pO1xuICBcbiAgLy8gU3R5bGluZyB0byBwb3NpdGlvbiB0aGUgY3Jvc3NoYWlyIGF0IHRoZSBjZW50ZXIgb2YgdGhlIHNjcmVlblxuICBjb25zdCBjcm9zc2hhaXJTdHlsZTogUmVhY3QuQ1NTUHJvcGVydGllcyA9IHtcbiAgICBwb3NpdGlvbjogJ2ZpeGVkJyxcbiAgICB0b3A6ICc1MCUnLFxuICAgIGxlZnQ6ICc1MCUnLFxuICAgIHRyYW5zZm9ybTogJ3RyYW5zbGF0ZSgtNTAlLCAtNTAlKScsXG4gICAgcG9pbnRlckV2ZW50czogJ25vbmUnLCAvLyBNYWtlIGl0IHVuc2VsZWN0YWJsZS9ub24taW50ZXJhY3RpdmVcbiAgICB6SW5kZXg6IDEwMDAsXG4gICAgbWl4QmxlbmRNb2RlOiAnZGlmZmVyZW5jZScsIC8vIE1ha2VzIGl0IHZpc2libGUgb24gYm90aCBsaWdodCBhbmQgZGFyayBiYWNrZ3JvdW5kc1xuICAgIHVzZXJTZWxlY3Q6ICdub25lJyxcbiAgICBvcGFjaXR5OiBpc1BvaW50ZXJMb2NrZWQgPyAxIDogMC41LFxuICAgIHRyYW5zaXRpb246ICdvcGFjaXR5IDAuMnMgZWFzZS1pbi1vdXQnLFxuICB9O1xuXG4gIHJldHVybiAoXG4gICAgPGRpdiBzdHlsZT17Y3Jvc3NoYWlyU3R5bGV9PlxuICAgICAgPHN2ZyB3aWR0aD1cIjMyXCIgaGVpZ2h0PVwiMzJcIiB2aWV3Qm94PVwiMCAwIDMyIDMyXCIgZmlsbD1cIm5vbmVcIiB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCI+XG4gICAgICAgIHsvKiBIb3Jpem9udGFsIGxpbmUgKi99XG4gICAgICAgIDxsaW5lIHgxPVwiMFwiIHkxPVwiMTZcIiB4Mj1cIjEzXCIgeTI9XCIxNlwiIHN0cm9rZT1cIndoaXRlXCIgc3Ryb2tlV2lkdGg9XCIyXCIgLz5cbiAgICAgICAgPGxpbmUgeDE9XCIxOVwiIHkxPVwiMTZcIiB4Mj1cIjMyXCIgeTI9XCIxNlwiIHN0cm9rZT1cIndoaXRlXCIgc3Ryb2tlV2lkdGg9XCIyXCIgLz5cbiAgICAgICAgXG4gICAgICAgIHsvKiBWZXJ0aWNhbCBsaW5lICovfVxuICAgICAgICA8bGluZSB4MT1cIjE2XCIgeTE9XCIwXCIgeDI9XCIxNlwiIHkyPVwiMTNcIiBzdHJva2U9XCJ3aGl0ZVwiIHN0cm9rZVdpZHRoPVwiMlwiIC8+XG4gICAgICAgIDxsaW5lIHgxPVwiMTZcIiB5MT1cIjE5XCIgeDI9XCIxNlwiIHkyPVwiMzJcIiBzdHJva2U9XCJ3aGl0ZVwiIHN0cm9rZVdpZHRoPVwiMlwiIC8+XG4gICAgICAgIFxuICAgICAgICB7LyogQ2VudGVyIGNpcmNsZSAqL31cbiAgICAgICAgPGNpcmNsZSBjeD1cIjE2XCIgY3k9XCIxNlwiIHI9XCI0XCIgc3Ryb2tlPVwid2hpdGVcIiBzdHJva2VXaWR0aD1cIjJcIiBmaWxsPVwibm9uZVwiIC8+XG4gICAgICA8L3N2Zz5cbiAgICA8L2Rpdj5cbiAgKTtcbn0gIl0sIm5hbWVzIjpbIlJlYWN0IiwidXNlRWZmZWN0IiwidXNlU3RhdGUiLCJDcm9zc2hhaXIiLCJpc1BvaW50ZXJMb2NrZWQiLCJzZXRJc1BvaW50ZXJMb2NrZWQiLCJjaGVja1BvaW50ZXJMb2NrIiwiZG9jdW1lbnQiLCJwb2ludGVyTG9ja0VsZW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImNyb3NzaGFpclN0eWxlIiwicG9zaXRpb24iLCJ0b3AiLCJsZWZ0IiwidHJhbnNmb3JtIiwicG9pbnRlckV2ZW50cyIsInpJbmRleCIsIm1peEJsZW5kTW9kZSIsInVzZXJTZWxlY3QiLCJvcGFjaXR5IiwidHJhbnNpdGlvbiIsImRpdiIsInN0eWxlIiwic3ZnIiwid2lkdGgiLCJoZWlnaHQiLCJ2aWV3Qm94IiwiZmlsbCIsInhtbG5zIiwibGluZSIsIngxIiwieTEiLCJ4MiIsInkyIiwic3Ryb2tlIiwic3Ryb2tlV2lkdGgiLCJjaXJjbGUiLCJjeCIsImN5IiwiciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./app/components/three/Crosshair.tsx\n");

/***/ }),

/***/ "(ssr)/./app/components/three/CustomTransformControls.tsx":
/*!**********************************************************!*\
  !*** ./app/components/three/CustomTransformControls.tsx ***!
  \**********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CustomTransformControls: () => (/* binding */ CustomTransformControls)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _react_three_drei__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @react-three/drei */ \"(ssr)/./node_modules/@react-three/drei/core/TransformControls.js\");\n/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! three */ \"(ssr)/./node_modules/three/build/three.core.js\");\n/* harmony import */ var _store_appStore__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/store/appStore */ \"(ssr)/./app/store/appStore.ts\");\n/* harmony import */ var _react_three_fiber__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @react-three/fiber */ \"(ssr)/./node_modules/@react-three/fiber/dist/index-673ef987.esm.js\");\n\n\n\n\n\n\nfunction CustomTransformControls({ object, onDeselect }) {\n    const { transformMode, setTransformMode, isDeleting } = (0,_store_appStore__WEBPACK_IMPORTED_MODULE_2__.useAppStore)();\n    const { updateObject } = (0,_store_appStore__WEBPACK_IMPORTED_MODULE_2__.useObjectStore)();\n    const transformControlsRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const [lastClick, setLastClick] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(0);\n    const { scene } = (0,_react_three_fiber__WEBPACK_IMPORTED_MODULE_3__.z)();\n    const [isObjectInScene, setIsObjectInScene] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);\n    const objectRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const debug = \"development\" === \"development\";\n    // Raycaster setup for double-click detection\n    const raycasterRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(new three__WEBPACK_IMPORTED_MODULE_4__.Raycaster());\n    const mouseRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(new three__WEBPACK_IMPORTED_MODULE_4__.Vector2());\n    // When object changes, update the ref to prevent stale closures\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        objectRef.current = object;\n    }, [\n        object\n    ]);\n    // Validate if object is actually in the scene - use a separate effect to prevent infinite loops\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        // Skip if no object or if object is already stored in ref (to prevent loops)\n        if (!object) {\n            setIsObjectInScene(false);\n            return;\n        }\n        // Check if object is in the scene hierarchy - only needed once when object changes\n        const checkObjectInScene = ()=>{\n            let isInScene = false;\n            // First check direct parent relationship\n            if (object.parent) {\n                // Now trace up to make sure it connects to scene\n                let currentParent = object.parent;\n                while(currentParent){\n                    if (currentParent === scene) {\n                        isInScene = true;\n                        break;\n                    }\n                    currentParent = currentParent.parent;\n                }\n            }\n            if (!isInScene) {\n                console.warn(`Selected object ${object.uuid} is not in scene, cannot attach controls`);\n                if (onDeselect) onDeselect();\n            } else {\n                setIsObjectInScene(true);\n            }\n        };\n        // Only check on mount or when object changes\n        checkObjectInScene();\n    }, [\n        object,\n        onDeselect,\n        scene\n    ]);\n    // Set a global flag to indicate that TransformControls is handling the event\n    const handlePointerDown = (event)=>{\n        console.log(\"Pointer down on TransformControls\");\n        window.__transformControlsActive = true;\n        // Stop propagation\n        if (event.stopPropagation) {\n            event.stopPropagation();\n        }\n    };\n    const handleMouseUp = (event)=>{\n        console.log(\"Mouse up event on TransformControls\");\n        // Mark event as handled by transform controls\n        window.__transformControlsActive = true;\n        // Stop propagation to prevent the event from reaching the object\n        if (event.stopPropagation) {\n            event.stopPropagation();\n        }\n        // Prevent default behavior\n        if (event.preventDefault) {\n            event.preventDefault();\n        }\n        const now = Date.now();\n        console.log(\"Time since last click:\", now - lastClick, \"ms\");\n        if (now - lastClick < 500) {\n            console.log(\"Quick click detected, toggling mode\");\n            toggleMode();\n        }\n        setLastClick(now);\n        // Reset the flag after a short delay\n        setTimeout(()=>{\n            window.__transformControlsActive = false;\n        }, 100);\n    };\n    const toggleMode = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(()=>{\n        if (!transformControlsRef.current) return;\n        const modes = [\n            \"translate\",\n            \"rotate\",\n            \"scale\"\n        ];\n        const currentIndex = modes.indexOf(transformMode || \"translate\");\n        const nextIndex = (currentIndex + 1) % modes.length;\n        const nextMode = modes[nextIndex];\n        console.log(\"Toggling from\", transformMode, \"to\", nextMode);\n        setTransformMode(nextMode);\n    }, [\n        transformMode,\n        setTransformMode\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        const handleKeyDown = (event)=>{\n            if (event.key === \"q\") {\n                console.log(\"Keyboard shortcut: toggling transform mode\");\n                toggleMode();\n            }\n        };\n        window.addEventListener(\"keydown\", handleKeyDown);\n        return ()=>window.removeEventListener(\"keydown\", handleKeyDown);\n    }, [\n        transformMode,\n        toggleMode\n    ]);\n    // Handle changes to object position/rotation/scale\n    const handleObjectChange = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(()=>{\n        const currentObject = objectRef.current;\n        if (!currentObject) return;\n        // Skip updates during deletion\n        if (isDeleting) return;\n        // Get the object's ID from userData or UUID\n        const id = currentObject.userData?.id || currentObject.uuid;\n        // Debounce updates to avoid too many state changes\n        if (window.__lastTransformUpdate && Date.now() - window.__lastTransformUpdate < 50) {\n            return;\n        }\n        window.__lastTransformUpdate = Date.now();\n        // Update the stored object with new transform values \n        updateObject(id, {\n            position: [\n                currentObject.position.x,\n                currentObject.position.y,\n                currentObject.position.z\n            ],\n            rotation: [\n                currentObject.rotation.x,\n                currentObject.rotation.y,\n                currentObject.rotation.z\n            ],\n            scale: [\n                currentObject.scale.x,\n                currentObject.scale.y,\n                currentObject.scale.z\n            ]\n        });\n        console.log(`Updated object ${id} in store with new transforms`);\n    }, [\n        updateObject,\n        isDeleting\n    ]);\n    // Only render if we have a valid object in the scene\n    if (!object || !object.parent) {\n        return null;\n    }\n    // Don't render if the object isn't in the scene tree\n    if (!isObjectInScene) {\n        return null;\n    }\n    // Don't render during deletion\n    if (isDeleting) {\n        return null;\n    }\n    // Add the double click handler to the object for mode toggling\n    if (object && !object.userData.doubleClickHandler) {\n        object.userData.doubleClickHandler = toggleMode;\n    }\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_react_three_drei__WEBPACK_IMPORTED_MODULE_5__.TransformControls, {\n        ref: transformControlsRef,\n        object: object,\n        mode: transformMode,\n        size: 0.75,\n        onPointerDown: handlePointerDown,\n        onMouseUp: handleMouseUp,\n        onPointerUp: handleMouseUp,\n        onChange: handleObjectChange\n    }, void 0, false, {\n        fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/components/three/CustomTransformControls.tsx\",\n        lineNumber: 184,\n        columnNumber: 5\n    }, this);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9hcHAvY29tcG9uZW50cy90aHJlZS9DdXN0b21UcmFuc2Zvcm1Db250cm9scy50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQUFnRTtBQUNYO0FBQ3ZCO0FBQ2dDO0FBQ2pCO0FBT3RDLFNBQVNTLHdCQUF3QixFQUFFQyxNQUFNLEVBQUVDLFVBQVUsRUFBZ0M7SUFDMUYsTUFBTSxFQUFFQyxhQUFhLEVBQUVDLGdCQUFnQixFQUFFQyxVQUFVLEVBQUUsR0FBR1IsNERBQVdBO0lBQ25FLE1BQU0sRUFBRVMsWUFBWSxFQUFFLEdBQUdSLCtEQUFjQTtJQUN2QyxNQUFNUyx1QkFBdUJoQiw2Q0FBTUEsQ0FBTTtJQUN6QyxNQUFNLENBQUNpQixXQUFXQyxhQUFhLEdBQUdqQiwrQ0FBUUEsQ0FBUztJQUNuRCxNQUFNLEVBQUVrQixLQUFLLEVBQUUsR0FBR1gscURBQVFBO0lBQzFCLE1BQU0sQ0FBQ1ksaUJBQWlCQyxtQkFBbUIsR0FBR3BCLCtDQUFRQSxDQUFDO0lBQ3ZELE1BQU1xQixZQUFZdEIsNkNBQU1BLENBQXdCO0lBQ2hELE1BQU11QixRQUFRQyxrQkFBeUI7SUFFdkMsNkNBQTZDO0lBQzdDLE1BQU1DLGVBQWV6Qiw2Q0FBTUEsQ0FBQyxJQUFJSyw0Q0FBZTtJQUMvQyxNQUFNc0IsV0FBVzNCLDZDQUFNQSxDQUFDLElBQUlLLDBDQUFhO0lBRXpDLGdFQUFnRTtJQUNoRUgsZ0RBQVNBLENBQUM7UUFDUm9CLFVBQVVPLE9BQU8sR0FBR25CO0lBQ3RCLEdBQUc7UUFBQ0E7S0FBTztJQUVYLGdHQUFnRztJQUNoR1IsZ0RBQVNBLENBQUM7UUFDUiw2RUFBNkU7UUFDN0UsSUFBSSxDQUFDUSxRQUFRO1lBQ1hXLG1CQUFtQjtZQUNuQjtRQUNGO1FBRUEsbUZBQW1GO1FBQ25GLE1BQU1TLHFCQUFxQjtZQUN6QixJQUFJQyxZQUFZO1lBRWhCLHlDQUF5QztZQUN6QyxJQUFJckIsT0FBT3NCLE1BQU0sRUFBRTtnQkFDakIsaURBQWlEO2dCQUNqRCxJQUFJ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bXBvbmVudHMvdGhyZWUvQ3VzdG9tVHJhbnNmb3JtQ29udHJvbHMudHN4PzE2YzIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlUmVmLCB1c2VTdGF0ZSwgdXNlRWZmZWN0LCB1c2VDYWxsYmFjayB9IGZyb20gJ3JlYWN0J1xuaW1wb3J0IHsgVHJhbnNmb3JtQ29udHJvbHMgfSBmcm9tICdAcmVhY3QtdGhyZWUvZHJlaSdcbmltcG9ydCAqIGFzIFRIUkVFIGZyb20gJ3RocmVlJ1xuaW1wb3J0IHsgdXNlQXBwU3RvcmUsIHVzZU9iamVjdFN0b3JlIH0gZnJvbSAnQC9zdG9yZS9hcHBTdG9yZSdcbmltcG9ydCB7IHVzZVRocmVlIH0gZnJvbSAnQHJlYWN0LXRocmVlL2ZpYmVyJ1xuXG5pbnRlcmZhY2UgQ3VzdG9tVHJhbnNmb3JtQ29udHJvbHNQcm9wcyB7XG4gIG9iamVjdDogVEhSRUUuT2JqZWN0M0QgfCBudWxsXG4gIG9uRGVzZWxlY3Q/OiAoKSA9PiB2b2lkXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBDdXN0b21UcmFuc2Zvcm1Db250cm9scyh7IG9iamVjdCwgb25EZXNlbGVjdCB9OiBDdXN0b21UcmFuc2Zvcm1Db250cm9sc1Byb3BzKSB7XG4gIGNvbnN0IHsgdHJhbnNmb3JtTW9kZSwgc2V0VHJhbnNmb3JtTW9kZSwgaXNEZWxldGluZyB9ID0gdXNlQXBwU3RvcmUoKTtcbiAgY29uc3QgeyB1cGRhdGVPYmplY3QgfSA9IHVzZU9iamVjdFN0b3JlKCk7XG4gIGNvbnN0IHRyYW5zZm9ybUNvbnRyb2xzUmVmID0gdXNlUmVmPGFueT4obnVsbCk7XG4gIGNvbnN0IFtsYXN0Q2xpY2ssIHNldExhc3RDbGlja10gPSB1c2VTdGF0ZTxudW1iZXI+KDApO1xuICBjb25zdCB7IHNjZW5lIH0gPSB1c2VUaHJlZSgpO1xuICBjb25zdCBbaXNPYmplY3RJblNjZW5lLCBzZXRJc09iamVjdEluU2NlbmVdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBvYmplY3RSZWYgPSB1c2VSZWY8VEhSRUUuT2JqZWN0M0QgfCBudWxsPihudWxsKTtcbiAgY29uc3QgZGVidWcgPSBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50JztcbiAgXG4gIC8vIFJheWNhc3RlciBzZXR1cCBmb3IgZG91YmxlLWNsaWNrIGRldGVjdGlvblxuICBjb25zdCByYXljYXN0ZXJSZWYgPSB1c2VSZWYobmV3IFRIUkVFLlJheWNhc3RlcigpKTtcbiAgY29uc3QgbW91c2VSZWYgPSB1c2VSZWYobmV3IFRIUkVFLlZlY3RvcjIoKSk7XG4gIFxuICAvLyBXaGVuIG9iamVjdCBjaGFuZ2VzLCB1cGRhdGUgdGhlIHJlZiB0byBwcmV2ZW50IHN0YWxlIGNsb3N1cmVzXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgb2JqZWN0UmVmLmN1cnJlbnQgPSBvYmplY3Q7XG4gIH0sIFtvYmplY3RdKTtcbiAgXG4gIC8vIFZhbGlkYXRlIGlmIG9iamVjdCBpcyBhY3R1YWxseSBpbiB0aGUgc2NlbmUgLSB1c2UgYSBzZXBhcmF0ZSBlZmZlY3QgdG8gcHJldmVudCBpbmZpbml0ZSBsb29wc1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIC8vIFNraXAgaWYgbm8gb2JqZWN0IG9yIGlmIG9iamVjdCBpcyBhbHJlYWR5IHN0b3JlZCBpbiByZWYgKHRvIHByZXZlbnQgbG9vcHMpXG4gICAgaWYgKCFvYmplY3QpIHtcbiAgICAgIHNldElzT2JqZWN0SW5TY2VuZShmYWxzZSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIFxuICAgIC8vIENoZWNrIGlmIG9iamVjdCBpcyBpbiB0aGUgc2NlbmUgaGllcmFyY2h5IC0gb25seSBuZWVkZWQgb25jZSB3aGVuIG9iamVjdCBjaGFuZ2VzXG4gICAgY29uc3QgY2hlY2tPYmplY3RJblNjZW5lID0gKCkgPT4ge1xuICAgICAgbGV0IGlzSW5TY2VuZSA9IGZhbHNlO1xuICAgICAgXG4gICAgICAvLyBGaXJzdCBjaGVjayBkaXJlY3QgcGFyZW50IHJlbGF0aW9uc2hpcFxuICAgICAgaWYgKG9iamVjdC5wYXJlbnQpIHtcbiAgICAgICAgLy8gTm93IHRyYWNlIHVwIHRvIG1ha2Ugc3VyZSBpdCBjb25uZWN0cyB0byBzY2VuZVxuICAgICAgICBsZXQgY3VycmVudFBhcmVudDogVEhSRUUuT2JqZWN0M0QgfCBudWxsID0gb2JqZWN0LnBhcmVudDtcbiAgICAgICAgd2hpbGUgKGN1cnJlbnRQYXJlbnQpIHtcbiAgICAgICAgICBpZiAoY3VycmVudFBhcmVudCA9PT0gc2NlbmUpIHtcbiAgICAgICAgICAgIGlzSW5TY2VuZSA9IHRydWU7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgY3VycmVudFBhcmVudCA9IGN1cnJlbnRQYXJlbnQucGFyZW50O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIGlmICghaXNJblNjZW5lKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihgU2VsZWN0ZWQgb2JqZWN0ICR7b2JqZWN0LnV1aWR9IGlzIG5vdCBpbiBzY2VuZSwgY2Fubm90IGF0dGFjaCBjb250cm9sc2ApO1xuICAgICAgICBpZiAob25EZXNlbGVjdCkgb25EZXNlbGVjdCgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2V0SXNPYmplY3RJblNjZW5lKHRydWUpO1xuICAgICAgfVxuICAgIH07XG4gICAgXG4gICAgLy8gT25seSBjaGVjayBvbiBtb3VudCBvciB3aGVuIG9iamVjdCBjaGFuZ2VzXG4gICAgY2hlY2tPYmplY3RJblNjZW5lKCk7XG4gIH0sIFtvYmplY3QsIG9uRGVzZWxlY3QsIHNjZW5lXSk7XG4gIFxuICAvLyBTZXQgYSBnbG9iYWwgZmxhZyB0byBpbmRpY2F0ZSB0aGF0IFRyYW5zZm9ybUNvbnRyb2xzIGlzIGhhbmRsaW5nIHRoZSBldmVudFxuICBjb25zdCBoYW5kbGVQb2ludGVyRG93biA9IChldmVudDogYW55KSA9PiB7XG4gICAgY29uc29sZS5sb2coXCJQb2ludGVyIGRvd24gb24gVHJhbnNmb3JtQ29udHJvbHNcIik7XG4gICAgd2luZG93Ll9fdHJhbnNmb3JtQ29udHJvbHNBY3RpdmUgPSB0cnVlO1xuICAgIFxuICAgIC8vIFN0b3AgcHJvcGFnYXRpb25cbiAgICBpZiAoZXZlbnQuc3RvcFByb3BhZ2F0aW9uKSB7XG4gICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICB9XG4gIH07XG4gIFxuICBjb25zdCBoYW5kbGVNb3VzZVVwID0gKGV2ZW50OiBhbnkpID0+IHtcbiAgICBjb25zb2xlLmxvZyhcIk1vdXNlIHVwIGV2ZW50IG9uIFRyYW5zZm9ybUNvbnRyb2xzXCIpO1xuICAgIFxuICAgIC8vIE1hcmsgZXZlbnQgYXMgaGFuZGxlZCBieSB0cmFuc2Zvcm0gY29udHJvbHNcbiAgICB3aW5kb3cuX190cmFuc2Zvcm1Db250cm9sc0FjdGl2ZSA9IHRydWU7XG4gICAgXG4gICAgLy8gU3RvcCBwcm9wYWdhdGlvbiB0byBwcmV2ZW50IHRoZSBldmVudCBmcm9tIHJlYWNoaW5nIHRoZSBvYmplY3RcbiAgICBpZiAoZXZlbnQuc3RvcFByb3BhZ2F0aW9uKSB7XG4gICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICB9XG4gICAgXG4gICAgLy8gUHJldmVudCBkZWZhdWx0IGJlaGF2aW9yXG4gICAgaWYgKGV2ZW50LnByZXZlbnREZWZhdWx0KSB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH1cbiAgICBcbiAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICAgIGNvbnNvbGUubG9nKFwiVGltZSBzaW5jZSBsYXN0IGNsaWNrOlwiLCBub3cgLSBsYXN0Q2xpY2ssIFwibXNcIik7XG4gICAgXG4gICAgaWYgKG5vdyAtIGxhc3RDbGljayA8IDUwMCkge1xuICAgICAgY29uc29sZS5sb2coXCJRdWljayBjbGljayBkZXRlY3RlZCwgdG9nZ2xpbmcgbW9kZVwiKTtcbiAgICAgIHRvZ2dsZU1vZGUoKTtcbiAgICB9XG4gICAgXG4gICAgc2V0TGFzdENsaWNrKG5vdyk7XG4gICAgXG4gICAgLy8gUmVzZXQgdGhlIGZsYWcgYWZ0ZXIgYSBzaG9ydCBkZWxheVxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgd2luZG93Ll9fdHJhbnNmb3JtQ29udHJvbHNBY3RpdmUgPSBmYWxzZTtcbiAgICB9LCAxMDApO1xuICB9O1xuICBcbiAgY29uc3QgdG9nZ2xlTW9kZSA9IHVzZUNhbGxiYWNrKCgpID0+IHtcbiAgICBpZiAoIXRyYW5zZm9ybUNvbnRyb2xzUmVmLmN1cnJlbnQpIHJldHVybjtcbiAgICBcbiAgICBjb25zdCBtb2RlcyA9IFsndHJhbnNsYXRlJywgJ3JvdGF0ZScsICdzY2FsZSddO1xuICAgIGNvbnN0IGN1cnJlbnRJbmRleCA9IG1vZGVzLmluZGV4T2YodHJhbnNmb3JtTW9kZSB8fCAndHJhbnNsYXRlJyk7XG4gICAgY29uc3QgbmV4dEluZGV4ID0gKGN1cnJlbnRJbmRleCArIDEpICUgbW9kZXMubGVuZ3RoO1xuICAgIGNvbnN0IG5leHRNb2RlID0gbW9kZXNbbmV4dEluZGV4XSBhcyAndHJhbnNsYXRlJyB8ICdyb3RhdGUnIHwgJ3NjYWxlJztcbiAgICBcbiAgICBjb25zb2xlLmxvZyhcIlRvZ2dsaW5nIGZyb21cIiwgdHJhbnNmb3JtTW9kZSwgXCJ0b1wiLCBuZXh0TW9kZSk7XG4gICAgc2V0VHJhbnNmb3JtTW9kZShuZXh0TW9kZSk7XG4gIH0sIFt0cmFuc2Zvcm1Nb2RlLCBzZXRUcmFuc2Zvcm1Nb2RlXSk7XG4gIFxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IGhhbmRsZUtleURvd24gPSAoZXZlbnQ6IEtleWJvYXJkRXZlbnQpID0+IHtcbiAgICAgIGlmIChldmVudC5rZXkgPT09ICdxJykge1xuICAgICAgICBjb25zb2xlLmxvZyhcIktleWJvYXJkIHNob3J0Y3V0OiB0b2dnbGluZyB0cmFuc2Zvcm0gbW9kZVwiKTtcbiAgICAgICAgdG9nZ2xlTW9kZSgpO1xuICAgICAgfVxuICAgIH07XG4gICAgXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBoYW5kbGVLZXlEb3duKTtcbiAgICByZXR1cm4gKCkgPT4gd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBoYW5kbGVLZXlEb3duKTtcbiAgfSwgW3RyYW5zZm9ybU1vZGUsIHRvZ2dsZU1vZGVdKTtcbiAgXG4gIC8vIEhhbmRsZSBjaGFuZ2VzIHRvIG9iamVjdCBwb3NpdGlvbi9yb3RhdGlvbi9zY2FsZVxuICBjb25zdCBoYW5kbGVPYmplY3RDaGFuZ2UgPSB1c2VDYWxsYmFjaygoKSA9PiB7XG4gICAgY29uc3QgY3VycmVudE9iamVjdCA9IG9iamVjdFJlZi5jdXJyZW50O1xuICAgIGlmICghY3VycmVudE9iamVjdCkgcmV0dXJuO1xuICAgIFxuICAgIC8vIFNraXAgdXBkYXRlcyBkdXJpbmcgZGVsZXRpb25cbiAgICBpZiAoaXNEZWxldGluZykgcmV0dXJuO1xuICAgIFxuICAgIC8vIEdldCB0aGUgb2JqZWN0J3MgSUQgZnJvbSB1c2VyRGF0YSBvciBVVUlEXG4gICAgY29uc3QgaWQgPSBjdXJyZW50T2JqZWN0LnVzZXJEYXRhPy5pZCB8fCBjdXJyZW50T2JqZWN0LnV1aWQ7XG4gICAgXG4gICAgLy8gRGVib3VuY2UgdXBkYXRlcyB0byBhdm9pZCB0b28gbWFueSBzdGF0ZSBjaGFuZ2VzXG4gICAgaWYgKHdpbmRvdy5fX2xhc3RUcmFuc2Zvcm1VcGRhdGUgJiYgRGF0ZS5ub3coKSAtIHdpbmRvdy5fX2xhc3RUcmFuc2Zvcm1VcGRhdGUgPCA1MCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBcbiAgICB3aW5kb3cuX19sYXN0VHJhbnNmb3JtVXBkYXRlID0gRGF0ZS5ub3coKTtcbiAgICBcbiAgICAvLyBVcGRhdGUgdGhlIHN0b3JlZCBvYmplY3Qgd2l0aCBuZXcgdHJhbnNmb3JtIHZhbHVlcyBcbiAgICB1cGRhdGVPYmplY3QoaWQsIHtcbiAgICAgIHBvc2l0aW9uOiBbY3VycmVudE9iamVjdC5wb3NpdGlvbi54LCBjdXJyZW50T2JqZWN0LnBvc2l0aW9uLnksIGN1cnJlbnRPYmplY3QucG9zaXRpb24uel0sXG4gICAgICByb3RhdGlvbjogW2N1cnJlbnRPYmplY3Qucm90YXRpb24ueCwgY3VycmVudE9iamVjdC5yb3RhdGlvbi55LCBjdXJyZW50T2JqZWN0LnJvdGF0aW9uLnpdLFxuICAgICAgc2NhbGU6IFtjdXJyZW50T2JqZWN0LnNjYWxlLngsIGN1cnJlbnRPYmplY3Quc2NhbGUueSwgY3VycmVudE9iamVjdC5zY2FsZS56XVxuICAgIH0pO1xuICAgIFxuICAgIGNvbnNvbGUubG9nKGBVcGRhdGVkIG9iamVjdCAke2lkfSBpbiBzdG9yZSB3aXRoIG5ldyB0cmFuc2Zvcm1zYCk7XG4gIH0sIFt1cGRhdGVPYmplY3QsIGlzRGVsZXRpbmddKTtcbiAgXG4gIC8vIE9ubHkgcmVuZGVyIGlmIHdlIGhhdmUgYSB2YWxpZCBvYmplY3QgaW4gdGhlIHNjZW5lXG4gIGlmICghb2JqZWN0IHx8ICFvYmplY3QucGFyZW50KSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgXG4gIC8vIERvbid0IHJlbmRlciBpZiB0aGUgb2JqZWN0IGlzbid0IGluIHRoZSBzY2VuZSB0cmVlXG4gIGlmICghaXNPYmplY3RJblNjZW5lKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgXG4gIC8vIERvbid0IHJlbmRlciBkdXJpbmcgZGVsZXRpb25cbiAgaWYgKGlzRGVsZXRpbmcpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBcbiAgLy8gQWRkIHRoZSBkb3VibGUgY2xpY2sgaGFuZGxlciB0byB0aGUgb2JqZWN0IGZvciBtb2RlIHRvZ2dsaW5nXG4gIGlmIChvYmplY3QgJiYgIW9iamVjdC51c2VyRGF0YS5kb3VibGVDbGlja0hhbmRsZXIpIHtcbiAgICBvYmplY3QudXNlckRhdGEuZG91YmxlQ2xpY2tIYW5kbGVyID0gdG9nZ2xlTW9kZTtcbiAgfVxuICBcbiAgcmV0dXJuIChcbiAgICA8VHJhbnNmb3JtQ29udHJvbHNcbiAgICAgIHJlZj17dHJhbnNmb3JtQ29udHJvbHNSZWZ9XG4gICAgICBvYmplY3Q9e29iamVjdH1cbiAgICAgIG1vZGU9e3RyYW5zZm9ybU1vZGV9XG4gICAgICBzaXplPXswLjc1fVxuICAgICAgb25Qb2ludGVyRG93bj17aGFuZGxlUG9pbnRlckRvd259XG4gICAgICBvbk1vdXNlVXA9e2hhbmRsZU1vdXNlVXB9XG4gICAgICBvblBvaW50ZXJVcD17aGFuZGxlTW91c2VVcH1cbiAgICAgIG9uQ2hhbmdlPXtoYW5kbGVPYmplY3RDaGFuZ2V9XG4gICAgLz5cbiAgKTtcbn1cblxuLy8gRXh0ZW5kIHRoZSBXaW5kb3cgaW50ZXJmYWNlIHRvIGluY2x1ZGUgb3VyIGN1c3RvbSBmbGFnXG5kZWNsYXJlIGdsb2JhbCB7XG4gIGludGVyZmFjZSBXaW5kb3cge1xuICAgIF9fcGVuZGluZ09iamVjdD86IFRIUkVFLk1lc2ggfCBUSFJFRS5Hcm91cDtcbiAgICBfX3RyYW5zZm9ybUNvbnRyb2xzQWN0aXZlPzogYm9vbGVhbjtcbiAgICBfX2Vudmlyb25tZW50U2V0dGluZ3M/OiB7XG4gICAgICBzaG93T2NlYW4/OiBib29sZWFuO1xuICAgIH07XG4gICAgX19zaGlmdEtleVByZXNzZWQ/OiBib29sZWFuO1xuICAgIF9fbGFzdFRyYW5zZm9ybVVwZGF0ZT86IG51bWJlcjtcbiAgfVxufSAiXSwibmFtZXMiOlsidXNlUmVmIiwidXNlU3RhdGUiLCJ1c2VFZmZlY3QiLCJ1c2VDYWxsYmFjayIsIlRyYW5zZm9ybUNvbnRyb2xzIiwiVEhSRUUiLCJ1c2VBcHBTdG9yZSIsInVzZU9iamVjdFN0b3JlIiwidXNlVGhyZWUiLCJDdXN0b21UcmFuc2Zvcm1Db250cm9scyIsIm9iamVjdCIsIm9uRGVzZWxlY3QiLCJ0cmFuc2Zvcm1Nb2RlIiwic2V0VHJhbnNmb3JtTW9kZSIsImlzRGVsZXRpbmciLCJ1cGRhdGVPYmplY3QiLCJ0cmFuc2Zvcm1Db250cm9sc1JlZiIsImxhc3RDbGljayIsInNldExhc3RDbGljayIsInNjZW5lIiwiaXNPYmplY3RJblNjZW5lIiwic2V0SXNPYmplY3RJblNjZW5lIiwib2JqZWN0UmVmIiwiZGVidWciLCJwcm9jZXNzIiwicmF5Y2FzdGVyUmVmIiwiUmF5Y2FzdGVyIiwibW91c2VSZWYiLCJWZWN0b3IyIiwiY3VycmVudCIsImNoZWNrT2JqZWN0SW5TY2VuZSIsImlzSW5TY2VuZSIsInBhcmVudCIsImN1cnJlbnRQYXJlbnQiLCJjb25zb2xlIiwid2FybiIsInV1aWQiLCJoYW5kbGVQb2ludGVyRG93biIsImV2ZW50IiwibG9nIiwid2luZG93IiwiX190cmFuc2Zvcm1Db250cm9sc0FjdGl2ZSIsInN0b3BQcm9wYWdhdGlvbiIsImhhbmRsZU1vdXNlVXAiLCJwcmV2ZW50RGVmYXVsdCIsIm5vdyIsIkRhdGUiLCJ0b2dnbGVNb2RlIiwic2V0VGltZW91dCIsIm1vZGVzIiwiY3VycmVudEluZGV4IiwiaW5kZXhPZiIsIm5leHRJbmRleCIsImxlbmd0aCIsIm5leHRNb2RlIiwiaGFuZGxlS2V5RG93biIsImtleSIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiaGFuZGxlT2JqZWN0Q2hhbmdlIiwiY3VycmVudE9iamVjdCIsImlkIiwidXNlckRhdGEiLCJfX2xhc3RUcmFuc2Zvcm1VcGRhdGUiLCJwb3NpdGlvbiIsIngiLCJ5IiwieiIsInJvdGF0aW9uIiwic2NhbGUiLCJkb3VibGVDbGlja0hhbmRsZXIiLCJyZWYiLCJtb2RlIiwic2l6ZSIsIm9uUG9pbnRlckRvd24iLCJvbk1vdXNlVXAiLCJvblBvaW50ZXJVcCIsIm9uQ2hhbmdlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./app/components/three/CustomTransformControls.tsx\n");

/***/ }),

/***/ "(ssr)/./app/components/three/FirstPersonController.tsx":
/*!********************************************************!*\
  !*** ./app/components/three/FirstPersonController.tsx ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   FirstPersonController: () => (/* binding */ FirstPersonController)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _react_three_fiber__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @react-three/fiber */ \"(ssr)/./node_modules/@react-three/fiber/dist/index-673ef987.esm.js\");\n/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! three */ \"(ssr)/./node_modules/three/build/three.core.js\");\n/* harmony import */ var leva__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! leva */ \"(ssr)/./node_modules/leva/dist/leva.esm.js\");\n/* harmony import */ var _store_appStore__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/store/appStore */ \"(ssr)/./app/store/appStore.ts\");\n\n\n\n\n\nfunction FirstPersonController() {\n    const { camera, gl } = (0,_react_three_fiber__WEBPACK_IMPORTED_MODULE_3__.z)();\n    const joystickContainerRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n    const joystickInstanceRef = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null);\n    const isTouchDevice = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(false);\n    const isLocked = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(false);\n    const euler = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(new three__WEBPACK_IMPORTED_MODULE_4__.Euler(0, 0, 0, \"YXZ\"));\n    const quaternion = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(new three__WEBPACK_IMPORTED_MODULE_4__.Quaternion());\n    const { isUIFocused, isCodeEditorOpen } = (0,_store_appStore__WEBPACK_IMPORTED_MODULE_2__.useAppStore)();\n    const { speed, sensitivity, showOcean } = (0,leva__WEBPACK_IMPORTED_MODULE_1__.useControls)(\"Settings\", {\n        speed: {\n            value: 10,\n            min: 5,\n            max: 30,\n            step: 1,\n            label: \"Movement Speed\"\n        },\n        sensitivity: {\n            value: 0.002,\n            min: 0.0005,\n            max: 0.01,\n            step: 0.0005,\n            label: \"Mouse Sensitivity\"\n        },\n        showOcean: {\n            value: false,\n            label: \"Show Ocean\"\n        }\n    });\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        // @ts-ignore - Adding a custom property to window for global access\n        window.__environmentSettings = {\n            showOcean\n        };\n    }, [\n        showOcean\n    ]);\n    const [movement, setMovement] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({\n        forward: false,\n        backward: false,\n        left: false,\n        right: false\n    });\n    const direction = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(new three__WEBPACK_IMPORTED_MODULE_4__.Vector3());\n    const velocity = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(new three__WEBPACK_IMPORTED_MODULE_4__.Vector3());\n    const justFocusedUI = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(false);\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        const canvas = gl.domElement;\n        euler.current.setFromQuaternion(camera.quaternion);\n        const onCanvasClick = (event)=>{\n            if (justFocusedUI.current) {\n                justFocusedUI.current = false;\n                return;\n            }\n            if (event.target === canvas && !isUIFocused && !isCodeEditorOpen) {\n                if (canvas.requestPointerLock) {\n                    canvas.requestPointerLock();\n                }\n            }\n        };\n        const onPointerLockChange = ()=>{\n            isLocked.current = document.pointerLockElement === canvas;\n        };\n        const onMouseMove = (event)=>{\n            if (!isLocked.current) return;\n            const movementX = event.movementX || 0;\n            const movementY = event.movementY || 0;\n            euler.current.y -= movementX * sensitivity;\n            euler.current.x = Math.max(-Math.PI / 2 + 0.01, Math.min(Math.PI / 2 - 0.01, euler.current.x - movementY * sensitivity));\n            quaternion.current.setFromEuler(euler.current);\n            camera.quaternion.copy(quaternion.current);\n        };\n        const onUIFocus = ()=>{\n            if (isLocked.current && document.exitPointerLock) {\n                justFocusedUI.current = true;\n                document.exitPointerLock();\n            }\n        };\n        canvas.addEventListener(\"click\", onCanvasClick);\n        document.addEventListener(\"pointerlockchange\", onPointerLockChange);\n        document.addEventListener(\"mousemove\", onMouseMove);\n        const inputs = document.querySelectorAll(\"input, textarea, button, [tabindex]\");\n        inputs.forEach((el)=>el.addEventListener(\"focus\", onUIFocus));\n        return ()=>{\n            canvas.removeEventListener(\"click\", onCanvasClick);\n            document.removeEventListener(\"pointerlockchange\", onPointerLockChange);\n            document.removeEventListener(\"mousemove\", onMouseMove);\n            inputs.forEach((el)=>el.removeEventListener(\"focus\", onUIFocus));\n            if (document.pointerLockElement === canvas && document.exitPointerLock) {\n                document.exitPointerLock();\n            }\n        };\n    }, [\n        gl,\n        camera,\n        isUIFocused,\n        isCodeEditorOpen,\n        sensitivity\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        if (isUIFocused && isLocked.current && document.exitPointerLock) {\n            justFocusedUI.current = true;\n            document.exitPointerLock();\n        }\n    }, [\n        isUIFocused,\n        isCodeEditorOpen\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        const handleKeyDown = (e)=>{\n            if (isUIFocused || isCodeEditorOpen || e.target?.tagName === \"INPUT\" || e.target?.tagName === \"TEXTAREA\") {\n                return;\n            }\n            switch(e.code){\n                case \"KeyW\":\n                    setMovement((prev)=>({\n                            ...prev,\n                            forward: true\n                        }));\n                    break;\n                case \"KeyS\":\n                    setMovement((prev)=>({\n                            ...prev,\n                            backward: true\n                        }));\n                    break;\n                case \"KeyA\":\n                    setMovement((prev)=>({\n                            ...prev,\n                            left: true\n                        }));\n                    break;\n                case \"KeyD\":\n                    setMovement((prev)=>({\n                            ...prev,\n                            right: true\n                        }));\n                    break;\n                case \"Escape\":\n                    if (document.pointerLockElement === gl.domElement && document.exitPointerLock) {\n                        document.exitPointerLock();\n                    }\n                    break;\n            }\n        };\n        const handleKeyUp = (e)=>{\n            if (isUIFocused || isCodeEditorOpen || e.target?.tagName === \"INPUT\" || e.target?.tagName === \"TEXTAREA\") {\n                return;\n            }\n            switch(e.code){\n                case \"KeyW\":\n                    setMovement((prev)=>({\n                            ...prev,\n                            forward: false\n                        }));\n                    break;\n                case \"KeyS\":\n                    setMovement((prev)=>({\n                            ...prev,\n                            backward: false\n                        }));\n                    break;\n                case \"KeyA\":\n                    setMovement((prev)=>({\n                            ...prev,\n                            left: false\n                        }));\n                    break;\n                case \"KeyD\":\n                    setMovement((prev)=>({\n                            ...prev,\n                            right: false\n                        }));\n                    break;\n            }\n        };\n        window.addEventListener(\"keydown\", handleKeyDown);\n        window.addEventListener(\"keyup\", handleKeyUp);\n        return ()=>{\n            window.removeEventListener(\"keydown\", handleKeyDown);\n            window.removeEventListener(\"keyup\", handleKeyUp);\n        };\n    }, [\n        isUIFocused,\n        isCodeEditorOpen,\n        gl.domElement\n    ]);\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        camera.position.set(0, 1.7, 5);\n    }, [\n        camera\n    ]);\n    // Create joystick outside the Canvas component to avoid rendering HTML inside Three.js\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        // Only run on client side\n        if (true) return;\n        isTouchDevice.current = \"ontouchstart\" in window || navigator.maxTouchPoints > 0;\n        if (isTouchDevice.current) {\n            // Dynamically import nipplejs only on client-side\n            __webpack_require__.e(/*! import() */ \"vendor-chunks/nipplejs\").then(__webpack_require__.bind(__webpack_require__, /*! nipplejs */ \"(ssr)/./node_modules/nipplejs/src/index.js\")).then((nipplejs)=>{\n                // Create a container for the joystick\n                const joystickContainer = document.createElement(\"div\");\n                joystickContainer.style.position = \"absolute\";\n                joystickContainer.style.bottom = \"100px\" // Position higher from bottom\n                ;\n                joystickContainer.style.left = \"100px\" // Position further from left\n                ;\n                joystickContainer.style.width = \"120px\" // Larger touch target\n                ;\n                joystickContainer.style.height = \"120px\" // Larger touch target\n                ;\n                joystickContainer.style.zIndex = \"1000\";\n                // Add visual indicator for the joystick container\n                joystickContainer.style.background = \"rgba(40, 40, 40, 0.7)\" // Dark background with more opacity\n                ;\n                joystickContainer.style.borderRadius = \"50%\" // Make it circular\n                ;\n                joystickContainer.style.border = \"2px solid rgba(100, 100, 100, 0.8)\" // Darker border\n                ;\n                // Add a label to explain how to use\n                const label = document.createElement(\"div\");\n                label.innerText = \"Move\";\n                label.style.position = \"absolute\";\n                label.style.bottom = \"170px\" // Position above the joystick\n                ;\n                label.style.left = \"100px\";\n                label.style.width = \"120px\";\n                label.style.textAlign = \"center\";\n                label.style.color = \"#FFFFFF\" // Explicit white color\n                ;\n                label.style.fontSize = \"14px\";\n                label.style.fontWeight = \"bold\";\n                label.style.textShadow = \"2px 2px 3px black\" // Stronger shadow for better visibility\n                ;\n                document.body.appendChild(label);\n                document.body.appendChild(joystickContainer);\n                const joystick = nipplejs.create({\n                    zone: joystickContainer,\n                    mode: \"static\",\n                    position: {\n                        left: \"50%\",\n                        top: \"50%\"\n                    },\n                    color: \"#444444\",\n                    size: 100,\n                    lockX: false,\n                    lockY: false,\n                    dynamicPage: true\n                });\n                // Store joystick instance for cleanup\n                joystickInstanceRef.current = joystick;\n                // Make the joystick more responsive\n                joystick.on(\"move\", (_, data)=>{\n                    // Lower threshold for increased sensitivity (0.2 instead of 0.3)\n                    const forward = data.vector.y > 0.2;\n                    const backward = data.vector.y < -0.2;\n                    const left = data.vector.x < -0.2;\n                    const right = data.vector.x > 0.2;\n                    setMovement({\n                        forward,\n                        backward,\n                        left,\n                        right\n                    });\n                });\n                joystick.on(\"end\", ()=>{\n                    setMovement({\n                        forward: false,\n                        backward: false,\n                        left: false,\n                        right: false\n                    });\n                });\n                // Add a rotation joystick for camera control on touch devices\n                const rotationJoystickContainer = document.createElement(\"div\");\n                rotationJoystickContainer.style.position = \"absolute\";\n                rotationJoystickContainer.style.bottom = \"100px\";\n                rotationJoystickContainer.style.right = \"100px\" // Position on the right side\n                ;\n                rotationJoystickContainer.style.width = \"120px\";\n                rotationJoystickContainer.style.height = \"120px\";\n                rotationJoystickContainer.style.zIndex = \"1000\";\n                rotationJoystickContainer.style.background = \"rgba(40, 40, 40, 0.7)\" // Dark background with more opacity\n                ;\n                rotationJoystickContainer.style.borderRadius = \"50%\";\n                rotationJoystickContainer.style.border = \"2px solid rgba(100, 100, 100, 0.8)\" // Darker border\n                ;\n                // Add a label for the rotation joystick\n                const rotationLabel = document.createElement(\"div\");\n                rotationLabel.innerText = \"Look\";\n                rotationLabel.style.position = \"absolute\";\n                rotationLabel.style.bottom = \"170px\";\n                rotationLabel.style.right = \"100px\";\n                rotationLabel.style.width = \"120px\";\n                rotationLabel.style.textAlign = \"center\";\n                rotationLabel.style.color = \"#FFFFFF\" // Explicit white color\n                ;\n                rotationLabel.style.fontSize = \"14px\";\n                rotationLabel.style.fontWeight = \"bold\";\n                rotationLabel.style.textShadow = \"2px 2px 3px black\" // Stronger shadow for better visibility\n                ;\n                document.body.appendChild(rotationLabel);\n                document.body.appendChild(rotationJoystickContainer);\n                const rotationJoystick = nipplejs.create({\n                    zone: rotationJoystickContainer,\n                    mode: \"static\",\n                    position: {\n                        left: \"50%\",\n                        top: \"50%\"\n                    },\n                    color: \"#444444\",\n                    size: 100\n                });\n                // Handle camera rotation with the second joystick\n                rotationJoystick.on(\"move\", (_, data)=>{\n                    // Rotate the camera based on joystick position\n                    const rotationSpeed = 0.02 // Reduced from 0.05 to make it less sensitive\n                    ;\n                    euler.current.y -= data.vector.x * rotationSpeed;\n                    // Invert Y-axis: multiply by -1 to invert (note the sign change)\n                    const pitchLimit = Math.PI / 3 // Limit vertical rotation\n                    ;\n                    euler.current.x = Math.max(-pitchLimit, Math.min(pitchLimit, euler.current.x + data.vector.y * rotationSpeed));\n                    quaternion.current.setFromEuler(euler.current);\n                    camera.quaternion.copy(quaternion.current);\n                });\n                return ()=>{\n                    // Cleanup\n                    if (joystickInstanceRef.current) {\n                        joystickInstanceRef.current.destroy();\n                    }\n                    joystickContainer.remove();\n                    label.remove();\n                    rotationJoystick.destroy();\n                    rotationJoystickContainer.remove();\n                    rotationLabel.remove();\n                };\n            }).catch((err)=>{\n                console.error(\"Error loading nipplejs:\", err);\n            });\n        }\n    }, [\n        camera.quaternion\n    ]);\n    (0,_react_three_fiber__WEBPACK_IMPORTED_MODULE_3__.A)((_, delta)=>{\n        direction.current.z = Number(movement.forward) - Number(movement.backward);\n        direction.current.x = Number(movement.right) - Number(movement.left);\n        direction.current.normalize();\n        if (movement.forward || movement.backward || movement.left || movement.right) {\n            const forward = new three__WEBPACK_IMPORTED_MODULE_4__.Vector3(0, 0, -1).applyQuaternion(camera.quaternion);\n            forward.normalize();\n            const right = new three__WEBPACK_IMPORTED_MODULE_4__.Vector3(1, 0, 0).applyQuaternion(camera.quaternion);\n            right.normalize();\n            velocity.current.set(0, 0, 0);\n            const frameSpeed = speed * delta;\n            if (movement.forward) velocity.current.add(forward.multiplyScalar(frameSpeed));\n            if (movement.backward) velocity.current.sub(forward.multiplyScalar(frameSpeed));\n            if (movement.right) velocity.current.add(right.multiplyScalar(frameSpeed));\n            if (movement.left) velocity.current.sub(right.multiplyScalar(frameSpeed));\n            camera.position.add(velocity.current);\n        }\n    });\n    // Return null instead of a div element which causes errors in R3F\n    return null;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9hcHAvY29tcG9uZW50cy90aHJlZS9GaXJzdFBlcnNvbkNvbnRyb2xsZXIudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBbUQ7QUFDSTtBQUNMO0FBQ2hCO0FBQ1k7QUFTdkMsU0FBU1U7SUFDZCxNQUFNLEVBQUVDLE1BQU0sRUFBRUMsRUFBRSxFQUFFLEdBQUdSLHFEQUFRQTtJQUMvQixNQUFNUyx1QkFBdUJaLDZDQUFNQSxDQUFpQjtJQUNwRCxNQUFNYSxzQkFBc0JiLDZDQUFNQSxDQUFrQztJQUNwRSxNQUFNYyxnQkFBZ0JkLDZDQUFNQSxDQUFDO0lBQzdCLE1BQU1lLFdBQVdmLDZDQUFNQSxDQUFDO0lBRXhCLE1BQU1nQixRQUFRaEIsNkNBQU1BLENBQUMsSUFBSUssd0NBQUtBLENBQUMsR0FBRyxHQUFHLEdBQUc7SUFDeEMsTUFBTVksYUFBYWpCLDZDQUFNQSxDQUFDLElBQUlNLDZDQUFVQTtJQUV4QyxNQUFNLEVBQUVZLFdBQVcsRUFBRUMsZ0JBQWdCLEVBQUUsR0FBR1gsNERBQVdBO0lBRXJELE1BQU0sRUFBRVksS0FBSyxFQUFFQyxXQUFXLEVBQUVDLFNBQVMsRUFBRSxHQUFHZixpREFBV0EsQ0FBQyxZQUFZO1FBQ2hFYSxPQUFPO1lBQ0xHLE9BQU87WUFDUEMsS0FBSztZQUNMQyxLQUFLO1lBQ0xDLE1BQU07WUFDTkMsT0FBTztRQUNUO1FBQ0FOLGFBQWE7WUFDWEUsT0FBTztZQUNQQyxLQUFLO1lBQ0xDLEtBQUs7WUFDTEMsTUFBTTtZQUNOQyxPQUFPO1FBQ1Q7UUFDQUwsV0FBVztZQUNUQyxPQUFPO1lBQ1BJLE9BQU87UUFDVDtJQUNGO0lBRUE1QixnREFBU0EsQ0FBQztRQUNSLG9FQUFvRTtRQUNwRTZCLE9BQU9DLHFCQUFxQixHQUFHO1lBQUVQO1FBQVU7SUFDN0MsR0FBRztRQUFDQTtLQUFVO0lBRWQsTUFBTSxDQUFDUSxVQUFVQyxZQUFZLEdBQUc5QiwrQ0FBUUEsQ0FBZ0I7UUFDdEQrQixTQUFTO1FBQ1RDLFVBQVU7UUFD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TUgsVUFBVSxJQUFJNUIsMENBQU9BLENBQUMsR0FBRyxHQUFHLENBQUMsR0FBR3lILGVBQWUsQ0FBQ25ILE9BQU9PLFVBQVU7WUFDdkVlLFFBQVE0RixTQUFTO1lBRWpCLE1BQU16RixRQUFRLElBQUkvQiwwQ0FBT0EsQ0FBQyxHQUFHLEdBQUcsR0FBR3lILGVBQWUsQ0FBQ25ILE9BQU9PLFVBQVU7WUFDcEVrQixNQUFNeUYsU0FBUztZQUVmdkYsU0FBU0ksT0FBTyxDQUFDaUMsR0FBRyxDQUFDLEdBQUcsR0FBRztZQUUzQixNQUFNb0QsYUFBYTFHLFFBQVFxRztZQUUzQixJQUFJM0YsU0FBU0UsT0FBTyxFQUFFSyxTQUFTSSxPQUFPLENBQUNzRixHQUFHLENBQUMvRixRQUFRZ0csY0FBYyxDQUFDRjtZQUNsRSxJQUFJaEcsU0FBU0csUUFBUSxFQUFFSSxTQUFTSSxPQUFPLENBQUN3RixHQUFHLENBQUNqRyxRQUFRZ0csY0FBYyxDQUFDRjtZQUNuRSxJQUFJaEcsU0FBU0ssS0FBSyxFQUFFRSxTQUFTSSxPQUFPLENBQUNzRixHQUFHLENBQUM1RixNQUFNNkYsY0FBYyxDQUFDRjtZQUM5RCxJQUFJaEcsU0FBU0ksSUFBSSxFQUFFRyxTQUFTSSxPQUFPLENBQUN3RixHQUFHLENBQUM5RixNQUFNNkYsY0FBYyxDQUFDRjtZQUU3RHBILE9BQU8rRCxRQUFRLENBQUNzRCxHQUFHLENBQUMxRixTQUFTSSxPQUFPO1FBQ3RDO0lBQ0Y7SUFFQSxrRUFBa0U7SUFDbEUsT0FBTztBQUNUIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdmliZS0zZC1jb2RlLy4vYXBwL2NvbXBvbmVudHMvdGhyZWUvRmlyc3RQZXJzb25Db250cm9sbGVyLnRzeD9mMGU1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHVzZUVmZmVjdCwgdXNlUmVmLCB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0J1xuaW1wb3J0IHsgdXNlRnJhbWUsIHVzZVRocmVlIH0gZnJvbSAnQHJlYWN0LXRocmVlL2ZpYmVyJ1xuaW1wb3J0IHsgVmVjdG9yMywgRXVsZXIsIFF1YXRlcm5pb24gfSBmcm9tICd0aHJlZSdcbmltcG9ydCB7IHVzZUNvbnRyb2xzIH0gZnJvbSAnbGV2YSdcbmltcG9ydCB7IHVzZUFwcFN0b3JlIH0gZnJvbSAnQC9zdG9yZS9hcHBTdG9yZSdcblxuaW50ZXJmYWNlIE1vdmVtZW50U3RhdGUge1xuICBmb3J3YXJkOiBib29sZWFuXG4gIGJhY2t3YXJkOiBib29sZWFuXG4gIGxlZnQ6IGJvb2xlYW5cbiAgcmlnaHQ6IGJvb2xlYW5cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIEZpcnN0UGVyc29uQ29udHJvbGxlcigpIHtcbiAgY29uc3QgeyBjYW1lcmEsIGdsIH0gPSB1c2VUaHJlZSgpXG4gIGNvbnN0IGpveXN0aWNrQ29udGFpbmVyUmVmID0gdXNlUmVmPEhUTUxEaXZFbGVtZW50PihudWxsKVxuICBjb25zdCBqb3lzdGlja0luc3RhbmNlUmVmID0gdXNlUmVmPG5pcHBsZWpzLkpveXN0aWNrTWFuYWdlciB8IG51bGw+KG51bGwpXG4gIGNvbnN0IGlzVG91Y2hEZXZpY2UgPSB1c2VSZWYoZmFsc2UpXG4gIGNvbnN0IGlzTG9ja2VkID0gdXNlUmVmKGZhbHNlKVxuICBcbiAgY29uc3QgZXVsZXIgPSB1c2VSZWYobmV3IEV1bGVyKDAsIDAsIDAsICdZWFonKSlcbiAgY29uc3QgcXVhdGVybmlvbiA9IHVzZVJlZihuZXcgUXVhdGVybmlvbigpKVxuICBcbiAgY29uc3QgeyBpc1VJRm9jdXNlZCwgaXNDb2RlRWRpdG9yT3BlbiB9ID0gdXNlQXBwU3RvcmUoKVxuXG4gIGNvbnN0IHsgc3BlZWQsIHNlbnNpdGl2aXR5LCBzaG93T2NlYW4gfSA9IHVzZUNvbnRyb2xzKCdTZXR0aW5ncycsIHtcbiAgICBzcGVlZDoge1xuICAgICAgdmFsdWU6IDEwLFxuICAgICAgbWluOiA1LFxuICAgICAgbWF4OiAzMCxcbiAgICAgIHN0ZXA6IDEsXG4gICAgICBsYWJlbDogJ01vdmVtZW50IFNwZWVkJ1xuICAgIH0sXG4gICAgc2Vuc2l0aXZpdHk6IHtcbiAgICAgIHZhbHVlOiAwLjAwMixcbiAgICAgIG1pbjogMC4wMDA1LFxuICAgICAgbWF4OiAwLjAxLFxuICAgICAgc3RlcDogMC4wMDA1LFxuICAgICAgbGFiZWw6ICdNb3VzZSBTZW5zaXRpdml0eSdcbiAgICB9LFxuICAgIHNob3dPY2Vhbjoge1xuICAgICAgdmFsdWU6IGZhbHNlLFxuICAgICAgbGFiZWw6ICdTaG93IE9jZWFuJ1xuICAgIH1cbiAgfSlcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIC8vIEB0cy1pZ25vcmUgLSBBZGRpbmcgYSBjdXN0b20gcHJvcGVydHkgdG8gd2luZG93IGZvciBnbG9iYWwgYWNjZXNzXG4gICAgd2luZG93Ll9fZW52aXJvbm1lbnRTZXR0aW5ncyA9IHsgc2hvd09jZWFuIH1cbiAgfSwgW3Nob3dPY2Vhbl0pXG5cbiAgY29uc3QgW21vdmVtZW50LCBzZXRNb3ZlbWVudF0gPSB1c2VTdGF0ZTxNb3ZlbWVudFN0YXRlPih7XG4gICAgZm9yd2FyZDogZmFsc2UsXG4gICAgYmFja3dhcmQ6IGZhbHNlLFxuICAgIGxlZnQ6IGZhbHNlLFxuICAgIHJpZ2h0OiBmYWxzZVxuICB9KVxuXG4gIGNvbnN0IGRpcmVjdGlvbiA9IHVzZVJlZihuZXcgVmVjdG9yMygpKVxuICBjb25zdCB2ZWxvY2l0eSA9IHVzZVJlZihuZXcgVmVjdG9yMygpKVxuXG4gIGNvbnN0IGp1c3RGb2N1c2VkVUkgPSB1c2VSZWYoZmFsc2UpXG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBjYW52YXMgPSBnbC5kb21FbGVtZW50O1xuICAgIFxuICAgIGV1bGVyLmN1cnJlbnQuc2V0RnJvbVF1YXRlcm5pb24oY2FtZXJhLnF1YXRlcm5pb24pO1xuICAgIFxuICAgIGNvbnN0IG9uQ2FudmFzQ2xpY2sgPSAoZXZlbnQ6IE1vdXNlRXZlbnQpID0+IHtcbiAgICAgIGlmIChqdXN0Rm9jdXNlZFVJLmN1cnJlbnQpIHtcbiAgICAgICAganVzdEZvY3VzZWRVSS5jdXJyZW50ID0gZmFsc2U7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYgKGV2ZW50LnRhcmdldCA9PT0gY2FudmFzICYmICFpc1VJRm9jdXNlZCAmJiAhaXNDb2RlRWRpdG9yT3Blbikge1xuICAgICAgICBpZiAoY2FudmFzLnJlcXVlc3RQb2ludGVyTG9jaykge1xuICAgICAgICAgIGNhbnZhcy5yZXF1ZXN0UG9pbnRlckxvY2soKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG5cbiAgICBjb25zdCBvblBvaW50ZXJMb2NrQ2hhbmdlID0gKCkgPT4ge1xuICAgICAgaXNMb2NrZWQuY3VycmVudCA9IGRvY3VtZW50LnBvaW50ZXJMb2NrRWxlbWVudCA9PT0gY2FudmFzO1xuICAgIH07XG4gICAgXG4gICAgY29uc3Qgb25Nb3VzZU1vdmUgPSAoZXZlbnQ6IE1vdXNlRXZlbnQpID0+IHtcbiAgICAgIGlmICghaXNMb2NrZWQuY3VycmVudCkgcmV0dXJuO1xuICAgICAgXG4gICAgICBjb25zdCBtb3ZlbWVudFggPSBldmVudC5tb3ZlbWVudFggfHwgMDtcbiAgICAgIGNvbnN0IG1vdmVtZW50WSA9IGV2ZW50Lm1vdmVtZW50WSB8fCAwO1xuICAgICAgXG4gICAgICBldWxlci5jdXJyZW50LnkgLT0gbW92ZW1lbnRYICogc2Vuc2l0aXZpdHk7XG4gICAgICBldWxlci5jdXJyZW50LnggPSBNYXRoLm1heChcbiAgICAgICAgLU1hdGguUEkgLyAyICsgMC4wMSwgXG4gICAgICAgIE1hdGgubWluKE1hdGguUEkgLyAyIC0gMC4wMSwgZXVsZXIuY3VycmVudC54IC0gbW92ZW1lbnRZICogc2Vuc2l0aXZpdHkpXG4gICAgICApO1xuICAgICAgXG4gICAgICBxdWF0ZXJuaW9uLmN1cnJlbnQuc2V0RnJvbUV1bGVyKGV1bGVyLmN1cnJlbnQpO1xuICAgICAgY2FtZXJhLnF1YXRlcm5pb24uY29weShxdWF0ZXJuaW9uLmN1cnJlbnQpO1xuICAgIH07XG4gICAgXG4gICAgY29uc3Qgb25VSUZvY3VzID0gKCkgPT4ge1xuICAgICAgaWYgKGlzTG9ja2VkLmN1cnJlbnQgJiYgZG9jdW1lbnQuZXhpdFBvaW50ZXJMb2NrKSB7XG4gICAgICAgIGp1c3RGb2N1c2VkVUkuY3VycmVudCA9IHRydWU7XG4gICAgICAgIGRvY3VtZW50LmV4aXRQb2ludGVyTG9jaygpO1xuICAgICAgfVxuICAgIH07XG4gICAgXG4gICAgY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgb25DYW52YXNDbGljayk7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigncG9pbnRlcmxvY2tjaGFuZ2UnLCBvblBvaW50ZXJMb2NrQ2hhbmdlKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBvbk1vdXNlTW92ZSk7XG4gICAgXG4gICAgY29uc3QgaW5wdXRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnaW5wdXQsIHRleHRhcmVhLCBidXR0b24sIFt0YWJpbmRleF0nKTtcbiAgICBpbnB1dHMuZm9yRWFjaChlbCA9PiBlbC5hZGRFdmVudExpc3RlbmVyKCdmb2N1cycsIG9uVUlGb2N1cykpO1xuICAgIFxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBjYW52YXMucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCBvbkNhbnZhc0NsaWNrKTtcbiAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJsb2NrY2hhbmdlJywgb25Qb2ludGVyTG9ja0NoYW5nZSk7XG4gICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBvbk1vdXNlTW92ZSk7XG4gICAgICBcbiAgICAgIGlucHV0cy5mb3JFYWNoKGVsID0+IGVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgb25VSUZvY3VzKSk7XG4gICAgICBcbiAgICAgIGlmIChkb2N1bWVudC5wb2ludGVyTG9ja0VsZW1lbnQgPT09IGNhbnZhcyAmJiBkb2N1bWVudC5leGl0UG9pbnRlckxvY2spIHtcbiAgICAgICAgZG9jdW1lbnQuZXhpdFBvaW50ZXJMb2NrKCk7XG4gICAgICB9XG4gICAgfTtcbiAgfSwgW2dsLCBjYW1lcmEsIGlzVUlGb2N1c2VkLCBpc0NvZGVFZGl0b3JPcGVuLCBzZW5zaXRpdml0eV0pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGlzVUlGb2N1c2VkICYmIGlzTG9ja2VkLmN1cnJlbnQgJiYgZG9jdW1lbnQuZXhpdFBvaW50ZXJMb2NrKSB7XG4gICAgICBqdXN0Rm9jdXNlZFVJLmN1cnJlbnQgPSB0cnVlO1xuICAgICAgZG9jdW1lbnQuZXhpdFBvaW50ZXJMb2NrKCk7XG4gICAgfVxuICB9LCBbaXNVSUZvY3VzZWQsIGlzQ29kZUVkaXRvck9wZW5dKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IGhhbmRsZUtleURvd24gPSAoZTogS2V5Ym9hcmRFdmVudCkgPT4ge1xuICAgICAgaWYgKGlzVUlGb2N1c2VkIHx8IGlzQ29kZUVkaXRvck9wZW4gfHwgKGUudGFyZ2V0IGFzIEhUTUxFbGVtZW50KT8udGFnTmFtZSA9PT0gJ0lOUFVUJyB8fCAoZS50YXJnZXQgYXMgSFRNTEVsZW1lbnQpPy50YWdOYW1lID09PSAnVEVYVEFSRUEnKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgc3dpdGNoIChlLmNvZGUpIHtcbiAgICAgICAgY2FzZSAnS2V5Vyc6XG4gICAgICAgICAgc2V0TW92ZW1lbnQocHJldiA9PiAoeyAuLi5wcmV2LCBmb3J3YXJkOiB0cnVlIH0pKVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ0tleVMnOlxuICAgICAgICAgIHNldE1vdmVtZW50KHByZXYgPT4gKHsgLi4ucHJldiwgYmFja3dhcmQ6IHRydWUgfSkpXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnS2V5QSc6XG4gICAgICAgICAgc2V0TW92ZW1lbnQocHJldiA9PiAoeyAuLi5wcmV2LCBsZWZ0OiB0cnVlIH0pKVxuICAgICAgICAgIGJyZWFrXG4gICAgICAgIGNhc2UgJ0tleUQnOlxuICAgICAgICAgIHNldE1vdmVtZW50KHByZXYgPT4gKHsgLi4ucHJldiwgcmlnaHQ6IHRydWUgfSkpXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnRXNjYXBlJzpcbiAgICAgICAgICBpZiAoZG9jdW1lbnQucG9pbnRlckxvY2tFbGVtZW50ID09PSBnbC5kb21FbGVtZW50ICYmIGRvY3VtZW50LmV4aXRQb2ludGVyTG9jaykge1xuICAgICAgICAgICAgZG9jdW1lbnQuZXhpdFBvaW50ZXJMb2NrKCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrXG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIGNvbnN0IGhhbmRsZUtleVVwID0gKGU6IEtleWJvYXJkRXZlbnQpID0+IHtcbiAgICAgIGlmIChpc1VJRm9jdXNlZCB8fCBpc0NvZGVFZGl0b3JPcGVuIHx8IChlLnRhcmdldCBhcyBIVE1MRWxlbWVudCk/LnRhZ05hbWUgPT09ICdJTlBVVCcgfHwgKGUudGFyZ2V0IGFzIEhUTUxFbGVtZW50KT8udGFnTmFtZSA9PT0gJ1RFWFRBUkVBJykge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBcbiAgICAgIHN3aXRjaCAoZS5jb2RlKSB7XG4gICAgICAgIGNhc2UgJ0tleVcnOlxuICAgICAgICAgIHNldE1vdmVtZW50KHByZXYgPT4gKHsgLi4ucHJldiwgZm9yd2FyZDogZmFsc2UgfSkpXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnS2V5Uyc6XG4gICAgICAgICAgc2V0TW92ZW1lbnQocHJldiA9PiAoeyAuLi5wcmV2LCBiYWNrd2FyZDogZmFsc2UgfSkpXG4gICAgICAgICAgYnJlYWtcbiAgICAgICAgY2FzZSAnS2V5QSc6XG4gICAgICAgICAgc2V0TW92ZW1lbnQocHJldiA9PiAoeyAuLi5wcmV2LCBsZWZ0OiBmYWxzZSB9KSlcbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICdLZXlEJzpcbiAgICAgICAgICBzZXRNb3ZlbWVudChwcmV2ID0+ICh7IC4uLnByZXYsIHJpZ2h0OiBmYWxzZSB9KSlcbiAgICAgICAgICBicmVha1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGhhbmRsZUtleURvd24pXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgaGFuZGxlS2V5VXApXG4gICAgXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgaGFuZGxlS2V5RG93bilcbiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXl1cCcsIGhhbmRsZUtleVVwKVxuICAgIH1cbiAgfSwgW2lzVUlGb2N1c2VkLCBpc0NvZGVFZGl0b3JPcGVuLCBnbC5kb21FbGVtZW50XSlcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNhbWVyYS5wb3NpdGlvbi5zZXQoMCwgMS43LCA1KVxuICB9LCBbY2FtZXJhXSlcbiAgXG4gIC8vIENyZWF0ZSBqb3lzdGljayBvdXRzaWRlIHRoZSBDYW52YXMgY29tcG9uZW50IHRvIGF2b2lkIHJlbmRlcmluZyBIVE1MIGluc2lkZSBUaHJlZS5qc1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIC8vIE9ubHkgcnVuIG9uIGNsaWVudCBzaWRlXG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnKSByZXR1cm47XG4gICAgXG4gICAgaXNUb3VjaERldmljZS5jdXJyZW50ID0gJ29udG91Y2hzdGFydCcgaW4gd2luZG93IHx8IG5hdmlnYXRvci5tYXhUb3VjaFBvaW50cyA+IDBcbiAgICBcbiAgICBpZiAoaXNUb3VjaERldmljZS5jdXJyZW50KSB7XG4gICAgICAvLyBEeW5hbWljYWxseSBpbXBvcnQgbmlwcGxlanMgb25seSBvbiBjbGllbnQtc2lkZVxuICAgICAgaW1wb3J0KCduaXBwbGVqcycpLnRoZW4obmlwcGxlanMgPT4ge1xuICAgICAgICAvLyBDcmVhdGUgYSBjb250YWluZXIgZm9yIHRoZSBqb3lzdGlja1xuICAgICAgICBjb25zdCBqb3lzdGlja0NvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgICAgIGpveXN0aWNrQ29udGFpbmVyLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJ1xuICAgICAgICBqb3lzdGlja0NvbnRhaW5lci5zdHlsZS5ib3R0b20gPSAnMTAwcHgnIC8vIFBvc2l0aW9uIGhpZ2hlciBmcm9tIGJvdHRvbVxuICAgICAgICBqb3lzdGlja0NvbnRhaW5lci5zdHlsZS5sZWZ0ID0gJzEwMHB4JyAvLyBQb3NpdGlvbiBmdXJ0aGVyIGZyb20gbGVmdFxuICAgICAgICBqb3lzdGlja0NvbnRhaW5lci5zdHlsZS53aWR0aCA9ICcxMjBweCcgLy8gTGFyZ2VyIHRvdWNoIHRhcmdldFxuICAgICAgICBqb3lzdGlja0NvbnRhaW5lci5zdHlsZS5oZWlnaHQgPSAnMTIwcHgnIC8vIExhcmdlciB0b3VjaCB0YXJnZXRcbiAgICAgICAgam95c3RpY2tDb250YWluZXIuc3R5bGUuekluZGV4ID0gJzEwMDAnXG4gICAgICAgIFxuICAgICAgICAvLyBBZGQgdmlzdWFsIGluZGljYXRvciBmb3IgdGhlIGpveXN0aWNrIGNvbnRhaW5lclxuICAgICAgICBqb3lzdGlja0NvbnRhaW5lci5zdHlsZS5iYWNrZ3JvdW5kID0gJ3JnYmEoNDAsIDQwLCA0MCwgMC43KScgLy8gRGFyayBiYWNrZ3JvdW5kIHdpdGggbW9yZSBvcGFjaXR5XG4gICAgICAgIGpveXN0aWNrQ29udGFpbmVyLnN0eWxlLmJvcmRlclJhZGl1cyA9ICc1MCUnIC8vIE1ha2UgaXQgY2lyY3VsYXJcbiAgICAgICAgam95c3RpY2tDb250YWluZXIuc3R5bGUuYm9yZGVyID0gJzJweCBzb2xpZCByZ2JhKDEwMCwgMTAwLCAxMDAsIDAuOCknIC8vIERhcmtlciBib3JkZXJcbiAgICAgICAgXG4gICAgICAgIC8vIEFkZCBhIGxhYmVsIHRvIGV4cGxhaW4gaG93IHRvIHVzZVxuICAgICAgICBjb25zdCBsYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgICAgIGxhYmVsLmlubmVyVGV4dCA9ICdNb3ZlJ1xuICAgICAgICBsYWJlbC5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSdcbiAgICAgICAgbGFiZWwuc3R5bGUuYm90dG9tID0gJzE3MHB4JyAvLyBQb3NpdGlvbiBhYm92ZSB0aGUgam95c3RpY2tcbiAgICAgICAgbGFiZWwuc3R5bGUubGVmdCA9ICcxMDBweCdcbiAgICAgICAgbGFiZWwuc3R5bGUud2lkdGggPSAnMTIwcHgnXG4gICAgICAgIGxhYmVsLnN0eWxlLnRleHRBbGlnbiA9ICdjZW50ZXInXG4gICAgICAgIGxhYmVsLnN0eWxlLmNvbG9yID0gJyNGRkZGRkYnIC8vIEV4cGxpY2l0IHdoaXRlIGNvbG9yXG4gICAgICAgIGxhYmVsLnN0eWxlLmZvbnRTaXplID0gJzE0cHgnXG4gICAgICAgIGxhYmVsLnN0eWxlLmZvbnRXZWlnaHQgPSAnYm9sZCdcbiAgICAgICAgbGFiZWwuc3R5bGUudGV4dFNoYWRvdyA9ICcycHggMnB4IDNweCBibGFjaycgLy8gU3Ryb25nZXIgc2hhZG93IGZvciBiZXR0ZXIgdmlzaWJpbGl0eVxuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGxhYmVsKVxuICAgICAgICBcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChqb3lzdGlja0NvbnRhaW5lcilcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGpveXN0aWNrID0gbmlwcGxlanMuY3JlYXRlKHtcbiAgICAgICAgICB6b25lOiBqb3lzdGlja0NvbnRhaW5lcixcbiAgICAgICAgICBtb2RlOiAnc3RhdGljJyxcbiAgICAgICAgICBwb3NpdGlvbjogeyBsZWZ0OiAnNTAlJywgdG9wOiAnNTAlJyB9LFxuICAgICAgICAgIGNvbG9yOiAnIzQ0NDQ0NCcsXG4gICAgICAgICAgc2l6ZTogMTAwLFxuICAgICAgICAgIGxvY2tYOiBmYWxzZSxcbiAgICAgICAgICBsb2NrWTogZmFsc2UsXG4gICAgICAgICAgZHluYW1pY1BhZ2U6IHRydWVcbiAgICAgICAgfSlcbiAgICAgICAgXG4gICAgICAgIC8vIFN0b3JlIGpveXN0aWNrIGluc3RhbmNlIGZvciBjbGVhbnVwXG4gICAgICAgIGpveXN0aWNrSW5zdGFuY2VSZWYuY3VycmVudCA9IGpveXN0aWNrXG4gICAgICAgIFxuICAgICAgICAvLyBNYWtlIHRoZSBqb3lzdGljayBtb3JlIHJlc3BvbnNpdmVcbiAgICAgICAgam95c3RpY2sub24oJ21vdmUnLCAoXywgZGF0YSkgPT4ge1xuICAgICAgICAgIC8vIExvd2VyIHRocmVzaG9sZCBmb3IgaW5jcmVhc2VkIHNlbnNpdGl2aXR5ICgwLjIgaW5zdGVhZCBvZiAwLjMpXG4gICAgICAgICAgY29uc3QgZm9yd2FyZCA9IGRhdGEudmVjdG9yLnkgPiAwLjJcbiAgICAgICAgICBjb25zdCBiYWNrd2FyZCA9IGRhdGEudmVjdG9yLnkgPCAtMC4yXG4gICAgICAgICAgY29uc3QgbGVmdCA9IGRhdGEudmVjdG9yLnggPCAtMC4yXG4gICAgICAgICAgY29uc3QgcmlnaHQgPSBkYXRhLnZlY3Rvci54ID4gMC4yXG4gICAgICAgICAgXG4gICAgICAgICAgc2V0TW92ZW1lbnQoeyBmb3J3YXJkLCBiYWNrd2FyZCwgbGVmdCwgcmlnaHQgfSlcbiAgICAgICAgfSlcbiAgICAgICAgXG4gICAgICAgIGpveXN0aWNrLm9uKCdlbmQnLCAoKSA9PiB7XG4gICAgICAgICAgc2V0TW92ZW1lbnQoeyBmb3J3YXJkOiBmYWxzZSwgYmFja3dhcmQ6IGZhbHNlLCBsZWZ0OiBmYWxzZSwgcmlnaHQ6IGZhbHNlIH0pXG4gICAgICAgIH0pXG5cbiAgICAgICAgLy8gQWRkIGEgcm90YXRpb24gam95c3RpY2sgZm9yIGNhbWVyYSBjb250cm9sIG9uIHRvdWNoIGRldmljZXNcbiAgICAgICAgY29uc3Qgcm90YXRpb25Kb3lzdGlja0NvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpXG4gICAgICAgIHJvdGF0aW9uSm95c3RpY2tDb250YWluZXIuc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnXG4gICAgICAgIHJvdGF0aW9uSm95c3RpY2tDb250YWluZXIuc3R5bGUuYm90dG9tID0gJzEwMHB4J1xuICAgICAgICByb3RhdGlvbkpveXN0aWNrQ29udGFpbmVyLnN0eWxlLnJpZ2h0ID0gJzEwMHB4JyAvLyBQb3NpdGlvbiBvbiB0aGUgcmlnaHQgc2lkZVxuICAgICAgICByb3RhdGlvbkpveXN0aWNrQ29udGFpbmVyLnN0eWxlLndpZHRoID0gJzEyMHB4J1xuICAgICAgICByb3RhdGlvbkpveXN0aWNrQ29udGFpbmVyLnN0eWxlLmhlaWdodCA9ICcxMjBweCdcbiAgICAgICAgcm90YXRpb25Kb3lzdGlja0NvbnRhaW5lci5zdHlsZS56SW5kZXggPSAnMTAwMCdcbiAgICAgICAgcm90YXRpb25Kb3lzdGlja0NvbnRhaW5lci5zdHlsZS5iYWNrZ3JvdW5kID0gJ3JnYmEoNDAsIDQwLCA0MCwgMC43KScgLy8gRGFyayBiYWNrZ3JvdW5kIHdpdGggbW9yZSBvcGFjaXR5XG4gICAgICAgIHJvdGF0aW9uSm95c3RpY2tDb250YWluZXIuc3R5bGUuYm9yZGVyUmFkaXVzID0gJzUwJSdcbiAgICAgICAgcm90YXRpb25Kb3lzdGlja0NvbnRhaW5lci5zdHlsZS5ib3JkZXIgPSAnMnB4IHNvbGlkIHJnYmEoMTAwLCAxMDAsIDEwMCwgMC44KScgLy8gRGFya2VyIGJvcmRlclxuICAgICAgICBcbiAgICAgICAgLy8gQWRkIGEgbGFiZWwgZm9yIHRoZSByb3RhdGlvbiBqb3lzdGlja1xuICAgICAgICBjb25zdCByb3RhdGlvbkxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2JylcbiAgICAgICAgcm90YXRpb25MYWJlbC5pbm5lclRleHQgPSAnTG9vaydcbiAgICAgICAgcm90YXRpb25MYWJlbC5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSdcbiAgICAgICAgcm90YXRpb25MYWJlbC5zdHlsZS5ib3R0b20gPSAnMTcwcHgnXG4gICAgICAgIHJvdGF0aW9uTGFiZWwuc3R5bGUucmlnaHQgPSAnMTAwcHgnXG4gICAgICAgIHJvdGF0aW9uTGFiZWwuc3R5bGUud2lkdGggPSAnMTIwcHgnXG4gICAgICAgIHJvdGF0aW9uTGFiZWwuc3R5bGUudGV4dEFsaWduID0gJ2NlbnRlcidcbiAgICAgICAgcm90YXRpb25MYWJlbC5zdHlsZS5jb2xvciA9ICcjRkZGRkZGJyAvLyBFeHBsaWNpdCB3aGl0ZSBjb2xvclxuICAgICAgICByb3RhdGlvbkxhYmVsLnN0eWxlLmZvbnRTaXplID0gJzE0cHgnXG4gICAgICAgIHJvdGF0aW9uTGFiZWwuc3R5bGUuZm9udFdlaWdodCA9ICdib2xkJ1xuICAgICAgICByb3RhdGlvbkxhYmVsLnN0eWxlLnRleHRTaGFkb3cgPSAnMnB4IDJweCAzcHggYmxhY2snIC8vIFN0cm9uZ2VyIHNoYWRvdyBmb3IgYmV0dGVyIHZpc2liaWxpdHlcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChyb3RhdGlvbkxhYmVsKVxuICAgICAgICBcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChyb3RhdGlvbkpveXN0aWNrQ29udGFpbmVyKVxuICAgICAgICBcbiAgICAgICAgY29uc3Qgcm90YXRpb25Kb3lzdGljayA9IG5pcHBsZWpzLmNyZWF0ZSh7XG4gICAgICAgICAgem9uZTogcm90YXRpb25Kb3lzdGlja0NvbnRhaW5lcixcbiAgICAgICAgICBtb2RlOiAnc3RhdGljJyxcbiAgICAgICAgICBwb3NpdGlvbjogeyBsZWZ0OiAnNTAlJywgdG9wOiAnNTAlJyB9LFxuICAgICAgICAgIGNvbG9yOiAnIzQ0NDQ0NCcsXG4gICAgICAgICAgc2l6ZTogMTAwXG4gICAgICAgIH0pXG4gICAgICAgIFxuICAgICAgICAvLyBIYW5kbGUgY2FtZXJhIHJvdGF0aW9uIHdpdGggdGhlIHNlY29uZCBqb3lzdGlja1xuICAgICAgICByb3RhdGlvbkpveXN0aWNrLm9uKCdtb3ZlJywgKF8sIGRhdGEpID0+IHtcbiAgICAgICAgICAvLyBSb3RhdGUgdGhlIGNhbWVyYSBiYXNlZCBvbiBqb3lzdGljayBwb3NpdGlvblxuICAgICAgICAgIGNvbnN0IHJvdGF0aW9uU3BlZWQgPSAwLjAyIC8vIFJlZHVjZWQgZnJvbSAwLjA1IHRvIG1ha2UgaXQgbGVzcyBzZW5zaXRpdmVcbiAgICAgICAgICBcbiAgICAgICAgICBldWxlci5jdXJyZW50LnkgLT0gZGF0YS52ZWN0b3IueCAqIHJvdGF0aW9uU3BlZWRcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBJbnZlcnQgWS1heGlzOiBtdWx0aXBseSBieSAtMSB0byBpbnZlcnQgKG5vdGUgdGhlIHNpZ24gY2hhbmdlKVxuICAgICAgICAgIGNvbnN0IHBpdGNoTGltaXQgPSBNYXRoLlBJIC8gMyAvLyBMaW1pdCB2ZXJ0aWNhbCByb3RhdGlvblxuICAgICAgICAgIGV1bGVyLmN1cnJlbnQueCA9IE1hdGgubWF4KFxuICAgICAgICAgICAgLXBpdGNoTGltaXQsXG4gICAgICAgICAgICBNYXRoLm1pbihwaXRjaExpbWl0LCBldWxlci5jdXJyZW50LnggKyBkYXRhLnZlY3Rvci55ICogcm90YXRpb25TcGVlZClcbiAgICAgICAgICApXG4gICAgICAgICAgXG4gICAgICAgICAgcXVhdGVybmlvbi5jdXJyZW50LnNldEZyb21FdWxlcihldWxlci5jdXJyZW50KVxuICAgICAgICAgIGNhbWVyYS5xdWF0ZXJuaW9uLmNvcHkocXVhdGVybmlvbi5jdXJyZW50KVxuICAgICAgICB9KVxuICAgICAgICBcbiAgICAgICAgcmV0dXJuICgpID0+IHtcbiAgICAgICAgICAvLyBDbGVhbnVwXG4gICAgICAgICAgaWYgKGpveXN0aWNrSW5zdGFuY2VSZWYuY3VycmVudCkge1xuICAgICAgICAgICAgam95c3RpY2tJbnN0YW5jZVJlZi5jdXJyZW50LmRlc3Ryb3koKVxuICAgICAgICAgIH1cbiAgICAgICAgICBqb3lzdGlja0NvbnRhaW5lci5yZW1vdmUoKVxuICAgICAgICAgIGxhYmVsLnJlbW92ZSgpXG4gICAgICAgICAgXG4gICAgICAgICAgcm90YXRpb25Kb3lzdGljay5kZXN0cm95KClcbiAgICAgICAgICByb3RhdGlvbkpveXN0aWNrQ29udGFpbmVyLnJlbW92ZSgpXG4gICAgICAgICAgcm90YXRpb25MYWJlbC5yZW1vdmUoKVxuICAgICAgICB9XG4gICAgICB9KS5jYXRjaChlcnIgPT4ge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgbG9hZGluZyBuaXBwbGVqczpcIiwgZXJyKVxuICAgICAgfSlcbiAgICB9XG4gIH0sIFtjYW1lcmEucXVhdGVybmlvbl0pXG4gIFxuICB1c2VGcmFtZSgoXywgZGVsdGEpID0+IHtcbiAgICBkaXJlY3Rpb24uY3VycmVudC56ID0gTnVtYmVyKG1vdmVtZW50LmZvcndhcmQpIC0gTnVtYmVyKG1vdmVtZW50LmJhY2t3YXJkKVxuICAgIGRpcmVjdGlvbi5jdXJyZW50LnggPSBOdW1iZXIobW92ZW1lbnQucmlnaHQpIC0gTnVtYmVyKG1vdmVtZW50LmxlZnQpXG4gICAgZGlyZWN0aW9uLmN1cnJlbnQubm9ybWFsaXplKClcbiAgICBcbiAgICBpZiAobW92ZW1lbnQuZm9yd2FyZCB8fCBtb3ZlbWVudC5iYWNrd2FyZCB8fCBtb3ZlbWVudC5sZWZ0IHx8IG1vdmVtZW50LnJpZ2h0KSB7XG4gICAgICBjb25zdCBmb3J3YXJkID0gbmV3IFZlY3RvcjMoMCwgMCwgLTEpLmFwcGx5UXVhdGVybmlvbihjYW1lcmEucXVhdGVybmlvbilcbiAgICAgIGZvcndhcmQubm9ybWFsaXplKClcbiAgICAgIFxuICAgICAgY29uc3QgcmlnaHQgPSBuZXcgVmVjdG9yMygxLCAwLCAwKS5hcHBseVF1YXRlcm5pb24oY2FtZXJhLnF1YXRlcm5pb24pXG4gICAgICByaWdodC5ub3JtYWxpemUoKVxuICAgICAgXG4gICAgICB2ZWxvY2l0eS5jdXJyZW50LnNldCgwLCAwLCAwKVxuICAgICAgXG4gICAgICBjb25zdCBmcmFtZVNwZWVkID0gc3BlZWQgKiBkZWx0YTtcbiAgICAgIFxuICAgICAgaWYgKG1vdmVtZW50LmZvcndhcmQpIHZlbG9jaXR5LmN1cnJlbnQuYWRkKGZvcndhcmQubXVsdGlwbHlTY2FsYXIoZnJhbWVTcGVlZCkpXG4gICAgICBpZiAobW92ZW1lbnQuYmFja3dhcmQpIHZlbG9jaXR5LmN1cnJlbnQuc3ViKGZvcndhcmQubXVsdGlwbHlTY2FsYXIoZnJhbWVTcGVlZCkpXG4gICAgICBpZiAobW92ZW1lbnQucmlnaHQpIHZlbG9jaXR5LmN1cnJlbnQuYWRkKHJpZ2h0Lm11bHRpcGx5U2NhbGFyKGZyYW1lU3BlZWQpKVxuICAgICAgaWYgKG1vdmVtZW50LmxlZnQpIHZlbG9jaXR5LmN1cnJlbnQuc3ViKHJpZ2h0Lm11bHRpcGx5U2NhbGFyKGZyYW1lU3BlZWQpKVxuICAgICAgXG4gICAgICBjYW1lcmEucG9zaXRpb24uYWRkKHZlbG9jaXR5LmN1cnJlbnQpXG4gICAgfVxuICB9KVxuICBcbiAgLy8gUmV0dXJuIG51bGwgaW5zdGVhZCBvZiBhIGRpdiBlbGVtZW50IHdoaWNoIGNhdXNlcyBlcnJvcnMgaW4gUjNGXG4gIHJldHVybiBudWxsXG59ICJdLCJuYW1lcyI6WyJ1c2VFZmZlY3QiLCJ1c2VSZWYiLCJ1c2VTdGF0ZSIsInVzZUZyYW1lIiwidXNlVGhyZWUiLCJWZWN0b3IzIiwiRXVsZXIiLCJRdWF0ZXJuaW9uIiwidXNlQ29udHJvbHMiLCJ1c2VBcHBTdG9yZSIsIkZpcnN0UGVyc29uQ29udHJvbGxlciIsImNhbWVyYSIsImdsIiwiam95c3RpY2tDb250YWluZXJSZWYiLCJqb3lzdGlja0luc3RhbmNlUmVmIiwiaXNUb3VjaERldmljZSIsImlzTG9ja2VkIiwiZXVsZXIiLCJxdWF0ZXJuaW9uIiwiaXNVSUZvY3VzZWQiLCJpc0NvZGVFZGl0b3JPcGVuIiwic3BlZWQiLCJzZW5zaXRpdml0eSIsInNob3dPY2VhbiIsInZhbHVlIiwibWluIiwibWF4Iiwic3RlcCIsImxhYmVsIiwid2luZG93IiwiX19lbnZpcm9ubWVudFNldHRpbmdzIiwibW92ZW1lbnQiLCJzZXRNb3ZlbWVudCIsImZvcndhcmQiLCJiYWNrd2FyZCIsImxlZnQiLCJyaWdodCIsImRpcmVjdGlvbiIsInZlbG9jaXR5IiwianVzdEZvY3VzZWRVSSIsImNhbnZhcyIsImRvbUVsZW1lbnQiLCJjdXJyZW50Iiwic2V0RnJvbVF1YXRlcm5pb24iLCJvbkNhbnZhc0NsaWNrIiwiZXZlbnQiLCJ0YXJnZXQiLCJyZXF1ZXN0UG9pbnRlckxvY2siLCJvblBvaW50ZXJMb2NrQ2hhbmdlIiwiZG9jdW1lbnQiLCJwb2ludGVyTG9ja0VsZW1lbnQiLCJvbk1vdXNlTW92ZSIsIm1vdmVtZW50WCIsIm1vdmVtZW50WSIsInkiLCJ4IiwiTWF0aCIsIlBJIiwic2V0RnJvbUV1bGVyIiwiY29weSIsIm9uVUlGb2N1cyIsImV4aXRQb2ludGVyTG9jayIsImFkZEV2ZW50TGlzdGVuZXIiLCJpbnB1dHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsImVsIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImhhbmRsZUtleURvd24iLCJlIiwidGFnTmFtZSIsImNvZGUiLCJwcmV2IiwiaGFuZGxlS2V5VXAiLCJwb3NpdGlvbiIsInNldCIsIm5hdmlnYXRvciIsIm1heFRvdWNoUG9pbnRzIiwidGhlbiIsIm5pcHBsZWpzIiwiam95c3RpY2tDb250YWluZXIiLCJjcmVhdGVFbGVtZW50Iiwic3R5bGUiLCJib3R0b20iLCJ3aWR0aCIsImhlaWdodCIsInpJbmRleCIsImJhY2tncm91bmQiLCJib3JkZXJSYWRpdXMiLCJib3JkZXIiLCJpbm5lclRleHQiLCJ0ZXh0QWxpZ24iLCJjb2xvciIsImZvbnRTaXplIiwiZm9udFdlaWdodCIsInRleHRTaGFkb3ciLCJib2R5IiwiYXBwZW5kQ2hpbGQiLCJqb3lzdGljayIsImNyZWF0ZSIsInpvbmUiLCJtb2RlIiwidG9wIiwic2l6ZSIsImxvY2tYIiwibG9ja1kiLCJkeW5hbWljUGFnZSIsIm9uIiwiXyIsImRhdGEiLCJ2ZWN0b3IiLCJyb3RhdGlvbkpveXN0aWNrQ29udGFpbmVyIiwicm90YXRpb25MYWJlbCIsInJvdGF0aW9uSm95c3RpY2siLCJyb3RhdGlvblNwZWVkIiwicGl0Y2hMaW1pdCIsImRlc3Ryb3kiLCJyZW1vdmUiLCJjYXRjaCIsImVyciIsImNvbnNvbGUiLCJlcnJvciIsImRlbHRhIiwieiIsIk51bWJlciIsIm5vcm1hbGl6ZSIsImFwcGx5UXVhdGVybmlvbiIsImZyYW1lU3BlZWQiLCJhZGQiLCJtdWx0aXBseVNjYWxhciIsInN1YiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./app/components/three/FirstPersonController.tsx\n");

/***/ }),

/***/ "(ssr)/./app/components/three/InfiniteGrid.tsx":
/*!***********************************************!*\
  !*** ./app/components/three/InfiniteGrid.tsx ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   InfiniteGrid: () => (/* binding */ InfiniteGrid)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _react_three_drei__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @react-three/drei */ \"(ssr)/./node_modules/@react-three/drei/core/Grid.js\");\n\n\nfunction InfiniteGrid() {\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_react_three_drei__WEBPACK_IMPORTED_MODULE_1__.Grid, {\n        args: [\n            30,\n            30\n        ],\n        cellThickness: 1.2,\n        cellColor: \"#6f6f6f\",\n        sectionSize: 5,\n        sectionThickness: 1.8,\n        sectionColor: \"#000000\",\n        fadeDistance: 100,\n        fadeStrength: 0.8,\n        infiniteGrid: true,\n        followCamera: false\n    }, void 0, false, {\n        fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/components/three/InfiniteGrid.tsx\",\n        lineNumber: 5,\n        columnNumber: 5\n    }, this);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9hcHAvY29tcG9uZW50cy90aHJlZS9JbmZpbml0ZUdyaWQudHN4IiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQXdDO0FBRWpDLFNBQVNDO0lBQ2QscUJBQ0UsOERBQUNELG1EQUFJQTtRQUNIRSxNQUFNO1lBQUM7WUFBSTtTQUFHO1FBQ2RDLGVBQWU7UUFDZkMsV0FBVTtRQUNWQyxhQUFhO1FBQ2JDLGtCQUFrQjtRQUNsQkMsY0FBYTtRQUNiQyxjQUFjO1FBQ2RDLGNBQWM7UUFDZEMsWUFBWTtRQUNaQyxjQUFjOzs7Ozs7QUFHcEIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92aWJlLTNkLWNvZGUvLi9hcHAvY29tcG9uZW50cy90aHJlZS9JbmZpbml0ZUdyaWQudHN4P2NjYmMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgR3JpZCB9IGZyb20gJ0ByZWFjdC10aHJlZS9kcmVpJ1xuXG5leHBvcnQgZnVuY3Rpb24gSW5maW5pdGVHcmlkKCkge1xuICByZXR1cm4gKFxuICAgIDxHcmlkXG4gICAgICBhcmdzPXtbMzAsIDMwXX1cbiAgICAgIGNlbGxUaGlja25lc3M9ezEuMn1cbiAgICAgIGNlbGxDb2xvcj1cIiM2ZjZmNmZcIlxuICAgICAgc2VjdGlvblNpemU9ezV9XG4gICAgICBzZWN0aW9uVGhpY2tuZXNzPXsxLjh9XG4gICAgICBzZWN0aW9uQ29sb3I9XCIjMDAwMDAwXCJcbiAgICAgIGZhZGVEaXN0YW5jZT17MTAwfVxuICAgICAgZmFkZVN0cmVuZ3RoPXswLjh9XG4gICAgICBpbmZpbml0ZUdyaWRcbiAgICAgIGZvbGxvd0NhbWVyYT17ZmFsc2V9XG4gICAgLz5cbiAgKVxufVxuIl0sIm5hbWVzIjpbIkdyaWQiLCJJbmZpbml0ZUdyaWQiLCJhcmdzIiwiY2VsbFRoaWNrbmVzcyIsImNlbGxDb2xvciIsInNlY3Rpb25TaXplIiwic2VjdGlvblRoaWNrbmVzcyIsInNlY3Rpb25Db2xvciIsImZhZGVEaXN0YW5jZSIsImZhZGVTdHJlbmd0aCIsImluZmluaXRlR3JpZCIsImZvbGxvd0NhbWVyYSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./app/components/three/InfiniteGrid.tsx\n");

/***/ }),

/***/ "(ssr)/./app/components/three/MeshCreator.tsx":
/*!**********************************************!*\
  !*** ./app/components/three/MeshCreator.tsx ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   MeshCreator: () => (/* binding */ MeshCreator)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _react_three_fiber__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @react-three/fiber */ \"(ssr)/./node_modules/@react-three/fiber/dist/index-673ef987.esm.js\");\n/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! three */ \"(ssr)/./node_modules/three/build/three.core.js\");\n/* harmony import */ var _react_three_drei__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @react-three/drei */ \"(ssr)/./node_modules/@react-three/drei/core/useBVH.js\");\n/* harmony import */ var _store_appStore__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/store/appStore */ \"(ssr)/./app/store/appStore.ts\");\n/* harmony import */ var _components_three_CustomTransformControls__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/components/three/CustomTransformControls */ \"(ssr)/./app/components/three/CustomTransformControls.tsx\");\n/* harmony import */ var _components_three_ObjectHighlighter__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/components/three/ObjectHighlighter */ \"(ssr)/./app/components/three/ObjectHighlighter.tsx\");\n\n\n\n\n\n\n\n\nfunction MeshCreator() {\n    const { selectedObject, setSelectedObject, isDeleting } = (0,_store_appStore__WEBPACK_IMPORTED_MODULE_2__.useAppStore)();\n    const [selectedInstance, setSelectedInstance] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);\n    const { scene } = (0,_react_three_fiber__WEBPACK_IMPORTED_MODULE_5__.z)();\n    // Find the actual instance of the selected object in the scene\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        if (!selectedObject) {\n            setSelectedInstance(null);\n            return;\n        }\n        // Skip the effect during deletion operations\n        if (isDeleting) {\n            return;\n        }\n        // Skip the effect if we already have the right instance\n        if (selectedInstance && (selectedInstance.uuid === selectedObject.uuid || selectedInstance.userData?.id === selectedObject.userData?.id)) {\n            return;\n        }\n        // Try to find the object in the scene with the same ID\n        // Use both UUID and userData.id for matching\n        const selectedId = selectedObject.uuid;\n        const selectedUserDataId = selectedObject.userData?.id;\n        let foundObject = null;\n        console.log(`Looking for selected object: uuid=${selectedId}, userData.id=${selectedUserDataId}`);\n        // Try first by ID, which is more reliable\n        if (selectedUserDataId) {\n            scene.traverse((object)=>{\n                if (object.userData?.id === selectedUserDataId) {\n                    foundObject = object;\n                }\n            });\n        }\n        // If not found by ID, try by UUID\n        if (!foundObject) {\n            scene.traverse((object)=>{\n                if (object.uuid === selectedId) {\n                    foundObject = object;\n                }\n            });\n        }\n        // Update the selected instance if found\n        if (foundObject) {\n            const objectName = foundObject.userData?.name || \"unnamed\";\n            console.log(`Found object in scene: ${objectName}`);\n            // Check if the object is actually still in the scene hierarchy\n            let isInScene = false;\n            let currentParent = foundObject.parent;\n            while(currentParent && !isInScene){\n                if (currentParent === scene) {\n                    isInScene = true;\n                }\n                currentParent = currentParent.parent;\n            }\n            if (!isInScene) {\n                console.warn(`Object ${objectName} (${selectedId}) was found but not in scene hierarchy`);\n                // Clear the selection since object is not actually in scene\n                setSelectedObject(null);\n                setSelectedInstance(null);\n                return;\n            }\n            // Ensure the object has the doubleClickHandler set\n            // Cast to THREE.Object3D to fix TypeScript error\n            const objWithProps = foundObject;\n            if (!objWithProps.userData.doubleClickHandler) {\n                objWithProps.userData.doubleClickHandler = ()=>{\n                    const { transformMode, setTransformMode } = _store_appStore__WEBPACK_IMPORTED_MODULE_2__.useAppStore.getState();\n                    const modes = [\n                        \"translate\",\n                        \"rotate\",\n                        \"scale\"\n                    ];\n                    const currentIndex = modes.indexOf(transformMode || \"translate\");\n                    const nextIndex = (currentIndex + 1) % modes.length;\n                    const nextMode = modes[nextIndex];\n                    setTransformMode(nextMode);\n                };\n            }\n            setSelectedInstance(foundObject);\n        } else {\n            console.warn(`Object not found in scene, clearing selection`);\n            // Clear the selection if not found\n            setSelectedObject(null);\n            setSelectedInstance(null);\n        }\n    }, [\n        selectedObject,\n        scene,\n        setSelectedObject,\n        isDeleting\n    ]);\n    const handleObjectSelected = (object)=>{\n        console.log(\"Object selected/deselected:\", object);\n        // Skip selection changes during deletion\n        if (isDeleting) {\n            console.log(\"Skipping selection during deletion\");\n            return;\n        }\n        if (object === null) {\n            // Only update if we actually have a selection to clear\n            if (selectedObject !== null) {\n                setSelectedObject(null);\n            }\n            return;\n        }\n        // Check if the shift key is pressed - if so, we'll select one layer down from the object\n        // rather than traversing up to find a parent group\n        const isShiftKeyPressed = window.__shiftKeyPressed === true;\n        if (isShiftKeyPressed) {\n            // When Shift key is pressed, we're looking for children one level down from the object\n            // This is handled in ObjectHighlighter, which will pass us the appropriate child\n            console.log(\"Shift key pressed, selecting:\", object.userData?.name || \"unnamed\");\n            if (object.userData?.isUserCreated || object.userData?.isSerializedFromCode) {\n                // If clicking the already selected object, deselect it\n                const objectId = object.userData?.id || object.uuid;\n                const selectedObjectId = selectedObject?.userData?.id || selectedObject?.uuid;\n                if (selectedObject && objectId === selectedObjectId) {\n                    console.log(\"Deselecting object\");\n                    setSelectedObject(null);\n                    return;\n                }\n                // Only set if it's a different object\n                if (!selectedObject || objectId !== selectedObjectId) {\n                    setSelectedObject(object);\n                }\n            }\n            return;\n        }\n        // Normal behavior - look for a parent group first\n        let targetObject = object;\n        let found = false;\n        // Traverse up the parent chain to find a user-created group\n        let currentObj = object;\n        while(currentObj.parent && !(currentObj.parent instanceof three__WEBPACK_IMPORTED_MODULE_6__.Scene)){\n            if ((currentObj.parent.userData?.isUserCreated || currentObj.parent.userData?.isSerializedFromCode) && currentObj.parent instanceof three__WEBPACK_IMPORTED_MODULE_6__.Group) {\n                targetObject = currentObj.parent;\n                found = true;\n                console.log(`Using parent group for selection: ${targetObject.userData?.name || \"unnamed\"}`);\n                break;\n            }\n            currentObj = currentObj.parent;\n        }\n        // If we didn't find a suitable parent group, check if the clicked object is valid\n        if (!found) {\n            if (!(targetObject.userData?.isUserCreated || targetObject.userData?.isSerializedFromCode)) {\n                console.warn(\"Only user-created objects can be transformed\");\n                return;\n            }\n        }\n        // If clicking the already selected object, deselect it\n        const objectId = targetObject.userData?.id || targetObject.uuid;\n        const selectedObjectId = selectedObject?.userData?.id || selectedObject?.uuid;\n        if (selectedObject && objectId === selectedObjectId) {\n            console.log(\"Clicked already selected object, deselecting\");\n            setSelectedObject(null);\n            return;\n        }\n        console.log(`Selecting object: id=${objectId}, type=${targetObject instanceof three__WEBPACK_IMPORTED_MODULE_6__.Group ? \"Group\" : \"Mesh\"}`);\n        // Only set if it's different to avoid unnecessary updates\n        if (!selectedObject || objectId !== selectedObjectId) {\n            setSelectedObject(targetObject);\n        }\n    };\n    const handleDeselect = ()=>{\n        setSelectedObject(null);\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_react_three_drei__WEBPACK_IMPORTED_MODULE_7__.Bvh, {}, void 0, false, {\n                fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/components/three/MeshCreator.tsx\",\n                lineNumber: 205,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_three_ObjectHighlighter__WEBPACK_IMPORTED_MODULE_4__.ObjectHighlighter, {\n                onObjectSelected: handleObjectSelected\n            }, void 0, false, {\n                fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/components/three/MeshCreator.tsx\",\n                lineNumber: 209,\n                columnNumber: 7\n            }, this),\n            selectedInstance && (selectedInstance.userData?.isUserCreated || selectedInstance.userData?.isSerializedFromCode) && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_three_CustomTransformControls__WEBPACK_IMPORTED_MODULE_3__.CustomTransformControls, {\n                object: selectedInstance,\n                onDeselect: handleDeselect\n            }, void 0, false, {\n                fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/components/three/MeshCreator.tsx\",\n                lineNumber: 215,\n                columnNumber: 9\n            }, this)\n        ]\n    }, void 0, true);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9hcHAvY29tcG9uZW50cy90aHJlZS9NZXNoQ3JlYXRvci50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQW1EO0FBQ047QUFDZjtBQUNTO0FBQ087QUFDc0M7QUFDWjtBQUVqRSxTQUFTUTtJQUNkLE1BQU0sRUFBRUMsY0FBYyxFQUFFQyxpQkFBaUIsRUFBRUMsVUFBVSxFQUFFLEdBQUdOLDREQUFXQTtJQUNyRSxNQUFNLENBQUNPLGtCQUFrQkMsb0JBQW9CLEdBQUdiLCtDQUFRQSxDQUF3QjtJQUNoRixNQUFNLEVBQUVjLEtBQUssRUFBRSxHQUFHWixxREFBUUE7SUFFMUIsK0RBQStEO0lBQy9ERCxnREFBU0EsQ0FBQztRQUNSLElBQUksQ0FBQ1EsZ0JBQWdCO1lBQ25CSSxvQkFBb0I7WUFDcEI7UUFDRjtRQUVBLDZDQUE2QztRQUM3QyxJQUFJRixZQUFZO1lBQ2Q7UUFDRjtRQUVBLHdEQUF3RDtRQUN4RCxJQUFJQyxvQkFDQ0EsQ0FBQUEsaUJBQWlCRyxJQUFJLEtBQUtOLGVBQWVNLElBQUksSUFDN0NILGlCQUFpQkksUUFBUSxFQUFFQyxPQUFPUixlQUFlTyxRQUFRLEVBQUVDLEVBQUMsR0FBSTtZQUNuRTtRQUNGO1FBRUEsdURBQXVEO1FBQ3ZELDZDQUE2QztRQUM3QyxNQUFNQyxhQUFhVCxlQUFlTSxJQUFJO1FBQ3RDLE1BQU1JLHFCQUFxQlYsZUFBZU8sUUFBUSxFQUFFQztRQUNwRCxJQUFJRyxjQUFxQztRQUV6Q0MsUUFBUUMsR0FBRyxDQUFDLENBQUMsa0NBQWtDLEVBQUVKLFdBQVcsY0FBYyxFQUFFQyxtQkFBbUIsQ0FBQztRQUVoRywwQ0FBMEM7UUFDMUMsSUFBSUEsb0JBQW9CO1lBQ3RCTCxNQUFNUyxRQUFRLENBQUNDLENBQUFBO2dCQUNiLElBQUlBLE9BQU9SLFFBQVEsRUFBRUMsT0FBT0Usb0JBQW9CO29CQUM5Q0MsY0FBY0k7Z0JBQ2hCO1lBQ0Y7UUFDRjtRQUVBLGtDQUFrQztRQUNsQyxJQUFJLENBQUNKLGFBQWE7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O1FBQzlHLDBEQUEwRDtRQUMxRCxJQUFJLENBQUNNLGtCQUFrQnVDLGFBQWFDLGtCQUFrQjtZQUNwRHZDLGtCQUFrQndDO1FBQ3BCO0lBQ0Y7SUFFQSxNQUFNSyxpQkFBaUI7UUFDckI3QyxrQkFBa0I7SUFDcEI7SUFFQSxxQkFDRTs7MEJBQ0UsOERBQUNOLGtEQUFHQTs7Ozs7MEJBSUosOERBQUNHLGtGQUFpQkE7Z0JBQ2hCaUQsa0JBQWtCZDs7Ozs7O1lBR25COUIsb0JBQ0VBLENBQUFBLGlCQUFpQkksUUFBUSxFQUFFOEIsaUJBQWlCbEMsaUJBQWlCSSxRQUFRLEVBQUUrQixvQkFBbUIsbUJBQzNGLDhEQUFDekMsOEZBQXVCQTtnQkFDdEJrQixRQUFRWjtnQkFDUjZDLFlBQVlGOzs7Ozs7OztBQUt0QiIsInNvdXJjZXMiOlsid2VicGFjazovL3ZpYmUtM2QtY29kZS8uL2FwcC9jb21wb25lbnRzL3RocmVlL01lc2hDcmVhdG9yLnRzeD82ODg2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHVzZVN0YXRlLCB1c2VSZWYsIHVzZUVmZmVjdCB9IGZyb20gJ3JlYWN0J1xuaW1wb3J0IHsgdXNlVGhyZWUgfSBmcm9tICdAcmVhY3QtdGhyZWUvZmliZXInXG5pbXBvcnQgKiBhcyBUSFJFRSBmcm9tICd0aHJlZSdcbmltcG9ydCB7IEJ2aCB9IGZyb20gJ0ByZWFjdC10aHJlZS9kcmVpJ1xuaW1wb3J0IHsgdXNlQXBwU3RvcmUgfSBmcm9tICdAL3N0b3JlL2FwcFN0b3JlJ1xuaW1wb3J0IHsgQ3VzdG9tVHJhbnNmb3JtQ29udHJvbHMgfSBmcm9tICdAL2NvbXBvbmVudHMvdGhyZWUvQ3VzdG9tVHJhbnNmb3JtQ29udHJvbHMnXG5pbXBvcnQgeyBPYmplY3RIaWdobGlnaHRlciB9IGZyb20gJ0AvY29tcG9uZW50cy90aHJlZS9PYmplY3RIaWdobGlnaHRlcidcblxuZXhwb3J0IGZ1bmN0aW9uIE1lc2hDcmVhdG9yKCkge1xuICBjb25zdCB7IHNlbGVjdGVkT2JqZWN0LCBzZXRTZWxlY3RlZE9iamVjdCwgaXNEZWxldGluZyB9ID0gdXNlQXBwU3RvcmUoKTtcbiAgY29uc3QgW3NlbGVjdGVkSW5zdGFuY2UsIHNldFNlbGVjdGVkSW5zdGFuY2VdID0gdXNlU3RhdGU8VEhSRUUuT2JqZWN0M0QgfCBudWxsPihudWxsKTtcbiAgY29uc3QgeyBzY2VuZSB9ID0gdXNlVGhyZWUoKTtcbiAgXG4gIC8vIEZpbmQgdGhlIGFjdHVhbCBpbnN0YW5jZSBvZiB0aGUgc2VsZWN0ZWQgb2JqZWN0IGluIHRoZSBzY2VuZVxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmICghc2VsZWN0ZWRPYmplY3QpIHtcbiAgICAgIHNldFNlbGVjdGVkSW5zdGFuY2UobnVsbCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIFxuICAgIC8vIFNraXAgdGhlIGVmZmVjdCBkdXJpbmcgZGVsZXRpb24gb3BlcmF0aW9uc1xuICAgIGlmIChpc0RlbGV0aW5nKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIFxuICAgIC8vIFNraXAgdGhlIGVmZmVjdCBpZiB3ZSBhbHJlYWR5IGhhdmUgdGhlIHJpZ2h0IGluc3RhbmNlXG4gICAgaWYgKHNlbGVjdGVkSW5zdGFuY2UgJiYgXG4gICAgICAgIChzZWxlY3RlZEluc3RhbmNlLnV1aWQgPT09IHNlbGVjdGVkT2JqZWN0LnV1aWQgfHwgXG4gICAgICAgICBzZWxlY3RlZEluc3RhbmNlLnVzZXJEYXRhPy5pZCA9PT0gc2VsZWN0ZWRPYmplY3QudXNlckRhdGE/LmlkKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBcbiAgICAvLyBUcnkgdG8gZmluZCB0aGUgb2JqZWN0IGluIHRoZSBzY2VuZSB3aXRoIHRoZSBzYW1lIElEXG4gICAgLy8gVXNlIGJvdGggVVVJRCBhbmQgdXNlckRhdGEuaWQgZm9yIG1hdGNoaW5nXG4gICAgY29uc3Qgc2VsZWN0ZWRJZCA9IHNlbGVjdGVkT2JqZWN0LnV1aWQ7XG4gICAgY29uc3Qgc2VsZWN0ZWRVc2VyRGF0YUlkID0gc2VsZWN0ZWRPYmplY3QudXNlckRhdGE/LmlkO1xuICAgIGxldCBmb3VuZE9iamVjdDogVEhSRUUuT2JqZWN0M0QgfCBudWxsID0gbnVsbDtcbiAgICBcbiAgICBjb25zb2xlLmxvZyhgTG9va2luZyBmb3Igc2VsZWN0ZWQgb2JqZWN0OiB1dWlkPSR7c2VsZWN0ZWRJZH0sIHVzZXJEYXRhLmlkPSR7c2VsZWN0ZWRVc2VyRGF0YUlkfWApO1xuICAgIFxuICAgIC8vIFRyeSBmaXJzdCBieSBJRCwgd2hpY2ggaXMgbW9yZSByZWxpYWJsZVxuICAgIGlmIChzZWxlY3RlZFVzZXJEYXRhSWQpIHtcbiAgICAgIHNjZW5lLnRyYXZlcnNlKG9iamVjdCA9PiB7XG4gICAgICAgIGlmIChvYmplY3QudXNlckRhdGE/LmlkID09PSBzZWxlY3RlZFVzZXJEYXRhSWQpIHtcbiAgICAgICAgICBmb3VuZE9iamVjdCA9IG9iamVjdDtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICAgIFxuICAgIC8vIElmIG5vdCBmb3VuZCBieSBJRCwgdHJ5IGJ5IFVVSURcbiAgICBpZiAoIWZvdW5kT2JqZWN0KSB7XG4gICAgICBzY2VuZS50cmF2ZXJzZShvYmplY3QgPT4ge1xuICAgICAgICBpZiAob2JqZWN0LnV1aWQgPT09IHNlbGVjdGVkSWQpIHtcbiAgICAgICAgICBmb3VuZE9iamVjdCA9IG9iamVjdDtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICAgIFxuICAgIC8vIFVwZGF0ZSB0aGUgc2VsZWN0ZWQgaW5zdGFuY2UgaWYgZm91bmRcbiAgICBpZiAoZm91bmRPYmplY3QpIHtcbiAgICAgIGNvbnN0IG9iamVjdE5hbWUgPSAoZm91bmRPYmplY3QgYXMgVEhSRUUuT2JqZWN0M0QpLnVzZXJEYXRhPy5uYW1lIHx8ICd1bm5hbWVkJztcbiAgICAgIGNvbnNvbGUubG9nKGBGb3VuZCBvYmplY3QgaW4gc2NlbmU6ICR7b2JqZWN0TmFtZX1gKTtcbiAgICAgIFxuICAgICAgLy8gQ2hlY2sgaWYgdGhlIG9iamVjdCBpcyBhY3R1YWxseSBzdGlsbCBpbiB0aGUgc2NlbmUgaGllcmFyY2h5XG4gICAgICBsZXQgaXNJblNjZW5lID0gZmFsc2U7XG4gICAgICBsZXQgY3VycmVudFBhcmVudDogVEhSRUUuT2JqZWN0M0QgfCBudWxsID0gKGZvdW5kT2JqZWN0IGFzIFRIUkVFLk9iamVjdDNEKS5wYXJlbnQ7XG4gICAgICB3aGlsZSAoY3VycmVudFBhcmVudCAmJiAhaXNJblNjZW5lKSB7XG4gICAgICAgIGlmIChjdXJyZW50UGFyZW50ID09PSBzY2VuZSkge1xuICAgICAgICAgIGlzSW5TY2VuZSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgY3VycmVudFBhcmVudCA9IGN1cnJlbnRQYXJlbnQucGFyZW50O1xuICAgICAgfVxuICAgICAgXG4gICAgICBpZiAoIWlzSW5TY2VuZSkge1xuICAgICAgICBjb25zb2xlLndhcm4oYE9iamVjdCAke29iamVjdE5hbWV9ICgke3NlbGVjdGVkSWR9KSB3YXMgZm91bmQgYnV0IG5vdCBpbiBzY2VuZSBoaWVyYXJjaHlgKTtcbiAgICAgICAgLy8gQ2xlYXIgdGhlIHNlbGVjdGlvbiBzaW5jZSBvYmplY3QgaXMgbm90IGFjdHVhbGx5IGluIHNjZW5lXG4gICAgICAgIHNldFNlbGVjdGVkT2JqZWN0KG51bGwpO1xuICAgICAgICBzZXRTZWxlY3RlZEluc3RhbmNlKG51bGwpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIEVuc3VyZSB0aGUgb2JqZWN0IGhhcyB0aGUgZG91YmxlQ2xpY2tIYW5kbGVyIHNldFxuICAgICAgLy8gQ2FzdCB0byBUSFJFRS5PYmplY3QzRCB0byBmaXggVHlwZVNjcmlwdCBlcnJvclxuICAgICAgY29uc3Qgb2JqV2l0aFByb3BzID0gZm91bmRPYmplY3QgYXMgVEhSRUUuT2JqZWN0M0QgJiB7XG4gICAgICAgIHVzZXJEYXRhOiB7IFxuICAgICAgICAgIGRvdWJsZUNsaWNrSGFuZGxlcj86ICgpID0+IHZvaWQsXG4gICAgICAgICAgW2tleTogc3RyaW5nXTogYW55XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICBcbiAgICAgIGlmICghb2JqV2l0aFByb3BzLnVzZXJEYXRhLmRvdWJsZUNsaWNrSGFuZGxlcikge1xuICAgICAgICBvYmpXaXRoUHJvcHMudXNlckRhdGEuZG91YmxlQ2xpY2tIYW5kbGVyID0gKCkgPT4ge1xuICAgICAgICAgIGNvbnN0IHsgdHJhbnNmb3JtTW9kZSwgc2V0VHJhbnNmb3JtTW9kZSB9ID0gdXNlQXBwU3RvcmUuZ2V0U3RhdGUoKTtcbiAgICAgICAgICBjb25zdCBtb2RlcyA9IFsndHJhbnNsYXRlJywgJ3JvdGF0ZScsICdzY2FsZSddO1xuICAgICAgICAgIGNvbnN0IGN1cnJlbnRJbmRleCA9IG1vZGVzLmluZGV4T2YodHJhbnNmb3JtTW9kZSB8fCAndHJhbnNsYXRlJyk7XG4gICAgICAgICAgY29uc3QgbmV4dEluZGV4ID0gKGN1cnJlbnRJbmRleCArIDEpICUgbW9kZXMubGVuZ3RoO1xuICAgICAgICAgIGNvbnN0IG5leHRNb2RlID0gbW9kZXNbbmV4dEluZGV4XSBhcyAndHJhbnNsYXRlJyB8ICdyb3RhdGUnIHwgJ3NjYWxlJztcbiAgICAgICAgICBzZXRUcmFuc2Zvcm1Nb2RlKG5leHRNb2RlKTtcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgc2V0U2VsZWN0ZWRJbnN0YW5jZShmb3VuZE9iamVjdCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUud2FybihgT2JqZWN0IG5vdCBmb3VuZCBpbiBzY2VuZSwgY2xlYXJpbmcgc2VsZWN0aW9uYCk7XG4gICAgICAvLyBDbGVhciB0aGUgc2VsZWN0aW9uIGlmIG5vdCBmb3VuZFxuICAgICAgc2V0U2VsZWN0ZWRPYmplY3QobnVsbCk7XG4gICAgICBzZXRTZWxlY3RlZEluc3RhbmNlKG51bGwpO1xuICAgIH1cbiAgfSwgW3NlbGVjdGVkT2JqZWN0LCBzY2VuZSwgc2V0U2VsZWN0ZWRPYmplY3QsIGlzRGVsZXRpbmddKTtcbiAgXG4gIGNvbnN0IGhhbmRsZU9iamVjdFNlbGVjdGVkID0gKG9iamVjdDogVEhSRUUuT2JqZWN0M0QgfCBudWxsKSA9PiB7XG4gICAgY29uc29sZS5sb2coXCJPYmplY3Qgc2VsZWN0ZWQvZGVzZWxlY3RlZDpcIiwgb2JqZWN0KTtcbiAgICBcbiAgICAvLyBTa2lwIHNlbGVjdGlvbiBjaGFuZ2VzIGR1cmluZyBkZWxldGlvblxuICAgIGlmIChpc0RlbGV0aW5nKSB7XG4gICAgICBjb25zb2xlLmxvZyhcIlNraXBwaW5nIHNlbGVjdGlvbiBkdXJpbmcgZGVsZXRpb25cIik7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIFxuICAgIGlmIChvYmplY3QgPT09IG51bGwpIHtcbiAgICAgIC8vIE9ubHkgdXBkYXRlIGlmIHdlIGFjdHVhbGx5IGhhdmUgYSBzZWxlY3Rpb24gdG8gY2xlYXJcbiAgICAgIGlmIChzZWxlY3RlZE9iamVjdCAhPT0gbnVsbCkge1xuICAgICAgICBzZXRTZWxlY3RlZE9iamVjdChudWxsKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgXG4gICAgLy8gQ2hlY2sgaWYgdGhlIHNoaWZ0IGtleSBpcyBwcmVzc2VkIC0gaWYgc28sIHdlJ2xsIHNlbGVjdCBvbmUgbGF5ZXIgZG93biBmcm9tIHRoZSBvYmplY3RcbiAgICAvLyByYXRoZXIgdGhhbiB0cmF2ZXJzaW5nIHVwIHRvIGZpbmQgYSBwYXJlbnQgZ3JvdXBcbiAgICBjb25zdCBpc1NoaWZ0S2V5UHJlc3NlZCA9IHdpbmRvdy5fX3NoaWZ0S2V5UHJlc3NlZCA9PT0gdHJ1ZTtcbiAgICBcbiAgICBpZiAoaXNTaGlmdEtleVByZXNzZWQpIHtcbiAgICAgIC8vIFdoZW4gU2hpZnQga2V5IGlzIHByZXNzZWQsIHdlJ3JlIGxvb2tpbmcgZm9yIGNoaWxkcmVuIG9uZSBsZXZlbCBkb3duIGZyb20gdGhlIG9iamVjdFxuICAgICAgLy8gVGhpcyBpcyBoYW5kbGVkIGluIE9iamVjdEhpZ2hsaWdodGVyLCB3aGljaCB3aWxsIHBhc3MgdXMgdGhlIGFwcHJvcHJpYXRlIGNoaWxkXG4gICAgICBcbiAgICAgIGNvbnNvbGUubG9nKFwiU2hpZnQga2V5IHByZXNzZWQsIHNlbGVjdGluZzpcIiwgb2JqZWN0LnVzZXJEYXRhPy5uYW1lIHx8ICd1bm5hbWVkJyk7XG4gICAgICBcbiAgICAgIGlmIChvYmplY3QudXNlckRhdGE/LmlzVXNlckNyZWF0ZWQgfHwgb2JqZWN0LnVzZXJEYXRhPy5pc1NlcmlhbGl6ZWRGcm9tQ29kZSkge1xuICAgICAgICAvLyBJZiBjbGlja2luZyB0aGUgYWxyZWFkeSBzZWxlY3RlZCBvYmplY3QsIGRlc2VsZWN0IGl0XG4gICAgICAgIGNvbnN0IG9iamVjdElkID0gb2JqZWN0LnVzZXJEYXRhPy5pZCB8fCBvYmplY3QudXVpZDtcbiAgICAgICAgY29uc3Qgc2VsZWN0ZWRPYmplY3RJZCA9IHNlbGVjdGVkT2JqZWN0Py51c2VyRGF0YT8uaWQgfHwgc2VsZWN0ZWRPYmplY3Q/LnV1aWQ7XG4gICAgICAgIFxuICAgICAgICBpZiAoc2VsZWN0ZWRPYmplY3QgJiYgb2JqZWN0SWQgPT09IHNlbGVjdGVkT2JqZWN0SWQpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcIkRlc2VsZWN0aW5nIG9iamVjdFwiKTtcbiAgICAgICAgICBzZXRTZWxlY3RlZE9iamVjdChudWxsKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIE9ubHkgc2V0IGlmIGl0J3MgYSBkaWZmZXJlbnQgb2JqZWN0XG4gICAgICAgIGlmICghc2VsZWN0ZWRPYmplY3QgfHwgb2JqZWN0SWQgIT09IHNlbGVjdGVkT2JqZWN0SWQpIHtcbiAgICAgICAgICBzZXRTZWxlY3RlZE9iamVjdChvYmplY3QpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIFxuICAgIC8vIE5vcm1hbCBiZWhhdmlvciAtIGxvb2sgZm9yIGEgcGFyZW50IGdyb3VwIGZpcnN0XG4gICAgbGV0IHRhcmdldE9iamVjdCA9IG9iamVjdDtcbiAgICBsZXQgZm91bmQgPSBmYWxzZTtcbiAgICBcbiAgICAvLyBUcmF2ZXJzZSB1cCB0aGUgcGFyZW50IGNoYWluIHRvIGZpbmQgYSB1c2VyLWNyZWF0ZWQgZ3JvdXBcbiAgICBsZXQgY3VycmVudE9iaiA9IG9iamVjdDtcbiAgICB3aGlsZSAoY3VycmVudE9iai5wYXJlbnQgJiYgIShjdXJyZW50T2JqLnBhcmVudCBpbnN0YW5jZW9mIFRIUkVFLlNjZW5lKSkge1xuICAgICAgaWYgKChjdXJyZW50T2JqLnBhcmVudC51c2VyRGF0YT8uaXNVc2VyQ3JlYXRlZCB8fCBjdXJyZW50T2JqLnBhcmVudC51c2VyRGF0YT8uaXNTZXJpYWxpemVkRnJvbUNvZGUpICYmXG4gICAgICAgICAgY3VycmVudE9iai5wYXJlbnQgaW5zdGFuY2VvZiBUSFJFRS5Hcm91cCkge1xuICAgICAgICB0YXJnZXRPYmplY3QgPSBjdXJyZW50T2JqLnBhcmVudDtcbiAgICAgICAgZm91bmQgPSB0cnVlO1xuICAgICAgICBjb25zb2xlLmxvZyhgVXNpbmcgcGFyZW50IGdyb3VwIGZvciBzZWxlY3Rpb246ICR7dGFyZ2V0T2JqZWN0LnVzZXJEYXRhPy5uYW1lIHx8ICd1bm5hbWVkJ31gKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBjdXJyZW50T2JqID0gY3VycmVudE9iai5wYXJlbnQ7XG4gICAgfVxuICAgIFxuICAgIC8vIElmIHdlIGRpZG4ndCBmaW5kIGEgc3VpdGFibGUgcGFyZW50IGdyb3VwLCBjaGVjayBpZiB0aGUgY2xpY2tlZCBvYmplY3QgaXMgdmFsaWRcbiAgICBpZiAoIWZvdW5kKSB7XG4gICAgICBpZiAoISh0YXJnZXRPYmplY3QudXNlckRhdGE/LmlzVXNlckNyZWF0ZWQgfHwgdGFyZ2V0T2JqZWN0LnVzZXJEYXRhPy5pc1NlcmlhbGl6ZWRGcm9tQ29kZSkpIHtcbiAgICAgICAgY29uc29sZS53YXJuKFwiT25seSB1c2VyLWNyZWF0ZWQgb2JqZWN0cyBjYW4gYmUgdHJhbnNmb3JtZWRcIik7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLy8gSWYgY2xpY2tpbmcgdGhlIGFscmVhZHkgc2VsZWN0ZWQgb2JqZWN0LCBkZXNlbGVjdCBpdFxuICAgIGNvbnN0IG9iamVjdElkID0gdGFyZ2V0T2JqZWN0LnVzZXJEYXRhPy5pZCB8fCB0YXJnZXRPYmplY3QudXVpZDtcbiAgICBjb25zdCBzZWxlY3RlZE9iamVjdElkID0gc2VsZWN0ZWRPYmplY3Q/LnVzZXJEYXRhPy5pZCB8fCBzZWxlY3RlZE9iamVjdD8udXVpZDtcbiAgICBcbiAgICBpZiAoc2VsZWN0ZWRPYmplY3QgJiYgb2JqZWN0SWQgPT09IHNlbGVjdGVkT2JqZWN0SWQpIHtcbiAgICAgIGNvbnNvbGUubG9nKFwiQ2xpY2tlZCBhbHJlYWR5IHNlbGVjdGVkIG9iamVjdCwgZGVzZWxlY3RpbmdcIik7XG4gICAgICBzZXRTZWxlY3RlZE9iamVjdChudWxsKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgXG4gICAgY29uc29sZS5sb2coYFNlbGVjdGluZyBvYmplY3Q6IGlkPSR7b2JqZWN0SWR9LCB0eXBlPSR7dGFyZ2V0T2JqZWN0IGluc3RhbmNlb2YgVEhSRUUuR3JvdXAgPyAnR3JvdXAnIDogJ01lc2gnfWApO1xuICAgIC8vIE9ubHkgc2V0IGlmIGl0J3MgZGlmZmVyZW50IHRvIGF2b2lkIHVubmVjZXNzYXJ5IHVwZGF0ZXNcbiAgICBpZiAoIXNlbGVjdGVkT2JqZWN0IHx8IG9iamVjdElkICE9PSBzZWxlY3RlZE9iamVjdElkKSB7XG4gICAgICBzZXRTZWxlY3RlZE9iamVjdCh0YXJnZXRPYmplY3QpO1xuICAgIH1cbiAgfVxuICBcbiAgY29uc3QgaGFuZGxlRGVzZWxlY3QgPSAoKSA9PiB7XG4gICAgc2V0U2VsZWN0ZWRPYmplY3QobnVsbClcbiAgfVxuICBcbiAgcmV0dXJuIChcbiAgICA8PlxuICAgICAgPEJ2aD5cbiAgICAgICAgey8qIFRoZSBhY3R1YWwgb2JqZWN0cyBhcmUgbm93IHJlbmRlcmVkIGJ5IHRoZSBTdG9yZWRPYmplY3RzIGNvbXBvbmVudCAqL31cbiAgICAgIDwvQnZoPlxuICAgICAgXG4gICAgICA8T2JqZWN0SGlnaGxpZ2h0ZXIgXG4gICAgICAgIG9uT2JqZWN0U2VsZWN0ZWQ9e2hhbmRsZU9iamVjdFNlbGVjdGVkfVxuICAgICAgLz5cbiAgICAgIFxuICAgICAge3NlbGVjdGVkSW5zdGFuY2UgJiYgXG4gICAgICAgIChzZWxlY3RlZEluc3RhbmNlLnVzZXJEYXRhPy5pc1VzZXJDcmVhdGVkIHx8IHNlbGVjdGVkSW5zdGFuY2UudXNlckRhdGE/LmlzU2VyaWFsaXplZEZyb21Db2RlKSAmJiAoXG4gICAgICAgIDxDdXN0b21UcmFuc2Zvcm1Db250cm9scyBcbiAgICAgICAgICBvYmplY3Q9e3NlbGVjdGVkSW5zdGFuY2V9XG4gICAgICAgICAgb25EZXNlbGVjdD17aGFuZGxlRGVzZWxlY3R9XG4gICAgICAgIC8+XG4gICAgICApfVxuICAgIDwvPlxuICApXG59ICJdLCJuYW1lcyI6WyJ1c2VTdGF0ZSIsInVzZUVmZmVjdCIsInVzZVRocmVlIiwiVEhSRUUiLCJCdmgiLCJ1c2VBcHBTdG9yZSIsIkN1c3RvbVRyYW5zZm9ybUNvbnRyb2xzIiwiT2JqZWN0SGlnaGxpZ2h0ZXIiLCJNZXNoQ3JlYXRvciIsInNlbGVjdGVkT2JqZWN0Iiwic2V0U2VsZWN0ZWRPYmplY3QiLCJpc0RlbGV0aW5nIiwic2VsZWN0ZWRJbnN0YW5jZSIsInNldFNlbGVjdGVkSW5zdGFuY2UiLCJzY2VuZSIsInV1aWQiLCJ1c2VyRGF0YSIsImlkIiwic2VsZWN0ZWRJZCIsInNlbGVjdGVkVXNlckRhdGFJZCIsImZvdW5kT2JqZWN0IiwiY29uc29sZSIsImxvZyIsInRyYXZlcnNlIiwib2JqZWN0Iiwib2JqZWN0TmFtZSIsIm5hbWUiLCJpc0luU2NlbmUiLCJjdXJyZW50UGFyZW50IiwicGFyZW50Iiwid2FybiIsIm9ialdpdGhQcm9wcyIsImRvdWJsZUNsaWNrSGFuZGxlciIsInRyYW5zZm9ybU1vZGUiLCJzZXRUcmFuc2Zvcm1Nb2RlIiwiZ2V0U3RhdGUiLCJtb2RlcyIsImN1cnJlbnRJbmRleCIsImluZGV4T2YiLCJuZXh0SW5kZXgiLCJsZW5ndGgiLCJuZXh0TW9kZSIsImhhbmRsZU9iamVjdFNlbGVjdGVkIiwiaXNTaGlmdEtleVByZXNzZWQiLCJ3aW5kb3ciLCJfX3NoaWZ0S2V5UHJlc3NlZCIsImlzVXNlckNyZWF0ZWQiLCJpc1NlcmlhbGl6ZWRGcm9tQ29kZSIsIm9iamVjdElkIiwic2VsZWN0ZWRPYmplY3RJZCIsInRhcmdldE9iamVjdCIsImZvdW5kIiwiY3VycmVudE9iaiIsIlNjZW5lIiwiR3JvdXAiLCJoYW5kbGVEZXNlbGVjdCIsIm9uT2JqZWN0U2VsZWN0ZWQiLCJvbkRlc2VsZWN0Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./app/components/three/MeshCreator.tsx\n");

/***/ }),

/***/ "(ssr)/./app/components/three/ObjectHighlighter.tsx":
/*!****************************************************!*\
  !*** ./app/components/three/ObjectHighlighter.tsx ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   ObjectHighlighter: () => (/* binding */ ObjectHighlighter)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _react_three_fiber__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @react-three/fiber */ \"(ssr)/./node_modules/@react-three/fiber/dist/index-673ef987.esm.js\");\n/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! three */ \"(ssr)/./node_modules/three/build/three.core.js\");\n/* harmony import */ var _store_appStore__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/store/appStore */ \"(ssr)/./app/store/appStore.ts\");\n\n\n\n\nfunction ObjectHighlighter({ onObjectSelected, excludeObjects = [] }) {\n    const { scene, gl, camera } = (0,_react_three_fiber__WEBPACK_IMPORTED_MODULE_2__.z)();\n    const [hoveredObject, setHoveredObject] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n    const raycaster = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(new three__WEBPACK_IMPORTED_MODULE_3__.Raycaster());\n    const mouse = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(new three__WEBPACK_IMPORTED_MODULE_3__.Vector2(0, 0));\n    const isPointerLocked = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(false);\n    // Get UI focus state and selected object from store\n    const { isUIFocused, selectedObject, setIsDeleting } = (0,_store_appStore__WEBPACK_IMPORTED_MODULE_1__.useAppStore)();\n    // Get object store methods\n    const { removeObject } = (0,_store_appStore__WEBPACK_IMPORTED_MODULE_1__.useObjectStore)();\n    // Store original materials for selected objects\n    const originalMaterials = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(new Map());\n    // Store original materials for hovered objects\n    const hoveredMaterials = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(new Map());\n    // Apply tint to selected object\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        // Function to apply tint to a mesh\n        const applyTint = (object)=>{\n            if (object instanceof three__WEBPACK_IMPORTED_MODULE_3__.Mesh) {\n                // Store original material if not already stored\n                if (!originalMaterials.current.has(object)) {\n                    originalMaterials.current.set(object, object.material);\n                }\n                const material = object.material;\n                // If material is an array, clone and tint each material\n                if (Array.isArray(material)) {\n                    object.material = material.map((mat)=>{\n                        const clonedMat = mat.clone();\n                        // Add a slight blue tint to indicate selection\n                        if (\"color\" in clonedMat) {\n                            clonedMat.color.multiplyScalar(0.8).add(new three__WEBPACK_IMPORTED_MODULE_3__.Color(0, 0.2, 0.5));\n                        }\n                        return clonedMat;\n                    });\n                } else {\n                    // Clone material and add a blue tint\n                    const clonedMaterial = material.clone();\n                    if (\"color\" in clonedMaterial) {\n                        clonedMaterial.color.multiplyScalar(0.8).add(new three__WEBPACK_IMPORTED_MODULE_3__.Color(0, 0.2, 0.5));\n                    }\n                    object.material = clonedMaterial;\n                }\n            }\n            // Process children recursively\n            object.children.forEach((child)=>applyTint(child));\n        };\n        // Function to restore original materials\n        const restoreOriginalMaterial = (object)=>{\n            if (object instanceof three__WEBPACK_IMPORTED_MODULE_3__.Mesh) {\n                const originalMaterial = originalMaterials.current.get(object);\n                if (originalMaterial) {\n                    object.material = originalMaterial;\n                    originalMaterials.current.delete(object);\n                }\n            }\n            // Process children recursively\n            object.children.forEach((child)=>restoreOriginalMaterial(child));\n        };\n        // Apply tint to newly selected object, restore previous\n        if (selectedObject) {\n            applyTint(selectedObject);\n        }\n        // Restore materials for all stored objects that aren't the selected object\n        originalMaterials.current.forEach((_, obj)=>{\n            if (obj !== selectedObject) {\n                restoreOriginalMaterial(obj);\n            }\n        });\n        // Cleanup when component unmounts\n        return ()=>{\n            originalMaterials.current.forEach((_, obj)=>{\n                restoreOriginalMaterial(obj);\n            });\n        };\n    }, [\n        selectedObject\n    ]);\n    // Apply hover tint effect\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        // CHANGE 1: Don't show hover tint if any object is selected\n        if (!hoveredObject || selectedObject) {\n            // Clear any previous hover effects\n            hoveredMaterials.current.forEach((originalMaterial, obj)=>{\n                if (obj instanceof three__WEBPACK_IMPORTED_MODULE_3__.Mesh && !originalMaterials.current.has(obj)) {\n                    obj.material = originalMaterial;\n                    hoveredMaterials.current.delete(obj);\n                }\n            });\n            return;\n        }\n        // Apply hover tint to the hovered object\n        const applyHoverTint = (object)=>{\n            if (object instanceof three__WEBPACK_IMPORTED_MODULE_3__.Mesh && !originalMaterials.current.has(object)) {\n                // Store original material if not already stored\n                if (!hoveredMaterials.current.has(object)) {\n                    hoveredMaterials.current.set(object, object.material);\n                }\n                const material = object.material;\n                // If material is an array, clone and tint each material\n                if (Array.isArray(material)) {\n                    object.material = material.map((mat)=>{\n                        const clonedMat = mat.clone();\n                        // Add a slight yellow tint for hover\n                        if (\"color\" in clonedMat) {\n                            clonedMat.color.multiplyScalar(0.9).add(new three__WEBPACK_IMPORTED_MODULE_3__.Color(0.3, 0.3, 0));\n                        }\n                        return clonedMat;\n                    });\n                } else {\n                    // Clone material and add a yellow tint\n                    const clonedMaterial = material.clone();\n                    if (\"color\" in clonedMaterial) {\n                        clonedMaterial.color.multiplyScalar(0.9).add(new three__WEBPACK_IMPORTED_MODULE_3__.Color(0.3, 0.3, 0));\n                    }\n                    object.material = clonedMaterial;\n                }\n            }\n            // Process children recursively\n            object.children.forEach((child)=>applyHoverTint(child));\n        };\n        // Restore hover materials for objects that are no longer hovered\n        hoveredMaterials.current.forEach((originalMaterial, obj)=>{\n            if (obj !== hoveredObject && !originalMaterials.current.has(obj) && // Don't restore if it's the selected object\n            obj instanceof three__WEBPACK_IMPORTED_MODULE_3__.Mesh) {\n                obj.material = originalMaterial;\n                hoveredMaterials.current.delete(obj);\n            }\n        });\n        // Improved hover tinting for Shift key\n        const isShiftKeyPressed = window.__shiftKeyPressed === true;\n        let targetObject = hoveredObject;\n        // Handle hover tinting based on Shift key state\n        if (isShiftKeyPressed) {\n            // Only proceed if the hovered object actually has children\n            if (hoveredObject.children && hoveredObject.children.length > 0) {\n                // STRICT FILTER: Only consider DIRECT children that are user-created\n                const directChildren = hoveredObject.children.filter((child)=>(child.userData?.isUserCreated || child.userData?.isSerializedFromCode) && (child instanceof three__WEBPACK_IMPORTED_MODULE_3__.Group || child instanceof three__WEBPACK_IMPORTED_MODULE_3__.Mesh || child instanceof three__WEBPACK_IMPORTED_MODULE_3__.Object3D));\n                if (directChildren.length > 0) {\n                    // Use raycasting to determine which direct child to highlight\n                    const childRaycaster = new three__WEBPACK_IMPORTED_MODULE_3__.Raycaster();\n                    childRaycaster.setFromCamera(mouse.current, camera);\n                    // Only raycast against direct children of the hovered object\n                    const childIntersects = childRaycaster.intersectObjects(directChildren, true);\n                    if (childIntersects.length > 0) {\n                        // Find the first intersected object that's a direct child or a descendant of a direct child\n                        let intersectedDirectChild = null;\n                        for (const intersect of childIntersects){\n                            const hitObject = intersect.object;\n                            // Check if this is a direct child\n                            if (directChildren.includes(hitObject)) {\n                                intersectedDirectChild = hitObject;\n                                break;\n                            }\n                            // If not a direct child, find which direct child is an ancestor\n                            for (const directChild of directChildren){\n                                if (isDescendantOf(hitObject, directChild)) {\n                                    intersectedDirectChild = directChild;\n                                    break;\n                                }\n                            }\n                            if (intersectedDirectChild) break;\n                        }\n                        if (intersectedDirectChild) {\n                            // We found a direct child that was hit by the ray\n                            targetObject = intersectedDirectChild;\n                        } else {\n                            // Fallback: First try to find a Group among direct children\n                            const directGroupChild = directChildren.find((c)=>c instanceof three__WEBPACK_IMPORTED_MODULE_3__.Group);\n                            if (directGroupChild) {\n                                targetObject = directGroupChild;\n                            } else {\n                                // Otherwise just pick the first direct child\n                                targetObject = directChildren[0];\n                            }\n                        }\n                    } else {\n                        // Fallback if raycasting didn't hit anything\n                        const directGroupChild = directChildren.find((c)=>c instanceof three__WEBPACK_IMPORTED_MODULE_3__.Group);\n                        if (directGroupChild) {\n                            targetObject = directGroupChild;\n                        } else {\n                            targetObject = directChildren[0];\n                        }\n                    }\n                }\n            }\n        // If no suitable direct children, keep the hovered object as target\n        } else {\n            // Normal behavior - highlight top-level group\n            let currentObj = hoveredObject;\n            while(currentObj.parent && !(currentObj.parent instanceof three__WEBPACK_IMPORTED_MODULE_3__.Scene)){\n                if ((currentObj.parent.userData?.isUserCreated || currentObj.parent.userData?.isSerializedFromCode) && currentObj.parent instanceof three__WEBPACK_IMPORTED_MODULE_3__.Group) {\n                    targetObject = currentObj.parent;\n                }\n                currentObj = currentObj.parent;\n            }\n        }\n        // Apply hover tint to the target object\n        applyHoverTint(targetObject);\n        // Cleanup on unmount\n        return ()=>{\n            hoveredMaterials.current.forEach((originalMaterial, obj)=>{\n                if (obj instanceof three__WEBPACK_IMPORTED_MODULE_3__.Mesh && !originalMaterials.current.has(obj)) {\n                    obj.material = originalMaterial;\n                }\n            });\n            hoveredMaterials.current.clear();\n        };\n    }, [\n        hoveredObject,\n        selectedObject\n    ]);\n    // Update mouse position - this works even with pointer lock\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        const handleMouseMove = (e)=>{\n            // If UI is focused, don't update mouse for selection\n            if (isUIFocused) return;\n            // Check pointer lock state\n            isPointerLocked.current = document.pointerLockElement === gl.domElement;\n            if (isPointerLocked.current) {\n                // When in pointer lock, use the center of the screen for selection\n                // This makes it so you can select what's in the center of your view\n                mouse.current.x = 0;\n                mouse.current.y = 0;\n            } else {\n                // When not in pointer lock, use regular mouse coordinates\n                mouse.current.x = e.clientX / gl.domElement.clientWidth * 2 - 1;\n                mouse.current.y = -(e.clientY / gl.domElement.clientHeight) * 2 + 1;\n            }\n        };\n        const handleKeyUp = (e)=>{\n            if (e.key === \"Shift\") {\n                window.__shiftKeyPressed = false;\n            }\n        };\n        // Clear shift key state when window loses focus\n        const handleBlur = ()=>{\n            window.__shiftKeyPressed = false;\n        };\n        // Handle keyboard events (delete, shift key)\n        const handleKeyDown = (e)=>{\n            // Shift key handling\n            if (e.key === \"Shift\") {\n                window.__shiftKeyPressed = true;\n                return;\n            }\n            // Deleting the selected object with backspace or delete\n            if ((e.key === \"Backspace\" || e.key === \"Delete\") && selectedObject && !isUIFocused) {\n                e.preventDefault(); // Prevent browser navigation\n                e.stopPropagation(); // Stop other handlers\n                console.log(\"Deleting selected object:\", selectedObject.userData?.name);\n                try {\n                    // Mark that we're in a deletion process\n                    setIsDeleting(true);\n                    // Get the object's ID for removal from store\n                    const objectId = selectedObject.userData?.id || selectedObject.uuid;\n                    const objectToRemove = selectedObject; // Keep a reference to the object\n                    // First clean up any material references to prevent memory leaks\n                    const cleanupObject = (obj)=>{\n                        if (obj instanceof three__WEBPACK_IMPORTED_MODULE_3__.Mesh) {\n                            // Clean up from original materials map\n                            if (originalMaterials.current.has(obj)) {\n                                originalMaterials.current.delete(obj);\n                            }\n                            // Clean up from hovered materials map\n                            if (hoveredMaterials.current.has(obj)) {\n                                hoveredMaterials.current.delete(obj);\n                            }\n                            // Dispose of geometry and materials to prevent memory leaks\n                            if (obj.geometry) {\n                                obj.geometry.dispose();\n                            }\n                            if (obj.material) {\n                                if (Array.isArray(obj.material)) {\n                                    obj.material.forEach((mat)=>mat.dispose());\n                                } else {\n                                    obj.material.dispose();\n                                }\n                            }\n                        }\n                        // Process children\n                        [\n                            ...obj.children\n                        ].forEach((child)=>{\n                            cleanupObject(child);\n                        });\n                    };\n                    // Clean up resources\n                    cleanupObject(objectToRemove);\n                    // Clear the selection before removing the object\n                    // Use direct state setting to avoid circular update issues\n                    _store_appStore__WEBPACK_IMPORTED_MODULE_1__.useAppStore.setState({\n                        selectedObject: null\n                    });\n                    // Break the update cycle by waiting a tick\n                    setTimeout(()=>{\n                        try {\n                            // Remove from parent (scene) - do this inside timeout to break loop\n                            if (objectToRemove.parent) {\n                                objectToRemove.parent.remove(objectToRemove);\n                                // Remove any global references\n                                if (window.__objectReferences) {\n                                    window.__objectReferences.delete(objectId);\n                                    window.__objectReferences.delete(`${objectId}_geometry`);\n                                    window.__objectReferences.delete(`${objectId}_material`);\n                                }\n                            }\n                            // Clear hover state if needed\n                            if (hoveredObject === objectToRemove) {\n                                setHoveredObject(null);\n                            }\n                            // Remove from object store to prevent recreation\n                            // The store will handle resetting isDeleting\n                            removeObject(objectId);\n                        } catch (innerError) {\n                            console.error(\"Error in delete timeout callback:\", innerError);\n                            // Make sure we reset the deleting flag\n                            _store_appStore__WEBPACK_IMPORTED_MODULE_1__.useAppStore.setState({\n                                isDeleting: false\n                            });\n                        }\n                    }, 0);\n                } catch (error) {\n                    console.error(\"Error deleting object:\", error);\n                    // Make sure we reset the deleting flag\n                    _store_appStore__WEBPACK_IMPORTED_MODULE_1__.useAppStore.setState({\n                        isDeleting: false\n                    });\n                }\n            }\n        };\n        // Track clicks for selection\n        const handleClick = (e)=>{\n            try {\n                // Check if TransformControls is handling this event\n                if (window.__transformControlsActive) {\n                    console.log(\"ObjectHighlighter: Skipping click because TransformControls is active\");\n                    return;\n                }\n                // If we're not in pointer lock mode and clicking on UI, don't process\n                if (!isPointerLocked.current && e.target !== gl.domElement) {\n                    return;\n                }\n                if (hoveredObject && onObjectSelected && !isUIFocused) {\n                    console.log(\"ObjectHighlighter: click on object\", hoveredObject.userData?.name || \"unnamed\", \"uuid:\", hoveredObject.uuid);\n                    // Improved Shift+Click behavior for selecting direct children\n                    const isShiftKeyPressed = window.__shiftKeyPressed === true;\n                    if (isShiftKeyPressed) {\n                        let targetObject = hoveredObject;\n                        // Log the parent object's structure for debugging\n                        console.log(\"Hovered object:\", hoveredObject.userData?.name || \"unnamed\", \"type:\", hoveredObject instanceof three__WEBPACK_IMPORTED_MODULE_3__.Group ? \"Group\" : hoveredObject instanceof three__WEBPACK_IMPORTED_MODULE_3__.Mesh ? \"Mesh\" : \"Object3D\", \"uuid:\", hoveredObject.uuid);\n                        // ONLY proceed if the hovered object actually has children (like a Group)\n                        if (hoveredObject.children && hoveredObject.children.length > 0) {\n                            console.log(\"Direct children count:\", hoveredObject.children.length);\n                            // STRICT FILTER: Only consider DIRECT children and ensure they're user-created\n                            const directChildren = hoveredObject.children.filter((child)=>(child.userData?.isUserCreated || child.userData?.isSerializedFromCode) && (child instanceof three__WEBPACK_IMPORTED_MODULE_3__.Group || child instanceof three__WEBPACK_IMPORTED_MODULE_3__.Mesh || child instanceof three__WEBPACK_IMPORTED_MODULE_3__.Object3D));\n                            if (directChildren.length > 0) {\n                                console.log(\"User-created direct children:\", directChildren.map((c)=>({\n                                        name: c.userData?.name || \"unnamed\",\n                                        type: c instanceof three__WEBPACK_IMPORTED_MODULE_3__.Group ? \"Group\" : c instanceof three__WEBPACK_IMPORTED_MODULE_3__.Mesh ? \"Mesh\" : \"Object3D\"\n                                    })));\n                                // NEW: Use raycasting to determine which direct child to select\n                                // Raycasting against just the direct children\n                                const childRaycaster = new three__WEBPACK_IMPORTED_MODULE_3__.Raycaster();\n                                childRaycaster.setFromCamera(mouse.current, camera);\n                                // Only raycast against direct children of the hovered object\n                                const childIntersects = childRaycaster.intersectObjects(directChildren, true);\n                                if (childIntersects.length > 0) {\n                                    // Find the first intersected object that's a direct child or a descendant of a direct child\n                                    let intersectedDirectChild = null;\n                                    for (const intersect of childIntersects){\n                                        const hitObject = intersect.object;\n                                        // Check if this is a direct child\n                                        if (directChildren.includes(hitObject)) {\n                                            intersectedDirectChild = hitObject;\n                                            break;\n                                        }\n                                        // If not a direct child, find which direct child is an ancestor\n                                        for (const directChild of directChildren){\n                                            if (isDescendantOf(hitObject, directChild)) {\n                                                intersectedDirectChild = directChild;\n                                                break;\n                                            }\n                                        }\n                                        if (intersectedDirectChild) break;\n                                    }\n                                    if (intersectedDirectChild) {\n                                        // We found a direct child that was hit by the ray\n                                        targetObject = intersectedDirectChild;\n                                        console.log(\"Raycast hit direct child:\", targetObject.userData?.name || \"unnamed\");\n                                    } else {\n                                        // Fallback: First try to find a Group among direct children\n                                        const directGroupChild = directChildren.find((c)=>c instanceof three__WEBPACK_IMPORTED_MODULE_3__.Group);\n                                        if (directGroupChild) {\n                                            targetObject = directGroupChild;\n                                            console.log(\"Fallback to direct GROUP child:\", targetObject.userData?.name || \"unnamed\");\n                                        } else {\n                                            // Otherwise just pick the first direct child\n                                            targetObject = directChildren[0];\n                                            console.log(\"Fallback to first direct child:\", targetObject.userData?.name || \"unnamed\");\n                                        }\n                                    }\n                                } else {\n                                    // Fallback if raycasting didn't hit anything\n                                    const directGroupChild = directChildren.find((c)=>c instanceof three__WEBPACK_IMPORTED_MODULE_3__.Group);\n                                    if (directGroupChild) {\n                                        targetObject = directGroupChild;\n                                        console.log(\"No raycast hit, using first GROUP child\");\n                                    } else {\n                                        targetObject = directChildren[0];\n                                        console.log(\"No raycast hit, using first child\");\n                                    }\n                                }\n                            } else {\n                                console.log(\"No suitable direct children found, keeping hovered object\");\n                            }\n                        } else {\n                            console.log(\"Hovered object has no children, keeping it as target\");\n                        }\n                        // Double-check we have a valid object to select\n                        if (targetObject && (targetObject.userData?.isUserCreated || targetObject.userData?.isSerializedFromCode)) {\n                            console.log(\"Final shift+click selection:\", targetObject.userData?.name || \"unnamed\", \"uuid:\", targetObject.uuid);\n                            onObjectSelected(targetObject);\n                        } else {\n                            console.warn(\"No valid object to select\");\n                        }\n                        return;\n                    }\n                    // STANDARD BEHAVIOR: Look for a parent group first (unchanged)\n                    let targetObject = hoveredObject;\n                    let found = false;\n                    // Traverse up the parent chain to find a user-created group\n                    let currentObj = hoveredObject;\n                    while(currentObj.parent && !(currentObj.parent instanceof three__WEBPACK_IMPORTED_MODULE_3__.Scene)){\n                        if ((currentObj.parent.userData?.isUserCreated || currentObj.parent.userData?.isSerializedFromCode) && currentObj.parent instanceof three__WEBPACK_IMPORTED_MODULE_3__.Group) {\n                            targetObject = currentObj.parent;\n                            found = true;\n                            console.log(`Using parent group for selection: ${targetObject.userData?.name || \"unnamed\"}`);\n                            break;\n                        }\n                        currentObj = currentObj.parent;\n                    }\n                    // If we didn't find a suitable parent group, check if the clicked object is valid\n                    if (!found) {\n                        if (!(targetObject.userData?.isUserCreated || targetObject.userData?.isSerializedFromCode)) {\n                            console.warn(\"Only user-created objects can be transformed\");\n                            return;\n                        }\n                    }\n                    // If clicking the already selected object, deselect it\n                    const objectId = targetObject.userData?.id || targetObject.uuid;\n                    const selectedObjectId = selectedObject?.userData?.id || selectedObject?.uuid;\n                    if (selectedObject && objectId === selectedObjectId) {\n                        console.log(\"Clicked already selected object, deselecting\");\n                        onObjectSelected(null);\n                        return;\n                    }\n                    console.log(`Selecting object: id=${objectId}, type=${targetObject instanceof three__WEBPACK_IMPORTED_MODULE_3__.Group ? \"Group\" : \"Mesh\"}`);\n                    // Only set if it's different to avoid unnecessary updates\n                    if (!selectedObject || objectId !== selectedObjectId) {\n                        onObjectSelected(targetObject);\n                    }\n                }\n            } catch (error) {\n                console.error(\"Error in handleClick:\", error);\n            }\n        };\n        // Track double clicks for transform control mode cycling\n        const handleDoubleClick = ()=>{\n            try {\n                // Check if TransformControls is handling this event\n                if (window.__transformControlsActive) {\n                    console.log(\"ObjectHighlighter: Skipping double-click because TransformControls is active\");\n                    return;\n                }\n                // Only process if we have a hovered object with a double click handler\n                if (hoveredObject && !isUIFocused) {\n                    // Double-click should only work on selected objects\n                    if (hoveredObject === selectedObject && hoveredObject.userData?.doubleClickHandler) {\n                        // Call the double click handler attached by the CustomTransformControls\n                        hoveredObject.userData.doubleClickHandler();\n                    }\n                }\n            } catch (error) {\n                console.error(\"Error in handleDoubleClick:\", error);\n            }\n        };\n        window.addEventListener(\"mousemove\", handleMouseMove);\n        window.addEventListener(\"click\", handleClick);\n        window.addEventListener(\"dblclick\", handleDoubleClick);\n        window.addEventListener(\"keydown\", handleKeyDown);\n        window.addEventListener(\"keyup\", handleKeyUp);\n        window.addEventListener(\"blur\", handleBlur);\n        return ()=>{\n            window.removeEventListener(\"mousemove\", handleMouseMove);\n            window.removeEventListener(\"click\", handleClick);\n            window.removeEventListener(\"dblclick\", handleDoubleClick);\n            window.removeEventListener(\"keydown\", handleKeyDown);\n            window.removeEventListener(\"keyup\", handleKeyUp);\n            window.removeEventListener(\"blur\", handleBlur);\n        };\n    }, [\n        gl,\n        hoveredObject,\n        onObjectSelected,\n        isUIFocused,\n        selectedObject,\n        removeObject,\n        setIsDeleting\n    ]);\n    // Reset when pointer lock changes\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        const handlePointerLockChange = ()=>{\n            try {\n                isPointerLocked.current = document.pointerLockElement === gl.domElement;\n            } catch (error) {\n                console.error(\"Error in handlePointerLockChange:\", error);\n            }\n        };\n        document.addEventListener(\"pointerlockchange\", handlePointerLockChange);\n        return ()=>{\n            document.removeEventListener(\"pointerlockchange\", handlePointerLockChange);\n        };\n    }, [\n        gl\n    ]);\n    // Using useFrame to perform raycasting on each frame\n    (0,_react_three_fiber__WEBPACK_IMPORTED_MODULE_2__.A)(()=>{\n        try {\n            // Skip if UI is focused\n            if (isUIFocused) {\n                setHoveredObject(null);\n                return;\n            }\n            // Update the raycaster\n            raycaster.current.setFromCamera(mouse.current, camera);\n            // Filter for meshes and groups that are user created, excluding any specified objects\n            const filterFunction = (obj)=>{\n                return (obj instanceof three__WEBPACK_IMPORTED_MODULE_3__.Mesh || obj instanceof three__WEBPACK_IMPORTED_MODULE_3__.Group) && !excludeObjects.includes(obj) && obj.userData && (obj.userData.isUserCreated || obj.userData.isSerializedFromCode);\n            };\n            // Find intersected objects - BVH accelerated through Drei's Bvh component\n            // When objects are wrapped in <Bvh>, this raycasting becomes much faster\n            const intersects = raycaster.current.intersectObjects(scene.children, true).filter((intersect)=>{\n                // First, if the intersected object is directly usable, use it\n                const intersectedObj = intersect.object;\n                if (filterFunction(intersectedObj)) {\n                    return true;\n                }\n                // Otherwise, try to find an appropriate parent\n                // This handles the case where a child of a group is intersected\n                let currentParent = intersectedObj.parent;\n                while(currentParent){\n                    if (filterFunction(currentParent)) {\n                        // Important: we replace the object in the intersection data\n                        // with the parent group to ensure we operate on the correct object\n                        intersect.object = currentParent;\n                        return true;\n                    }\n                    currentParent = currentParent.parent;\n                }\n                return false;\n            });\n            // Handle object under cursor\n            if (intersects.length > 0) {\n                const intersectedObject = intersects[0].object;\n                // Find top-level user-created parent to use as hovered object\n                // This ensures we always start with the highest level group\n                let topLevelObject = intersectedObject;\n                let currentObj = intersectedObject;\n                while(currentObj.parent && !(currentObj.parent instanceof three__WEBPACK_IMPORTED_MODULE_3__.Scene)){\n                    if ((currentObj.parent.userData?.isUserCreated || currentObj.parent.userData?.isSerializedFromCode) && (currentObj.parent instanceof three__WEBPACK_IMPORTED_MODULE_3__.Group || currentObj.parent instanceof three__WEBPACK_IMPORTED_MODULE_3__.Object3D)) {\n                        topLevelObject = currentObj.parent;\n                    }\n                    currentObj = currentObj.parent;\n                }\n                if (hoveredObject !== topLevelObject) {\n                    setHoveredObject(topLevelObject);\n                    // Add debug output to see what's being selected as the hovered object\n                    console.log(\"Set hovered object:\", topLevelObject.userData?.name || \"unnamed\", \"type:\", topLevelObject instanceof three__WEBPACK_IMPORTED_MODULE_3__.Group ? \"Group\" : topLevelObject instanceof three__WEBPACK_IMPORTED_MODULE_3__.Mesh ? \"Mesh\" : \"Object3D\");\n                }\n            } else if (hoveredObject) {\n                setHoveredObject(null);\n            }\n        } catch (error) {\n            console.error(\"Error in useFrame:\", error);\n        }\n    });\n    return null;\n}\n// Helper function to check if an object is a descendant of another\nfunction isDescendantOf(object, potentialAncestor) {\n    let parent = object.parent;\n    while(parent){\n        if (parent === potentialAncestor) return true;\n        parent = parent.parent;\n    }\n    return false;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9hcHAvY29tcG9uZW50cy90aHJlZS9PYmplY3RIaWdobGlnaHRlci50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQWdFO0FBQ1Q7QUFDekI7QUFDZ0M7QUFPdkQsU0FBU1Esa0JBQWtCLEVBQUVDLGdCQUFnQixFQUFFQyxpQkFBaUIsRUFBRSxFQUEwQjtJQUNqRyxNQUFNLEVBQUVDLEtBQUssRUFBRUMsRUFBRSxFQUFFQyxNQUFNLEVBQUUsR0FBR1YscURBQVFBO0lBQ3RDLE1BQU0sQ0FBQ1csZUFBZUMsaUJBQWlCLEdBQUdmLCtDQUFRQSxDQUF3QjtJQUMxRSxNQUFNZ0IsWUFBWWYsNkNBQU1BLENBQUMsSUFBSUksNENBQWU7SUFDNUMsTUFBTWEsUUFBUWpCLDZDQUFNQSxDQUFDLElBQUlJLDBDQUFhLENBQUMsR0FBRztJQUMxQyxNQUFNZSxrQkFBa0JuQiw2Q0FBTUEsQ0FBQztJQUUvQixvREFBb0Q7SUFDcEQsTUFBTSxFQUFFb0IsV0FBVyxFQUFFQyxjQUFjLEVBQUVDLGFBQWEsRUFBRSxHQUFHakIsNERBQVdBO0lBRWxFLDJCQUEyQjtJQUMzQixNQUFNLEVBQUVrQixZQUFZLEVBQUUsR0FBR2pCLCtEQUFjQTtJQUV2QyxnREFBZ0Q7SUFDaEQsTUFBTWtCLG9CQUFvQnhCLDZDQUFNQSxDQUFDLElBQUl5QjtJQUVyQywrQ0FBK0M7SUFDL0MsTUFBTUMsbUJBQW1CMUIsNkNBQU1BLENBQUMsSUFBSXlCO0lBRXBDLGdDQUFnQztJQUNoQ3hCLGdEQUFTQSxDQUFDO1FBQ1IsbUNBQW1DO1FBQ25DLE1BQU0wQixZQUFZLENBQUNDO1lBQ2pCLElBQUlBLGtCQUFrQnhCLHVDQUFVLEVBQUU7Z0JBQ2hDLGdEQUFnRDtnQkFDaEQsSUFBSSxDQUFDb0Isa0JBQWtCTSxPQUFPLENBQUNDLEdBQUcsQ0FBQ0gsU0FBUztvQkFDMUNKLGtCQUFrQk0sT0FBTyxDQUFDRSxHQUFHLENBQUNKLFFBQVFBLE9BQU9LLFFBQVE7Z0JBQ3ZEO2dCQUVBLE1BQU1BLFdBQVdM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LGlCQUFpQjtZQUNuQjtRQUNGLEVBQUUsT0FBT3NHLE9BQU87WUFDZGYsUUFBUWUsS0FBSyxDQUFDLHNCQUFzQkE7UUFDdEM7SUFDRjtJQUVBLE9BQU87QUFDVDtBQWdCQSxtRUFBbUU7QUFDbkUsU0FBU3hDLGVBQWVoRCxNQUFzQixFQUFFNEcsaUJBQWlDO0lBQy9FLElBQUl2RCxTQUFTckQsT0FBT3FELE1BQU07SUFDMUIsTUFBT0EsT0FBUTtRQUNiLElBQUlBLFdBQVd1RCxtQkFBbUIsT0FBTztRQUN6Q3ZELFNBQVNBLE9BQU9BLE1BQU07SUFDeEI7SUFDQSxPQUFPO0FBQ1QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92aWJlLTNkLWNvZGUvLi9hcHAvY29tcG9uZW50cy90aHJlZS9PYmplY3RIaWdobGlnaHRlci50c3g/YzhiMyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1c2VTdGF0ZSwgdXNlUmVmLCB1c2VFZmZlY3QsIHVzZUNhbGxiYWNrIH0gZnJvbSAncmVhY3QnXG5pbXBvcnQgeyB1c2VUaHJlZSwgdXNlRnJhbWUgfSBmcm9tICdAcmVhY3QtdGhyZWUvZmliZXInXG5pbXBvcnQgKiBhcyBUSFJFRSBmcm9tICd0aHJlZSdcbmltcG9ydCB7IHVzZUFwcFN0b3JlLCB1c2VPYmplY3RTdG9yZSB9IGZyb20gJ0Avc3RvcmUvYXBwU3RvcmUnXG5cbmludGVyZmFjZSBPYmplY3RIaWdobGlnaHRlclByb3BzIHtcbiAgb25PYmplY3RTZWxlY3RlZD86IChvYmplY3Q6IFRIUkVFLk9iamVjdDNEIHwgbnVsbCkgPT4gdm9pZFxuICBleGNsdWRlT2JqZWN0cz86IFRIUkVFLk9iamVjdDNEW11cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIE9iamVjdEhpZ2hsaWdodGVyKHsgb25PYmplY3RTZWxlY3RlZCwgZXhjbHVkZU9iamVjdHMgPSBbXSB9OiBPYmplY3RIaWdobGlnaHRlclByb3BzKSB7XG4gIGNvbnN0IHsgc2NlbmUsIGdsLCBjYW1lcmEgfSA9IHVzZVRocmVlKClcbiAgY29uc3QgW2hvdmVyZWRPYmplY3QsIHNldEhvdmVyZWRPYmplY3RdID0gdXNlU3RhdGU8VEhSRUUuT2JqZWN0M0QgfCBudWxsPihudWxsKVxuICBjb25zdCByYXljYXN0ZXIgPSB1c2VSZWYobmV3IFRIUkVFLlJheWNhc3RlcigpKVxuICBjb25zdCBtb3VzZSA9IHVzZVJlZihuZXcgVEhSRUUuVmVjdG9yMigwLCAwKSlcbiAgY29uc3QgaXNQb2ludGVyTG9ja2VkID0gdXNlUmVmKGZhbHNlKVxuICBcbiAgLy8gR2V0IFVJIGZvY3VzIHN0YXRlIGFuZCBzZWxlY3RlZCBvYmplY3QgZnJvbSBzdG9yZVxuICBjb25zdCB7IGlzVUlGb2N1c2VkLCBzZWxlY3RlZE9iamVjdCwgc2V0SXNEZWxldGluZyB9ID0gdXNlQXBwU3RvcmUoKVxuICBcbiAgLy8gR2V0IG9iamVjdCBzdG9yZSBtZXRob2RzXG4gIGNvbnN0IHsgcmVtb3ZlT2JqZWN0IH0gPSB1c2VPYmplY3RTdG9yZSgpXG4gIFxuICAvLyBTdG9yZSBvcmlnaW5hbCBtYXRlcmlhbHMgZm9yIHNlbGVjdGVkIG9iamVjdHNcbiAgY29uc3Qgb3JpZ2luYWxNYXRlcmlhbHMgPSB1c2VSZWYobmV3IE1hcDxUSFJFRS5PYmplY3QzRCwgVEhSRUUuTWF0ZXJpYWwgfCBUSFJFRS5NYXRlcmlhbFtdPigpKVxuICBcbiAgLy8gU3RvcmUgb3JpZ2luYWwgbWF0ZXJpYWxzIGZvciBob3ZlcmVkIG9iamVjdHNcbiAgY29uc3QgaG92ZXJlZE1hdGVyaWFscyA9IHVzZVJlZihuZXcgTWFwPFRIUkVFLk9iamVjdDNELCBUSFJFRS5NYXRlcmlhbCB8IFRIUkVFLk1hdGVyaWFsW10+KCkpXG4gIFxuICAvLyBBcHBseSB0aW50IHRvIHNlbGVjdGVkIG9iamVjdFxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIC8vIEZ1bmN0aW9uIHRvIGFwcGx5IHRpbnQgdG8gYSBtZXNoXG4gICAgY29uc3QgYXBwbHlUaW50ID0gKG9iamVjdDogVEhSRUUuT2JqZWN0M0QpID0+IHtcbiAgICAgIGlmIChvYmplY3QgaW5zdGFuY2VvZiBUSFJFRS5NZXNoKSB7XG4gICAgICAgIC8vIFN0b3JlIG9yaWdpbmFsIG1hdGVyaWFsIGlmIG5vdCBhbHJlYWR5IHN0b3JlZFxuICAgICAgICBpZiAoIW9yaWdpbmFsTWF0ZXJpYWxzLmN1cnJlbnQuaGFzKG9iamVjdCkpIHtcbiAgICAgICAgICBvcmlnaW5hbE1hdGVyaWFscy5jdXJyZW50LnNldChvYmplY3QsIG9iamVjdC5tYXRlcmlhbCk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGNvbnN0IG1hdGVyaWFsID0gb2JqZWN0Lm1hdGVyaWFsO1xuICAgICAgICBcbiAgICAgICAgLy8gSWYgbWF0ZXJpYWwgaXMgYW4gYXJyYXksIGNsb25lIGFuZCB0aW50IGVhY2ggbWF0ZXJpYWxcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkobWF0ZXJpYWwpKSB7XG4gICAgICAgICAgb2JqZWN0Lm1hdGVyaWFsID0gbWF0ZXJpYWwubWFwKG1hdCA9PiB7XG4gICAgICAgICAgICBjb25zdCBjbG9uZWRNYXQgPSBtYXQuY2xvbmUoKTtcbiAgICAgICAgICAgIC8vIEFkZCBhIHNsaWdodCBibHVlIHRpbnQgdG8gaW5kaWNhdGUgc2VsZWN0aW9uXG4gICAgICAgICAgICBpZiAoJ2NvbG9yJyBpbiBjbG9uZWRNYXQpIHtcbiAgICAgICAgICAgICAgY2xvbmVkTWF0LmNvbG9yLm11bHRpcGx5U2NhbGFyKDAuOCkuYWRkKG5ldyBUSFJFRS5Db2xvcigwLCAwLjIsIDAuNSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGNsb25lZE1hdDtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBDbG9uZSBtYXRlcmlhbCBhbmQgYWRkIGEgYmx1ZSB0aW50XG4gICAgICAgICAgY29uc3QgY2xvbmVkTWF0ZXJpYWwgPSBtYXRlcmlhbC5jbG9uZSgpO1xuICAgICAgICAgIGlmICgnY29sb3InIGluIGNsb25lZE1hdGVyaWFsKSB7XG4gICAgICAgICAgICBjbG9uZWRNYXRlcmlhbC5jb2xvci5tdWx0aXBseVNjYWxhcigwLjgpLmFkZChuZXcgVEhSRUUuQ29sb3IoMCwgMC4yLCAwLjUpKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgb2JqZWN0Lm1hdGVyaWFsID0gY2xvbmVkTWF0ZXJpYWw7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gUHJvY2VzcyBjaGlsZHJlbiByZWN1cnNpdmVseVxuICAgICAgb2JqZWN0LmNoaWxkcmVuLmZvckVhY2goY2hpbGQgPT4gYXBwbHlUaW50KGNoaWxkKSk7XG4gICAgfTtcbiAgICBcbiAgICAvLyBGdW5jdGlvbiB0byByZXN0b3JlIG9yaWdpbmFsIG1hdGVyaWFsc1xuICAgIGNvbnN0IHJlc3RvcmVPcmlnaW5hbE1hdGVyaWFsID0gKG9iamVjdDogVEhSRUUuT2JqZWN0M0QpID0+IHtcbiAgICAgIGlmIChvYmplY3QgaW5zdGFuY2VvZiBUSFJFRS5NZXNoKSB7XG4gICAgICAgIGNvbnN0IG9yaWdpbmFsTWF0ZXJpYWwgPSBvcmlnaW5hbE1hdGVyaWFscy5jdXJyZW50LmdldChvYmplY3QpO1xuICAgICAgICBpZiAob3JpZ2luYWxNYXRlcmlhbCkge1xuICAgICAgICAgIG9iamVjdC5tYXRlcmlhbCA9IG9yaWdpbmFsTWF0ZXJpYWw7XG4gICAgICAgICAgb3JpZ2luYWxNYXRlcmlhbHMuY3VycmVudC5kZWxldGUob2JqZWN0KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBQcm9jZXNzIGNoaWxkcmVuIHJlY3Vyc2l2ZWx5XG4gICAgICBvYmplY3QuY2hpbGRyZW4uZm9yRWFjaChjaGlsZCA9PiByZXN0b3JlT3JpZ2luYWxNYXRlcmlhbChjaGlsZCkpO1xuICAgIH07XG4gICAgXG4gICAgLy8gQXBwbHkgdGludCB0byBuZXdseSBzZWxlY3RlZCBvYmplY3QsIHJlc3RvcmUgcHJldmlvdXNcbiAgICBpZiAoc2VsZWN0ZWRPYmplY3QpIHtcbiAgICAgIGFwcGx5VGludChzZWxlY3RlZE9iamVjdCk7XG4gICAgfVxuICAgIFxuICAgIC8vIFJlc3RvcmUgbWF0ZXJpYWxzIGZvciBhbGwgc3RvcmVkIG9iamVjdHMgdGhhdCBhcmVuJ3QgdGhlIHNlbGVjdGVkIG9iamVjdFxuICAgIG9yaWdpbmFsTWF0ZXJpYWxzLmN1cnJlbnQuZm9yRWFjaCgoXywgb2JqKSA9PiB7XG4gICAgICBpZiAob2JqICE9PSBzZWxlY3RlZE9iamVjdCkge1xuICAgICAgICByZXN0b3JlT3JpZ2luYWxNYXRlcmlhbChvYmopO1xuICAgICAgfVxuICAgIH0pO1xuICAgIFxuICAgIC8vIENsZWFudXAgd2hlbiBjb21wb25lbnQgdW5tb3VudHNcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgb3JpZ2luYWxNYXRlcmlhbHMuY3VycmVudC5mb3JFYWNoKChfLCBvYmopID0+IHtcbiAgICAgICAgcmVzdG9yZU9yaWdpbmFsTWF0ZXJpYWwob2JqKTtcbiAgICAgIH0pO1xuICAgIH07XG4gIH0sIFtzZWxlY3RlZE9iamVjdF0pO1xuICBcbiAgLy8gQXBwbHkgaG92ZXIgdGludCBlZmZlY3RcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAvLyBDSEFOR0UgMTogRG9uJ3Qgc2hvdyBob3ZlciB0aW50IGlmIGFueSBvYmplY3QgaXMgc2VsZWN0ZWRcbiAgICBpZiAoIWhvdmVyZWRPYmplY3QgfHwgc2VsZWN0ZWRPYmplY3QpIHtcbiAgICAgIC8vIENsZWFyIGFueSBwcmV2aW91cyBob3ZlciBlZmZlY3RzXG4gICAgICBob3ZlcmVkTWF0ZXJpYWxzLmN1cnJlbnQuZm9yRWFjaCgob3JpZ2luYWxNYXRlcmlhbCwgb2JqKSA9PiB7XG4gICAgICAgIGlmIChvYmogaW5zdGFuY2VvZiBUSFJFRS5NZXNoICYmIFxuICAgICAgICAgICAgIW9yaWdpbmFsTWF0ZXJpYWxzLmN1cnJlbnQuaGFzKG9iaikpIHtcbiAgICAgICAgICBvYmoubWF0ZXJpYWwgPSBvcmlnaW5hbE1hdGVyaWFsO1xuICAgICAgICAgIGhvdmVyZWRNYXRlcmlhbHMuY3VycmVudC5kZWxldGUob2JqKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIFxuICAgIC8vIEFwcGx5IGhvdmVyIHRpbnQgdG8gdGhlIGhvdmVyZWQgb2JqZWN0XG4gICAgY29uc3QgYXBwbHlIb3ZlclRpbnQgPSAob2JqZWN0OiBUSFJFRS5PYmplY3QzRCkgPT4ge1xuICAgICAgaWYgKG9iamVjdCBpbnN0YW5jZW9mIFRIUkVFLk1lc2ggJiYgXG4gICAgICAgICAgIW9yaWdpbmFsTWF0ZXJpYWxzLmN1cnJlbnQuaGFzKG9iamVjdCkpIHsgLy8gRG9uJ3QgYXBwbHkgaG92ZXIgdG8gc2VsZWN0ZWQgb2JqZWN0c1xuICAgICAgICAvLyBTdG9yZSBvcmlnaW5hbCBtYXRlcmlhbCBpZiBub3QgYWxyZWFkeSBzdG9yZWRcbiAgICAgICAgaWYgKCFob3ZlcmVkTWF0ZXJpYWxzLmN1cnJlbnQuaGFzKG9iamVjdCkpIHtcbiAgICAgICAgICBob3ZlcmVkTWF0ZXJpYWxzLmN1cnJlbnQuc2V0KG9iamVjdCwgb2JqZWN0Lm1hdGVyaWFsKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgY29uc3QgbWF0ZXJpYWwgPSBvYmplY3QubWF0ZXJpYWw7XG4gICAgICAgIFxuICAgICAgICAvLyBJZiBtYXRlcmlhbCBpcyBhbiBhcnJheSwgY2xvbmUgYW5kIHRpbnQgZWFjaCBtYXRlcmlhbFxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShtYXRlcmlhbCkpIHtcbiAgICAgICAgICBvYmplY3QubWF0ZXJpYWwgPSBtYXRlcmlhbC5tYXAobWF0ID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGNsb25lZE1hdCA9IG1hdC5jbG9uZSgpO1xuICAgICAgICAgICAgLy8gQWRkIGEgc2xpZ2h0IHllbGxvdyB0aW50IGZvciBob3ZlclxuICAgICAgICAgICAgaWYgKCdjb2xvcicgaW4gY2xvbmVkTWF0KSB7XG4gICAgICAgICAgICAgIGNsb25lZE1hdC5jb2xvci5tdWx0aXBseVNjYWxhcigwLjkpLmFkZChuZXcgVEhSRUUuQ29sb3IoMC4zLCAwLjMsIDApKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjbG9uZWRNYXQ7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gQ2xvbmUgbWF0ZXJpYWwgYW5kIGFkZCBhIHllbGxvdyB0aW50XG4gICAgICAgICAgY29uc3QgY2xvbmVkTWF0ZXJpYWwgPSBtYXRlcmlhbC5jbG9uZSgpO1xuICAgICAgICAgIGlmICgnY29sb3InIGluIGNsb25lZE1hdGVyaWFsKSB7XG4gICAgICAgICAgICBjbG9uZWRNYXRlcmlhbC5jb2xvci5tdWx0aXBseVNjYWxhcigwLjkpLmFkZChuZXcgVEhSRUUuQ29sb3IoMC4zLCAwLjMsIDApKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgb2JqZWN0Lm1hdGVyaWFsID0gY2xvbmVkTWF0ZXJpYWw7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gUHJvY2VzcyBjaGlsZHJlbiByZWN1cnNpdmVseVxuICAgICAgb2JqZWN0LmNoaWxkcmVuLmZvckVhY2goY2hpbGQgPT4gYXBwbHlIb3ZlclRpbnQoY2hpbGQpKTtcbiAgICB9O1xuICAgIFxuICAgIC8vIFJlc3RvcmUgaG92ZXIgbWF0ZXJpYWxzIGZvciBvYmplY3RzIHRoYXQgYXJlIG5vIGxvbmdlciBob3ZlcmVkXG4gICAgaG92ZXJlZE1hdGVyaWFscy5jdXJyZW50LmZvckVhY2goKG9yaWdpbmFsTWF0ZXJpYWwsIG9iaikgPT4ge1xuICAgICAgaWYgKG9iaiAhPT0gaG92ZXJlZE9iamVjdCAmJiBcbiAgICAgICAgICAhb3JpZ2luYWxNYXRlcmlhbHMuY3VycmVudC5oYXMob2JqKSAmJiAvLyBEb24ndCByZXN0b3JlIGlmIGl0J3MgdGhlIHNlbGVjdGVkIG9iamVjdFxuICAgICAgICAgIG9iaiBpbnN0YW5jZW9mIFRIUkVFLk1lc2gpIHtcbiAgICAgICAgb2JqLm1hdGVyaWFsID0gb3JpZ2luYWxNYXRlcmlhbDtcbiAgICAgICAgaG92ZXJlZE1hdGVyaWFscy5jdXJyZW50LmRlbGV0ZShvYmopO1xuICAgICAgfVxuICAgIH0pO1xuICAgIFxuICAgIC8vIEltcHJvdmVkIGhvdmVyIHRpbnRpbmcgZm9yIFNoaWZ0IGtleVxuICAgIGNvbnN0IGlzU2hpZnRLZXlQcmVzc2VkID0gd2luZG93Ll9fc2hpZnRLZXlQcmVzc2VkID09PSB0cnVlO1xuICAgIGxldCB0YXJnZXRPYmplY3QgPSBob3ZlcmVkT2JqZWN0O1xuICAgIFxuICAgIC8vIEhhbmRsZSBob3ZlciB0aW50aW5nIGJhc2VkIG9uIFNoaWZ0IGtleSBzdGF0ZVxuICAgIGlmIChpc1NoaWZ0S2V5UHJlc3NlZCkge1xuICAgICAgLy8gT25seSBwcm9jZWVkIGlmIHRoZSBob3ZlcmVkIG9iamVjdCBhY3R1YWxseSBoYXMgY2hpbGRyZW5cbiAgICAgIGlmIChob3ZlcmVkT2JqZWN0LmNoaWxkcmVuICYmIGhvdmVyZWRPYmplY3QuY2hpbGRyZW4ubGVuZ3RoID4gMCkge1xuICAgICAgICAvLyBTVFJJQ1QgRklMVEVSOiBPbmx5IGNvbnNpZGVyIERJUkVDVCBjaGlsZHJlbiB0aGF0IGFyZSB1c2VyLWNyZWF0ZWRcbiAgICAgICAgY29uc3QgZGlyZWN0Q2hpbGRyZW4gPSBob3ZlcmVkT2JqZWN0LmNoaWxkcmVuLmZpbHRlcihjaGlsZCA9PiBcbiAgICAgICAgICAoY2hpbGQudXNlckRhdGE/LmlzVXNlckNyZWF0ZWQgfHwgY2hpbGQudXNlckRhdGE/LmlzU2VyaWFsaXplZEZyb21Db2RlKSAmJlxuICAgICAgICAgIChjaGlsZCBpbnN0YW5jZW9mIFRIUkVFLkdyb3VwIHx8IGNoaWxkIGluc3RhbmNlb2YgVEhSRUUuTWVzaCB8fCBjaGlsZCBpbnN0YW5jZW9mIFRIUkVFLk9iamVjdDNEKVxuICAgICAgICApO1xuICAgICAgICBcbiAgICAgICAgaWYgKGRpcmVjdENoaWxkcmVuLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAvLyBVc2UgcmF5Y2FzdGluZyB0byBkZXRlcm1pbmUgd2hpY2ggZGlyZWN0IGNoaWxkIHRvIGhpZ2hsaWdodFxuICAgICAgICAgIGNvbnN0IGNoaWxkUmF5Y2FzdGVyID0gbmV3IFRIUkVFLlJheWNhc3RlcigpO1xuICAgICAgICAgIGNoaWxkUmF5Y2FzdGVyLnNldEZyb21DYW1lcmEobW91c2UuY3VycmVudCwgY2FtZXJhKTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBPbmx5IHJheWNhc3QgYWdhaW5zdCBkaXJlY3QgY2hpbGRyZW4gb2YgdGhlIGhvdmVyZWQgb2JqZWN0XG4gICAgICAgICAgY29uc3QgY2hpbGRJbnRlcnNlY3RzID0gY2hpbGRSYXljYXN0ZXIuaW50ZXJzZWN0T2JqZWN0cyhkaXJlY3RDaGlsZHJlbiwgdHJ1ZSk7XG4gICAgICAgICAgXG4gICAgICAgICAgaWYgKGNoaWxkSW50ZXJzZWN0cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAvLyBGaW5kIHRoZSBmaXJzdCBpbnRlcnNlY3RlZCBvYmplY3QgdGhhdCdzIGEgZGlyZWN0IGNoaWxkIG9yIGEgZGVzY2VuZGFudCBvZiBhIGRpcmVjdCBjaGlsZFxuICAgICAgICAgICAgbGV0IGludGVyc2VjdGVkRGlyZWN0Q2hpbGQgPSBudWxsO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGludGVyc2VjdCBvZiBjaGlsZEludGVyc2VjdHMpIHtcbiAgICAgICAgICAgICAgY29uc3QgaGl0T2JqZWN0ID0gaW50ZXJzZWN0Lm9iamVjdDtcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoaXMgaXMgYSBkaXJlY3QgY2hpbGRcbiAgICAgICAgICAgICAgaWYgKGRpcmVjdENoaWxkcmVuLmluY2x1ZGVzKGhpdE9iamVjdCkpIHtcbiAgICAgICAgICAgICAgICBpbnRlcnNlY3RlZERpcmVjdENoaWxkID0gaGl0T2JqZWN0O1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAvLyBJZiBub3QgYSBkaXJlY3QgY2hpbGQsIGZpbmQgd2hpY2ggZGlyZWN0IGNoaWxkIGlzIGFuIGFuY2VzdG9yXG4gICAgICAgICAgICAgIGZvciAoY29uc3QgZGlyZWN0Q2hpbGQgb2YgZGlyZWN0Q2hpbGRyZW4pIHtcbiAgICAgICAgICAgICAgICBpZiAoaXNEZXNjZW5kYW50T2YoaGl0T2JqZWN0LCBkaXJlY3RDaGlsZCkpIHtcbiAgICAgICAgICAgICAgICAgIGludGVyc2VjdGVkRGlyZWN0Q2hpbGQgPSBkaXJlY3RDaGlsZDtcbiAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgaWYgKGludGVyc2VjdGVkRGlyZWN0Q2hpbGQpIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoaW50ZXJzZWN0ZWREaXJlY3RDaGlsZCkge1xuICAgICAgICAgICAgICAvLyBXZSBmb3VuZCBhIGRpcmVjdCBjaGlsZCB0aGF0IHdhcyBoaXQgYnkgdGhlIHJheVxuICAgICAgICAgICAgICB0YXJnZXRPYmplY3QgPSBpbnRlcnNlY3RlZERpcmVjdENoaWxkO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgLy8gRmFsbGJhY2s6IEZpcnN0IHRyeSB0byBmaW5kIGEgR3JvdXAgYW1vbmcgZGlyZWN0IGNoaWxkcmVuXG4gICAgICAgICAgICAgIGNvbnN0IGRpcmVjdEdyb3VwQ2hpbGQgPSBkaXJlY3RDaGlsZHJlbi5maW5kKGMgPT4gYyBpbnN0YW5jZW9mIFRIUkVFLkdyb3VwKTtcbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIGlmIChkaXJlY3RHcm91cENoaWxkKSB7XG4gICAgICAgICAgICAgICAgdGFyZ2V0T2JqZWN0ID0gZGlyZWN0R3JvdXBDaGlsZDtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBPdGhlcndpc2UganVzdCBwaWNrIHRoZSBmaXJzdCBkaXJlY3QgY2hpbGRcbiAgICAgICAgICAgICAgICB0YXJnZXRPYmplY3QgPSBkaXJlY3RDaGlsZHJlblswXTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBGYWxsYmFjayBpZiByYXljYXN0aW5nIGRpZG4ndCBoaXQgYW55dGhpbmdcbiAgICAgICAgICAgIGNvbnN0IGRpcmVjdEdyb3VwQ2hpbGQgPSBkaXJlY3RDaGlsZHJlbi5maW5kKGMgPT4gYyBpbnN0YW5jZW9mIFRIUkVFLkdyb3VwKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKGRpcmVjdEdyb3VwQ2hpbGQpIHtcbiAgICAgICAgICAgICAgdGFyZ2V0T2JqZWN0ID0gZGlyZWN0R3JvdXBDaGlsZDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHRhcmdldE9iamVjdCA9IGRpcmVjdENoaWxkcmVuWzBdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgLy8gSWYgbm8gc3VpdGFibGUgZGlyZWN0IGNoaWxkcmVuLCBrZWVwIHRoZSBob3ZlcmVkIG9iamVjdCBhcyB0YXJnZXRcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gTm9ybWFsIGJlaGF2aW9yIC0gaGlnaGxpZ2h0IHRvcC1sZXZlbCBncm91cFxuICAgICAgbGV0IGN1cnJlbnRPYmogPSBob3ZlcmVkT2JqZWN0O1xuICAgICAgd2hpbGUgKGN1cnJlbnRPYmoucGFyZW50ICYmICEoY3VycmVudE9iai5wYXJlbnQgaW5zdGFuY2VvZiBUSFJFRS5TY2VuZSkpIHtcbiAgICAgICAgaWYgKChjdXJyZW50T2JqLnBhcmVudC51c2VyRGF0YT8uaXNVc2VyQ3JlYXRlZCB8fCBjdXJyZW50T2JqLnBhcmVudC51c2VyRGF0YT8uaXNTZXJpYWxpemVkRnJvbUNvZGUpICYmXG4gICAgICAgICAgICBjdXJyZW50T2JqLnBhcmVudCBpbnN0YW5jZW9mIFRIUkVFLkdyb3VwKSB7XG4gICAgICAgICAgdGFyZ2V0T2JqZWN0ID0gY3VycmVudE9iai5wYXJlbnQ7XG4gICAgICAgIH1cbiAgICAgICAgY3VycmVudE9iaiA9IGN1cnJlbnRPYmoucGFyZW50O1xuICAgICAgfVxuICAgIH1cbiAgICBcbiAgICAvLyBBcHBseSBob3ZlciB0aW50IHRvIHRoZSB0YXJnZXQgb2JqZWN0XG4gICAgYXBwbHlIb3ZlclRpbnQodGFyZ2V0T2JqZWN0KTtcbiAgICBcbiAgICAvLyBDbGVhbnVwIG9uIHVubW91bnRcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgaG92ZXJlZE1hdGVyaWFscy5jdXJyZW50LmZvckVhY2goKG9yaWdpbmFsTWF0ZXJpYWwsIG9iaikgPT4ge1xuICAgICAgICBpZiAob2JqIGluc3RhbmNlb2YgVEhSRUUuTWVzaCAmJiAhb3JpZ2luYWxNYXRlcmlhbHMuY3VycmVudC5oYXMob2JqKSkge1xuICAgICAgICAgIG9iai5tYXRlcmlhbCA9IG9yaWdpbmFsTWF0ZXJpYWw7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgaG92ZXJlZE1hdGVyaWFscy5jdXJyZW50LmNsZWFyKCk7XG4gICAgfTtcbiAgfSwgW2hvdmVyZWRPYmplY3QsIHNlbGVjdGVkT2JqZWN0XSk7XG4gIFxuICAvLyBVcGRhdGUgbW91c2UgcG9zaXRpb24gLSB0aGlzIHdvcmtzIGV2ZW4gd2l0aCBwb2ludGVyIGxvY2tcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBoYW5kbGVNb3VzZU1vdmUgPSAoZTogTW91c2VFdmVudCkgPT4ge1xuICAgICAgLy8gSWYgVUkgaXMgZm9jdXNlZCwgZG9uJ3QgdXBkYXRlIG1vdXNlIGZvciBzZWxlY3Rpb25cbiAgICAgIGlmIChpc1VJRm9jdXNlZCkgcmV0dXJuXG4gICAgICBcbiAgICAgIC8vIENoZWNrIHBvaW50ZXIgbG9jayBzdGF0ZVxuICAgICAgaXNQb2ludGVyTG9ja2VkLmN1cnJlbnQgPSBkb2N1bWVudC5wb2ludGVyTG9ja0VsZW1lbnQgPT09IGdsLmRvbUVsZW1lbnRcbiAgICAgIFxuICAgICAgaWYgKGlzUG9pbnRlckxvY2tlZC5jdXJyZW50KSB7XG4gICAgICAgIC8vIFdoZW4gaW4gcG9pbnRlciBsb2NrLCB1c2UgdGhlIGNlbnRlciBvZiB0aGUgc2NyZWVuIGZvciBzZWxlY3Rpb25cbiAgICAgICAgLy8gVGhpcyBtYWtlcyBpdCBzbyB5b3UgY2FuIHNlbGVjdCB3aGF0J3MgaW4gdGhlIGNlbnRlciBvZiB5b3VyIHZpZXdcbiAgICAgICAgbW91c2UuY3VycmVudC54ID0gMFxuICAgICAgICBtb3VzZS5jdXJyZW50LnkgPSAwXG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBXaGVuIG5vdCBpbiBwb2ludGVyIGxvY2ssIHVzZSByZWd1bGFyIG1vdXNlIGNvb3JkaW5hdGVzXG4gICAgICAgIG1vdXNlLmN1cnJlbnQueCA9IChlLmNsaWVudFggLyBnbC5kb21FbGVtZW50LmNsaWVudFdpZHRoKSAqIDIgLSAxXG4gICAgICAgIG1vdXNlLmN1cnJlbnQueSA9IC0oZS5jbGllbnRZIC8gZ2wuZG9tRWxlbWVudC5jbGllbnRIZWlnaHQpICogMiArIDFcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgY29uc3QgaGFuZGxlS2V5VXAgPSAoZTogS2V5Ym9hcmRFdmVudCkgPT4ge1xuICAgICAgaWYgKGUua2V5ID09PSAnU2hpZnQnKSB7XG4gICAgICAgIHdpbmRvdy5fX3NoaWZ0S2V5UHJlc3NlZCA9IGZhbHNlO1xuICAgICAgfVxuICAgIH07XG4gICAgXG4gICAgLy8gQ2xlYXIgc2hpZnQga2V5IHN0YXRlIHdoZW4gd2luZG93IGxvc2VzIGZvY3VzXG4gICAgY29uc3QgaGFuZGxlQmx1ciA9ICgpID0+IHtcbiAgICAgIHdpbmRvdy5fX3NoaWZ0S2V5UHJlc3NlZCA9IGZhbHNlO1xuICAgIH07XG4gICAgXG4gICAgLy8gSGFuZGxlIGtleWJvYXJkIGV2ZW50cyAoZGVsZXRlLCBzaGlmdCBrZXkpXG4gICAgY29uc3QgaGFuZGxlS2V5RG93biA9IChlOiBLZXlib2FyZEV2ZW50KSA9PiB7XG4gICAgICAvLyBTaGlmdCBrZXkgaGFuZGxpbmdcbiAgICAgIGlmIChlLmtleSA9PT0gJ1NoaWZ0Jykge1xuICAgICAgICB3aW5kb3cuX19zaGlmdEtleVByZXNzZWQgPSB0cnVlO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIERlbGV0aW5nIHRoZSBzZWxlY3RlZCBvYmplY3Qgd2l0aCBiYWNrc3BhY2Ugb3IgZGVsZXRlXG4gICAgICBpZiAoKGUua2V5ID09PSAnQmFja3NwYWNlJyB8fCBlLmtleSA9PT0gJ0RlbGV0ZScpICYmIHNlbGVjdGVkT2JqZWN0ICYmICFpc1VJRm9jdXNlZCkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7IC8vIFByZXZlbnQgYnJvd3NlciBuYXZpZ2F0aW9uXG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7IC8vIFN0b3Agb3RoZXIgaGFuZGxlcnNcbiAgICAgICAgY29uc29sZS5sb2coXCJEZWxldGluZyBzZWxlY3RlZCBvYmplY3Q6XCIsIHNlbGVjdGVkT2JqZWN0LnVzZXJEYXRhPy5uYW1lKTtcbiAgICAgICAgXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgLy8gTWFyayB0aGF0IHdlJ3JlIGluIGEgZGVsZXRpb24gcHJvY2Vzc1xuICAgICAgICAgIHNldElzRGVsZXRpbmcodHJ1ZSk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gR2V0IHRoZSBvYmplY3QncyBJRCBmb3IgcmVtb3ZhbCBmcm9tIHN0b3JlXG4gICAgICAgICAgY29uc3Qgb2JqZWN0SWQgPSBzZWxlY3RlZE9iamVjdC51c2VyRGF0YT8uaWQgfHwgc2VsZWN0ZWRPYmplY3QudXVpZDtcbiAgICAgICAgICBjb25zdCBvYmplY3RUb1JlbW92ZSA9IHNlbGVjdGVkT2JqZWN0OyAvLyBLZWVwIGEgcmVmZXJlbmNlIHRvIHRoZSBvYmplY3RcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBGaXJzdCBjbGVhbiB1cCBhbnkgbWF0ZXJpYWwgcmVmZXJlbmNlcyB0byBwcmV2ZW50IG1lbW9yeSBsZWFrc1xuICAgICAgICAgIGNvbnN0IGNsZWFudXBPYmplY3QgPSAob2JqOiBUSFJFRS5PYmplY3QzRCkgPT4ge1xuICAgICAgICAgICAgaWYgKG9iaiBpbnN0YW5jZW9mIFRIUkVFLk1lc2gpIHtcbiAgICAgICAgICAgICAgLy8gQ2xlYW4gdXAgZnJvbSBvcmlnaW5hbCBtYXRlcmlhbHMgbWFwXG4gICAgICAgICAgICAgIGlmIChvcmlnaW5hbE1hdGVyaWFscy5jdXJyZW50LmhhcyhvYmopKSB7XG4gICAgICAgICAgICAgICAgb3JpZ2luYWxNYXRlcmlhbHMuY3VycmVudC5kZWxldGUob2JqKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgLy8gQ2xlYW4gdXAgZnJvbSBob3ZlcmVkIG1hdGVyaWFscyBtYXBcbiAgICAgICAgICAgICAgaWYgKGhvdmVyZWRNYXRlcmlhbHMuY3VycmVudC5oYXMob2JqKSkge1xuICAgICAgICAgICAgICAgIGhvdmVyZWRNYXRlcmlhbHMuY3VycmVudC5kZWxldGUob2JqKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgLy8gRGlzcG9zZSBvZiBnZW9tZXRyeSBhbmQgbWF0ZXJpYWxzIHRvIHByZXZlbnQgbWVtb3J5IGxlYWtzXG4gICAgICAgICAgICAgIGlmIChvYmouZ2VvbWV0cnkpIHtcbiAgICAgICAgICAgICAgICBvYmouZ2VvbWV0cnkuZGlzcG9zZSgpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICBpZiAob2JqLm1hdGVyaWFsKSB7XG4gICAgICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkob2JqLm1hdGVyaWFsKSkge1xuICAgICAgICAgICAgICAgICAgb2JqLm1hdGVyaWFsLmZvckVhY2gobWF0ID0+IG1hdC5kaXNwb3NlKCkpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICBvYmoubWF0ZXJpYWwuZGlzcG9zZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBQcm9jZXNzIGNoaWxkcmVuXG4gICAgICAgICAgICBbLi4ub2JqLmNoaWxkcmVuXS5mb3JFYWNoKGNoaWxkID0+IHtcbiAgICAgICAgICAgICAgY2xlYW51cE9iamVjdChjaGlsZCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9O1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIENsZWFuIHVwIHJlc291cmNlc1xuICAgICAgICAgIGNsZWFudXBPYmplY3Qob2JqZWN0VG9SZW1vdmUpO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIENsZWFyIHRoZSBzZWxlY3Rpb24gYmVmb3JlIHJlbW92aW5nIHRoZSBvYmplY3RcbiAgICAgICAgICAvLyBVc2UgZGlyZWN0IHN0YXRlIHNldHRpbmcgdG8gYXZvaWQgY2lyY3VsYXIgdXBkYXRlIGlzc3Vlc1xuICAgICAgICAgIHVzZUFwcFN0b3JlLnNldFN0YXRlKHsgc2VsZWN0ZWRPYmplY3Q6IG51bGwgfSk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gQnJlYWsgdGhlIHVwZGF0ZSBjeWNsZSBieSB3YWl0aW5nIGEgdGlja1xuICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgLy8gUmVtb3ZlIGZyb20gcGFyZW50IChzY2VuZSkgLSBkbyB0aGlzIGluc2lkZSB0aW1lb3V0IHRvIGJyZWFrIGxvb3BcbiAgICAgICAgICAgICAgaWYgKG9iamVjdFRvUmVtb3ZlLnBhcmVudCkge1xuICAgICAgICAgICAgICAgIG9iamVjdFRvUmVtb3ZlLnBhcmVudC5yZW1vdmUob2JqZWN0VG9SZW1vdmUpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIFJlbW92ZSBhbnkgZ2xvYmFsIHJlZmVyZW5jZXNcbiAgICAgICAgICAgICAgICBpZiAod2luZG93Ll9fb2JqZWN0UmVmZXJlbmNlcykge1xuICAgICAgICAgICAgICAgICAgd2luZG93Ll9fb2JqZWN0UmVmZXJlbmNlcy5kZWxldGUob2JqZWN0SWQpO1xuICAgICAgICAgICAgICAgICAgd2luZG93Ll9fb2JqZWN0UmVmZXJlbmNlcy5kZWxldGUoYCR7b2JqZWN0SWR9X2dlb21ldHJ5YCk7XG4gICAgICAgICAgICAgICAgICB3aW5kb3cuX19vYmplY3RSZWZlcmVuY2VzLmRlbGV0ZShgJHtvYmplY3RJZH1fbWF0ZXJpYWxgKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgIC8vIENsZWFyIGhvdmVyIHN0YXRlIGlmIG5lZWRlZFxuICAgICAgICAgICAgICBpZiAoaG92ZXJlZE9iamVjdCA9PT0gb2JqZWN0VG9SZW1vdmUpIHtcbiAgICAgICAgICAgICAgICBzZXRIb3ZlcmVkT2JqZWN0KG51bGwpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAvLyBSZW1vdmUgZnJvbSBvYmplY3Qgc3RvcmUgdG8gcHJldmVudCByZWNyZWF0aW9uXG4gICAgICAgICAgICAgIC8vIFRoZSBzdG9yZSB3aWxsIGhhbmRsZSByZXNldHRpbmcgaXNEZWxldGluZ1xuICAgICAgICAgICAgICByZW1vdmVPYmplY3Qob2JqZWN0SWQpO1xuICAgICAgICAgICAgfSBjYXRjaCAoaW5uZXJFcnJvcikge1xuICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgaW4gZGVsZXRlIHRpbWVvdXQgY2FsbGJhY2s6XCIsIGlubmVyRXJyb3IpO1xuICAgICAgICAgICAgICAvLyBNYWtlIHN1cmUgd2UgcmVzZXQgdGhlIGRlbGV0aW5nIGZsYWdcbiAgICAgICAgICAgICAgdXNlQXBwU3RvcmUuc2V0U3RhdGUoeyBpc0RlbGV0aW5nOiBmYWxzZSB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LCAwKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZGVsZXRpbmcgb2JqZWN0OlwiLCBlcnJvcik7XG4gICAgICAgICAgLy8gTWFrZSBzdXJlIHdlIHJlc2V0IHRoZSBkZWxldGluZyBmbGFnXG4gICAgICAgICAgdXNlQXBwU3RvcmUuc2V0U3RhdGUoeyBpc0RlbGV0aW5nOiBmYWxzZSB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gICAgXG4gICAgLy8gVHJhY2sgY2xpY2tzIGZvciBzZWxlY3Rpb25cbiAgICBjb25zdCBoYW5kbGVDbGljayA9IChlOiBNb3VzZUV2ZW50KSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICAvLyBDaGVjayBpZiBUcmFuc2Zvcm1Db250cm9scyBpcyBoYW5kbGluZyB0aGlzIGV2ZW50XG4gICAgICAgIGlmICh3aW5kb3cuX190cmFuc2Zvcm1Db250cm9sc0FjdGl2ZSkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKFwiT2JqZWN0SGlnaGxpZ2h0ZXI6IFNraXBwaW5nIGNsaWNrIGJlY2F1c2UgVHJhbnNmb3JtQ29udHJvbHMgaXMgYWN0aXZlXCIpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gSWYgd2UncmUgbm90IGluIHBvaW50ZXIgbG9jayBtb2RlIGFuZCBjbGlja2luZyBvbiBVSSwgZG9uJ3QgcHJvY2Vzc1xuICAgICAgICBpZiAoIWlzUG9pbnRlckxvY2tlZC5jdXJyZW50ICYmIGUudGFyZ2V0ICE9PSBnbC5kb21FbGVtZW50KSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBpZiAoaG92ZXJlZE9iamVjdCAmJiBvbk9iamVjdFNlbGVjdGVkICYmICFpc1VJRm9jdXNlZCkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKFwiT2JqZWN0SGlnaGxpZ2h0ZXI6IGNsaWNrIG9uIG9iamVjdFwiLCBob3ZlcmVkT2JqZWN0LnVzZXJEYXRhPy5uYW1lIHx8ICd1bm5hbWVkJywgXCJ1dWlkOlwiLCBob3ZlcmVkT2JqZWN0LnV1aWQpO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIEltcHJvdmVkIFNoaWZ0K0NsaWNrIGJlaGF2aW9yIGZvciBzZWxlY3RpbmcgZGlyZWN0IGNoaWxkcmVuXG4gICAgICAgICAgY29uc3QgaXNTaGlmdEtleVByZXNzZWQgPSB3aW5kb3cuX19zaGlmdEtleVByZXNzZWQgPT09IHRydWU7XG4gICAgICAgICAgaWYgKGlzU2hpZnRLZXlQcmVzc2VkKSB7XG4gICAgICAgICAgICBsZXQgdGFyZ2V0T2JqZWN0ID0gaG92ZXJlZE9iamVjdDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gTG9nIHRoZSBwYXJlbnQgb2JqZWN0J3Mgc3RydWN0dXJlIGZvciBkZWJ1Z2dpbmdcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiSG92ZXJlZCBvYmplY3Q6XCIsIGhvdmVyZWRPYmplY3QudXNlckRhdGE/Lm5hbWUgfHwgJ3VubmFtZWQnLCBcbiAgICAgICAgICAgICAgICAgICAgICAgIFwidHlwZTpcIiwgaG92ZXJlZE9iamVjdCBpbnN0YW5jZW9mIFRIUkVFLkdyb3VwID8gJ0dyb3VwJyA6IFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhvdmVyZWRPYmplY3QgaW5zdGFuY2VvZiBUSFJFRS5NZXNoID8gJ01lc2gnIDogJ09iamVjdDNEJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIFwidXVpZDpcIiwgaG92ZXJlZE9iamVjdC51dWlkKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gT05MWSBwcm9jZWVkIGlmIHRoZSBob3ZlcmVkIG9iamVjdCBhY3R1YWxseSBoYXMgY2hpbGRyZW4gKGxpa2UgYSBHcm91cClcbiAgICAgICAgICAgIGlmIChob3ZlcmVkT2JqZWN0LmNoaWxkcmVuICYmIGhvdmVyZWRPYmplY3QuY2hpbGRyZW4ubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkRpcmVjdCBjaGlsZHJlbiBjb3VudDpcIiwgaG92ZXJlZE9iamVjdC5jaGlsZHJlbi5sZW5ndGgpO1xuICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgLy8gU1RSSUNUIEZJTFRFUjogT25seSBjb25zaWRlciBESVJFQ1QgY2hpbGRyZW4gYW5kIGVuc3VyZSB0aGV5J3JlIHVzZXItY3JlYXRlZFxuICAgICAgICAgICAgICBjb25zdCBkaXJlY3RDaGlsZHJlbiA9IGhvdmVyZWRPYmplY3QuY2hpbGRyZW4uZmlsdGVyKGNoaWxkID0+IFxuICAgICAgICAgICAgICAgIChjaGlsZC51c2VyRGF0YT8uaXNVc2VyQ3JlYXRlZCB8fCBjaGlsZC51c2VyRGF0YT8uaXNTZXJpYWxpemVkRnJvbUNvZGUpICYmXG4gICAgICAgICAgICAgICAgKGNoaWxkIGluc3RhbmNlb2YgVEhSRUUuR3JvdXAgfHwgY2hpbGQgaW5zdGFuY2VvZiBUSFJFRS5NZXNoIHx8IGNoaWxkIGluc3RhbmNlb2YgVEhSRUUuT2JqZWN0M0QpXG4gICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgICBpZiAoZGlyZWN0Q2hpbGRyZW4ubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiVXNlci1jcmVhdGVkIGRpcmVjdCBjaGlsZHJlbjpcIiwgZGlyZWN0Q2hpbGRyZW4ubWFwKGMgPT4gKHtcbiAgICAgICAgICAgICAgICAgIG5hbWU6IGMudXNlckRhdGE/Lm5hbWUgfHwgJ3VubmFtZWQnLFxuICAgICAgICAgICAgICAgICAgdHlwZTogYyBpbnN0YW5jZW9mIFRIUkVFLkdyb3VwID8gJ0dyb3VwJyA6IGMgaW5zdGFuY2VvZiBUSFJFRS5NZXNoID8gJ01lc2gnIDogJ09iamVjdDNEJ1xuICAgICAgICAgICAgICAgIH0pKSk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gTkVXOiBVc2UgcmF5Y2FzdGluZyB0byBkZXRlcm1pbmUgd2hpY2ggZGlyZWN0IGNoaWxkIHRvIHNlbGVjdFxuICAgICAgICAgICAgICAgIC8vIFJheWNhc3RpbmcgYWdhaW5zdCBqdXN0IHRoZSBkaXJlY3QgY2hpbGRyZW5cbiAgICAgICAgICAgICAgICBjb25zdCBjaGlsZFJheWNhc3RlciA9IG5ldyBUSFJFRS5SYXljYXN0ZXIoKTtcbiAgICAgICAgICAgICAgICBjaGlsZFJheWNhc3Rlci5zZXRGcm9tQ2FtZXJhKG1vdXNlLmN1cnJlbnQsIGNhbWVyYSk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gT25seSByYXljYXN0IGFnYWluc3QgZGlyZWN0IGNoaWxkcmVuIG9mIHRoZSBob3ZlcmVkIG9iamVjdFxuICAgICAgICAgICAgICAgIGNvbnN0IGNoaWxkSW50ZXJzZWN0cyA9IGNoaWxkUmF5Y2FzdGVyLmludGVyc2VjdE9iamVjdHMoZGlyZWN0Q2hpbGRyZW4sIHRydWUpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmIChjaGlsZEludGVyc2VjdHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgLy8gRmluZCB0aGUgZmlyc3QgaW50ZXJzZWN0ZWQgb2JqZWN0IHRoYXQncyBhIGRpcmVjdCBjaGlsZCBvciBhIGRlc2NlbmRhbnQgb2YgYSBkaXJlY3QgY2hpbGRcbiAgICAgICAgICAgICAgICAgIGxldCBpbnRlcnNlY3RlZERpcmVjdENoaWxkID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBpbnRlcnNlY3Qgb2YgY2hpbGRJbnRlcnNlY3RzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGhpdE9iamVjdCA9IGludGVyc2VjdC5vYmplY3Q7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiB0aGlzIGlzIGEgZGlyZWN0IGNoaWxkXG4gICAgICAgICAgICAgICAgICAgIGlmIChkaXJlY3RDaGlsZHJlbi5pbmNsdWRlcyhoaXRPYmplY3QpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgaW50ZXJzZWN0ZWREaXJlY3RDaGlsZCA9IGhpdE9iamVjdDtcbiAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgbm90IGEgZGlyZWN0IGNoaWxkLCBmaW5kIHdoaWNoIGRpcmVjdCBjaGlsZCBpcyBhbiBhbmNlc3RvclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGRpcmVjdENoaWxkIG9mIGRpcmVjdENoaWxkcmVuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgaWYgKGlzRGVzY2VuZGFudE9mKGhpdE9iamVjdCwgZGlyZWN0Q2hpbGQpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbnRlcnNlY3RlZERpcmVjdENoaWxkID0gZGlyZWN0Q2hpbGQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbnRlcnNlY3RlZERpcmVjdENoaWxkKSBicmVhaztcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgaWYgKGludGVyc2VjdGVkRGlyZWN0Q2hpbGQpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gV2UgZm91bmQgYSBkaXJlY3QgY2hpbGQgdGhhdCB3YXMgaGl0IGJ5IHRoZSByYXlcbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0T2JqZWN0ID0gaW50ZXJzZWN0ZWREaXJlY3RDaGlsZDtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJSYXljYXN0IGhpdCBkaXJlY3QgY2hpbGQ6XCIsIHRhcmdldE9iamVjdC51c2VyRGF0YT8ubmFtZSB8fCAndW5uYW1lZCcpO1xuICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gRmFsbGJhY2s6IEZpcnN0IHRyeSB0byBmaW5kIGEgR3JvdXAgYW1vbmcgZGlyZWN0IGNoaWxkcmVuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRpcmVjdEdyb3VwQ2hpbGQgPSBkaXJlY3RDaGlsZHJlbi5maW5kKGMgPT4gYyBpbnN0YW5jZW9mIFRIUkVFLkdyb3VwKTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgIGlmIChkaXJlY3RHcm91cENoaWxkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0T2JqZWN0ID0gZGlyZWN0R3JvdXBDaGlsZDtcbiAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkZhbGxiYWNrIHRvIGRpcmVjdCBHUk9VUCBjaGlsZDpcIiwgdGFyZ2V0T2JqZWN0LnVzZXJEYXRhPy5uYW1lIHx8ICd1bm5hbWVkJyk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgLy8gT3RoZXJ3aXNlIGp1c3QgcGljayB0aGUgZmlyc3QgZGlyZWN0IGNoaWxkXG4gICAgICAgICAgICAgICAgICAgICAgdGFyZ2V0T2JqZWN0ID0gZGlyZWN0Q2hpbGRyZW5bMF07XG4gICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJGYWxsYmFjayB0byBmaXJzdCBkaXJlY3QgY2hpbGQ6XCIsIHRhcmdldE9iamVjdC51c2VyRGF0YT8ubmFtZSB8fCAndW5uYW1lZCcpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIC8vIEZhbGxiYWNrIGlmIHJheWNhc3RpbmcgZGlkbid0IGhpdCBhbnl0aGluZ1xuICAgICAgICAgICAgICAgICAgY29uc3QgZGlyZWN0R3JvdXBDaGlsZCA9IGRpcmVjdENoaWxkcmVuLmZpbmQoYyA9PiBjIGluc3RhbmNlb2YgVEhSRUUuR3JvdXApO1xuICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICBpZiAoZGlyZWN0R3JvdXBDaGlsZCkge1xuICAgICAgICAgICAgICAgICAgICB0YXJnZXRPYmplY3QgPSBkaXJlY3RHcm91cENoaWxkO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIk5vIHJheWNhc3QgaGl0LCB1c2luZyBmaXJzdCBHUk9VUCBjaGlsZFwiKTtcbiAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHRhcmdldE9iamVjdCA9IGRpcmVjdENoaWxkcmVuWzBdO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIk5vIHJheWNhc3QgaGl0LCB1c2luZyBmaXJzdCBjaGlsZFwiKTtcbiAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJObyBzdWl0YWJsZSBkaXJlY3QgY2hpbGRyZW4gZm91bmQsIGtlZXBpbmcgaG92ZXJlZCBvYmplY3RcIik7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiSG92ZXJlZCBvYmplY3QgaGFzIG5vIGNoaWxkcmVuLCBrZWVwaW5nIGl0IGFzIHRhcmdldFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gRG91YmxlLWNoZWNrIHdlIGhhdmUgYSB2YWxpZCBvYmplY3QgdG8gc2VsZWN0XG4gICAgICAgICAgICBpZiAodGFyZ2V0T2JqZWN0ICYmICh0YXJnZXRPYmplY3QudXNlckRhdGE/LmlzVXNlckNyZWF0ZWQgfHwgdGFyZ2V0T2JqZWN0LnVzZXJEYXRhPy5pc1NlcmlhbGl6ZWRGcm9tQ29kZSkpIHtcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJGaW5hbCBzaGlmdCtjbGljayBzZWxlY3Rpb246XCIsIHRhcmdldE9iamVjdC51c2VyRGF0YT8ubmFtZSB8fCAndW5uYW1lZCcsIFwidXVpZDpcIiwgdGFyZ2V0T2JqZWN0LnV1aWQpO1xuICAgICAgICAgICAgICBvbk9iamVjdFNlbGVjdGVkKHRhcmdldE9iamVjdCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBjb25zb2xlLndhcm4oXCJObyB2YWxpZCBvYmplY3QgdG8gc2VsZWN0XCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICAvLyBTVEFOREFSRCBCRUhBVklPUjogTG9vayBmb3IgYSBwYXJlbnQgZ3JvdXAgZmlyc3QgKHVuY2hhbmdlZClcbiAgICAgICAgICBsZXQgdGFyZ2V0T2JqZWN0ID0gaG92ZXJlZE9iamVjdDtcbiAgICAgICAgICBsZXQgZm91bmQgPSBmYWxzZTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBUcmF2ZXJzZSB1cCB0aGUgcGFyZW50IGNoYWluIHRvIGZpbmQgYSB1c2VyLWNyZWF0ZWQgZ3JvdXBcbiAgICAgICAgICBsZXQgY3VycmVudE9iaiA9IGhvdmVyZWRPYmplY3Q7XG4gICAgICAgICAgd2hpbGUgKGN1cnJlbnRPYmoucGFyZW50ICYmICEoY3VycmVudE9iai5wYXJlbnQgaW5zdGFuY2VvZiBUSFJFRS5TY2VuZSkpIHtcbiAgICAgICAgICAgIGlmICgoY3VycmVudE9iai5wYXJlbnQudXNlckRhdGE/LmlzVXNlckNyZWF0ZWQgfHwgY3VycmVudE9iai5wYXJlbnQudXNlckRhdGE/LmlzU2VyaWFsaXplZEZyb21Db2RlKSAmJlxuICAgICAgICAgICAgICAgIGN1cnJlbnRPYmoucGFyZW50IGluc3RhbmNlb2YgVEhSRUUuR3JvdXApIHtcbiAgICAgICAgICAgICAgdGFyZ2V0T2JqZWN0ID0gY3VycmVudE9iai5wYXJlbnQ7XG4gICAgICAgICAgICAgIGZvdW5kID0gdHJ1ZTtcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coYFVzaW5nIHBhcmVudCBncm91cCBmb3Igc2VsZWN0aW9uOiAke3RhcmdldE9iamVjdC51c2VyRGF0YT8ubmFtZSB8fCAndW5uYW1lZCd9YCk7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY3VycmVudE9iaiA9IGN1cnJlbnRPYmoucGFyZW50O1xuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICAvLyBJZiB3ZSBkaWRuJ3QgZmluZCBhIHN1aXRhYmxlIHBhcmVudCBncm91cCwgY2hlY2sgaWYgdGhlIGNsaWNrZWQgb2JqZWN0IGlzIHZhbGlkXG4gICAgICAgICAgaWYgKCFmb3VuZCkge1xuICAgICAgICAgICAgaWYgKCEodGFyZ2V0T2JqZWN0LnVzZXJEYXRhPy5pc1VzZXJDcmVhdGVkIHx8IHRhcmdldE9iamVjdC51c2VyRGF0YT8uaXNTZXJpYWxpemVkRnJvbUNvZGUpKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUud2FybihcIk9ubHkgdXNlci1jcmVhdGVkIG9iamVjdHMgY2FuIGJlIHRyYW5zZm9ybWVkXCIpO1xuICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIC8vIElmIGNsaWNraW5nIHRoZSBhbHJlYWR5IHNlbGVjdGVkIG9iamVjdCwgZGVzZWxlY3QgaXRcbiAgICAgICAgICBjb25zdCBvYmplY3RJZCA9IHRhcmdldE9iamVjdC51c2VyRGF0YT8uaWQgfHwgdGFyZ2V0T2JqZWN0LnV1aWQ7XG4gICAgICAgICAgY29uc3Qgc2VsZWN0ZWRPYmplY3RJZCA9IHNlbGVjdGVkT2JqZWN0Py51c2VyRGF0YT8uaWQgfHwgc2VsZWN0ZWRPYmplY3Q/LnV1aWQ7XG4gICAgICAgICAgXG4gICAgICAgICAgaWYgKHNlbGVjdGVkT2JqZWN0ICYmIG9iamVjdElkID09PSBzZWxlY3RlZE9iamVjdElkKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIkNsaWNrZWQgYWxyZWFkeSBzZWxlY3RlZCBvYmplY3QsIGRlc2VsZWN0aW5nXCIpO1xuICAgICAgICAgICAgb25PYmplY3RTZWxlY3RlZChudWxsKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgY29uc29sZS5sb2coYFNlbGVjdGluZyBvYmplY3Q6IGlkPSR7b2JqZWN0SWR9LCB0eXBlPSR7dGFyZ2V0T2JqZWN0IGluc3RhbmNlb2YgVEhSRUUuR3JvdXAgPyAnR3JvdXAnIDogJ01lc2gnfWApO1xuICAgICAgICAgIC8vIE9ubHkgc2V0IGlmIGl0J3MgZGlmZmVyZW50IHRvIGF2b2lkIHVubmVjZXNzYXJ5IHVwZGF0ZXNcbiAgICAgICAgICBpZiAoIXNlbGVjdGVkT2JqZWN0IHx8IG9iamVjdElkICE9PSBzZWxlY3RlZE9iamVjdElkKSB7XG4gICAgICAgICAgICBvbk9iamVjdFNlbGVjdGVkKHRhcmdldE9iamVjdCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgaW4gaGFuZGxlQ2xpY2s6XCIsIGVycm9yKTtcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLy8gVHJhY2sgZG91YmxlIGNsaWNrcyBmb3IgdHJhbnNmb3JtIGNvbnRyb2wgbW9kZSBjeWNsaW5nXG4gICAgY29uc3QgaGFuZGxlRG91YmxlQ2xpY2sgPSAoKSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICAvLyBDaGVjayBpZiBUcmFuc2Zvcm1Db250cm9scyBpcyBoYW5kbGluZyB0aGlzIGV2ZW50XG4gICAgICAgIGlmICh3aW5kb3cuX190cmFuc2Zvcm1Db250cm9sc0FjdGl2ZSkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKFwiT2JqZWN0SGlnaGxpZ2h0ZXI6IFNraXBwaW5nIGRvdWJsZS1jbGljayBiZWNhdXNlIFRyYW5zZm9ybUNvbnRyb2xzIGlzIGFjdGl2ZVwiKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIE9ubHkgcHJvY2VzcyBpZiB3ZSBoYXZlIGEgaG92ZXJlZCBvYmplY3Qgd2l0aCBhIGRvdWJsZSBjbGljayBoYW5kbGVyXG4gICAgICAgIGlmIChob3ZlcmVkT2JqZWN0ICYmICFpc1VJRm9jdXNlZCkge1xuICAgICAgICAgIC8vIERvdWJsZS1jbGljayBzaG91bGQgb25seSB3b3JrIG9uIHNlbGVjdGVkIG9iamVjdHNcbiAgICAgICAgICBpZiAoaG92ZXJlZE9iamVjdCA9PT0gc2VsZWN0ZWRPYmplY3QgJiYgaG92ZXJlZE9iamVjdC51c2VyRGF0YT8uZG91YmxlQ2xpY2tIYW5kbGVyKSB7XG4gICAgICAgICAgICAvLyBDYWxsIHRoZSBkb3VibGUgY2xpY2sgaGFuZGxlciBhdHRhY2hlZCBieSB0aGUgQ3VzdG9tVHJhbnNmb3JtQ29udHJvbHNcbiAgICAgICAgICAgIGhvdmVyZWRPYmplY3QudXNlckRhdGEuZG91YmxlQ2xpY2tIYW5kbGVyKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgaW4gaGFuZGxlRG91YmxlQ2xpY2s6XCIsIGVycm9yKTtcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIGhhbmRsZU1vdXNlTW92ZSlcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBoYW5kbGVDbGljaylcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignZGJsY2xpY2snLCBoYW5kbGVEb3VibGVDbGljaylcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGhhbmRsZUtleURvd24pXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgaGFuZGxlS2V5VXApXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2JsdXInLCBoYW5kbGVCbHVyKVxuICAgIFxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgaGFuZGxlTW91c2VNb3ZlKVxuICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaGFuZGxlQ2xpY2spXG4gICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignZGJsY2xpY2snLCBoYW5kbGVEb3VibGVDbGljaylcbiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgaGFuZGxlS2V5RG93bilcbiAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXl1cCcsIGhhbmRsZUtleVVwKVxuICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2JsdXInLCBoYW5kbGVCbHVyKVxuICAgIH1cbiAgfSwgW2dsLCBob3ZlcmVkT2JqZWN0LCBvbk9iamVjdFNlbGVjdGVkLCBpc1VJRm9jdXNlZCwgc2VsZWN0ZWRPYmplY3QsIHJlbW92ZU9iamVjdCwgc2V0SXNEZWxldGluZ10pXG4gIFxuICAvLyBSZXNldCB3aGVuIHBvaW50ZXIgbG9jayBjaGFuZ2VzXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgaGFuZGxlUG9pbnRlckxvY2tDaGFuZ2UgPSAoKSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBpc1BvaW50ZXJMb2NrZWQuY3VycmVudCA9IGRvY3VtZW50LnBvaW50ZXJMb2NrRWxlbWVudCA9PT0gZ2wuZG9tRWxlbWVudFxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGluIGhhbmRsZVBvaW50ZXJMb2NrQ2hhbmdlOlwiLCBlcnJvcik7XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJsb2NrY2hhbmdlJywgaGFuZGxlUG9pbnRlckxvY2tDaGFuZ2UpXG4gICAgXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJsb2NrY2hhbmdlJywgaGFuZGxlUG9pbnRlckxvY2tDaGFuZ2UpXG4gICAgfVxuICB9LCBbZ2xdKVxuICBcbiAgLy8gVXNpbmcgdXNlRnJhbWUgdG8gcGVyZm9ybSByYXljYXN0aW5nIG9uIGVhY2ggZnJhbWVcbiAgdXNlRnJhbWUoKCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICAvLyBTa2lwIGlmIFVJIGlzIGZvY3VzZWRcbiAgICAgIGlmIChpc1VJRm9jdXNlZCkge1xuICAgICAgICBzZXRIb3ZlcmVkT2JqZWN0KG51bGwpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIFVwZGF0ZSB0aGUgcmF5Y2FzdGVyXG4gICAgICByYXljYXN0ZXIuY3VycmVudC5zZXRGcm9tQ2FtZXJhKG1vdXNlLmN1cnJlbnQsIGNhbWVyYSlcbiAgICAgIFxuICAgICAgLy8gRmlsdGVyIGZvciBtZXNoZXMgYW5kIGdyb3VwcyB0aGF0IGFyZSB1c2VyIGNyZWF0ZWQsIGV4Y2x1ZGluZyBhbnkgc3BlY2lmaWVkIG9iamVjdHNcbiAgICAgIGNvbnN0IGZpbHRlckZ1bmN0aW9uID0gKG9iajogVEhSRUUuT2JqZWN0M0QpID0+IHtcbiAgICAgICAgcmV0dXJuIChvYmogaW5zdGFuY2VvZiBUSFJFRS5NZXNoIHx8IG9iaiBpbnN0YW5jZW9mIFRIUkVFLkdyb3VwKSAmJiBcbiAgICAgICAgICAgICAgICFleGNsdWRlT2JqZWN0cy5pbmNsdWRlcyhvYmopICYmIFxuICAgICAgICAgICAgICAgb2JqLnVzZXJEYXRhICYmIFxuICAgICAgICAgICAgICAgKG9iai51c2VyRGF0YS5pc1VzZXJDcmVhdGVkIHx8IG9iai51c2VyRGF0YS5pc1NlcmlhbGl6ZWRGcm9tQ29kZSk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIEZpbmQgaW50ZXJzZWN0ZWQgb2JqZWN0cyAtIEJWSCBhY2NlbGVyYXRlZCB0aHJvdWdoIERyZWkncyBCdmggY29tcG9uZW50XG4gICAgICAvLyBXaGVuIG9iamVjdHMgYXJlIHdyYXBwZWQgaW4gPEJ2aD4sIHRoaXMgcmF5Y2FzdGluZyBiZWNvbWVzIG11Y2ggZmFzdGVyXG4gICAgICBjb25zdCBpbnRlcnNlY3RzID0gcmF5Y2FzdGVyLmN1cnJlbnQuaW50ZXJzZWN0T2JqZWN0cyhzY2VuZS5jaGlsZHJlbiwgdHJ1ZSlcbiAgICAgICAgLmZpbHRlcihpbnRlcnNlY3QgPT4ge1xuICAgICAgICAgIC8vIEZpcnN0LCBpZiB0aGUgaW50ZXJzZWN0ZWQgb2JqZWN0IGlzIGRpcmVjdGx5IHVzYWJsZSwgdXNlIGl0XG4gICAgICAgICAgY29uc3QgaW50ZXJzZWN0ZWRPYmogPSBpbnRlcnNlY3Qub2JqZWN0O1xuICAgICAgICAgIFxuICAgICAgICAgIGlmIChmaWx0ZXJGdW5jdGlvbihpbnRlcnNlY3RlZE9iaikpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICAvLyBPdGhlcndpc2UsIHRyeSB0byBmaW5kIGFuIGFwcHJvcHJpYXRlIHBhcmVudFxuICAgICAgICAgIC8vIFRoaXMgaGFuZGxlcyB0aGUgY2FzZSB3aGVyZSBhIGNoaWxkIG9mIGEgZ3JvdXAgaXMgaW50ZXJzZWN0ZWRcbiAgICAgICAgICBsZXQgY3VycmVudFBhcmVudCA9IGludGVyc2VjdGVkT2JqLnBhcmVudDtcbiAgICAgICAgICB3aGlsZSAoY3VycmVudFBhcmVudCkge1xuICAgICAgICAgICAgaWYgKGZpbHRlckZ1bmN0aW9uKGN1cnJlbnRQYXJlbnQpKSB7XG4gICAgICAgICAgICAgIC8vIEltcG9ydGFudDogd2UgcmVwbGFjZSB0aGUgb2JqZWN0IGluIHRoZSBpbnRlcnNlY3Rpb24gZGF0YVxuICAgICAgICAgICAgICAvLyB3aXRoIHRoZSBwYXJlbnQgZ3JvdXAgdG8gZW5zdXJlIHdlIG9wZXJhdGUgb24gdGhlIGNvcnJlY3Qgb2JqZWN0XG4gICAgICAgICAgICAgIGludGVyc2VjdC5vYmplY3QgPSBjdXJyZW50UGFyZW50O1xuICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGN1cnJlbnRQYXJlbnQgPSBjdXJyZW50UGFyZW50LnBhcmVudDtcbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9KTtcbiAgICAgIFxuICAgICAgLy8gSGFuZGxlIG9iamVjdCB1bmRlciBjdXJzb3JcbiAgICAgIGlmIChpbnRlcnNlY3RzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29uc3QgaW50ZXJzZWN0ZWRPYmplY3QgPSBpbnRlcnNlY3RzWzBdLm9iamVjdDtcbiAgICAgICAgXG4gICAgICAgIC8vIEZpbmQgdG9wLWxldmVsIHVzZXItY3JlYXRlZCBwYXJlbnQgdG8gdXNlIGFzIGhvdmVyZWQgb2JqZWN0XG4gICAgICAgIC8vIFRoaXMgZW5zdXJlcyB3ZSBhbHdheXMgc3RhcnQgd2l0aCB0aGUgaGlnaGVzdCBsZXZlbCBncm91cFxuICAgICAgICBsZXQgdG9wTGV2ZWxPYmplY3QgPSBpbnRlcnNlY3RlZE9iamVjdDtcbiAgICAgICAgbGV0IGN1cnJlbnRPYmogPSBpbnRlcnNlY3RlZE9iamVjdDtcbiAgICAgICAgXG4gICAgICAgIHdoaWxlIChjdXJyZW50T2JqLnBhcmVudCAmJiAhKGN1cnJlbnRPYmoucGFyZW50IGluc3RhbmNlb2YgVEhSRUUuU2NlbmUpKSB7XG4gICAgICAgICAgaWYgKChjdXJyZW50T2JqLnBhcmVudC51c2VyRGF0YT8uaXNVc2VyQ3JlYXRlZCB8fCBjdXJyZW50T2JqLnBhcmVudC51c2VyRGF0YT8uaXNTZXJpYWxpemVkRnJvbUNvZGUpICYmXG4gICAgICAgICAgICAgIChjdXJyZW50T2JqLnBhcmVudCBpbnN0YW5jZW9mIFRIUkVFLkdyb3VwIHx8IGN1cnJlbnRPYmoucGFyZW50IGluc3RhbmNlb2YgVEhSRUUuT2JqZWN0M0QpKSB7XG4gICAgICAgICAgICB0b3BMZXZlbE9iamVjdCA9IGN1cnJlbnRPYmoucGFyZW50O1xuICAgICAgICAgIH1cbiAgICAgICAgICBjdXJyZW50T2JqID0gY3VycmVudE9iai5wYXJlbnQ7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGlmIChob3ZlcmVkT2JqZWN0ICE9PSB0b3BMZXZlbE9iamVjdCkge1xuICAgICAgICAgIHNldEhvdmVyZWRPYmplY3QodG9wTGV2ZWxPYmplY3QpO1xuICAgICAgICAgIC8vIEFkZCBkZWJ1ZyBvdXRwdXQgdG8gc2VlIHdoYXQncyBiZWluZyBzZWxlY3RlZCBhcyB0aGUgaG92ZXJlZCBvYmplY3RcbiAgICAgICAgICBjb25zb2xlLmxvZyhcIlNldCBob3ZlcmVkIG9iamVjdDpcIiwgdG9wTGV2ZWxPYmplY3QudXNlckRhdGE/Lm5hbWUgfHwgJ3VubmFtZWQnLCBcbiAgICAgICAgICAgICAgICAgICAgICBcInR5cGU6XCIsIHRvcExldmVsT2JqZWN0IGluc3RhbmNlb2YgVEhSRUUuR3JvdXAgPyAnR3JvdXAnIDogXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdG9wTGV2ZWxPYmplY3QgaW5zdGFuY2VvZiBUSFJFRS5NZXNoID8gJ01lc2gnIDogJ09iamVjdDNEJyk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoaG92ZXJlZE9iamVjdCkge1xuICAgICAgICBzZXRIb3ZlcmVkT2JqZWN0KG51bGwpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgaW4gdXNlRnJhbWU6XCIsIGVycm9yKTtcbiAgICB9XG4gIH0pXG4gIFxuICByZXR1cm4gbnVsbFxufSBcblxuLy8gQ0hBTkdFIDY6IFVwZGF0ZSB0aGUgV2luZG93IGludGVyZmFjZSB0byBpbmNsdWRlIF9fc2hpZnRLZXlQcmVzc2VkIGluc3RlYWQgb2YgX19hbHRLZXlQcmVzc2VkXG5kZWNsYXJlIGdsb2JhbCB7XG4gIGludGVyZmFjZSBXaW5kb3cge1xuICAgIF9fcGVuZGluZ09iamVjdD86IFRIUkVFLk1lc2ggfCBUSFJFRS5Hcm91cDtcbiAgICBfX3RyYW5zZm9ybUNvbnRyb2xzQWN0aXZlPzogYm9vbGVhbjtcbiAgICBfX2Vudmlyb25tZW50U2V0dGluZ3M/OiB7XG4gICAgICBzaG93T2NlYW4/OiBib29sZWFuO1xuICAgIH07XG4gICAgX19zaGlmdEtleVByZXNzZWQ/OiBib29sZWFuO1xuICAgIF9fbGFzdFRyYW5zZm9ybVVwZGF0ZT86IG51bWJlcjtcbiAgICBfX29iamVjdFJlZmVyZW5jZXM/OiBNYXA8c3RyaW5nLCBhbnk+O1xuICB9XG59IFxuXG4vLyBIZWxwZXIgZnVuY3Rpb24gdG8gY2hlY2sgaWYgYW4gb2JqZWN0IGlzIGEgZGVzY2VuZGFudCBvZiBhbm90aGVyXG5mdW5jdGlvbiBpc0Rlc2NlbmRhbnRPZihvYmplY3Q6IFRIUkVFLk9iamVjdDNELCBwb3RlbnRpYWxBbmNlc3RvcjogVEhSRUUuT2JqZWN0M0QpOiBib29sZWFuIHtcbiAgbGV0IHBhcmVudCA9IG9iamVjdC5wYXJlbnQ7XG4gIHdoaWxlIChwYXJlbnQpIHtcbiAgICBpZiAocGFyZW50ID09PSBwb3RlbnRpYWxBbmNlc3RvcikgcmV0dXJuIHRydWU7XG4gICAgcGFyZW50ID0gcGFyZW50LnBhcmVudDtcbiAgfVxuICByZXR1cm4gZmFsc2U7XG59ICJdLCJuYW1lcyI6WyJ1c2VTdGF0ZSIsInVzZVJlZiIsInVzZUVmZmVjdCIsInVzZVRocmVlIiwidXNlRnJhbWUiLCJUSFJFRSIsInVzZUFwcFN0b3JlIiwidXNlT2JqZWN0U3RvcmUiLCJPYmplY3RIaWdobGlnaHRlciIsIm9uT2JqZWN0U2VsZWN0ZWQiLCJleGNsdWRlT2JqZWN0cyIsInNjZW5lIiwiZ2wiLCJjYW1lcmEiLCJob3ZlcmVkT2JqZWN0Iiwic2V0SG92ZXJlZE9iamVjdCIsInJheWNhc3RlciIsIlJheWNhc3RlciIsIm1vdXNlIiwiVmVjdG9yMiIsImlzUG9pbnRlckxvY2tlZCIsImlzVUlGb2N1c2VkIiwic2VsZWN0ZWRPYmplY3QiLCJzZXRJc0RlbGV0aW5nIiwicmVtb3ZlT2JqZWN0Iiwib3JpZ2luYWxNYXRlcmlhbHMiLCJNYXAiLCJob3ZlcmVkTWF0ZXJpYWxzIiwiYXBwbHlUaW50Iiwib2JqZWN0IiwiTWVzaCIsImN1cnJlbnQiLCJoYXMiLCJzZXQiLCJtYXRlcmlhbCIsIkFycmF5IiwiaXNBcnJheSIsIm1hcCIsIm1hdCIsImNsb25lZE1hdCIsImNsb25lIiwiY29sb3IiLCJtdWx0aXBseVNjYWxhciIsImFkZCIsIkNvbG9yIiwiY2xvbmVkTWF0ZXJpYWwiLCJjaGlsZHJlbiIsImZvckVhY2giLCJjaGlsZCIsInJlc3RvcmVPcmlnaW5hbE1hdGVyaWFsIiwib3JpZ2luYWxNYXRlcmlhbCIsImdldCIsImRlbGV0ZSIsIl8iLCJvYmoiLCJhcHBseUhvdmVyVGludCIsImlzU2hpZnRLZXlQcmVzc2VkIiwid2luZG93IiwiX19zaGlmdEtleVByZXNzZWQiLCJ0YXJnZXRPYmplY3QiLCJsZW5ndGgiLCJkaXJlY3RDaGlsZHJlbiIsImZpbHRlciIsInVzZXJEYXRhIiwiaXNVc2VyQ3JlYXRlZCIsImlzU2VyaWFsaXplZEZyb21Db2RlIiwiR3JvdXAiLCJPYmplY3QzRCIsImNoaWxkUmF5Y2FzdGVyIiwic2V0RnJvbUNhbWVyYSIsImNoaWxkSW50ZXJzZWN0cyIsImludGVyc2VjdE9iamVjdHMiLCJpbnRlcnNlY3RlZERpcmVjdENoaWxkIiwiaW50ZXJzZWN0IiwiaGl0T2JqZWN0IiwiaW5jbHVkZXMiLCJkaXJlY3RDaGlsZCIsImlzRGVzY2VuZGFudE9mIiwiZGlyZWN0R3JvdXBDaGlsZCIsImZpbmQiLCJjIiwiY3VycmVudE9iaiIsInBhcmVudCIsIlNjZW5lIiwiY2xlYXIiLCJoYW5kbGVNb3VzZU1vdmUiLCJlIiwiZG9jdW1lbnQiLCJwb2ludGVyTG9ja0VsZW1lbnQiLCJkb21FbGVtZW50IiwieCIsInkiLCJjbGllbnRYIiwiY2xpZW50V2lkdGgiLCJjbGllbnRZIiwiY2xpZW50SGVpZ2h0IiwiaGFuZGxlS2V5VXAiLCJrZXkiLCJoYW5kbGVCbHVyIiwiaGFuZGxlS2V5RG93biIsInByZXZlbnREZWZhdWx0Iiwic3RvcFByb3BhZ2F0aW9uIiwiY29uc29sZSIsImxvZyIsIm5hbWUiLCJvYmplY3RJZCIsImlkIiwidXVpZCIsIm9iamVjdFRvUmVtb3ZlIiwiY2xlYW51cE9iamVjdCIsImdlb21ldHJ5IiwiZGlzcG9zZSIsInNldFN0YXRlIiwic2V0VGltZW91dCIsInJlbW92ZSIsIl9fb2JqZWN0UmVmZXJlbmNlcyIsImlubmVyRXJyb3IiLCJlcnJvciIsImlzRGVsZXRpbmciLCJoYW5kbGVDbGljayIsIl9fdHJhbnNmb3JtQ29udHJvbHNBY3RpdmUiLCJ0YXJnZXQiLCJ0eXBlIiwid2FybiIsImZvdW5kIiwic2VsZWN0ZWRPYmplY3RJZCIsImhhbmRsZURvdWJsZUNsaWNrIiwiZG91YmxlQ2xpY2tIYW5kbGVyIiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJoYW5kbGVQb2ludGVyTG9ja0NoYW5nZSIsImZpbHRlckZ1bmN0aW9uIiwiaW50ZXJzZWN0cyIsImludGVyc2VjdGVkT2JqIiwiY3VycmVudFBhcmVudCIsImludGVyc2VjdGVkT2JqZWN0IiwidG9wTGV2ZWxPYmplY3QiLCJwb3RlbnRpYWxBbmNlc3RvciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./app/components/three/ObjectHighlighter.tsx\n");

/***/ }),

/***/ "(ssr)/./app/components/three/Ocean.tsx":
/*!****************************************!*\
  !*** ./app/components/three/Ocean.tsx ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Ocean: () => (/* binding */ Ocean),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _react_three_fiber__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @react-three/fiber */ \"(ssr)/./node_modules/@react-three/fiber/dist/index-673ef987.esm.js\");\n/* harmony import */ var _react_three_drei__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @react-three/drei */ \"(ssr)/./node_modules/@react-three/drei/core/Sky.js\");\n/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! three */ \"(ssr)/./node_modules/three/build/three.core.js\");\n/* harmony import */ var three_examples_jsm_objects_Water_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! three/examples/jsm/objects/Water.js */ \"(ssr)/./node_modules/three/examples/jsm/objects/Water.js\");\n\n\n\n\n\n\n// Extend R3F with Water so we can use it in JSX\n(0,_react_three_fiber__WEBPACK_IMPORTED_MODULE_2__.e)({\n    Water: three_examples_jsm_objects_Water_js__WEBPACK_IMPORTED_MODULE_3__.Water\n});\nfunction Ocean() {\n    const waterRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);\n    const { scene } = (0,_react_three_fiber__WEBPACK_IMPORTED_MODULE_2__.z)();\n    // Sun position state for both sky and water\n    const sunPosition = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(new three__WEBPACK_IMPORTED_MODULE_4__.Vector3(0, 1, 0));\n    // Fixed parameters for better water appearance\n    const elevation = 20;\n    const azimuth = 180;\n    const distortionScale = 3.7;\n    const waterColor = \"#0066cc\" // More vibrant blue\n    ;\n    // Update sun position based on fixed elevation and azimuth\n    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{\n        const phi = three__WEBPACK_IMPORTED_MODULE_4__.MathUtils.degToRad(90 - elevation);\n        const theta = three__WEBPACK_IMPORTED_MODULE_4__.MathUtils.degToRad(azimuth);\n        sunPosition.current.setFromSphericalCoords(1, phi, theta);\n        if (waterRef.current) {\n            waterRef.current.material.uniforms.sunDirection.value.copy(sunPosition.current).normalize();\n        }\n    }, []);\n    // Add subtle animation to the water\n    (0,_react_three_fiber__WEBPACK_IMPORTED_MODULE_2__.A)((_, delta)=>{\n        if (waterRef.current) {\n            waterRef.current.material.uniforms.time.value += delta * 0.5;\n        }\n    });\n    // Create water geometry and config\n    const waterGeometry = new three__WEBPACK_IMPORTED_MODULE_4__.PlaneGeometry(10000, 10000, 1, 1);\n    const waterConfig = {\n        textureWidth: 512,\n        textureHeight: 512,\n        waterNormals: new three__WEBPACK_IMPORTED_MODULE_4__.TextureLoader().load(\"https://raw.githubusercontent.com/mrdoob/three.js/master/examples/textures/waternormals.jpg\", (texture)=>{\n            texture.wrapS = texture.wrapT = three__WEBPACK_IMPORTED_MODULE_4__.RepeatWrapping;\n        }),\n        sunDirection: sunPosition.current.clone().normalize(),\n        sunColor: 0xffffff,\n        waterColor: new three__WEBPACK_IMPORTED_MODULE_4__.Color(waterColor),\n        distortionScale: distortionScale,\n        size: 1.0,\n        fog: scene.fog !== undefined\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_react_three_drei__WEBPACK_IMPORTED_MODULE_5__.Sky, {\n                distance: 10000,\n                sunPosition: sunPosition.current,\n                turbidity: 10,\n                rayleigh: 2,\n                mieCoefficient: 0.005,\n                mieDirectionalG: 0.8\n            }, void 0, false, {\n                fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/components/three/Ocean.tsx\",\n                lineNumber: 64,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"primitive\", {\n                ref: waterRef,\n                object: new three_examples_jsm_objects_Water_js__WEBPACK_IMPORTED_MODULE_3__.Water(waterGeometry, waterConfig),\n                \"rotation-x\": -Math.PI / 2,\n                position: [\n                    0,\n                    -1,\n                    0\n                ]\n            }, void 0, false, {\n                fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/components/three/Ocean.tsx\",\n                lineNumber: 74,\n                columnNumber: 7\n            }, this)\n        ]\n    }, void 0, true);\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (Ocean);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9hcHAvY29tcG9uZW50cy90aHJlZS9PY2Vhbi50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBeUM7QUFDc0I7QUFDeEI7QUFDVDtBQUM2QjtBQUUzRCxnREFBZ0Q7QUFDaERFLHFEQUFNQSxDQUFDO0lBQUVLLEtBQUtBLHdFQUFBQTtBQUFDO0FBRVIsU0FBU0M7SUFDZCxNQUFNQyxXQUFXVCw2Q0FBTUEsQ0FBTTtJQUM3QixNQUFNLEVBQUVVLEtBQUssRUFBRSxHQUFHTixxREFBUUE7SUFFMUIsNENBQTRDO0lBQzVDLE1BQU1PLGNBQWNYLDZDQUFNQSxDQUFDLElBQUlNLDBDQUFhLENBQUMsR0FBRyxHQUFHO0lBRW5ELCtDQUErQztJQUMvQyxNQUFNTyxZQUFZO0lBQ2xCLE1BQU1DLFVBQVU7SUFDaEIsTUFBTUMsa0JBQWtCO0lBQ3hCLE1BQU1DLGFBQWEsVUFBVSxvQkFBb0I7O0lBRWpELDJEQUEyRDtJQUMzRGYsZ0RBQVNBLENBQUM7UUFDUixNQUFNZ0IsTUFBTVgsNENBQWUsQ0FBQ2EsUUFBUSxDQUFDLEtBQUtOO1FBQzFDLE1BQU1PLFFBQVFkLDRDQUFlLENBQUNhLFFBQVEsQ0FBQ0w7UUFFdkNILFlBQVlVLE9BQU8sQ0FBQ0Msc0JBQXNCLENBQUMsR0FBR0wsS0FBS0c7UUFFbkQsSUFBSVgsU0FBU1ksT0FBTyxFQUFFO1lBQ3BCWixTQUFTWSxPQUFPLENBQUNFLFFBQVEsQ0FBQ0MsUUFBUSxDQUFDQyxZQUFZLENBQUNDLEtBQUssQ0FBQ0MsSUFBSSxDQUFDaEIsWUFBWVUsT0FBTyxFQUFFTyxTQUFTO1FBQzNGO0lBQ0YsR0FBRyxFQUFFO0lBRUwsb0NBQW9DO0lBQ3BDekIscURBQVFBLENBQUMsQ0FBQzBCLEdBQUdDO1FBQ1gsSUFBSXJCLFNBQVNZLE9BQU8sRUFBRTtZQUNwQlosU0FBU1ksT0FBTyxDQUFDRSxRQUFRLENBQUNDLFFBQVEsQ0FBQ08sSUFBSSxDQUFDTCxLQUFLLElBQUlJLFFBQVE7UUFDM0Q7SUFDRjtJQUVBLG1DQUFtQztJQUNuQyxNQUFNRSxnQkFBZ0IsSUFBSTFCLGdEQUFtQixDQUFDLE9BQU8sT0FBTyxHQUFHO0lBQy9ELE1BQU00QixjQUFjO1FBQ2xCQyxjQUFjO1FBQ2RDLGVBQWU7UUFDZkMsY0FBYyxJQUFJL0IsZ0RBQW1CLEdBQUdpQyxJQUFJLENBQzFDLCtGQUNBLENBQUNDO1lBQ0NBLFFBQVFDLEtBQUssR0FBR0QsUUFBUUUsS0FBSyxHQUFHcEMsaURBQW9CO1FBQ3REO1FBRUZtQixjQUFjZCxZQUFZVSxPQUFPLENBQUN1QixLQUFLLEdBQUdoQixTQUFTO1FBQ25EaUIsVUFBVTtRQUNWN0IsWUFBWSxJQUFJVix3Q0FBVyxDQUFDVTtRQUM1QkQsaUJBQWlCQTtRQUNqQmdDLE1BQU07UUFDTkMsS0FBS3RDLE1BQU1zQyxHQUFHLEtBQUtDO0lBQ3JCO0lBRUEscUJBQ0U7OzBCQUVFLDhEQUFDNUMsa0RBQUdBO2dCQUNGNkMsVUFBVTtnQkFDVnZDLGFBQWFBLFlBQVlVLE9BQU87Z0JBQ2hDOEIsV0FBVztnQkFDWEMsVUFBVTtnQkFDVkMsZ0JBQWdCO2dCQUNoQkMsaUJBQWlCOzs7Ozs7MEJBSW5CLDhEQUFDQztnQkFDQ0MsS0FBSy9DO2dCQUNMZ0QsUUFBUSxJQUFJbEQsc0VBQUtBLENBQUN5QixlQUFlRTtnQkFDakN3QixjQUFZLENBQUNDLEtBQUtDLEVBQUUsR0FBRztnQkFDdkJDLFVBQVU7b0JBQUM7b0JBQUcsQ0FBQztvQkFBRztpQkFBRTs7Ozs7Ozs7QUFJNUI7QUFFQSxpRUFBZXJELEtBQUtBLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92aWJlLTNkLWNvZGUvLi9hcHAvY29tcG9uZW50cy90aHJlZS9PY2Vhbi50c3g/MmJlYiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB1c2VSZWYsIHVzZUVmZmVjdCB9IGZyb20gJ3JlYWN0J1xuaW1wb3J0IHsgZXh0ZW5kLCB1c2VGcmFtZSwgdXNlVGhyZWUgfSBmcm9tICdAcmVhY3QtdGhyZWUvZmliZXInXG5pbXBvcnQgeyBTa3kgfSBmcm9tICdAcmVhY3QtdGhyZWUvZHJlaSdcbmltcG9ydCAqIGFzIFRIUkVFIGZyb20gJ3RocmVlJ1xuaW1wb3J0IHsgV2F0ZXIgfSBmcm9tICd0aHJlZS9leGFtcGxlcy9qc20vb2JqZWN0cy9XYXRlci5qcydcblxuLy8gRXh0ZW5kIFIzRiB3aXRoIFdhdGVyIHNvIHdlIGNhbiB1c2UgaXQgaW4gSlNYXG5leHRlbmQoeyBXYXRlciB9KVxuXG5leHBvcnQgZnVuY3Rpb24gT2NlYW4oKSB7XG4gIGNvbnN0IHdhdGVyUmVmID0gdXNlUmVmPGFueT4obnVsbClcbiAgY29uc3QgeyBzY2VuZSB9ID0gdXNlVGhyZWUoKVxuICBcbiAgLy8gU3VuIHBvc2l0aW9uIHN0YXRlIGZvciBib3RoIHNreSBhbmQgd2F0ZXJcbiAgY29uc3Qgc3VuUG9zaXRpb24gPSB1c2VSZWYobmV3IFRIUkVFLlZlY3RvcjMoMCwgMSwgMCkpXG4gIFxuICAvLyBGaXhlZCBwYXJhbWV0ZXJzIGZvciBiZXR0ZXIgd2F0ZXIgYXBwZWFyYW5jZVxuICBjb25zdCBlbGV2YXRpb24gPSAyMFxuICBjb25zdCBhemltdXRoID0gMTgwXG4gIGNvbnN0IGRpc3RvcnRpb25TY2FsZSA9IDMuN1xuICBjb25zdCB3YXRlckNvbG9yID0gJyMwMDY2Y2MnIC8vIE1vcmUgdmlicmFudCBibHVlXG4gIFxuICAvLyBVcGRhdGUgc3VuIHBvc2l0aW9uIGJhc2VkIG9uIGZpeGVkIGVsZXZhdGlvbiBhbmQgYXppbXV0aFxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGNvbnN0IHBoaSA9IFRIUkVFLk1hdGhVdGlscy5kZWdUb1JhZCg5MCAtIGVsZXZhdGlvbilcbiAgICBjb25zdCB0aGV0YSA9IFRIUkVFLk1hdGhVdGlscy5kZWdUb1JhZChhemltdXRoKVxuICAgIFxuICAgIHN1blBvc2l0aW9uLmN1cnJlbnQuc2V0RnJvbVNwaGVyaWNhbENvb3JkcygxLCBwaGksIHRoZXRhKVxuICAgIFxuICAgIGlmICh3YXRlclJlZi5jdXJyZW50KSB7XG4gICAgICB3YXRlclJlZi5jdXJyZW50Lm1hdGVyaWFsLnVuaWZvcm1zLnN1bkRpcmVjdGlvbi52YWx1ZS5jb3B5KHN1blBvc2l0aW9uLmN1cnJlbnQpLm5vcm1hbGl6ZSgpXG4gICAgfVxuICB9LCBbXSlcbiAgXG4gIC8vIEFkZCBzdWJ0bGUgYW5pbWF0aW9uIHRvIHRoZSB3YXRlclxuICB1c2VGcmFtZSgoXywgZGVsdGEpID0+IHtcbiAgICBpZiAod2F0ZXJSZWYuY3VycmVudCkge1xuICAgICAgd2F0ZXJSZWYuY3VycmVudC5tYXRlcmlhbC51bmlmb3Jtcy50aW1lLnZhbHVlICs9IGRlbHRhICogMC41XG4gICAgfVxuICB9KVxuICBcbiAgLy8gQ3JlYXRlIHdhdGVyIGdlb21ldHJ5IGFuZCBjb25maWdcbiAgY29uc3Qgd2F0ZXJHZW9tZXRyeSA9IG5ldyBUSFJFRS5QbGFuZUdlb21ldHJ5KDEwMDAwLCAxMDAwMCwgMSwgMSlcbiAgY29uc3Qgd2F0ZXJDb25maWcgPSB7XG4gICAgdGV4dHVyZVdpZHRoOiA1MTIsXG4gICAgdGV4dHVyZUhlaWdodDogNTEyLFxuICAgIHdhdGVyTm9ybWFsczogbmV3IFRIUkVFLlRleHR1cmVMb2FkZXIoKS5sb2FkKFxuICAgICAgJ2h0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9tcmRvb2IvdGhyZWUuanMvbWFzdGVyL2V4YW1wbGVzL3RleHR1cmVzL3dhdGVybm9ybWFscy5qcGcnLFxuICAgICAgKHRleHR1cmUpID0+IHtcbiAgICAgICAgdGV4dHVyZS53cmFwUyA9IHRleHR1cmUud3JhcFQgPSBUSFJFRS5SZXBlYXRXcmFwcGluZ1xuICAgICAgfVxuICAgICksXG4gICAgc3VuRGlyZWN0aW9uOiBzdW5Qb3NpdGlvbi5jdXJyZW50LmNsb25lKCkubm9ybWFsaXplKCksXG4gICAgc3VuQ29sb3I6IDB4ZmZmZmZmLFxuICAgIHdhdGVyQ29sb3I6IG5ldyBUSFJFRS5Db2xvcih3YXRlckNvbG9yKSxcbiAgICBkaXN0b3J0aW9uU2NhbGU6IGRpc3RvcnRpb25TY2FsZSxcbiAgICBzaXplOiAxLjAsXG4gICAgZm9nOiBzY2VuZS5mb2cgIT09IHVuZGVmaW5lZCxcbiAgfVxuICBcbiAgcmV0dXJuIChcbiAgICA8PlxuICAgICAgey8qIFNreSBjb21wb25lbnQgd2l0aCBzdW4gcG9zaXRpb24gc3luY2VkIHRvIHdhdGVyICovfVxuICAgICAgPFNreSBcbiAgICAgICAgZGlzdGFuY2U9ezEwMDAwfVxuICAgICAgICBzdW5Qb3NpdGlvbj17c3VuUG9zaXRpb24uY3VycmVudH1cbiAgICAgICAgdHVyYmlkaXR5PXsxMH1cbiAgICAgICAgcmF5bGVpZ2g9ezJ9XG4gICAgICAgIG1pZUNvZWZmaWNpZW50PXswLjAwNX1cbiAgICAgICAgbWllRGlyZWN0aW9uYWxHPXswLjh9XG4gICAgICAvPlxuICAgICAgXG4gICAgICB7LyogV2F0ZXIgY29tcG9uZW50ICovfVxuICAgICAgPHByaW1pdGl2ZVxuICAgICAgICByZWY9e3dhdGVyUmVmfVxuICAgICAgICBvYmplY3Q9e25ldyBXYXRlcih3YXRlckdlb21ldHJ5LCB3YXRlckNvbmZpZyl9XG4gICAgICAgIHJvdGF0aW9uLXg9ey1NYXRoLlBJIC8gMn1cbiAgICAgICAgcG9zaXRpb249e1swLCAtMSwgMF19XG4gICAgICAvPlxuICAgIDwvPlxuICApXG59XG5cbmV4cG9ydCBkZWZhdWx0IE9jZWFuOyAiXSwibmFtZXMiOlsidXNlUmVmIiwidXNlRWZmZWN0IiwiZXh0ZW5kIiwidXNlRnJhbWUiLCJ1c2VUaHJlZSIsIlNreSIsIlRIUkVFIiwiV2F0ZXIiLCJPY2VhbiIsIndhdGVyUmVmIiwic2NlbmUiLCJzdW5Qb3NpdGlvbiIsIlZlY3RvcjMiLCJlbGV2YXRpb24iLCJhemltdXRoIiwiZGlzdG9ydGlvblNjYWxlIiwid2F0ZXJDb2xvciIsInBoaSIsIk1hdGhVdGlscyIsImRlZ1RvUmFkIiwidGhldGEiLCJjdXJyZW50Iiwic2V0RnJvbVNwaGVyaWNhbENvb3JkcyIsIm1hdGVyaWFsIiwidW5pZm9ybXMiLCJzdW5EaXJlY3Rpb24iLCJ2YWx1ZSIsImNvcHkiLCJub3JtYWxpemUiLCJfIiwiZGVsdGEiLCJ0aW1lIiwid2F0ZXJHZW9tZXRyeSIsIlBsYW5lR2VvbWV0cnkiLCJ3YXRlckNvbmZpZyIsInRleHR1cmVXaWR0aCIsInRleHR1cmVIZWlnaHQiLCJ3YXRlck5vcm1hbHMiLCJUZXh0dXJlTG9hZGVyIiwibG9hZCIsInRleHR1cmUiLCJ3cmFwUyIsIndyYXBUIiwiUmVwZWF0V3JhcHBpbmciLCJjbG9uZSIsInN1bkNvbG9yIiwiQ29sb3IiLCJzaXplIiwiZm9nIiwidW5kZWZpbmVkIiwiZGlzdGFuY2UiLCJ0dXJiaWRpdHkiLCJyYXlsZWlnaCIsIm1pZUNvZWZmaWNpZW50IiwibWllRGlyZWN0aW9uYWxHIiwicHJpbWl0aXZlIiwicmVmIiwib2JqZWN0Iiwicm90YXRpb24teCIsIk1hdGgiLCJQSSIsInBvc2l0aW9uIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./app/components/three/Ocean.tsx\n");

/***/ }),

/***/ "(ssr)/./app/components/three/StoredObjects.tsx":
/*!************************************************!*\
  !*** ./app/components/three/StoredObjects.tsx ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   StoredObjects: () => (/* binding */ StoredObjects)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _store_appStore__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/store/appStore */ \"(ssr)/./app/store/appStore.ts\");\n/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! three */ \"(ssr)/./node_modules/three/build/three.core.js\");\n/* harmony import */ var _react_three_fiber__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @react-three/fiber */ \"(ssr)/./node_modules/@react-three/fiber/dist/index-673ef987.esm.js\");\n\n\n\n\n// Helper to create a mesh from stored object data\nconst createMeshFromStored = (data)=>{\n    let geometry;\n    let material;\n    // Try to get the object from the global references\n    const objectId = data.geometry?.parameters?.objectId || data.id;\n    const originalObject = window.__objectReferences?.get(objectId);\n    if (originalObject instanceof three__WEBPACK_IMPORTED_MODULE_2__.Mesh) {\n        console.log(`Found original mesh object: ${objectId}`);\n        // We can reuse the entire original mesh\n        const mesh = originalObject.clone();\n        // Apply transforms from the stored data\n        if (data.position) mesh.position.set(...data.position);\n        if (data.rotation) mesh.rotation.set(...data.rotation);\n        if (data.scale) mesh.scale.set(...data.scale);\n        // Ensure userData is set correctly\n        mesh.userData = {\n            ...data.userData\n        };\n        mesh.userData.id = data.id;\n        // Set the UUID to match the stored ID\n        try {\n            Object.defineProperty(mesh, \"uuid\", {\n                value: data.id\n            });\n        } catch (e) {\n            console.warn(\"Could not set UUID, selection might not work correctly\", e);\n        }\n        console.log(`Created mesh from original object: id=${data.id}, uuid=${mesh.uuid}`);\n        return mesh;\n    }\n    // Try to use the original geometry from references\n    const originalGeometry = window.__objectReferences?.get(`${objectId}_geometry`);\n    const originalMaterial = window.__objectReferences?.get(`${objectId}_material`);\n    if (originalGeometry) {\n        console.log(`Found original geometry: ${objectId}`);\n        geometry = originalGeometry;\n    } else {\n        // Fallback to basic geometry\n        console.log(`Using fallback geometry for ${data.name}`);\n        geometry = new three__WEBPACK_IMPORTED_MODULE_2__.BoxGeometry(1, 1, 1);\n    }\n    if (originalMaterial) {\n        console.log(`Found original material: ${objectId}`);\n        material = originalMaterial.clone();\n    } else {\n        // Fallback to basic material\n        console.log(`Using fallback material for ${data.name}`);\n        let color = parseInt(data.material?.color || \"ffffff\", 16);\n        material = new three__WEBPACK_IMPORTED_MODULE_2__.MeshStandardMaterial({\n            color\n        });\n    }\n    // Ensure we have valid geometry and material\n    if (!geometry) {\n        console.warn(\"Missing geometry, using fallback box\");\n        geometry = new three__WEBPACK_IMPORTED_MODULE_2__.BoxGeometry(1, 1, 1);\n    }\n    if (!material) {\n        console.warn(\"Missing material, using fallback material\");\n        material = new three__WEBPACK_IMPORTED_MODULE_2__.MeshStandardMaterial({\n            color: 0xff0000\n        });\n    }\n    // Create mesh\n    const mesh = new three__WEBPACK_IMPORTED_MODULE_2__.Mesh(geometry, material);\n    // Apply transforms\n    if (data.position) mesh.position.set(...data.position);\n    if (data.rotation) mesh.rotation.set(...data.rotation);\n    if (data.scale) mesh.scale.set(...data.scale);\n    // Restore userData\n    if (data.userData) {\n        mesh.userData = {\n            ...data.userData\n        };\n    }\n    // Ensure these critical fields\n    mesh.userData.id = data.id;\n    mesh.userData.name = data.name;\n    mesh.userData.isUserCreated = true;\n    mesh.userData.isSerializedFromCode = true;\n    // Try to use the stored ID as the UUID if possible\n    try {\n        Object.defineProperty(mesh, \"uuid\", {\n            value: data.id\n        });\n    } catch (e) {\n        console.warn(\"Could not set UUID, selection might not work correctly\", e);\n    }\n    console.log(`Created mesh from storage: id=${data.id}, uuid=${mesh.uuid}`);\n    return mesh;\n};\n// Helper to create a group from stored object data\nconst createGroupFromStored = (data)=>{\n    // Try to get the original group from global references\n    const originalGroup = window.__objectReferences?.get(data.id);\n    if (originalGroup instanceof three__WEBPACK_IMPORTED_MODULE_2__.Group) {\n        console.log(`Found original group object: ${data.id}`);\n        // We can reuse the entire original group\n        const group = originalGroup.clone();\n        // Apply transforms from the stored data\n        if (data.position) group.position.set(...data.position);\n        if (data.rotation) group.rotation.set(...data.rotation);\n        if (data.scale) group.scale.set(...data.scale);\n        // Ensure userData is set correctly\n        group.userData = {\n            ...data.userData\n        };\n        group.userData.id = data.id;\n        // Set the UUID to match the stored ID\n        try {\n            Object.defineProperty(group, \"uuid\", {\n                value: data.id\n            });\n        } catch (e) {\n            console.warn(\"Could not set UUID, selection might not work correctly\", e);\n        }\n        console.log(`Created group from original object: id=${data.id}, uuid=${group.uuid}`);\n        return group;\n    }\n    // If we don't have the original group, create a new one\n    const group = new three__WEBPACK_IMPORTED_MODULE_2__.Group();\n    // Apply transforms\n    if (data.position) group.position.set(...data.position);\n    if (data.rotation) group.rotation.set(...data.rotation);\n    if (data.scale) group.scale.set(...data.scale);\n    // Restore userData\n    if (data.userData) {\n        group.userData = {\n            ...data.userData\n        };\n    }\n    // Add children\n    if (data.children && data.children.length > 0) {\n        console.log(`Creating ${data.children.length} children for group ${data.id}`);\n        data.children.forEach((childData)=>{\n            let child = null;\n            if (childData.type === \"mesh\") {\n                child = createMeshFromStored(childData);\n            } else if (childData.type === \"group\") {\n                child = createGroupFromStored(childData);\n            } else if (childData.type === \"object\") {\n                child = createObject3DFromStored(childData);\n            }\n            if (child) {\n                group.add(child);\n            }\n        });\n    }\n    // Ensure these critical fields\n    group.userData.id = data.id;\n    group.userData.name = data.name;\n    group.userData.isUserCreated = true;\n    group.userData.isSerializedFromCode = true;\n    // Try to use the stored ID as the UUID if possible\n    try {\n        Object.defineProperty(group, \"uuid\", {\n            value: data.id\n        });\n    } catch (e) {\n        console.warn(\"Could not set UUID, selection might not work correctly\", e);\n    }\n    console.log(`Created group from storage: id=${data.id}, uuid=${group.uuid}, children: ${group.children.length}`);\n    return group;\n};\n// Helper to create a generic Object3D from stored data\nconst createObject3DFromStored = (data)=>{\n    // Try to get the original object from global references\n    const originalObject = window.__objectReferences?.get(data.id);\n    if (originalObject && !(originalObject instanceof three__WEBPACK_IMPORTED_MODULE_2__.Mesh) && !(originalObject instanceof three__WEBPACK_IMPORTED_MODULE_2__.Group)) {\n        console.log(`Found original object3D: ${data.id}`);\n        // We can reuse the entire original object\n        const obj = originalObject.clone();\n        // Apply transforms from the stored data\n        if (data.position) obj.position.set(...data.position);\n        if (data.rotation) obj.rotation.set(...data.rotation);\n        if (data.scale) obj.scale.set(...data.scale);\n        // Ensure userData is set correctly\n        obj.userData = {\n            ...data.userData\n        };\n        obj.userData.id = data.id;\n        // Set the UUID to match the stored ID\n        try {\n            Object.defineProperty(obj, \"uuid\", {\n                value: data.id\n            });\n        } catch (e) {\n            console.warn(\"Could not set UUID, selection might not work correctly\", e);\n        }\n        console.log(`Created object3D from original object: id=${data.id}, uuid=${obj.uuid}`);\n        return obj;\n    }\n    // If we don't have the original object, create a new one\n    const obj = new three__WEBPACK_IMPORTED_MODULE_2__.Object3D();\n    // Apply transforms\n    if (data.position) obj.position.set(...data.position);\n    if (data.rotation) obj.rotation.set(...data.rotation);\n    if (data.scale) obj.scale.set(...data.scale);\n    // Restore userData\n    if (data.userData) {\n        obj.userData = {\n            ...data.userData\n        };\n    }\n    // Add children\n    if (data.children && data.children.length > 0) {\n        console.log(`Creating ${data.children.length} children for object3D ${data.id}`);\n        data.children.forEach((childData)=>{\n            let child = null;\n            if (childData.type === \"mesh\") {\n                child = createMeshFromStored(childData);\n            } else if (childData.type === \"group\") {\n                child = createGroupFromStored(childData);\n            } else if (childData.type === \"object\") {\n                child = createObject3DFromStored(childData);\n            }\n            if (child) {\n                obj.add(child);\n            }\n        });\n    }\n    // Ensure these critical fields\n    obj.userData.id = data.id;\n    obj.userData.name = data.name;\n    obj.userData.isUserCreated = true;\n    obj.userData.isSerializedFromCode = true;\n    // Try to use the stored ID as the UUID if possible\n    try {\n        Object.defineProperty(obj, \"uuid\", {\n            value: data.id\n        });\n    } catch (e) {\n        console.warn(\"Could not set UUID, selection might not work correctly\", e);\n    }\n    console.log(`Created generic object3D from storage: id=${data.id}, uuid=${obj.uuid}`);\n    return obj;\n};\nfunction StoredObjects() {\n    const { objects, updateObject } = (0,_store_appStore__WEBPACK_IMPORTED_MODULE_1__.useObjectStore)();\n    const { scene } = (0,_react_three_fiber__WEBPACK_IMPORTED_MODULE_3__.z)();\n    const objectRefs = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(new Map());\n    const firstRender = (0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(true);\n    // Convert stored objects to Three.js objects\n    const threeObjects = (0,react__WEBPACK_IMPORTED_MODULE_0__.useMemo)(()=>{\n        // Skip recreation on first render to avoid useEffect loop\n        if (firstRender.current) {\n            firstRender.current = false;\n            return [];\n        }\n        console.log(\"Creating objects from storage, count:\", objects.length);\n        return objects.map((obj)=>{\n            // Check if we already have this object in the refs\n            const existingObj = objectRefs.current.get(obj.id);\n            if (existingObj) {\n                // Just update transforms instead of recreating\n                existingObj.position.set(...obj.position);\n                existingObj.rotation.set(...obj.rotation);\n                existingObj.scale.set(...obj.scale);\n                return existingObj;\n            }\n            // Create new object if not in refs\n            if (obj.type === \"mesh\") {\n                return createMeshFromStored(obj);\n            } else if (obj.type === \"group\") {\n                return createGroupFromStored(obj);\n            } else if (obj.type === \"object\") {\n                return createObject3DFromStored(obj);\n            }\n            return null;\n        }).filter(Boolean);\n    }, [\n        objects\n    ]);\n    // Add objects to scene\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        if (threeObjects.length === 0) return;\n        console.log(\"Adding objects to scene, count:\", threeObjects.length);\n        // Add new objects to scene\n        threeObjects.forEach((obj)=>{\n            if (obj && !scene.getObjectById(obj.id)) {\n                console.log(`Adding object to scene: ${obj.uuid}`);\n                scene.add(obj);\n                objectRefs.current.set(obj.userData.id, obj);\n            }\n        });\n        // Capture the current ref value\n        const currentRefs = new Map(objectRefs.current);\n        // Cleanup\n        return ()=>{\n            // Only remove objects that are not in the current set\n            currentRefs.forEach((obj, id)=>{\n                if (!threeObjects.some((newObj)=>newObj.userData.id === id)) {\n                    console.log(`Removing object from scene: ${id}`);\n                    scene.remove(obj);\n                    currentRefs.delete(id);\n                }\n            });\n        };\n    }, [\n        scene,\n        threeObjects\n    ]);\n    // Only update the store when user explicitly changes objects via TransformControls\n    // That's now handled in the CustomTransformControls component\n    return null;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9hcHAvY29tcG9uZW50cy90aHJlZS9TdG9yZWRPYmplY3RzLnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBa0Q7QUFDYTtBQUNqQztBQUNlO0FBRTdDLGtEQUFrRDtBQUNsRCxNQUFNTSx1QkFBdUIsQ0FBQ0M7SUFDNUIsSUFBSUM7SUFDSixJQUFJQztJQUVKLG1EQUFtRDtJQUNuRCxNQUFNQyxXQUFXSCxLQUFLQyxRQUFRLEVBQUVHLFlBQVlELFlBQVlILEtBQUtLLEVBQUU7SUFDL0QsTUFBTUMsaUJBQWlCQyxPQUFPQyxrQkFBa0IsRUFBRUMsSUFBSU47SUFFdEQsSUFBSUcsMEJBQTBCVCx1Q0FBVSxFQUFFO1FBQ3hDYyxRQUFRQyxHQUFHLENBQUMsQ0FBQyw0QkFBNEIsRUFBRVQsU0FBUyxDQUFDO1FBQ3JELHdDQUF3QztRQUN4QyxNQUFNVSxPQUFPUCxlQUFlUSxLQUFLO1FBRWpDLHdDQUF3QztRQUN4QyxJQUFJZCxLQUFLZSxRQUFRLEVBQUVGLEtBQUtFLFFBQVEsQ0FBQ0MsR0FBRyxJQUFJaEIsS0FBS2UsUUFBUTtRQUNyRCxJQUFJZixLQUFLaUIsUUFBUSxFQUFFSixLQUFLSSxRQUFRLENBQUNELEdBQUcsSUFBSWhCLEtBQUtpQixRQUFRO1FBQ3JELElBQUlqQixLQUFLa0IsS0FBSyxFQUFFTCxLQUFLSyxLQUFLLENBQUNGLEdBQUcsSUFBSWhCLEtBQUtrQixLQUFLO1FBRTVDLG1DQUFtQztRQUNuQ0wsS0FBS00sUUFBUSxHQUFHO1lBQUUsR0FBR25CLEtBQUttQixRQUFRO1FBQUM7UUFDbkNOLEtBQUtNLFFBQVEsQ0FBQ2QsRUFBRSxHQUFHTCxLQUFLSyxFQUFFO1FBRTFCLHNDQUFzQztRQUN0QyxJQUFJO1lBQ0ZlLE9BQU9DLGNBQWMsQ0FBQ1IsTUFBTSxRQUFRO2dCQUFFUyxPQUFPdEIsS0FBS0ssRUFBRTtZQUFDO1FBQ3ZELEVBQUUsT0FBT2tCLEdBQUc7WUFDVlosUUFBUWEsSUFBSSxDQUFDLDBEQUEwREQ7UUFDekU7UUFFQVos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TUFBTVUsYUFBYSxDQUFDZixJQUFJMUMsRUFBRSxHQUFHO2dCQUN2Q00sUUFBUUMsR0FBRyxDQUFDLENBQUMsd0JBQXdCLEVBQUVtQyxJQUFJdEIsSUFBSSxDQUFDLENBQUM7Z0JBQ2pEMkIsTUFBTU4sR0FBRyxDQUFDQztnQkFDVk0sV0FBV0ksT0FBTyxDQUFDekMsR0FBRyxDQUFDK0IsSUFBSTVCLFFBQVEsQ0FBQ2QsRUFBRSxFQUFFMEM7WUFDMUM7UUFDRjtRQUVBLGdDQUFnQztRQUNoQyxNQUFNZ0IsY0FBYyxJQUFJVCxJQUFJRCxXQUFXSSxPQUFPO1FBRTlDLFVBQVU7UUFDVixPQUFPO1lBQ0wsc0RBQXNEO1lBQ3RETSxZQUFZdEIsT0FBTyxDQUFDLENBQUNNLEtBQUsxQztnQkFDeEIsSUFBSSxDQUFDbUQsYUFBYVEsSUFBSSxDQUFDQyxDQUFBQSxTQUFVQSxPQUFPOUMsUUFBUSxDQUFDZCxFQUFFLEtBQUtBLEtBQUs7b0JBQzNETSxRQUFRQyxHQUFHLENBQUMsQ0FBQyw0QkFBNEIsRUFBRVAsR0FBRyxDQUFDO29CQUMvQytDLE1BQU1jLE1BQU0sQ0FBQ25CO29CQUNiZ0IsWUFBWUksTUFBTSxDQUFDOUQ7Z0JBQ3JCO1lBQ0Y7UUFDRjtJQUNGLEdBQUc7UUFBQytDO1FBQU9JO0tBQWE7SUFFeEIsbUZBQW1GO0lBQ25GLDhEQUE4RDtJQUU5RCxPQUFPO0FBQ1QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92aWJlLTNkLWNvZGUvLi9hcHAvY29tcG9uZW50cy90aHJlZS9TdG9yZWRPYmplY3RzLnRzeD8zYTc4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHVzZUVmZmVjdCwgdXNlTWVtbywgdXNlUmVmIH0gZnJvbSAncmVhY3QnXG5pbXBvcnQgeyB1c2VPYmplY3RTdG9yZSwgU3RvcmVkT2JqZWN0IH0gZnJvbSAnQC9zdG9yZS9hcHBTdG9yZSdcbmltcG9ydCAqIGFzIFRIUkVFIGZyb20gJ3RocmVlJ1xuaW1wb3J0IHsgdXNlVGhyZWUgfSBmcm9tICdAcmVhY3QtdGhyZWUvZmliZXInXG5cbi8vIEhlbHBlciB0byBjcmVhdGUgYSBtZXNoIGZyb20gc3RvcmVkIG9iamVjdCBkYXRhXG5jb25zdCBjcmVhdGVNZXNoRnJvbVN0b3JlZCA9IChkYXRhOiBTdG9yZWRPYmplY3QpOiBUSFJFRS5NZXNoID0+IHtcbiAgbGV0IGdlb21ldHJ5OiBUSFJFRS5CdWZmZXJHZW9tZXRyeTtcbiAgbGV0IG1hdGVyaWFsOiBUSFJFRS5NYXRlcmlhbDtcbiAgXG4gIC8vIFRyeSB0byBnZXQgdGhlIG9iamVjdCBmcm9tIHRoZSBnbG9iYWwgcmVmZXJlbmNlc1xuICBjb25zdCBvYmplY3RJZCA9IGRhdGEuZ2VvbWV0cnk/LnBhcmFtZXRlcnM/Lm9iamVjdElkIHx8IGRhdGEuaWQ7XG4gIGNvbnN0IG9yaWdpbmFsT2JqZWN0ID0gd2luZG93Ll9fb2JqZWN0UmVmZXJlbmNlcz8uZ2V0KG9iamVjdElkKSBhcyBUSFJFRS5NZXNoO1xuICBcbiAgaWYgKG9yaWdpbmFsT2JqZWN0IGluc3RhbmNlb2YgVEhSRUUuTWVzaCkge1xuICAgIGNvbnNvbGUubG9nKGBGb3VuZCBvcmlnaW5hbCBtZXNoIG9iamVjdDogJHtvYmplY3RJZH1gKTtcbiAgICAvLyBXZSBjYW4gcmV1c2UgdGhlIGVudGlyZSBvcmlnaW5hbCBtZXNoXG4gICAgY29uc3QgbWVzaCA9IG9yaWdpbmFsT2JqZWN0LmNsb25lKCk7XG4gICAgXG4gICAgLy8gQXBwbHkgdHJhbnNmb3JtcyBmcm9tIHRoZSBzdG9yZWQgZGF0YVxuICAgIGlmIChkYXRhLnBvc2l0aW9uKSBtZXNoLnBvc2l0aW9uLnNldCguLi5kYXRhLnBvc2l0aW9uKTtcbiAgICBpZiAoZGF0YS5yb3RhdGlvbikgbWVzaC5yb3RhdGlvbi5zZXQoLi4uZGF0YS5yb3RhdGlvbik7XG4gICAgaWYgKGRhdGEuc2NhbGUpIG1lc2guc2NhbGUuc2V0KC4uLmRhdGEuc2NhbGUpO1xuICAgIFxuICAgIC8vIEVuc3VyZSB1c2VyRGF0YSBpcyBzZXQgY29ycmVjdGx5XG4gICAgbWVzaC51c2VyRGF0YSA9IHsgLi4uZGF0YS51c2VyRGF0YSB9O1xuICAgIG1lc2gudXNlckRhdGEuaWQgPSBkYXRhLmlkO1xuICAgIFxuICAgIC8vIFNldCB0aGUgVVVJRCB0byBtYXRjaCB0aGUgc3RvcmVkIElEXG4gICAgdHJ5IHtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShtZXNoLCAndXVpZCcsIHsgdmFsdWU6IGRhdGEuaWQgfSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS53YXJuKFwiQ291bGQgbm90IHNldCBVVUlELCBzZWxlY3Rpb24gbWlnaHQgbm90IHdvcmsgY29ycmVjdGx5XCIsIGUpO1xuICAgIH1cbiAgICBcbiAgICBjb25zb2xlLmxvZyhgQ3JlYXRlZCBtZXNoIGZyb20gb3JpZ2luYWwgb2JqZWN0OiBpZD0ke2RhdGEuaWR9LCB1dWlkPSR7bWVzaC51dWlkfWApO1xuICAgIHJldHVybiBtZXNoO1xuICB9XG4gIFxuICAvLyBUcnkgdG8gdXNlIHRoZSBvcmlnaW5hbCBnZW9tZXRyeSBmcm9tIHJlZmVyZW5jZXNcbiAgY29uc3Qgb3JpZ2luYWxHZW9tZXRyeSA9IHdpbmRvdy5fX29iamVjdFJlZmVyZW5jZXM/LmdldChgJHtvYmplY3RJZH1fZ2VvbWV0cnlgKSBhcyBUSFJFRS5CdWZmZXJHZW9tZXRyeTtcbiAgY29uc3Qgb3JpZ2luYWxNYXRlcmlhbCA9IHdpbmRvdy5fX29iamVjdFJlZmVyZW5jZXM/LmdldChgJHtvYmplY3RJZH1fbWF0ZXJpYWxgKSBhcyBUSFJFRS5NYXRlcmlhbDtcbiAgXG4gIGlmIChvcmlnaW5hbEdlb21ldHJ5KSB7XG4gICAgY29uc29sZS5sb2coYEZvdW5kIG9yaWdpbmFsIGdlb21ldHJ5OiAke29iamVjdElkfWApO1xuICAgIGdlb21ldHJ5ID0gb3JpZ2luYWxHZW9tZXRyeTtcbiAgfSBlbHNlIHtcbiAgICAvLyBGYWxsYmFjayB0byBiYXNpYyBnZW9tZXRyeVxuICAgIGNvbnNvbGUubG9nKGBVc2luZyBmYWxsYmFjayBnZW9tZXRyeSBmb3IgJHtkYXRhLm5hbWV9YCk7XG4gICAgZ2VvbWV0cnkgPSBuZXcgVEhSRUUuQm94R2VvbWV0cnkoMSwgMSwgMSk7XG4gIH1cbiAgXG4gIGlmIChvcmlnaW5hbE1hdGVyaWFsKSB7XG4gICAgY29uc29sZS5sb2coYEZvdW5kIG9yaWdpbmFsIG1hdGVyaWFsOiAke29iamVjdElkfWApO1xuICAgIG1hdGVyaWFsID0gb3JpZ2luYWxNYXRlcmlhbC5jbG9uZSgpO1xuICB9IGVsc2Uge1xuICAgIC8vIEZhbGxiYWNrIHRvIGJhc2ljIG1hdGVyaWFsXG4gICAgY29uc29sZS5sb2coYFVzaW5nIGZhbGxiYWNrIG1hdGVyaWFsIGZvciAke2RhdGEubmFtZX1gKTtcbiAgICBsZXQgY29sb3IgPSBwYXJzZUludChkYXRhLm1hdGVyaWFsPy5jb2xvciB8fCAnZmZmZmZmJywgMTYpO1xuICAgIG1hdGVyaWFsID0gbmV3IFRIUkVFLk1lc2hTdGFuZGFyZE1hdGVyaWFsKHsgY29sb3IgfSk7XG4gIH1cbiAgXG4gIC8vIEVuc3VyZSB3ZSBoYXZlIHZhbGlkIGdlb21ldHJ5IGFuZCBtYXRlcmlhbFxuICBpZiAoIWdlb21ldHJ5KSB7XG4gICAgY29uc29sZS53YXJuKFwiTWlzc2luZyBnZW9tZXRyeSwgdXNpbmcgZmFsbGJhY2sgYm94XCIpO1xuICAgIGdlb21ldHJ5ID0gbmV3IFRIUkVFLkJveEdlb21ldHJ5KDEsIDEsIDEpO1xuICB9XG4gIFxuICBpZiAoIW1hdGVyaWFsKSB7XG4gICAgY29uc29sZS53YXJuKFwiTWlzc2luZyBtYXRlcmlhbCwgdXNpbmcgZmFsbGJhY2sgbWF0ZXJpYWxcIik7XG4gICAgbWF0ZXJpYWwgPSBuZXcgVEhSRUUuTWVzaFN0YW5kYXJkTWF0ZXJpYWwoeyBjb2xvcjogMHhmZjAwMDAgfSk7XG4gIH1cbiAgXG4gIC8vIENyZWF0ZSBtZXNoXG4gIGNvbnN0IG1lc2ggPSBuZXcgVEhSRUUuTWVzaChnZW9tZXRyeSwgbWF0ZXJpYWwpO1xuICBcbiAgLy8gQXBwbHkgdHJhbnNmb3Jtc1xuICBpZiAoZGF0YS5wb3NpdGlvbikgbWVzaC5wb3NpdGlvbi5zZXQoLi4uZGF0YS5wb3NpdGlvbik7XG4gIGlmIChkYXRhLnJvdGF0aW9uKSBtZXNoLnJvdGF0aW9uLnNldCguLi5kYXRhLnJvdGF0aW9uKTtcbiAgaWYgKGRhdGEuc2NhbGUpIG1lc2guc2NhbGUuc2V0KC4uLmRhdGEuc2NhbGUpO1xuICBcbiAgLy8gUmVzdG9yZSB1c2VyRGF0YVxuICBpZiAoZGF0YS51c2VyRGF0YSkge1xuICAgIG1lc2gudXNlckRhdGEgPSB7IC4uLmRhdGEudXNlckRhdGEgfTtcbiAgfVxuICBcbiAgLy8gRW5zdXJlIHRoZXNlIGNyaXRpY2FsIGZpZWxkc1xuICBtZXNoLnVzZXJEYXRhLmlkID0gZGF0YS5pZDtcbiAgbWVzaC51c2VyRGF0YS5uYW1lID0gZGF0YS5uYW1lO1xuICBtZXNoLnVzZXJEYXRhLmlzVXNlckNyZWF0ZWQgPSB0cnVlO1xuICBtZXNoLnVzZXJEYXRhLmlzU2VyaWFsaXplZEZyb21Db2RlID0gdHJ1ZTtcbiAgXG4gIC8vIFRyeSB0byB1c2UgdGhlIHN0b3JlZCBJRCBhcyB0aGUgVVVJRCBpZiBwb3NzaWJsZVxuICB0cnkge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShtZXNoLCAndXVpZCcsIHsgdmFsdWU6IGRhdGEuaWQgfSk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBjb25zb2xlLndhcm4oXCJDb3VsZCBub3Qgc2V0IFVVSUQsIHNlbGVjdGlvbiBtaWdodCBub3Qgd29yayBjb3JyZWN0bHlcIiwgZSk7XG4gIH1cbiAgXG4gIGNvbnNvbGUubG9nKGBDcmVhdGVkIG1lc2ggZnJvbSBzdG9yYWdlOiBpZD0ke2RhdGEuaWR9LCB1dWlkPSR7bWVzaC51dWlkfWApO1xuICBcbiAgcmV0dXJuIG1lc2g7XG59O1xuXG4vLyBIZWxwZXIgdG8gY3JlYXRlIGEgZ3JvdXAgZnJvbSBzdG9yZWQgb2JqZWN0IGRhdGFcbmNvbnN0IGNyZWF0ZUdyb3VwRnJvbVN0b3JlZCA9IChkYXRhOiBTdG9yZWRPYmplY3QpOiBUSFJFRS5Hcm91cCA9PiB7XG4gIC8vIFRyeSB0byBnZXQgdGhlIG9yaWdpbmFsIGdyb3VwIGZyb20gZ2xvYmFsIHJlZmVyZW5jZXNcbiAgY29uc3Qgb3JpZ2luYWxHcm91cCA9IHdpbmRvdy5fX29iamVjdFJlZmVyZW5jZXM/LmdldChkYXRhLmlkKSBhcyBUSFJFRS5Hcm91cDtcbiAgXG4gIGlmIChvcmlnaW5hbEdyb3VwIGluc3RhbmNlb2YgVEhSRUUuR3JvdXApIHtcbiAgICBjb25zb2xlLmxvZyhgRm91bmQgb3JpZ2luYWwgZ3JvdXAgb2JqZWN0OiAke2RhdGEuaWR9YCk7XG4gICAgLy8gV2UgY2FuIHJldXNlIHRoZSBlbnRpcmUgb3JpZ2luYWwgZ3JvdXBcbiAgICBjb25zdCBncm91cCA9IG9yaWdpbmFsR3JvdXAuY2xvbmUoKTtcbiAgICBcbiAgICAvLyBBcHBseSB0cmFuc2Zvcm1zIGZyb20gdGhlIHN0b3JlZCBkYXRhXG4gICAgaWYgKGRhdGEucG9zaXRpb24pIGdyb3VwLnBvc2l0aW9uLnNldCguLi5kYXRhLnBvc2l0aW9uKTtcbiAgICBpZiAoZGF0YS5yb3RhdGlvbikgZ3JvdXAucm90YXRpb24uc2V0KC4uLmRhdGEucm90YXRpb24pO1xuICAgIGlmIChkYXRhLnNjYWxlKSBncm91cC5zY2FsZS5zZXQoLi4uZGF0YS5zY2FsZSk7XG4gICAgXG4gICAgLy8gRW5zdXJlIHVzZXJEYXRhIGlzIHNldCBjb3JyZWN0bHlcbiAgICBncm91cC51c2VyRGF0YSA9IHsgLi4uZGF0YS51c2VyRGF0YSB9O1xuICAgIGdyb3VwLnVzZXJEYXRhLmlkID0gZGF0YS5pZDtcbiAgICBcbiAgICAvLyBTZXQgdGhlIFVVSUQgdG8gbWF0Y2ggdGhlIHN0b3JlZCBJRFxuICAgIHRyeSB7XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoZ3JvdXAsICd1dWlkJywgeyB2YWx1ZTogZGF0YS5pZCB9KTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLndhcm4oXCJDb3VsZCBub3Qgc2V0IFVVSUQsIHNlbGVjdGlvbiBtaWdodCBub3Qgd29yayBjb3JyZWN0bHlcIiwgZSk7XG4gICAgfVxuICAgIFxuICAgIGNvbnNvbGUubG9nKGBDcmVhdGVkIGdyb3VwIGZyb20gb3JpZ2luYWwgb2JqZWN0OiBpZD0ke2RhdGEuaWR9LCB1dWlkPSR7Z3JvdXAudXVpZH1gKTtcbiAgICByZXR1cm4gZ3JvdXA7XG4gIH1cbiAgXG4gIC8vIElmIHdlIGRvbid0IGhhdmUgdGhlIG9yaWdpbmFsIGdyb3VwLCBjcmVhdGUgYSBuZXcgb25lXG4gIGNvbnN0IGdyb3VwID0gbmV3IFRIUkVFLkdyb3VwKCk7XG4gIFxuICAvLyBBcHBseSB0cmFuc2Zvcm1zXG4gIGlmIChkYXRhLnBvc2l0aW9uKSBncm91cC5wb3NpdGlvbi5zZXQoLi4uZGF0YS5wb3NpdGlvbik7XG4gIGlmIChkYXRhLnJvdGF0aW9uKSBncm91cC5yb3RhdGlvbi5zZXQoLi4uZGF0YS5yb3RhdGlvbik7XG4gIGlmIChkYXRhLnNjYWxlKSBncm91cC5zY2FsZS5zZXQoLi4uZGF0YS5zY2FsZSk7XG4gIFxuICAvLyBSZXN0b3JlIHVzZXJEYXRhXG4gIGlmIChkYXRhLnVzZXJEYXRhKSB7XG4gICAgZ3JvdXAudXNlckRhdGEgPSB7IC4uLmRhdGEudXNlckRhdGEgfTtcbiAgfVxuICBcbiAgLy8gQWRkIGNoaWxkcmVuXG4gIGlmIChkYXRhLmNoaWxkcmVuICYmIGRhdGEuY2hpbGRyZW4ubGVuZ3RoID4gMCkge1xuICAgIGNvbnNvbGUubG9nKGBDcmVhdGluZyAke2RhdGEuY2hpbGRyZW4ubGVuZ3RofSBjaGlsZHJlbiBmb3IgZ3JvdXAgJHtkYXRhLmlkfWApO1xuICAgIGRhdGEuY2hpbGRyZW4uZm9yRWFjaChjaGlsZERhdGEgPT4ge1xuICAgICAgbGV0IGNoaWxkOiBUSFJFRS5PYmplY3QzRCB8IG51bGwgPSBudWxsO1xuICAgICAgaWYgKGNoaWxkRGF0YS50eXBlID09PSAnbWVzaCcpIHtcbiAgICAgICAgY2hpbGQgPSBjcmVhdGVNZXNoRnJvbVN0b3JlZChjaGlsZERhdGEpO1xuICAgICAgfSBlbHNlIGlmIChjaGlsZERhdGEudHlwZSA9PT0gJ2dyb3VwJykge1xuICAgICAgICBjaGlsZCA9IGNyZWF0ZUdyb3VwRnJvbVN0b3JlZChjaGlsZERhdGEpO1xuICAgICAgfSBlbHNlIGlmIChjaGlsZERhdGEudHlwZSA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgY2hpbGQgPSBjcmVhdGVPYmplY3QzREZyb21TdG9yZWQoY2hpbGREYXRhKTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYgKGNoaWxkKSB7XG4gICAgICAgIGdyb3VwLmFkZChjaGlsZCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbiAgXG4gIC8vIEVuc3VyZSB0aGVzZSBjcml0aWNhbCBmaWVsZHNcbiAgZ3JvdXAudXNlckRhdGEuaWQgPSBkYXRhLmlkO1xuICBncm91cC51c2VyRGF0YS5uYW1lID0gZGF0YS5uYW1lO1xuICBncm91cC51c2VyRGF0YS5pc1VzZXJDcmVhdGVkID0gdHJ1ZTtcbiAgZ3JvdXAudXNlckRhdGEuaXNTZXJpYWxpemVkRnJvbUNvZGUgPSB0cnVlO1xuICBcbiAgLy8gVHJ5IHRvIHVzZSB0aGUgc3RvcmVkIElEIGFzIHRoZSBVVUlEIGlmIHBvc3NpYmxlXG4gIHRyeSB7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGdyb3VwLCAndXVpZCcsIHsgdmFsdWU6IGRhdGEuaWQgfSk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBjb25zb2xlLndhcm4oXCJDb3VsZCBub3Qgc2V0IFVVSUQsIHNlbGVjdGlvbiBtaWdodCBub3Qgd29yayBjb3JyZWN0bHlcIiwgZSk7XG4gIH1cbiAgXG4gIGNvbnNvbGUubG9nKGBDcmVhdGVkIGdyb3VwIGZyb20gc3RvcmFnZTogaWQ9JHtkYXRhLmlkfSwgdXVpZD0ke2dyb3VwLnV1aWR9LCBjaGlsZHJlbjogJHtncm91cC5jaGlsZHJlbi5sZW5ndGh9YCk7XG4gIFxuICByZXR1cm4gZ3JvdXA7XG59O1xuXG4vLyBIZWxwZXIgdG8gY3JlYXRlIGEgZ2VuZXJpYyBPYmplY3QzRCBmcm9tIHN0b3JlZCBkYXRhXG5jb25zdCBjcmVhdGVPYmplY3QzREZyb21TdG9yZWQgPSAoZGF0YTogU3RvcmVkT2JqZWN0KTogVEhSRUUuT2JqZWN0M0QgPT4ge1xuICAvLyBUcnkgdG8gZ2V0IHRoZSBvcmlnaW5hbCBvYmplY3QgZnJvbSBnbG9iYWwgcmVmZXJlbmNlc1xuICBjb25zdCBvcmlnaW5hbE9iamVjdCA9IHdpbmRvdy5fX29iamVjdFJlZmVyZW5jZXM/LmdldChkYXRhLmlkKSBhcyBUSFJFRS5PYmplY3QzRDtcbiAgXG4gIGlmIChvcmlnaW5hbE9iamVjdCAmJiAhKG9yaWdpbmFsT2JqZWN0IGluc3RhbmNlb2YgVEhSRUUuTWVzaCkgJiYgXG4gICAgICAhKG9yaWdpbmFsT2JqZWN0IGluc3RhbmNlb2YgVEhSRUUuR3JvdXApKSB7XG4gICAgY29uc29sZS5sb2coYEZvdW5kIG9yaWdpbmFsIG9iamVjdDNEOiAke2RhdGEuaWR9YCk7XG4gICAgLy8gV2UgY2FuIHJldXNlIHRoZSBlbnRpcmUgb3JpZ2luYWwgb2JqZWN0XG4gICAgY29uc3Qgb2JqID0gb3JpZ2luYWxPYmplY3QuY2xvbmUoKTtcbiAgICBcbiAgICAvLyBBcHBseSB0cmFuc2Zvcm1zIGZyb20gdGhlIHN0b3JlZCBkYXRhXG4gICAgaWYgKGRhdGEucG9zaXRpb24pIG9iai5wb3NpdGlvbi5zZXQoLi4uZGF0YS5wb3NpdGlvbik7XG4gICAgaWYgKGRhdGEucm90YXRpb24pIG9iai5yb3RhdGlvbi5zZXQoLi4uZGF0YS5yb3RhdGlvbik7XG4gICAgaWYgKGRhdGEuc2NhbGUpIG9iai5zY2FsZS5zZXQoLi4uZGF0YS5zY2FsZSk7XG4gICAgXG4gICAgLy8gRW5zdXJlIHVzZXJEYXRhIGlzIHNldCBjb3JyZWN0bHlcbiAgICBvYmoudXNlckRhdGEgPSB7IC4uLmRhdGEudXNlckRhdGEgfTtcbiAgICBvYmoudXNlckRhdGEuaWQgPSBkYXRhLmlkO1xuICAgIFxuICAgIC8vIFNldCB0aGUgVVVJRCB0byBtYXRjaCB0aGUgc3RvcmVkIElEXG4gICAgdHJ5IHtcbiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosICd1dWlkJywgeyB2YWx1ZTogZGF0YS5pZCB9KTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICBjb25zb2xlLndhcm4oXCJDb3VsZCBub3Qgc2V0IFVVSUQsIHNlbGVjdGlvbiBtaWdodCBub3Qgd29yayBjb3JyZWN0bHlcIiwgZSk7XG4gICAgfVxuICAgIFxuICAgIGNvbnNvbGUubG9nKGBDcmVhdGVkIG9iamVjdDNEIGZyb20gb3JpZ2luYWwgb2JqZWN0OiBpZD0ke2RhdGEuaWR9LCB1dWlkPSR7b2JqLnV1aWR9YCk7XG4gICAgcmV0dXJuIG9iajtcbiAgfVxuICBcbiAgLy8gSWYgd2UgZG9uJ3QgaGF2ZSB0aGUgb3JpZ2luYWwgb2JqZWN0LCBjcmVhdGUgYSBuZXcgb25lXG4gIGNvbnN0IG9iaiA9IG5ldyBUSFJFRS5PYmplY3QzRCgpO1xuICBcbiAgLy8gQXBwbHkgdHJhbnNmb3Jtc1xuICBpZiAoZGF0YS5wb3NpdGlvbikgb2JqLnBvc2l0aW9uLnNldCguLi5kYXRhLnBvc2l0aW9uKTtcbiAgaWYgKGRhdGEucm90YXRpb24pIG9iai5yb3RhdGlvbi5zZXQoLi4uZGF0YS5yb3RhdGlvbik7XG4gIGlmIChkYXRhLnNjYWxlKSBvYmouc2NhbGUuc2V0KC4uLmRhdGEuc2NhbGUpO1xuICBcbiAgLy8gUmVzdG9yZSB1c2VyRGF0YVxuICBpZiAoZGF0YS51c2VyRGF0YSkge1xuICAgIG9iai51c2VyRGF0YSA9IHsgLi4uZGF0YS51c2VyRGF0YSB9O1xuICB9XG4gIFxuICAvLyBBZGQgY2hpbGRyZW5cbiAgaWYgKGRhdGEuY2hpbGRyZW4gJiYgZGF0YS5jaGlsZHJlbi5sZW5ndGggPiAwKSB7XG4gICAgY29uc29sZS5sb2coYENyZWF0aW5nICR7ZGF0YS5jaGlsZHJlbi5sZW5ndGh9IGNoaWxkcmVuIGZvciBvYmplY3QzRCAke2RhdGEuaWR9YCk7XG4gICAgZGF0YS5jaGlsZHJlbi5mb3JFYWNoKGNoaWxkRGF0YSA9PiB7XG4gICAgICBsZXQgY2hpbGQ6IFRIUkVFLk9iamVjdDNEIHwgbnVsbCA9IG51bGw7XG4gICAgICBpZiAoY2hpbGREYXRhLnR5cGUgPT09ICdtZXNoJykge1xuICAgICAgICBjaGlsZCA9IGNyZWF0ZU1lc2hGcm9tU3RvcmVkKGNoaWxkRGF0YSk7XG4gICAgICB9IGVsc2UgaWYgKGNoaWxkRGF0YS50eXBlID09PSAnZ3JvdXAnKSB7XG4gICAgICAgIGNoaWxkID0gY3JlYXRlR3JvdXBGcm9tU3RvcmVkKGNoaWxkRGF0YSk7XG4gICAgICB9IGVsc2UgaWYgKGNoaWxkRGF0YS50eXBlID09PSAnb2JqZWN0Jykge1xuICAgICAgICBjaGlsZCA9IGNyZWF0ZU9iamVjdDNERnJvbVN0b3JlZChjaGlsZERhdGEpO1xuICAgICAgfVxuICAgICAgXG4gICAgICBpZiAoY2hpbGQpIHtcbiAgICAgICAgb2JqLmFkZChjaGlsZCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbiAgXG4gIC8vIEVuc3VyZSB0aGVzZSBjcml0aWNhbCBmaWVsZHNcbiAgb2JqLnVzZXJEYXRhLmlkID0gZGF0YS5pZDtcbiAgb2JqLnVzZXJEYXRhLm5hbWUgPSBkYXRhLm5hbWU7XG4gIG9iai51c2VyRGF0YS5pc1VzZXJDcmVhdGVkID0gdHJ1ZTtcbiAgb2JqLnVzZXJEYXRhLmlzU2VyaWFsaXplZEZyb21Db2RlID0gdHJ1ZTtcbiAgXG4gIC8vIFRyeSB0byB1c2UgdGhlIHN0b3JlZCBJRCBhcyB0aGUgVVVJRCBpZiBwb3NzaWJsZVxuICB0cnkge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosICd1dWlkJywgeyB2YWx1ZTogZGF0YS5pZCB9KTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGNvbnNvbGUud2FybihcIkNvdWxkIG5vdCBzZXQgVVVJRCwgc2VsZWN0aW9uIG1pZ2h0IG5vdCB3b3JrIGNvcnJlY3RseVwiLCBlKTtcbiAgfVxuICBcbiAgY29uc29sZS5sb2coYENyZWF0ZWQgZ2VuZXJpYyBvYmplY3QzRCBmcm9tIHN0b3JhZ2U6IGlkPSR7ZGF0YS5pZH0sIHV1aWQ9JHtvYmoudXVpZH1gKTtcbiAgXG4gIHJldHVybiBvYmo7XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gU3RvcmVkT2JqZWN0cygpIHtcbiAgY29uc3QgeyBvYmplY3RzLCB1cGRhdGVPYmplY3QgfSA9IHVzZU9iamVjdFN0b3JlKCk7XG4gIGNvbnN0IHsgc2NlbmUgfSA9IHVzZVRocmVlKCk7XG4gIGNvbnN0IG9iamVjdFJlZnMgPSB1c2VSZWY8TWFwPHN0cmluZywgVEhSRUUuT2JqZWN0M0Q+PihuZXcgTWFwKCkpO1xuICBjb25zdCBmaXJzdFJlbmRlciA9IHVzZVJlZih0cnVlKTtcbiAgXG4gIC8vIENvbnZlcnQgc3RvcmVkIG9iamVjdHMgdG8gVGhyZWUuanMgb2JqZWN0c1xuICBjb25zdCB0aHJlZU9iamVjdHMgPSB1c2VNZW1vKCgpID0+IHtcbiAgICAvLyBTa2lwIHJlY3JlYXRpb24gb24gZmlyc3QgcmVuZGVyIHRvIGF2b2lkIHVzZUVmZmVjdCBsb29wXG4gICAgaWYgKGZpcnN0UmVuZGVyLmN1cnJlbnQpIHtcbiAgICAgIGZpcnN0UmVuZGVyLmN1cnJlbnQgPSBmYWxzZTtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gICAgXG4gICAgY29uc29sZS5sb2coXCJDcmVhdGluZyBvYmplY3RzIGZyb20gc3RvcmFnZSwgY291bnQ6XCIsIG9iamVjdHMubGVuZ3RoKTtcbiAgICBcbiAgICByZXR1cm4gb2JqZWN0cy5tYXAob2JqID0+IHtcbiAgICAgIC8vIENoZWNrIGlmIHdlIGFscmVhZHkgaGF2ZSB0aGlzIG9iamVjdCBpbiB0aGUgcmVmc1xuICAgICAgY29uc3QgZXhpc3RpbmdPYmogPSBvYmplY3RSZWZzLmN1cnJlbnQuZ2V0KG9iai5pZCk7XG4gICAgICBpZiAoZXhpc3RpbmdPYmopIHtcbiAgICAgICAgLy8gSnVzdCB1cGRhdGUgdHJhbnNmb3JtcyBpbnN0ZWFkIG9mIHJlY3JlYXRpbmdcbiAgICAgICAgZXhpc3RpbmdPYmoucG9zaXRpb24uc2V0KC4uLm9iai5wb3NpdGlvbik7XG4gICAgICAgIGV4aXN0aW5nT2JqLnJvdGF0aW9uLnNldCguLi5vYmoucm90YXRpb24pO1xuICAgICAgICBleGlzdGluZ09iai5zY2FsZS5zZXQoLi4ub2JqLnNjYWxlKTtcbiAgICAgICAgcmV0dXJuIGV4aXN0aW5nT2JqO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBDcmVhdGUgbmV3IG9iamVjdCBpZiBub3QgaW4gcmVmc1xuICAgICAgaWYgKG9iai50eXBlID09PSAnbWVzaCcpIHtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZU1lc2hGcm9tU3RvcmVkKG9iaik7XG4gICAgICB9IGVsc2UgaWYgKG9iai50eXBlID09PSAnZ3JvdXAnKSB7XG4gICAgICAgIHJldHVybiBjcmVhdGVHcm91cEZyb21TdG9yZWQob2JqKTtcbiAgICAgIH0gZWxzZSBpZiAob2JqLnR5cGUgPT09ICdvYmplY3QnKSB7XG4gICAgICAgIHJldHVybiBjcmVhdGVPYmplY3QzREZyb21TdG9yZWQob2JqKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH0pLmZpbHRlcihCb29sZWFuKSBhcyBUSFJFRS5PYmplY3QzRFtdO1xuICB9LCBbb2JqZWN0c10pO1xuICBcbiAgLy8gQWRkIG9iamVjdHMgdG8gc2NlbmVcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAodGhyZWVPYmplY3RzLmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xuICAgIFxuICAgIGNvbnNvbGUubG9nKFwiQWRkaW5nIG9iamVjdHMgdG8gc2NlbmUsIGNvdW50OlwiLCB0aHJlZU9iamVjdHMubGVuZ3RoKTtcbiAgICBcbiAgICAvLyBBZGQgbmV3IG9iamVjdHMgdG8gc2NlbmVcbiAgICB0aHJlZU9iamVjdHMuZm9yRWFjaChvYmogPT4ge1xuICAgICAgaWYgKG9iaiAmJiAhc2NlbmUuZ2V0T2JqZWN0QnlJZChvYmouaWQpKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGBBZGRpbmcgb2JqZWN0IHRvIHNjZW5lOiAke29iai51dWlkfWApO1xuICAgICAgICBzY2VuZS5hZGQob2JqKTtcbiAgICAgICAgb2JqZWN0UmVmcy5jdXJyZW50LnNldChvYmoudXNlckRhdGEuaWQsIG9iaik7XG4gICAgICB9XG4gICAgfSk7XG4gICAgXG4gICAgLy8gQ2FwdHVyZSB0aGUgY3VycmVudCByZWYgdmFsdWVcbiAgICBjb25zdCBjdXJyZW50UmVmcyA9IG5ldyBNYXAob2JqZWN0UmVmcy5jdXJyZW50KTtcbiAgICBcbiAgICAvLyBDbGVhbnVwXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIC8vIE9ubHkgcmVtb3ZlIG9iamVjdHMgdGhhdCBhcmUgbm90IGluIHRoZSBjdXJyZW50IHNldFxuICAgICAgY3VycmVudFJlZnMuZm9yRWFjaCgob2JqLCBpZCkgPT4ge1xuICAgICAgICBpZiAoIXRocmVlT2JqZWN0cy5zb21lKG5ld09iaiA9PiBuZXdPYmoudXNlckRhdGEuaWQgPT09IGlkKSkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKGBSZW1vdmluZyBvYmplY3QgZnJvbSBzY2VuZTogJHtpZH1gKTtcbiAgICAgICAgICBzY2VuZS5yZW1vdmUob2JqKTtcbiAgICAgICAgICBjdXJyZW50UmVmcy5kZWxldGUoaWQpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9O1xuICB9LCBbc2NlbmUsIHRocmVlT2JqZWN0c10pO1xuICBcbiAgLy8gT25seSB1cGRhdGUgdGhlIHN0b3JlIHdoZW4gdXNlciBleHBsaWNpdGx5IGNoYW5nZXMgb2JqZWN0cyB2aWEgVHJhbnNmb3JtQ29udHJvbHNcbiAgLy8gVGhhdCdzIG5vdyBoYW5kbGVkIGluIHRoZSBDdXN0b21UcmFuc2Zvcm1Db250cm9scyBjb21wb25lbnRcbiAgXG4gIHJldHVybiBudWxsO1xufSAiXSwibmFtZXMiOlsidXNlRWZmZWN0IiwidXNlTWVtbyIsInVzZVJlZiIsInVzZU9iamVjdFN0b3JlIiwiVEhSRUUiLCJ1c2VUaHJlZSIsImNyZWF0ZU1lc2hGcm9tU3RvcmVkIiwiZGF0YSIsImdlb21ldHJ5IiwibWF0ZXJpYWwiLCJvYmplY3RJZCIsInBhcmFtZXRlcnMiLCJpZCIsIm9yaWdpbmFsT2JqZWN0Iiwid2luZG93IiwiX19vYmplY3RSZWZlcmVuY2VzIiwiZ2V0IiwiTWVzaCIsImNvbnNvbGUiLCJsb2ciLCJtZXNoIiwiY2xvbmUiLCJwb3NpdGlvbiIsInNldCIsInJvdGF0aW9uIiwic2NhbGUiLCJ1c2VyRGF0YSIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwidmFsdWUiLCJlIiwid2FybiIsInV1aWQiLCJvcmlnaW5hbEdlb21ldHJ5Iiwib3JpZ2luYWxNYXRlcmlhbCIsIm5hbWUiLCJCb3hHZW9tZXRyeSIsImNvbG9yIiwicGFyc2VJbnQiLCJNZXNoU3RhbmRhcmRNYXRlcmlhbCIsImlzVXNlckNyZWF0ZWQiLCJpc1NlcmlhbGl6ZWRGcm9tQ29kZSIsImNyZWF0ZUdyb3VwRnJvbVN0b3JlZCIsIm9yaWdpbmFsR3JvdXAiLCJHcm91cCIsImdyb3VwIiwiY2hpbGRyZW4iLCJsZW5ndGgiLCJmb3JFYWNoIiwiY2hpbGREYXRhIiwiY2hpbGQiLCJ0eXBlIiwiY3JlYXRlT2JqZWN0M0RGcm9tU3RvcmVkIiwiYWRkIiwib2JqIiwiT2JqZWN0M0QiLCJTdG9yZWRPYmplY3RzIiwib2JqZWN0cyIsInVwZGF0ZU9iamVjdCIsInNjZW5lIiwib2JqZWN0UmVmcyIsIk1hcCIsImZpcnN0UmVuZGVyIiwidGhyZWVPYmplY3RzIiwiY3VycmVudCIsIm1hcCIsImV4aXN0aW5nT2JqIiwiZmlsdGVyIiwiQm9vbGVhbiIsImdldE9iamVjdEJ5SWQiLCJjdXJyZW50UmVmcyIsInNvbWUiLCJuZXdPYmoiLCJyZW1vdmUiLCJkZWxldGUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./app/components/three/StoredObjects.tsx\n");

/***/ }),

/***/ "(ssr)/./app/components/three/canvas.tsx":
/*!*****************************************!*\
  !*** ./app/components/three/canvas.tsx ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ ThreeJSCanvas)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _App_css__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./App.css */ \"(ssr)/./app/components/three/App.css\");\n/* harmony import */ var _react_three_fiber__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! @react-three/fiber */ \"(ssr)/./node_modules/@react-three/fiber/dist/react-three-fiber.esm.js\");\n/* harmony import */ var _react_three_drei__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! @react-three/drei */ \"(ssr)/./node_modules/@react-three/drei/core/Sky.js\");\n/* harmony import */ var _react_three_drei__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! @react-three/drei */ \"(ssr)/./node_modules/@react-three/drei/core/useBVH.js\");\n/* harmony import */ var _react_three_drei__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! @react-three/drei */ \"(ssr)/./node_modules/@react-three/drei/core/GizmoHelper.js\");\n/* harmony import */ var _react_three_drei__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! @react-three/drei */ \"(ssr)/./node_modules/@react-three/drei/core/GizmoViewport.js\");\n/* harmony import */ var _components_three_InfiniteGrid__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/components/three/InfiniteGrid */ \"(ssr)/./app/components/three/InfiniteGrid.tsx\");\n/* harmony import */ var _components_three_FirstPersonController__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/components/three/FirstPersonController */ \"(ssr)/./app/components/three/FirstPersonController.tsx\");\n/* harmony import */ var _components_three_MeshCreator__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/components/three/MeshCreator */ \"(ssr)/./app/components/three/MeshCreator.tsx\");\n/* harmony import */ var _store_appStore__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/store/appStore */ \"(ssr)/./app/store/appStore.ts\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var _components_three_Crosshair__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! @/components/three/Crosshair */ \"(ssr)/./app/components/three/Crosshair.tsx\");\n/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! three */ \"(ssr)/./node_modules/three/build/three.core.js\");\n/* harmony import */ var _components_three_StoredObjects__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! @/components/three/StoredObjects */ \"(ssr)/./app/components/three/StoredObjects.tsx\");\n/* harmony import */ var three_addons_exporters_GLTFExporter_js__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! three/addons/exporters/GLTFExporter.js */ \"(ssr)/./node_modules/three/examples/jsm/exporters/GLTFExporter.js\");\n/* harmony import */ var _react_three_fiber__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! @react-three/fiber */ \"(ssr)/./node_modules/@react-three/fiber/dist/index-673ef987.esm.js\");\n/* harmony import */ var _components_three_Ocean__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! @/components/three/Ocean */ \"(ssr)/./app/components/three/Ocean.tsx\");\n/* __next_internal_client_entry_do_not_use__ default auto */ \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst FocusDetector = ()=>{\n    const { setUIFocused } = (0,_store_appStore__WEBPACK_IMPORTED_MODULE_5__.useAppStore)();\n    (0,react__WEBPACK_IMPORTED_MODULE_6__.useEffect)(()=>{\n        const handleFocusChange = ()=>{\n            const activeElement = document.activeElement;\n            const isInput = activeElement?.tagName === \"INPUT\" || activeElement?.tagName === \"TEXTAREA\";\n            setUIFocused(isInput);\n        };\n        document.addEventListener(\"focusin\", handleFocusChange);\n        document.addEventListener(\"focusout\", handleFocusChange);\n        handleFocusChange();\n        return ()=>{\n            document.removeEventListener(\"focusin\", handleFocusChange);\n            document.removeEventListener(\"focusout\", handleFocusChange);\n        };\n    }, [\n        setUIFocused\n    ]);\n    return null;\n};\n// Component to manage ocean visibility and grid visibility\nfunction OceanAndGridManager() {\n    const [showOcean, setShowOcean] = (0,react__WEBPACK_IMPORTED_MODULE_6__.useState)(false);\n    (0,react__WEBPACK_IMPORTED_MODULE_6__.useEffect)(()=>{\n        // Check for environment settings on each render\n        const checkSettings = ()=>{\n            // @ts-ignore - Accessing custom window property\n            const settings = window.__environmentSettings;\n            if (settings && typeof settings.showOcean === \"boolean\") {\n                setShowOcean(settings.showOcean);\n            }\n        };\n        // Initial check\n        checkSettings();\n        // Set up interval to check periodically for changes\n        const intervalId = setInterval(checkSettings, 500);\n        return ()=>clearInterval(intervalId);\n    }, []);\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n        children: showOcean ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_three_Ocean__WEBPACK_IMPORTED_MODULE_9__.Ocean, {}, void 0, false, {\n            fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/components/three/canvas.tsx\",\n            lineNumber: 70,\n            columnNumber: 20\n        }, this) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_three_InfiniteGrid__WEBPACK_IMPORTED_MODULE_2__.InfiniteGrid, {}, void 0, false, {\n            fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/components/three/canvas.tsx\",\n            lineNumber: 70,\n            columnNumber: 32\n        }, this)\n    }, void 0, false);\n}\nfunction ExampleCube() {\n    const meshRef = (0,react__WEBPACK_IMPORTED_MODULE_6__.useRef)(null);\n    (0,react__WEBPACK_IMPORTED_MODULE_6__.useEffect)(()=>{\n        if (meshRef.current) {\n            meshRef.current.userData = {\n                isUserCreated: true,\n                name: \"Example Cube\"\n            };\n        }\n    }, []);\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"mesh\", {\n        ref: meshRef,\n        position: [\n            2,\n            1,\n            0\n        ],\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"boxGeometry\", {\n                args: [\n                    1,\n                    1,\n                    1\n                ]\n            }, void 0, false, {\n                fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/components/three/canvas.tsx\",\n                lineNumber: 92,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"meshStandardMaterial\", {\n                color: \"hotpink\"\n            }, void 0, false, {\n                fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/components/three/canvas.tsx\",\n                lineNumber: 93,\n                columnNumber: 7\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/components/three/canvas.tsx\",\n        lineNumber: 88,\n        columnNumber: 5\n    }, this);\n}\nfunction ExampleGroup() {\n    const groupRef = (0,react__WEBPACK_IMPORTED_MODULE_6__.useRef)(null);\n    (0,react__WEBPACK_IMPORTED_MODULE_6__.useEffect)(()=>{\n        if (groupRef.current) {\n            groupRef.current.userData = {\n                isUserCreated: true,\n                name: \"Example Group\"\n            };\n        }\n    }, []);\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"group\", {\n        ref: groupRef,\n        position: [\n            -2,\n            1,\n            0\n        ],\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"mesh\", {\n                position: [\n                    0,\n                    0,\n                    0\n                ],\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"boxGeometry\", {\n                        args: [\n                            0.5,\n                            0.5,\n                            0.5\n                        ]\n                    }, void 0, false, {\n                        fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/components/three/canvas.tsx\",\n                        lineNumber: 116,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"meshStandardMaterial\", {\n                        color: \"cyan\"\n                    }, void 0, false, {\n                        fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/components/three/canvas.tsx\",\n                        lineNumber: 117,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/components/three/canvas.tsx\",\n                lineNumber: 115,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"mesh\", {\n                position: [\n                    0.7,\n                    0,\n                    0\n                ],\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"sphereGeometry\", {\n                        args: [\n                            0.3,\n                            16,\n                            16\n                        ]\n                    }, void 0, false, {\n                        fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/components/three/canvas.tsx\",\n                        lineNumber: 120,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"meshStandardMaterial\", {\n                        color: \"yellow\"\n                    }, void 0, false, {\n                        fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/components/three/canvas.tsx\",\n                        lineNumber: 121,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/components/three/canvas.tsx\",\n                lineNumber: 119,\n                columnNumber: 7\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"mesh\", {\n                position: [\n                    0.35,\n                    0.7,\n                    0\n                ],\n                rotation: [\n                    0,\n                    0,\n                    Math.PI / 4\n                ],\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"boxGeometry\", {\n                        args: [\n                            0.3,\n                            0.3,\n                            0.8\n                        ]\n                    }, void 0, false, {\n                        fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/components/three/canvas.tsx\",\n                        lineNumber: 124,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"meshStandardMaterial\", {\n                        color: \"lime\"\n                    }, void 0, false, {\n                        fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/components/three/canvas.tsx\",\n                        lineNumber: 125,\n                        columnNumber: 9\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/components/three/canvas.tsx\",\n                lineNumber: 123,\n                columnNumber: 7\n            }, this)\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/components/three/canvas.tsx\",\n        lineNumber: 111,\n        columnNumber: 5\n    }, this);\n}\n// Component to handle scene export\nfunction SceneExporter() {\n    const { scene } = (0,_react_three_fiber__WEBPACK_IMPORTED_MODULE_10__.z)();\n    // Store scene reference in a global variable for external access\n    (0,react__WEBPACK_IMPORTED_MODULE_6__.useEffect)(()=>{\n        // @ts-ignore - We're adding a custom property to window\n        window.__threeScene = scene;\n    }, [\n        scene\n    ]);\n    return null;\n}\nfunction ThreeJSCanvas({ visible = true }) {\n    const exportScene = ()=>{\n        // Only run on client side\n        if (true) return;\n        // @ts-ignore - Access the scene from the global variable\n        const scene = window.__threeScene;\n        if (!scene) return;\n        console.log(\"Original scene:\", scene);\n        // Create a temporary scene with only user-created objects\n        const exportScene = new three__WEBPACK_IMPORTED_MODULE_11__.Scene();\n        // Clone only user-created objects\n        scene.traverse((object)=>{\n            if (object.userData && object.userData.isUserCreated === true) {\n                console.log(\"Found user object to export:\", object.userData.name || \"Unnamed object\");\n                const clonedObject = object.clone();\n                exportScene.add(clonedObject);\n            }\n        });\n        // Check if we found any user objects\n        if (exportScene.children.length === 0) {\n            console.warn(\"No user-created objects found to export\");\n            alert(\"No user-created objects found to export. Try creating some objects first.\");\n            return;\n        }\n        console.log(\"Export scene with filtered objects:\", exportScene);\n        const exporter = new three_addons_exporters_GLTFExporter_js__WEBPACK_IMPORTED_MODULE_12__.GLTFExporter();\n        exporter.parse(exportScene, (gltf)=>{\n            console.log(\"GLTF export successful:\", gltf);\n            const blob = new Blob([\n                JSON.stringify(gltf)\n            ], {\n                type: \"application/json\"\n            });\n            const link = document.createElement(\"a\");\n            link.href = URL.createObjectURL(blob);\n            link.download = \"scene.gltf\";\n            link.click();\n        }, (error)=>{\n            console.error(\"An error happened during export:\", error);\n            alert(\"Failed to export scene: \" + error.message);\n        }, {\n            binary: false\n        });\n    };\n    // Function to test importing a GLTF model\n    const testGltfImport = async ()=>{\n        // Only run on client side\n        if (true) return;\n        try {\n            const { addObjectWithGltf } = _store_appStore__WEBPACK_IMPORTED_MODULE_5__.useObjectStore.getState();\n            // Example GLTF files from the public glTF samples repository\n            const sampleModels = [\n                \"https://img.theapi.app/temp/cd0b9c83-b5e3-4445-8007-b0e4c29d0d9b.glb\"\n            ];\n            // Select a random model from the samples\n            const randomUrl = sampleModels[Math.floor(Math.random() * sampleModels.length)];\n            console.log(\"Loading GLTF model from:\", randomUrl);\n            const result = await addObjectWithGltf(randomUrl);\n            if (result) {\n                console.log(\"GLTF import successful:\", result);\n            } else {\n                console.error(\"GLTF import failed\");\n                alert(\"Failed to import GLTF model\");\n            }\n        } catch (error) {\n            console.error(\"Error testing GLTF import:\", error);\n            alert(\"Error testing GLTF import: \" + error.message);\n        }\n    };\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_react_three_fiber__WEBPACK_IMPORTED_MODULE_13__.Canvas, {\n                style: {\n                    display: visible ? \"block\" : \"none\"\n                },\n                gl: {\n                    // Preserve the WebGL context to prevent it from being killed\n                    // when there are too many WebGL instances\n                    powerPreference: \"high-performance\",\n                    preserveDrawingBuffer: true,\n                    // Keep the priority high for this WebGL context\n                    antialias: true,\n                    // Attempt to make this context more important than others\n                    failIfMajorPerformanceCaveat: false\n                },\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"ambientLight\", {\n                        intensity: Math.PI / 2\n                    }, void 0, false, {\n                        fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/components/three/canvas.tsx\",\n                        lineNumber: 247,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"directionalLight\", {\n                        position: [\n                            10,\n                            10,\n                            5\n                        ],\n                        intensity: Math.PI * 2,\n                        castShadow: true,\n                        \"shadow-mapSize-width\": 2048,\n                        \"shadow-mapSize-height\": 2048\n                    }, void 0, false, {\n                        fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/components/three/canvas.tsx\",\n                        lineNumber: 249,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"directionalLight\", {\n                        position: [\n                            -5,\n                            5,\n                            -2\n                        ],\n                        intensity: Math.PI,\n                        color: \"#8088ff\"\n                    }, void 0, false, {\n                        fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/components/three/canvas.tsx\",\n                        lineNumber: 257,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"hemisphereLight\", {\n                        args: [\n                            \"#ffffff\",\n                            \"#8888ff\",\n                            0.7\n                        ],\n                        position: [\n                            0,\n                            10,\n                            0\n                        ]\n                    }, void 0, false, {\n                        fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/components/three/canvas.tsx\",\n                        lineNumber: 263,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_react_three_drei__WEBPACK_IMPORTED_MODULE_14__.Sky, {\n                        distance: 450000,\n                        sunPosition: [\n                            5,\n                            1,\n                            2\n                        ],\n                        inclination: 0.1,\n                        azimuth: 0.5,\n                        rayleigh: 0.5,\n                        turbidity: 10,\n                        mieCoefficient: 0.005,\n                        mieDirectionalG: 0.8\n                    }, void 0, false, {\n                        fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/components/three/canvas.tsx\",\n                        lineNumber: 267,\n                        columnNumber: 9\n                    }, this),\n                    visible && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_three_FirstPersonController__WEBPACK_IMPORTED_MODULE_3__.FirstPersonController, {}, void 0, false, {\n                        fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/components/three/canvas.tsx\",\n                        lineNumber: 277,\n                        columnNumber: 21\n                    }, this),\n                    visible && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(OceanAndGridManager, {}, void 0, false, {\n                        fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/components/three/canvas.tsx\",\n                        lineNumber: 278,\n                        columnNumber: 21\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_react_three_drei__WEBPACK_IMPORTED_MODULE_15__.Bvh, {\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_three_StoredObjects__WEBPACK_IMPORTED_MODULE_8__.StoredObjects, {}, void 0, false, {\n                            fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/components/three/canvas.tsx\",\n                            lineNumber: 283,\n                            columnNumber: 11\n                        }, this)\n                    }, void 0, false, {\n                        fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/components/three/canvas.tsx\",\n                        lineNumber: 279,\n                        columnNumber: 9\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_react_three_drei__WEBPACK_IMPORTED_MODULE_16__.GizmoHelper, {\n                        alignment: \"bottom-right\",\n                        margin: [\n                            80,\n                            80\n                        ],\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_react_three_drei__WEBPACK_IMPORTED_MODULE_17__.GizmoViewport, {\n                            labelColor: \"black\"\n                        }, void 0, false, {\n                            fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/components/three/canvas.tsx\",\n                            lineNumber: 286,\n                            columnNumber: 11\n                        }, this)\n                    }, void 0, false, {\n                        fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/components/three/canvas.tsx\",\n                        lineNumber: 285,\n                        columnNumber: 9\n                    }, this),\n                    visible && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_three_MeshCreator__WEBPACK_IMPORTED_MODULE_4__.MeshCreator, {}, void 0, false, {\n                        fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/components/three/canvas.tsx\",\n                        lineNumber: 288,\n                        columnNumber: 21\n                    }, this),\n                    visible && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(SceneExporter, {}, void 0, false, {\n                        fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/components/three/canvas.tsx\",\n                        lineNumber: 289,\n                        columnNumber: 21\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/components/three/canvas.tsx\",\n                lineNumber: 231,\n                columnNumber: 7\n            }, this),\n            visible && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(FocusDetector, {}, void 0, false, {\n                        fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/components/three/canvas.tsx\",\n                        lineNumber: 294,\n                        columnNumber: 11\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_three_Crosshair__WEBPACK_IMPORTED_MODULE_7__.Crosshair, {}, void 0, false, {\n                        fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/components/three/canvas.tsx\",\n                        lineNumber: 295,\n                        columnNumber: 11\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                        onClick: exportScene,\n                        style: {\n                            position: \"absolute\",\n                            bottom: \"20px\",\n                            left: \"20px\",\n                            padding: \"8px 16px\",\n                            background: \"#4a5568\",\n                            color: \"white\",\n                            border: \"none\",\n                            borderRadius: \"4px\",\n                            cursor: \"pointer\",\n                            fontWeight: \"bold\",\n                            zIndex: 100\n                        },\n                        children: \"Export Scene\"\n                    }, void 0, false, {\n                        fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/components/three/canvas.tsx\",\n                        lineNumber: 297,\n                        columnNumber: 11\n                    }, this)\n                ]\n            }, void 0, true)\n        ]\n    }, void 0, true);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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eUJBQVcsOERBQUN4RCwwRkFBcUJBOzs7OztvQkFDakN3RCx5QkFBVyw4REFBQ2xDOzs7OztrQ0FDYiw4REFBQ3hCLG1EQUFHQTtrQ0FJRiw0RUFBQ1UsMEVBQWFBOzs7Ozs7Ozs7O2tDQUVoQiw4REFBQ1osMkRBQVdBO3dCQUFDMEgsV0FBVTt3QkFBZUMsUUFBUTs0QkFBQzs0QkFBSTt5QkFBRztrQ0FDcEQsNEVBQUMxSCw2REFBYUE7NEJBQUMySCxZQUFXOzs7Ozs7Ozs7OztvQkFFM0JoRSx5QkFBVyw4REFBQ3ZELHNFQUFXQTs7Ozs7b0JBQ3ZCdUQseUJBQVcsOERBQUNKOzs7Ozs7Ozs7OztZQUdkSSx5QkFDQzs7a0NBQ0UsOERBQUMzQzs7Ozs7a0NBQ0QsOERBQUNQLGtFQUFTQTs7Ozs7a0NBRVYsOERBQUNtSDt3QkFDQ0MsU0FBU2pFO3dCQUNUdUMsT0FBTzs0QkFDTHhELFVBQVU7NEJBQ1ZtRixRQUFROzRCQUNSQyxNQUFNOzRCQUNOQyxTQUFTOzRCQUNUQyxZQUFZOzRCQUNabEYsT0FBTzs0QkFDUG1GLFFBQVE7NEJBQ1JDLGNBQWM7NEJBQ2RDLFFBQVE7NEJBQ1JDLFlBQVk7NEJBQ1pDLFFBQVE7d0JBQ1Y7a0NBQ0Q7Ozs7Ozs7Ozs7QUEyQlgiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92aWJlLTNkLWNvZGUvLi9hcHAvY29tcG9uZW50cy90aHJlZS9jYW52YXMudHN4PzE3NDIiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2UgY2xpZW50XCJcblxuaW1wb3J0ICcuL0FwcC5jc3MnXG5pbXBvcnQgeyBDYW52YXMgfSBmcm9tICdAcmVhY3QtdGhyZWUvZmliZXInXG5pbXBvcnQgeyBTa3ksIEdpem1vSGVscGVyLCBHaXptb1ZpZXdwb3J0LCBCdmggfSBmcm9tICdAcmVhY3QtdGhyZWUvZHJlaSdcbmltcG9ydCB7IEluZmluaXRlR3JpZCB9IGZyb20gJ0AvY29tcG9uZW50cy90aHJlZS9JbmZpbml0ZUdyaWQnXG5pbXBvcnQgeyBGaXJzdFBlcnNvbkNvbnRyb2xsZXIgfSBmcm9tICdAL2NvbXBvbmVudHMvdGhyZWUvRmlyc3RQZXJzb25Db250cm9sbGVyJ1xuaW1wb3J0IHsgUGVyZiB9IGZyb20gJ3IzZi1wZXJmJ1xuaW1wb3J0IHsgTWVzaENyZWF0b3IgfSBmcm9tICdAL2NvbXBvbmVudHMvdGhyZWUvTWVzaENyZWF0b3InXG5pbXBvcnQgeyB1c2VBcHBTdG9yZSB9IGZyb20gJ0Avc3RvcmUvYXBwU3RvcmUnXG5pbXBvcnQgeyB1c2VFZmZlY3QsIHVzZVJlZiwgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCdcbmltcG9ydCB7IENyb3NzaGFpciB9IGZyb20gJ0AvY29tcG9uZW50cy90aHJlZS9Dcm9zc2hhaXInXG5pbXBvcnQgKiBhcyBUSFJFRSBmcm9tICd0aHJlZSdcbmltcG9ydCB7IFN0b3JlZE9iamVjdHMgfSBmcm9tICdAL2NvbXBvbmVudHMvdGhyZWUvU3RvcmVkT2JqZWN0cydcbmltcG9ydCB7IEdMVEZFeHBvcnRlciB9IGZyb20gJ3RocmVlL2FkZG9ucy9leHBvcnRlcnMvR0xURkV4cG9ydGVyLmpzJ1xuaW1wb3J0IHsgdXNlVGhyZWUgfSBmcm9tICdAcmVhY3QtdGhyZWUvZmliZXInXG5pbXBvcnQgeyBPY2VhbiB9IGZyb20gJ0AvY29tcG9uZW50cy90aHJlZS9PY2VhbidcbmltcG9ydCB7IHVzZU9iamVjdFN0b3JlIH0gZnJvbSAnQC9zdG9yZS9hcHBTdG9yZSdcblxuY29uc3QgRm9jdXNEZXRlY3RvciA9ICgpID0+IHtcbiAgY29uc3QgeyBzZXRVSUZvY3VzZWQgfSA9IHVzZUFwcFN0b3JlKClcbiAgXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgaGFuZGxlRm9jdXNDaGFuZ2UgPSAoKSA9PiB7XG4gICAgICBjb25zdCBhY3RpdmVFbGVtZW50ID0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudFxuICAgICAgY29uc3QgaXNJbnB1dCA9IGFjdGl2ZUVsZW1lbnQ/LnRhZ05hbWUgPT09ICdJTlBVVCcgfHwgYWN0aXZlRWxlbWVudD8udGFnTmFtZSA9PT0gJ1RFWFRBUkVBJ1xuICAgICAgc2V0VUlGb2N1c2VkKGlzSW5wdXQpXG4gICAgfVxuICAgIFxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzaW4nLCBoYW5kbGVGb2N1c0NoYW5nZSlcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdmb2N1c291dCcsIGhhbmRsZUZvY3VzQ2hhbmdlKVxuICAgIFxuICAgIGhhbmRsZUZvY3VzQ2hhbmdlKClcbiAgICBcbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignZm9jdXNpbicsIGhhbmRsZUZvY3VzQ2hhbmdlKVxuICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignZm9jdXNvdXQnLCBoYW5kbGVGb2N1c0NoYW5nZSlcbiAgICB9XG4gIH0sIFtzZXRVSUZvY3VzZWRdKVxuICBcbiAgcmV0dXJuIG51bGxcbn1cblxuLy8gQ29tcG9uZW50IHRvIG1hbmFnZSBvY2VhbiB2aXNpYmlsaXR5IGFuZCBncmlkIHZpc2liaWxpdHlcbmZ1bmN0aW9uIE9jZWFuQW5kR3JpZE1hbmFnZXIoKSB7XG4gIGNvbnN0IFtzaG93T2NlYW4sIHNldFNob3dPY2Vhbl0gPSB1c2VTdGF0ZShmYWxzZSlcbiAgXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgLy8gQ2hlY2sgZm9yIGVudmlyb25tZW50IHNldHRpbmdzIG9uIGVhY2ggcmVuZGVyXG4gICAgY29uc3QgY2hlY2tTZXR0aW5ncyA9ICgpID0+IHtcbiAgICAgIC8vIEB0cy1pZ25vcmUgLSBBY2Nlc3NpbmcgY3VzdG9tIHdpbmRvdyBwcm9wZXJ0eVxuICAgICAgY29uc3Qgc2V0dGluZ3MgPSB3aW5kb3cuX19lbnZpcm9ubWVudFNldHRpbmdzXG4gICAgICBpZiAoc2V0dGluZ3MgJiYgdHlwZW9mIHNldHRpbmdzLnNob3dPY2VhbiA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgIHNldFNob3dPY2VhbihzZXR0aW5ncy5zaG93T2NlYW4pXG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8vIEluaXRpYWwgY2hlY2tcbiAgICBjaGVja1NldHRpbmdzKClcbiAgICBcbiAgICAvLyBTZXQgdXAgaW50ZXJ2YWwgdG8gY2hlY2sgcGVyaW9kaWNhbGx5IGZvciBjaGFuZ2VzXG4gICAgY29uc3QgaW50ZXJ2YWxJZCA9IHNldEludGVydmFsKGNoZWNrU2V0dGluZ3MsIDUwMClcbiAgICBcbiAgICByZXR1cm4gKCkgPT4gY2xlYXJJbnRlcnZhbChpbnRlcnZhbElkKVxuICB9LCBbXSlcbiAgXG4gIHJldHVybiAoXG4gICAgPD5cbiAgICAgIHsvKiBTaG93IE9jZWFuIG9ubHkgd2hlbiBlbmFibGVkICovfVxuICAgICAge3Nob3dPY2VhbiA/IDxPY2VhbiAvPiA6IDxJbmZpbml0ZUdyaWQgLz59XG4gICAgPC8+XG4gIClcbn1cblxuZnVuY3Rpb24gRXhhbXBsZUN1YmUoKSB7XG4gIGNvbnN0IG1lc2hSZWYgPSB1c2VSZWY8VEhSRUUuTWVzaD4obnVsbClcbiAgXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKG1lc2hSZWYuY3VycmVudCkge1xuICAgICAgbWVzaFJlZi5jdXJyZW50LnVzZXJEYXRhID0ge1xuICAgICAgICBpc1VzZXJDcmVhdGVkOiB0cnVlLFxuICAgICAgICBuYW1lOiBcIkV4YW1wbGUgQ3ViZVwiXG4gICAgICB9XG4gICAgfVxuICB9LCBbXSlcbiAgXG4gIHJldHVybiAoXG4gICAgPG1lc2ggXG4gICAgICByZWY9e21lc2hSZWZ9XG4gICAgICBwb3NpdGlvbj17WzIsIDEsIDBdfVxuICAgID5cbiAgICAgIDxib3hHZW9tZXRyeSBhcmdzPXtbMSwgMSwgMV19IC8+XG4gICAgICA8bWVzaFN0YW5kYXJkTWF0ZXJpYWwgY29sb3I9XCJob3RwaW5rXCIgLz5cbiAgICA8L21lc2g+XG4gIClcbn1cblxuZnVuY3Rpb24gRXhhbXBsZUdyb3VwKCkge1xuICBjb25zdCBncm91cFJlZiA9IHVzZVJlZjxUSFJFRS5Hcm91cD4obnVsbClcbiAgXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGdyb3VwUmVmLmN1cnJlbnQpIHtcbiAgICAgIGdyb3VwUmVmLmN1cnJlbnQudXNlckRhdGEgPSB7XG4gICAgICAgIGlzVXNlckNyZWF0ZWQ6IHRydWUsXG4gICAgICAgIG5hbWU6IFwiRXhhbXBsZSBHcm91cFwiXG4gICAgICB9XG4gICAgfVxuICB9LCBbXSlcbiAgXG4gIHJldHVybiAoXG4gICAgPGdyb3VwIFxuICAgICAgcmVmPXtncm91cFJlZn1cbiAgICAgIHBvc2l0aW9uPXtbLTIsIDEsIDBdfVxuICAgID5cbiAgICAgIDxtZXNoIHBvc2l0aW9uPXtbMCwgMCwgMF19PlxuICAgICAgICA8Ym94R2VvbWV0cnkgYXJncz17WzAuNSwgMC41LCAwLjVdfSAvPlxuICAgICAgICA8bWVzaFN0YW5kYXJkTWF0ZXJpYWwgY29sb3I9XCJjeWFuXCIgLz5cbiAgICAgIDwvbWVzaD5cbiAgICAgIDxtZXNoIHBvc2l0aW9uPXtbMC43LCAwLCAwXX0+XG4gICAgICAgIDxzcGhlcmVHZW9tZXRyeSBhcmdzPXtbMC4zLCAxNiwgMTZdfSAvPlxuICAgICAgICA8bWVzaFN0YW5kYXJkTWF0ZXJpYWwgY29sb3I9XCJ5ZWxsb3dcIiAvPlxuICAgICAgPC9tZXNoPlxuICAgICAgPG1lc2ggcG9zaXRpb249e1swLjM1LCAwLjcsIDBdfSByb3RhdGlvbj17WzAsIDAsIE1hdGguUEkvNF19PlxuICAgICAgICA8Ym94R2VvbWV0cnkgYXJncz17WzAuMywgMC4zLCAwLjhdfSAvPlxuICAgICAgICA8bWVzaFN0YW5kYXJkTWF0ZXJpYWwgY29sb3I9XCJsaW1lXCIgLz5cbiAgICAgIDwvbWVzaD5cbiAgICA8L2dyb3VwPlxuICApXG59XG5cbi8vIENvbXBvbmVudCB0byBoYW5kbGUgc2NlbmUgZXhwb3J0XG5mdW5jdGlvbiBTY2VuZUV4cG9ydGVyKCkge1xuICBjb25zdCB7IHNjZW5lIH0gPSB1c2VUaHJlZSgpXG4gIFxuICAvLyBTdG9yZSBzY2VuZSByZWZlcmVuY2UgaW4gYSBnbG9iYWwgdmFyaWFibGUgZm9yIGV4dGVybmFsIGFjY2Vzc1xuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIC8vIEB0cy1pZ25vcmUgLSBXZSdyZSBhZGRpbmcgYSBjdXN0b20gcHJvcGVydHkgdG8gd2luZG93XG4gICAgd2luZG93Ll9fdGhyZWVTY2VuZSA9IHNjZW5lXG4gIH0sIFtzY2VuZV0pXG4gIFxuICByZXR1cm4gbnVsbFxufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBUaHJlZUpTQ2FudmFzKHtcbiAgdmlzaWJsZSA9IHRydWVcbn06IHtcbiAgdmlzaWJsZT86IGJvb2xlYW5cbn0pIHtcbiAgY29uc3QgZXhwb3J0U2NlbmUgPSAoKSA9PiB7XG4gICAgLy8gT25seSBydW4gb24gY2xpZW50IHNpZGVcbiAgICBpZiAodHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCcpIHJldHVybjtcbiAgICBcbiAgICAvLyBAdHMtaWdub3JlIC0gQWNjZXNzIHRoZSBzY2VuZSBmcm9tIHRoZSBnbG9iYWwgdmFyaWFibGVcbiAgICBjb25zdCBzY2VuZSA9IHdpbmRvdy5fX3RocmVlU2NlbmVcbiAgICBpZiAoIXNjZW5lKSByZXR1cm47XG5cbiAgICBjb25zb2xlLmxvZygnT3JpZ2luYWwgc2NlbmU6Jywgc2NlbmUpO1xuICAgIFxuICAgIC8vIENyZWF0ZSBhIHRlbXBvcmFyeSBzY2VuZSB3aXRoIG9ubHkgdXNlci1jcmVhdGVkIG9iamVjdHNcbiAgICBjb25zdCBleHBvcnRTY2VuZSA9IG5ldyBUSFJFRS5TY2VuZSgpO1xuICAgIFxuICAgIC8vIENsb25lIG9ubHkgdXNlci1jcmVhdGVkIG9iamVjdHNcbiAgICBzY2VuZS50cmF2ZXJzZSgob2JqZWN0OiBUSFJFRS5PYmplY3QzRCkgPT4ge1xuICAgICAgaWYgKG9iamVjdC51c2VyRGF0YSAmJiBvYmplY3QudXNlckRhdGEuaXNVc2VyQ3JlYXRlZCA9PT0gdHJ1ZSkge1xuICAgICAgICBjb25zb2xlLmxvZygnRm91bmQgdXNlciBvYmplY3QgdG8gZXhwb3J0OicsIG9iamVjdC51c2VyRGF0YS5uYW1lIHx8ICdVbm5hbWVkIG9iamVjdCcpO1xuICAgICAgICBjb25zdCBjbG9uZWRPYmplY3QgPSBvYmplY3QuY2xvbmUoKTtcbiAgICAgICAgZXhwb3J0U2NlbmUuYWRkKGNsb25lZE9iamVjdCk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgXG4gICAgLy8gQ2hlY2sgaWYgd2UgZm91bmQgYW55IHVzZXIgb2JqZWN0c1xuICAgIGlmIChleHBvcnRTY2VuZS5jaGlsZHJlbi5sZW5ndGggPT09IDApIHtcbiAgICAgIGNvbnNvbGUud2FybignTm8gdXNlci1jcmVhdGVkIG9iamVjdHMgZm91bmQgdG8gZXhwb3J0Jyk7XG4gICAgICBhbGVydCgnTm8gdXNlci1jcmVhdGVkIG9iamVjdHMgZm91bmQgdG8gZXhwb3J0LiBUcnkgY3JlYXRpbmcgc29tZSBvYmplY3RzIGZpcnN0LicpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBcbiAgICBjb25zb2xlLmxvZygnRXhwb3J0IHNjZW5lIHdpdGggZmlsdGVyZWQgb2JqZWN0czonLCBleHBvcnRTY2VuZSk7XG4gICAgXG4gICAgY29uc3QgZXhwb3J0ZXIgPSBuZXcgR0xURkV4cG9ydGVyKCk7XG4gICAgZXhwb3J0ZXIucGFyc2UoXG4gICAgICBleHBvcnRTY2VuZSxcbiAgICAgIChnbHRmOiBhbnkpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coJ0dMVEYgZXhwb3J0IHN1Y2Nlc3NmdWw6JywgZ2x0Zik7XG4gICAgICAgIGNvbnN0IGJsb2IgPSBuZXcgQmxvYihbSlNPTi5zdHJpbmdpZnkoZ2x0ZildLCB7IHR5cGU6ICdhcHBsaWNhdGlvbi9qc29uJyB9KTtcbiAgICAgICAgY29uc3QgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTtcbiAgICAgICAgbGluay5ocmVmID0gVVJMLmNyZWF0ZU9iamVjdFVSTChibG9iKTtcbiAgICAgICAgbGluay5kb3dubG9hZCA9ICdzY2VuZS5nbHRmJztcbiAgICAgICAgbGluay5jbGljaygpO1xuICAgICAgfSxcbiAgICAgIChlcnJvcjogRXJyb3JFdmVudCkgPT4ge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdBbiBlcnJvciBoYXBwZW5lZCBkdXJpbmcgZXhwb3J0OicsIGVycm9yKTtcbiAgICAgICAgYWxlcnQoJ0ZhaWxlZCB0byBleHBvcnQgc2NlbmU6ICcgKyBlcnJvci5tZXNzYWdlKTtcbiAgICAgIH0sXG4gICAgICB7IGJpbmFyeTogZmFsc2UgfVxuICAgICk7XG4gIH1cbiAgXG4gIC8vIEZ1bmN0aW9uIHRvIHRlc3QgaW1wb3J0aW5nIGEgR0xURiBtb2RlbFxuICBjb25zdCB0ZXN0R2x0ZkltcG9ydCA9IGFzeW5jICgpID0+IHtcbiAgICAvLyBPbmx5IHJ1biBvbiBjbGllbnQgc2lkZVxuICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSAndW5kZWZpbmVkJykgcmV0dXJuO1xuICAgIFxuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IGFkZE9iamVjdFdpdGhHbHRmIH0gPSB1c2VPYmplY3RTdG9yZS5nZXRTdGF0ZSgpO1xuICAgICAgLy8gRXhhbXBsZSBHTFRGIGZpbGVzIGZyb20gdGhlIHB1YmxpYyBnbFRGIHNhbXBsZXMgcmVwb3NpdG9yeVxuICAgICAgY29uc3Qgc2FtcGxlTW9kZWxzID0gW1xuICAgICAgICAnaHR0cHM6Ly9pbWcudGhlYXBpLmFwcC90ZW1wL2NkMGI5YzgzLWI1ZTMtNDQ0NS04MDA3LWIwZTRjMjlkMGQ5Yi5nbGInXG4gICAgICBdO1xuICAgICAgXG4gICAgICAvLyBTZWxlY3QgYSByYW5kb20gbW9kZWwgZnJvbSB0aGUgc2FtcGxlc1xuICAgICAgY29uc3QgcmFuZG9tVXJsID0gc2FtcGxlTW9kZWxzW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHNhbXBsZU1vZGVscy5sZW5ndGgpXTtcbiAgICAgIGNvbnNvbGUubG9nKCdMb2FkaW5nIEdMVEYgbW9kZWwgZnJvbTonLCByYW5kb21VcmwpO1xuICAgICAgXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBhZGRPYmplY3RXaXRoR2x0ZihyYW5kb21VcmwpO1xuICAgICAgXG4gICAgICBpZiAocmVzdWx0KSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdHTFRGIGltcG9ydCBzdWNjZXNzZnVsOicsIHJlc3VsdCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdHTFRGIGltcG9ydCBmYWlsZWQnKTtcbiAgICAgICAgYWxlcnQoJ0ZhaWxlZCB0byBpbXBvcnQgR0xURiBtb2RlbCcpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciB0ZXN0aW5nIEdMVEYgaW1wb3J0OicsIGVycm9yKTtcbiAgICAgIGFsZXJ0KCdFcnJvciB0ZXN0aW5nIEdMVEYgaW1wb3J0OiAnICsgKGVycm9yIGFzIEVycm9yKS5tZXNzYWdlKTtcbiAgICB9XG4gIH1cbiAgXG4gIHJldHVybiAoXG4gICAgPD5cbiAgICAgIDxDYW52YXNcbiAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICBkaXNwbGF5OiB2aXNpYmxlID8gJ2Jsb2NrJyA6ICdub25lJyxcbiAgICAgICAgfX1cbiAgICAgICAgZ2w9e3tcbiAgICAgICAgICAvLyBQcmVzZXJ2ZSB0aGUgV2ViR0wgY29udGV4dCB0byBwcmV2ZW50IGl0IGZyb20gYmVpbmcga2lsbGVkXG4gICAgICAgICAgLy8gd2hlbiB0aGVyZSBhcmUgdG9vIG1hbnkgV2ViR0wgaW5zdGFuY2VzXG4gICAgICAgICAgcG93ZXJQcmVmZXJlbmNlOiAnaGlnaC1wZXJmb3JtYW5jZScsXG4gICAgICAgICAgcHJlc2VydmVEcmF3aW5nQnVmZmVyOiB0cnVlLFxuICAgICAgICAgIC8vIEtlZXAgdGhlIHByaW9yaXR5IGhpZ2ggZm9yIHRoaXMgV2ViR0wgY29udGV4dFxuICAgICAgICAgIGFudGlhbGlhczogdHJ1ZSwgXG4gICAgICAgICAgLy8gQXR0ZW1wdCB0byBtYWtlIHRoaXMgY29udGV4dCBtb3JlIGltcG9ydGFudCB0aGFuIG90aGVyc1xuICAgICAgICAgIGZhaWxJZk1ham9yUGVyZm9ybWFuY2VDYXZlYXQ6IGZhbHNlLFxuICAgICAgICB9fVxuICAgICAgPlxuICAgICAgICB7Lyoge3Zpc2libGUgJiYgPFBlcmZTdGF0cyAvPn0gKi99XG4gICAgICAgIDxhbWJpZW50TGlnaHQgaW50ZW5zaXR5PXtNYXRoLlBJIC8gMn0gLz5cbiAgICAgICAgey8qIEFkZCBkaXJlY3Rpb25hbCBsaWdodCBmb3IgYmV0dGVyIG1hdGVyaWFsIHJlbmRlcmluZyAqL31cbiAgICAgICAgPGRpcmVjdGlvbmFsTGlnaHQgXG4gICAgICAgICAgcG9zaXRpb249e1sxMCwgMTAsIDVdfSBcbiAgICAgICAgICBpbnRlbnNpdHk9e01hdGguUEkgKiAyfSBcbiAgICAgICAgICBjYXN0U2hhZG93XG4gICAgICAgICAgc2hhZG93LW1hcFNpemUtd2lkdGg9ezIwNDh9XG4gICAgICAgICAgc2hhZG93LW1hcFNpemUtaGVpZ2h0PXsyMDQ4fVxuICAgICAgICAvPlxuICAgICAgICB7LyogQWRkIGEgc2Vjb25kYXJ5IGZpbGwgbGlnaHQgZnJvbSBvcHBvc2l0ZSBkaXJlY3Rpb24gKi99XG4gICAgICAgIDxkaXJlY3Rpb25hbExpZ2h0IFxuICAgICAgICAgIHBvc2l0aW9uPXtbLTUsIDUsIC0yXX0gXG4gICAgICAgICAgaW50ZW5zaXR5PXtNYXRoLlBJfSBcbiAgICAgICAgICBjb2xvcj1cIiM4MDg4ZmZcIlxuICAgICAgICAvPlxuICAgICAgICB7LyogQWRkIGEgZ3JvdW5kIGZpbGwgbGlnaHQgZm9yIGJldHRlciBvdmVyYWxsIGlsbHVtaW5hdGlvbiAqL31cbiAgICAgICAgPGhlbWlzcGhlcmVMaWdodFxuICAgICAgICAgIGFyZ3M9e1tcIiNmZmZmZmZcIiwgXCIjODg4OGZmXCIsIDAuN119IFxuICAgICAgICAgIHBvc2l0aW9uPXtbMCwgMTAsIDBdfVxuICAgICAgICAvPlxuICAgICAgICA8U2t5IFxuICAgICAgICAgIGRpc3RhbmNlPXs0NTAwMDB9IFxuICAgICAgICAgIHN1blBvc2l0aW9uPXtbNSwgMSwgMl19IFxuICAgICAgICAgIGluY2xpbmF0aW9uPXswLjF9IFxuICAgICAgICAgIGF6aW11dGg9ezAuNX0gXG4gICAgICAgICAgcmF5bGVpZ2g9ezAuNX1cbiAgICAgICAgICB0dXJiaWRpdHk9ezEwfVxuICAgICAgICAgIG1pZUNvZWZmaWNpZW50PXswLjAwNX1cbiAgICAgICAgICBtaWVEaXJlY3Rpb25hbEc9ezAuOH1cbiAgICAgICAgLz5cbiAgICAgICAge3Zpc2libGUgJiYgPEZpcnN0UGVyc29uQ29udHJvbGxlciAvPn1cbiAgICAgICAge3Zpc2libGUgJiYgPE9jZWFuQW5kR3JpZE1hbmFnZXIgLz59XG4gICAgICAgIDxCdmg+XG4gICAgICAgICAgey8qIENlbnRlciBwb2xlIHJlbW92ZWQgKi99XG4gICAgICAgICAgey8qIDxFeGFtcGxlQ3ViZSAvPlxuICAgICAgICAgIDxFeGFtcGxlR3JvdXAgLz4gKi99XG4gICAgICAgICAgPFN0b3JlZE9iamVjdHMgLz5cbiAgICAgICAgPC9Cdmg+XG4gICAgICAgIDxHaXptb0hlbHBlciBhbGlnbm1lbnQ9XCJib3R0b20tcmlnaHRcIiBtYXJnaW49e1s4MCwgODBdfT5cbiAgICAgICAgICA8R2l6bW9WaWV3cG9ydCBsYWJlbENvbG9yPVwiYmxhY2tcIiAvPlxuICAgICAgICA8L0dpem1vSGVscGVyPlxuICAgICAgICB7dmlzaWJsZSAmJiA8TWVzaENyZWF0b3IgLz59XG4gICAgICAgIHt2aXNpYmxlICYmIDxTY2VuZUV4cG9ydGVyIC8+fVxuICAgICAgPC9DYW52YXM+XG4gICAgICBcbiAgICAgIHt2aXNpYmxlICYmIChcbiAgICAgICAgPD5cbiAgICAgICAgICA8Rm9jdXNEZXRlY3RvciAvPlxuICAgICAgICAgIDxDcm9zc2hhaXIgLz5cbiAgICAgICAgICB7LyogQnV0dG9uIHRvIGV4cG9ydCBzY2VuZSBhcyBnbHRmICovfVxuICAgICAgICAgIDxidXR0b24gXG4gICAgICAgICAgICBvbkNsaWNrPXtleHBvcnRTY2VuZX1cbiAgICAgICAgICAgIHN0eWxlPXt7XG4gICAgICAgICAgICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxuICAgICAgICAgICAgICBib3R0b206ICcyMHB4JyxcbiAgICAgICAgICAgICAgbGVmdDogJzIwcHgnLFxuICAgICAgICAgICAgICBwYWRkaW5nOiAnOHB4IDE2cHgnLFxuICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiAnIzRhNTU2OCcsXG4gICAgICAgICAgICAgIGNvbG9yOiAnd2hpdGUnLFxuICAgICAgICAgICAgICBib3JkZXI6ICdub25lJyxcbiAgICAgICAgICAgICAgYm9yZGVyUmFkaXVzOiAnNHB4JyxcbiAgICAgICAgICAgICAgY3Vyc29yOiAncG9pbnRlcicsXG4gICAgICAgICAgICAgIGZvbnRXZWlnaHQ6ICdib2xkJyxcbiAgICAgICAgICAgICAgekluZGV4OiAxMDBcbiAgICAgICAgICAgIH19XG4gICAgICAgICAgPlxuICAgICAgICAgICAgRXhwb3J0IFNjZW5lXG4gICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgXG4gICAgICAgICAgey8qIFRlc3QgYnV0dG9uIGZvciBHTFRGIGltcG9ydCAqL31cbiAgICAgICAgICB7LyogPGJ1dHRvbiBcbiAgICAgICAgICAgIG9uQ2xpY2s9e3Rlc3RHbHRmSW1wb3J0fVxuICAgICAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXG4gICAgICAgICAgICAgIGJvdHRvbTogJzIwcHgnLFxuICAgICAgICAgICAgICBsZWZ0OiAnMTUwcHgnLFxuICAgICAgICAgICAgICBwYWRkaW5nOiAnOHB4IDE2cHgnLFxuICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiAnIzM4YTE2OScsXG4gICAgICAgICAgICAgIGNvbG9yOiAnd2hpdGUnLFxuICAgICAgICAgICAgICBib3JkZXI6ICdub25lJyxcbiAgICAgICAgICAgICAgYm9yZGVyUmFkaXVzOiAnNHB4JyxcbiAgICAgICAgICAgICAgY3Vyc29yOiAncG9pbnRlcicsXG4gICAgICAgICAgICAgIGZvbnRXZWlnaHQ6ICdib2xkJyxcbiAgICAgICAgICAgICAgekluZGV4OiAxMDBcbiAgICAgICAgICAgIH19XG4gICAgICAgICAgPlxuICAgICAgICAgICAgVGVzdCBHTFRGIEltcG9ydFxuICAgICAgICAgIDwvYnV0dG9uPiAqL31cbiAgICAgICAgPC8+XG4gICAgICApfVxuICAgIDwvPlxuICApXG59Il0sIm5hbWVzIjpbIkNhbnZhcyIsIlNreSIsIkdpem1vSGVscGVyIiwiR2l6bW9WaWV3cG9ydCIsIkJ2aCIsIkluZmluaXRlR3JpZCIsIkZpcnN0UGVyc29uQ29udHJvbGxlciIsIk1lc2hDcmVhdG9yIiwidXNlQXBwU3RvcmUiLCJ1c2VFZmZlY3QiLCJ1c2VSZWYiLCJ1c2VTdGF0ZSIsIkNyb3NzaGFpciIsIlRIUkVFIiwiU3RvcmVkT2JqZWN0cyIsIkdMVEZFeHBvcnRlciIsInVzZVRocmVlIiwiT2NlYW4iLCJ1c2VPYmplY3RTdG9yZSIsIkZvY3VzRGV0ZWN0b3IiLCJzZXRVSUZvY3VzZWQiLCJoYW5kbGVGb2N1c0NoYW5nZSIsImFjdGl2ZUVsZW1lbnQiLCJkb2N1bWVudCIsImlzSW5wdXQiLCJ0YWdOYW1lIiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJPY2VhbkFuZEdyaWRNYW5hZ2VyIiwic2hvd09jZWFuIiwic2V0U2hvd09jZWFuIiwiY2hlY2tTZXR0aW5ncyIsInNldHRpbmdzIiwid2luZG93IiwiX19lbnZpcm9ubWVudFNldHRpbmdzIiwiaW50ZXJ2YWxJZCIsInNldEludGVydmFsIiwiY2xlYXJJbnRlcnZhbCIsIkV4YW1wbGVDdWJlIiwibWVzaFJlZiIsImN1cnJlbnQiLCJ1c2VyRGF0YSIsImlzVXNlckNyZWF0ZWQiLCJuYW1lIiwibWVzaCIsInJlZiIsInBvc2l0aW9uIiwiYm94R2VvbWV0cnkiLCJhcmdzIiwibWVzaFN0YW5kYXJkTWF0ZXJpYWwiLCJjb2xvciIsIkV4YW1wbGVHcm91cCIsImdyb3VwUmVmIiwiZ3JvdXAiLCJzcGhlcmVHZW9tZXRyeSIsInJvdGF0aW9uIiwiTWF0aCIsIlBJIiwiU2NlbmVFeHBvcnRlciIsInNjZW5lIiwiX190aHJlZVNjZW5lIiwiVGhyZWVKU0NhbnZhcyIsInZpc2libGUiLCJleHBvcnRTY2VuZSIsImNvbnNvbGUiLCJsb2ciLCJTY2VuZSIsInRyYXZlcnNlIiwib2JqZWN0IiwiY2xvbmVkT2JqZWN0IiwiY2xvbmUiLCJhZGQiLCJjaGlsZHJlbiIsImxlbmd0aCIsIndhcm4iLCJhbGVydCIsImV4cG9ydGVyIiwicGFyc2UiLCJnbHRmIiwiYmxvYiIsIkJsb2IiLCJKU09OIiwic3RyaW5naWZ5IiwidHlwZSIsImxpbmsiLCJjcmVhdGVFbGVtZW50IiwiaHJlZiIsIlVSTCIsImNyZWF0ZU9iamVjdFVSTCIsImRvd25sb2FkIiwiY2xpY2siLCJlcnJvciIsIm1lc3NhZ2UiLCJiaW5hcnkiLCJ0ZXN0R2x0ZkltcG9ydCIsImFkZE9iamVjdFdpdGhHbHRmIiwiZ2V0U3RhdGUiLCJzYW1wbGVNb2RlbHMiLCJyYW5kb21VcmwiLCJmbG9vciIsInJhbmRvbSIsInJlc3VsdCIsInN0eWxlIiwiZGlzcGxheSIsImdsIiwicG93ZXJQcmVmZXJlbmNlIiwicHJlc2VydmVEcmF3aW5nQnVmZmVyIiwiYW50aWFsaWFzIiwiZmFpbElmTWFqb3JQZXJmb3JtYW5jZUNhdmVhdCIsImFtYmllbnRMaWdodCIsImludGVuc2l0eSIsImRpcmVjdGlvbmFsTGlnaHQiLCJjYXN0U2hhZG93Iiwic2hhZG93LW1hcFNpemUtd2lkdGgiLCJzaGFkb3ctbWFwU2l6ZS1oZWlnaHQiLCJoZW1pc3BoZXJlTGlnaHQiLCJkaXN0YW5jZSIsInN1blBvc2l0aW9uIiwiaW5jbGluYXRpb24iLCJhemltdXRoIiwicmF5bGVpZ2giLCJ0dXJiaWRpdHkiLCJtaWVDb2VmZmljaWVudCIsIm1pZURpcmVjdGlvbmFsRyIsImFsaWdubWVudCIsIm1hcmdpbiIsImxhYmVsQ29sb3IiLCJidXR0b24iLCJvbkNsaWNrIiwiYm90dG9tIiwibGVmdCIsInBhZGRpbmciLCJiYWNrZ3JvdW5kIiwiYm9yZGVyIiwiYm9yZGVyUmFkaXVzIiwiY3Vyc29yIiwiZm9udFdlaWdodCIsInpJbmRleCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./app/components/three/canvas.tsx\n");

/***/ }),

/***/ "(ssr)/./app/lib/blobToBase64.ts":
/*!*********************************!*\
  !*** ./app/lib/blobToBase64.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   blobToBase64: () => (/* binding */ blobToBase64)\n/* harmony export */ });\nfunction blobToBase64(blob) {\n    return new Promise((resolve, _)=>{\n        const reader = new FileReader();\n        reader.onloadend = ()=>{\n            const result = reader.result;\n            // Remove the data URL prefix (like \"data:image/png;base64,\") and return only the base64 content\n            const base64Content = result.split(\",\")[1];\n            resolve(base64Content);\n        };\n        reader.readAsDataURL(blob);\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9hcHAvbGliL2Jsb2JUb0Jhc2U2NC50cyIsIm1hcHBpbmdzIjoiOzs7O0FBQU8sU0FBU0EsYUFBYUMsSUFBVTtJQUN0QyxPQUFPLElBQUlDLFFBQVEsQ0FBQ0MsU0FBU0M7UUFDNUIsTUFBTUMsU0FBUyxJQUFJQztRQUNuQkQsT0FBT0UsU0FBUyxHQUFHO1lBQ2xCLE1BQU1DLFNBQVNILE9BQU9HLE1BQU07WUFDNUIsZ0dBQWdHO1lBQ2hHLE1BQU1DLGdCQUFnQkQsT0FBT0UsS0FBSyxDQUFDLElBQUksQ0FBQyxFQUFFO1lBQzFDUCxRQUFRTTtRQUNUO1FBQ0FKLE9BQU9NLGFBQWEsQ0FBQ1Y7SUFDdEI7QUFDRCIsInNvdXJjZXMiOlsid2VicGFjazovL3ZpYmUtM2QtY29kZS8uL2FwcC9saWIvYmxvYlRvQmFzZTY0LnRzP2JiZmEiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGZ1bmN0aW9uIGJsb2JUb0Jhc2U2NChibG9iOiBCbG9iKTogUHJvbWlzZTxzdHJpbmc+IHtcblx0cmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCBfKSA9PiB7XG5cdFx0Y29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKVxuXHRcdHJlYWRlci5vbmxvYWRlbmQgPSAoKSA9PiB7XG5cdFx0XHRjb25zdCByZXN1bHQgPSByZWFkZXIucmVzdWx0IGFzIHN0cmluZ1xuXHRcdFx0Ly8gUmVtb3ZlIHRoZSBkYXRhIFVSTCBwcmVmaXggKGxpa2UgXCJkYXRhOmltYWdlL3BuZztiYXNlNjQsXCIpIGFuZCByZXR1cm4gb25seSB0aGUgYmFzZTY0IGNvbnRlbnRcblx0XHRcdGNvbnN0IGJhc2U2NENvbnRlbnQgPSByZXN1bHQuc3BsaXQoJywnKVsxXVxuXHRcdFx0cmVzb2x2ZShiYXNlNjRDb250ZW50KVxuXHRcdH1cblx0XHRyZWFkZXIucmVhZEFzRGF0YVVSTChibG9iKVxuXHR9KVxufVxuIl0sIm5hbWVzIjpbImJsb2JUb0Jhc2U2NCIsImJsb2IiLCJQcm9taXNlIiwicmVzb2x2ZSIsIl8iLCJyZWFkZXIiLCJGaWxlUmVhZGVyIiwib25sb2FkZW5kIiwicmVzdWx0IiwiYmFzZTY0Q29udGVudCIsInNwbGl0IiwicmVhZEFzRGF0YVVSTCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./app/lib/blobToBase64.ts\n");

/***/ }),

/***/ "(ssr)/./app/lib/edit3DCode.tsx":
/*!********************************!*\
  !*** ./app/lib/edit3DCode.tsx ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   edit3DCode: () => (/* binding */ edit3DCode)\n/* harmony export */ });\n/* harmony import */ var _tldraw_tldraw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/tldraw */ \"(ssr)/./node_modules/@tldraw/tldraw/dist-esm/index.mjs\");\n/* harmony import */ var _getSelectionAsText__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./getSelectionAsText */ \"(ssr)/./app/lib/getSelectionAsText.ts\");\n/* harmony import */ var _blobToBase64__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./blobToBase64 */ \"(ssr)/./app/lib/blobToBase64.ts\");\n\n\n\nasync function edit3DCode(editor, setIsEditing) {\n    // Set editing state if provided\n    if (setIsEditing) setIsEditing(true);\n    try {\n        // Get the selected shapes\n        const selectedShapes = editor.getSelectedShapes();\n        if (selectedShapes.length === 0) {\n            throw Error(\"First select shapes for editing.\");\n        }\n        // Filter the 3D model shapes and other shapes\n        const model3dShapes = selectedShapes.filter((shape)=>shape.type === \"model3d\");\n        const nonModel3dShapes = selectedShapes.filter((shape)=>shape.type !== \"model3d\");\n        // Validation checks\n        if (model3dShapes.length === 0) {\n            throw Error(\"First select a 3D model to edit.\");\n        }\n        if (model3dShapes.length > 1) {\n            throw Error(\"Select only one 3D model at a time.\");\n        }\n        if (nonModel3dShapes.length === 0) {\n            throw Error(\"Select at least one drawing or shape to guide the editing.\");\n        }\n        // Get the model3D shape and its Three.js code\n        const model3dShape = model3dShapes[0];\n        const threeJsCode = model3dShape.props.threeJsCode;\n        if (!threeJsCode || threeJsCode.length < 10) {\n            throw Error(\"The selected 3D model does not contain valid code.\");\n        }\n        // Get an SVG based on the non-model3d shapes\n        const svg = await editor.getSvg(nonModel3dShapes, {\n            scale: 1,\n            background: true\n        });\n        if (!svg) {\n            throw Error(\"Could not generate SVG from selected shapes.\");\n        }\n        // Turn the SVG into a DataUrl\n        const IS_SAFARI = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\n        const blob = await (0,_tldraw_tldraw__WEBPACK_IMPORTED_MODULE_0__.getSvgAsImage)(svg, IS_SAFARI, {\n            type: \"png\",\n            quality: 0.8,\n            scale: 1\n        });\n        if (!blob) {\n            throw Error(\"Could not generate image from SVG.\");\n        }\n        const dataUrl = await (0,_blobToBase64__WEBPACK_IMPORTED_MODULE_2__.blobToBase64)(blob);\n        // Get any text from the selection\n        const selectionText = (0,_getSelectionAsText__WEBPACK_IMPORTED_MODULE_1__.getSelectionAsText)(editor);\n        // Send the code, image and text to the backend\n        const response = await fetch(\"http://localhost:8000/api/queue/edit\", {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify({\n                threejs_code: threeJsCode,\n                prompt: selectionText,\n                image_base64: dataUrl\n            })\n        });\n        if (!response.ok) {\n            const errorData = await response.json();\n            throw Error(`API error: ${errorData.detail || response.statusText}`);\n        }\n        // Get the response with task ID\n        const jsonResponse = await response.json();\n        // Now wait for the edited code via SSE\n        const editedCodeData = await waitForCodeEditing(jsonResponse.task_id);\n        if (editedCodeData && editedCodeData.content) {\n            // Extract the edited Three.js code from the response\n            const editedThreeJsCode = processThreeJsCode(editedCodeData.content);\n            // Make sure we have code\n            if (editedThreeJsCode.length < 100) {\n                console.warn(editedCodeData.content);\n                throw Error(\"Could not generate edited 3D model code.\");\n            }\n            // Update the shape with the edited code\n            editor.updateShape({\n                id: model3dShape.id,\n                type: \"model3d\",\n                props: {\n                    threeJsCode: editedThreeJsCode\n                }\n            });\n            console.log(`3D model successfully edited`);\n            return model3dShape.id;\n        } else {\n            throw Error(\"No code was generated from the edit\");\n        }\n    } catch (e) {\n        console.error(\"Error in edit3DCode:\", e);\n        throw e;\n    } finally{\n        // Reset editing state if provided\n        if (setIsEditing) setIsEditing(false);\n    }\n}\n// Function to wait for the code editing to complete via SSE\nasync function waitForCodeEditing(taskId) {\n    return new Promise((resolve, reject)=>{\n        let timeout = null;\n        try {\n            const eventSource = new EventSource(`http://localhost:8000/api/subscribe/${taskId}`);\n            // Set a timeout in case the SSE connection doesn't close properly\n            timeout = setTimeout(()=>{\n                console.warn(\"Code editing timed out, closing SSE connection\");\n                eventSource.close();\n                reject(new Error(\"Code editing timed out\"));\n            }, 120000) // 2 minute timeout\n            ;\n            const cleanup = ()=>{\n                if (timeout) {\n                    clearTimeout(timeout);\n                    timeout = null;\n                }\n                eventSource.close();\n            };\n            eventSource.addEventListener(\"start\", (event)=>{\n                console.log(\"Code editing started\");\n            });\n            eventSource.addEventListener(\"complete\", (event)=>{\n                try {\n                    const data = JSON.parse(event.data);\n                    console.log(\"Complete event received:\", data);\n                    if (data.content) {\n                        resolve({\n                            content: data.content\n                        });\n                    } else {\n                        resolve(null);\n                    }\n                } catch (error) {\n                    console.error(\"Error parsing complete event:\", error);\n                    reject(error);\n                } finally{\n                    cleanup();\n                }\n            });\n            eventSource.addEventListener(\"error\", (event)=>{\n                console.error(\"SSE error event received\");\n                try {\n                    const data = JSON.parse(event.data);\n                    reject(new Error(data.error || \"Error editing code\"));\n                } catch (e) {\n                    reject(new Error(\"Unknown error in code editing\"));\n                } finally{\n                    cleanup();\n                }\n            });\n            // Handle general error case\n            eventSource.onerror = (error)=>{\n                console.error(\"SSE connection error:\", error);\n                reject(new Error(\"Error with SSE connection\"));\n                cleanup();\n            };\n        } catch (err) {\n            console.error(\"Error setting up SSE connection:\", err);\n            if (timeout) clearTimeout(timeout);\n            reject(err);\n        }\n    });\n}\nfunction processThreeJsCode(code) {\n    let processedCode = code;\n    // Extract code from markdown code blocks if present\n    const jsPattern = /```javascript\\s*\\n([\\s\\S]*?)```/;\n    const jsMatch = processedCode.match(jsPattern);\n    if (jsMatch && jsMatch[1]) {\n        processedCode = jsMatch[1];\n    } else {\n        // Try to find any code block with or without language specification\n        const codePattern = /```(?:\\w*\\s*)?\\n([\\s\\S]*?)```/;\n        const codeMatch = processedCode.match(codePattern);\n        if (codeMatch && codeMatch[1]) {\n            processedCode = codeMatch[1];\n        } else {\n            // If no markdown code blocks found, try to find script tags\n            const scriptPattern = /<script[^>]*>([\\s\\S]*?)<\\/script>/;\n            const scriptMatch = processedCode.match(scriptPattern);\n            if (scriptMatch && scriptMatch[1]) {\n                processedCode = scriptMatch[1];\n            }\n        }\n    }\n    // Process the code to adapt to the non-ES modules environment\n    processedCode = processedCode.replace(/^import\\s+.*?from\\s+['\"].*?['\"];?\\s*$/gm, \"\");\n    processedCode = processedCode.replace(/^import\\s+\\*\\s+as\\s+.*?\\s+from\\s+['\"].*?['\"];?\\s*$/gm, \"\");\n    processedCode = processedCode.replace(/^import\\s+['\"].*?['\"];?\\s*$/gm, \"\");\n    processedCode = processedCode.replace(/^const\\s+.*?\\s*=\\s*require\\(['\"].*?['\"]\\);?\\s*$/gm, \"\");\n    processedCode = processedCode.replace(/import\\s+\\*\\s+as\\s+THREE\\s+from\\s+['\"]three['\"];?\\s*/g, \"\");\n    processedCode = processedCode.replace(/import\\s+{\\s*OrbitControls\\s*}\\s+from\\s+['\"]three\\/addons\\/controls\\/OrbitControls\\.js['\"];?\\s*/g, \"\");\n    processedCode = processedCode.replace(/import\\s+{\\s*[^}]*\\s*}\\s+from\\s+['\"]three['\"];?\\s*/g, \"\");\n    processedCode = processedCode.replace(/import\\s+THREE\\s+from\\s+['\"]three['\"];?\\s*/g, \"\");\n    processedCode = processedCode.replace(/THREE\\.OrbitControls/g, \"OrbitControls\");\n    return processedCode;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFFLEVBQUU7WUFDN0JMLGdCQUFnQkssU0FBUyxDQUFDLEVBQUU7UUFDOUIsT0FBTztZQUNMLDREQUE0RDtZQUM1RCxNQUFNQyxnQkFBZ0I7WUFDdEIsTUFBTUMsY0FBY1AsY0FBY0csS0FBSyxDQUFDRztZQUN4QyxJQUFJQyxlQUFlQSxXQUFXLENBQUMsRUFBRSxFQUFFO2dCQUNqQ1AsZ0JBQWdCTyxXQUFXLENBQUMsRUFBRTtZQUNoQztRQUNGO0lBQ0Y7SUFFQSw4REFBOEQ7SUFDOURQLGdCQUFnQkEsY0FBY1EsT0FBTyxDQUFDLDJDQUEyQztJQUNqRlIsZ0JBQWdCQSxjQUFjUSxPQUFPLENBQUMsd0RBQXdEO0lBQzlGUixnQkFBZ0JBLGNBQWNRLE9BQU8sQ0FBQyxpQ0FBaUM7SUFDdkVSLGdCQUFnQkEsY0FBY1EsT0FBTyxDQUFDLHFEQUFxRDtJQUUzRlIsZ0JBQWdCQSxjQUFjUSxPQUFPLENBQUMseURBQXlEO0lBQy9GUixnQkFBZ0JBLGNBQWNRLE9BQU8sQ0FBQyxvR0FBb0c7SUFDMUlSLGdCQUFnQkEsY0FBY1EsT0FBTyxDQUFDLHVEQUF1RDtJQUM3RlIsZ0JBQWdCQSxjQUFjUSxPQUFPLENBQUMsK0NBQStDO0lBRXJGUixnQkFBZ0JBLGNBQWNRLE9BQU8sQ0FBQyx5QkFBeUI7SUFFL0QsT0FBT1I7QUFDVCIsInNvdXJjZXMiOlsid2VicGFjazovL3ZpYmUtM2QtY29kZS8uL2FwcC9saWIvZWRpdDNEQ29kZS50c3g/N2Q3MiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBFZGl0b3IsIGdldFN2Z0FzSW1hZ2UgfSBmcm9tICdAdGxkcmF3L3RsZHJhdydcbmltcG9ydCB7IGdldFNlbGVjdGlvbkFzVGV4dCB9IGZyb20gJy4vZ2V0U2VsZWN0aW9uQXNUZXh0J1xuaW1wb3J0IHsgYmxvYlRvQmFzZTY0IH0gZnJvbSAnLi9ibG9iVG9CYXNlNjQnXG5pbXBvcnQgeyBNb2RlbDNEUHJldmlld1NoYXBlIH0gZnJvbSAnLi4vUHJldmlld1NoYXBlL01vZGVsM0RQcmV2aWV3U2hhcGUnXG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBlZGl0M0RDb2RlKFxuICBlZGl0b3I6IEVkaXRvcixcbiAgc2V0SXNFZGl0aW5nPzogKGlzRWRpdGluZzogYm9vbGVhbikgPT4gdm9pZFxuKSB7XG4gIC8vIFNldCBlZGl0aW5nIHN0YXRlIGlmIHByb3ZpZGVkXG4gIGlmIChzZXRJc0VkaXRpbmcpIHNldElzRWRpdGluZyh0cnVlKTtcblxuICB0cnkge1xuICAgIC8vIEdldCB0aGUgc2VsZWN0ZWQgc2hhcGVzXG4gICAgY29uc3Qgc2VsZWN0ZWRTaGFwZXMgPSBlZGl0b3IuZ2V0U2VsZWN0ZWRTaGFwZXMoKVxuICAgIFxuICAgIGlmIChzZWxlY3RlZFNoYXBlcy5sZW5ndGggPT09IDApIHtcbiAgICAgIHRocm93IEVycm9yKCdGaXJzdCBzZWxlY3Qgc2hhcGVzIGZvciBlZGl0aW5nLicpXG4gICAgfVxuXG4gICAgLy8gRmlsdGVyIHRoZSAzRCBtb2RlbCBzaGFwZXMgYW5kIG90aGVyIHNoYXBlc1xuICAgIGNvbnN0IG1vZGVsM2RTaGFwZXMgPSBzZWxlY3RlZFNoYXBlcy5maWx0ZXIoKHNoYXBlKSA9PiBzaGFwZS50eXBlID09PSAnbW9kZWwzZCcpXG4gICAgY29uc3Qgbm9uTW9kZWwzZFNoYXBlcyA9IHNlbGVjdGVkU2hhcGVzLmZpbHRlcigoc2hhcGUpID0+IHNoYXBlLnR5cGUgIT09ICdtb2RlbDNkJylcbiAgICBcbiAgICAvLyBWYWxpZGF0aW9uIGNoZWNrc1xuICAgIGlmIChtb2RlbDNkU2hhcGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGhyb3cgRXJyb3IoJ0ZpcnN0IHNlbGVjdCBhIDNEIG1vZGVsIHRvIGVkaXQuJylcbiAgICB9XG4gICAgXG4gICAgaWYgKG1vZGVsM2RTaGFwZXMubGVuZ3RoID4gMSkge1xuICAgICAgdGhyb3cgRXJyb3IoJ1NlbGVjdCBvbmx5IG9uZSAzRCBtb2RlbCBhdCBhIHRpbWUuJylcbiAgICB9XG4gICAgXG4gICAgaWYgKG5vbk1vZGVsM2RTaGFwZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICB0aHJvdyBFcnJvcignU2VsZWN0IGF0IGxlYXN0IG9uZSBkcmF3aW5nIG9yIHNoYXBlIHRvIGd1aWRlIHRoZSBlZGl0aW5nLicpXG4gICAgfVxuICAgIFxuICAgIC8vIEdldCB0aGUgbW9kZWwzRCBzaGFwZSBhbmQgaXRzIFRocmVlLmpzIGNvZGVcbiAgICBjb25zdCBtb2RlbDNkU2hhcGUgPSBtb2RlbDNkU2hhcGVzWzBdIGFzIE1vZGVsM0RQcmV2aWV3U2hhcGVcbiAgICBjb25zdCB0aHJlZUpzQ29kZSA9IG1vZGVsM2RTaGFwZS5wcm9wcy50aHJlZUpzQ29kZVxuICAgIFxuICAgIGlmICghdGhyZWVKc0NvZGUgfHwgdGhyZWVKc0NvZGUubGVuZ3RoIDwgMTApIHtcbiAgICAgIHRocm93IEVycm9yKCdUaGUgc2VsZWN0ZWQgM0QgbW9kZWwgZG9lcyBub3QgY29udGFpbiB2YWxpZCBjb2RlLicpXG4gICAgfVxuXG4gICAgLy8gR2V0IGFuIFNWRyBiYXNlZCBvbiB0aGUgbm9uLW1vZGVsM2Qgc2hhcGVzXG4gICAgY29uc3Qgc3ZnID0gYXdhaXQgZWRpdG9yLmdldFN2Zyhub25Nb2RlbDNkU2hhcGVzLCB7XG4gICAgICBzY2FsZTogMSxcbiAgICAgIGJhY2tncm91bmQ6IHRydWUsXG4gICAgfSlcblxuICAgIGlmICghc3ZnKSB7XG4gICAgICB0aHJvdyBFcnJvcignQ291bGQgbm90IGdlbmVyYXRlIFNWRyBmcm9tIHNlbGVjdGVkIHNoYXBlcy4nKVxuICAgIH1cblxuICAgIC8vIFR1cm4gdGhlIFNWRyBpbnRvIGEgRGF0YVVybFxuICAgIGNvbnN0IElTX1NBRkFSSSA9IC9eKCg/IWNocm9tZXxhbmRyb2lkKS4pKnNhZmFyaS9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudClcbiAgICBjb25zdCBibG9iID0gYXdhaXQgZ2V0U3ZnQXNJbWFnZShzdmcsIElTX1NBRkFSSSwge1xuICAgICAgdHlwZTogJ3BuZycsXG4gICAgICBxdWFsaXR5OiAwLjgsXG4gICAgICBzY2FsZTogMSxcbiAgICB9KVxuICAgIFxuICAgIGlmICghYmxvYikge1xuICAgICAgdGhyb3cgRXJyb3IoJ0NvdWxkIG5vdCBnZW5lcmF0ZSBpbWFnZSBmcm9tIFNWRy4nKVxuICAgIH1cbiAgICBcbiAgICBjb25zdCBkYXRhVXJsID0gYXdhaXQgYmxvYlRvQmFzZTY0KGJsb2IpXG5cbiAgICAvLyBHZXQgYW55IHRleHQgZnJvbSB0aGUgc2VsZWN0aW9uXG4gICAgY29uc3Qgc2VsZWN0aW9uVGV4dCA9IGdldFNlbGVjdGlvbkFzVGV4dChlZGl0b3IpXG5cbiAgICAvLyBTZW5kIHRoZSBjb2RlLCBpbWFnZSBhbmQgdGV4dCB0byB0aGUgYmFja2VuZFxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goJ2h0dHA6Ly9sb2NhbGhvc3Q6ODAwMC9hcGkvcXVldWUvZWRpdCcsIHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgfSxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgdGhyZWVqc19jb2RlOiB0aHJlZUpzQ29kZSxcbiAgICAgICAgcHJvbXB0OiBzZWxlY3Rpb25UZXh0LFxuICAgICAgICBpbWFnZV9iYXNlNjQ6IGRhdGFVcmwsXG4gICAgICB9KSxcbiAgICB9KVxuXG4gICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgY29uc3QgZXJyb3JEYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpXG4gICAgICB0aHJvdyBFcnJvcihgQVBJIGVycm9yOiAke2Vycm9yRGF0YS5kZXRhaWwgfHwgcmVzcG9uc2Uuc3RhdHVzVGV4dH1gKVxuICAgIH1cblxuICAgIC8vIEdldCB0aGUgcmVzcG9uc2Ugd2l0aCB0YXNrIElEXG4gICAgY29uc3QganNvblJlc3BvbnNlID0gYXdhaXQgcmVzcG9uc2UuanNvbigpXG4gICAgXG4gICAgLy8gTm93IHdhaXQgZm9yIHRoZSBlZGl0ZWQgY29kZSB2aWEgU1NFXG4gICAgY29uc3QgZWRpdGVkQ29kZURhdGEgPSBhd2FpdCB3YWl0Rm9yQ29kZUVkaXRpbmcoanNvblJlc3BvbnNlLnRhc2tfaWQpXG4gICAgXG4gICAgaWYgKGVkaXRlZENvZGVEYXRhICYmIGVkaXRlZENvZGVEYXRhLmNvbnRlbnQpIHtcbiAgICAgIC8vIEV4dHJhY3QgdGhlIGVkaXRlZCBUaHJlZS5qcyBjb2RlIGZyb20gdGhlIHJlc3BvbnNlXG4gICAgICBjb25zdCBlZGl0ZWRUaHJlZUpzQ29kZSA9IHByb2Nlc3NUaHJlZUpzQ29kZShlZGl0ZWRDb2RlRGF0YS5jb250ZW50KVxuICAgICAgXG4gICAgICAvLyBNYWtlIHN1cmUgd2UgaGF2ZSBjb2RlXG4gICAgICBpZiAoZWRpdGVkVGhyZWVKc0NvZGUubGVuZ3RoIDwgMTAwKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihlZGl0ZWRDb2RlRGF0YS5jb250ZW50KVxuICAgICAgICB0aHJvdyBFcnJvcignQ291bGQgbm90IGdlbmVyYXRlIGVkaXRlZCAzRCBtb2RlbCBjb2RlLicpXG4gICAgICB9XG5cbiAgICAgIC8vIFVwZGF0ZSB0aGUgc2hhcGUgd2l0aCB0aGUgZWRpdGVkIGNvZGVcbiAgICAgIGVkaXRvci51cGRhdGVTaGFwZTxNb2RlbDNEUHJldmlld1NoYXBlPih7XG4gICAgICAgIGlkOiBtb2RlbDNkU2hhcGUuaWQsXG4gICAgICAgIHR5cGU6ICdtb2RlbDNkJyxcbiAgICAgICAgcHJvcHM6IHtcbiAgICAgICAgICB0aHJlZUpzQ29kZTogZWRpdGVkVGhyZWVKc0NvZGUsXG4gICAgICAgIH0sXG4gICAgICB9KVxuXG4gICAgICBjb25zb2xlLmxvZyhgM0QgbW9kZWwgc3VjY2Vzc2Z1bGx5IGVkaXRlZGApXG4gICAgICByZXR1cm4gbW9kZWwzZFNoYXBlLmlkXG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93IEVycm9yKCdObyBjb2RlIHdhcyBnZW5lcmF0ZWQgZnJvbSB0aGUgZWRpdCcpXG4gICAgfVxuICB9IGNhdGNoIChlKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgaW4gZWRpdDNEQ29kZTonLCBlKVxuICAgIHRocm93IGVcbiAgfSBmaW5hbGx5IHtcbiAgICAvLyBSZXNldCBlZGl0aW5nIHN0YXRlIGlmIHByb3ZpZGVkXG4gICAgaWYgKHNldElzRWRpdGluZykgc2V0SXNFZGl0aW5nKGZhbHNlKTtcbiAgfVxufVxuXG4vLyBGdW5jdGlvbiB0byB3YWl0IGZvciB0aGUgY29kZSBlZGl0aW5nIHRvIGNvbXBsZXRlIHZpYSBTU0VcbmFzeW5jIGZ1bmN0aW9uIHdhaXRGb3JDb2RlRWRpdGluZyh0YXNrSWQ6IHN0cmluZyk6IFByb21pc2U8eyBjb250ZW50OiBzdHJpbmcgfSB8IG51bGw+IHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICBsZXQgdGltZW91dDogTm9kZUpTLlRpbWVvdXQgfCBudWxsID0gbnVsbDtcbiAgICBcbiAgICB0cnkge1xuICAgICAgY29uc3QgZXZlbnRTb3VyY2UgPSBuZXcgRXZlbnRTb3VyY2UoYGh0dHA6Ly9sb2NhbGhvc3Q6ODAwMC9hcGkvc3Vic2NyaWJlLyR7dGFza0lkfWApXG4gICAgICBcbiAgICAgIC8vIFNldCBhIHRpbWVvdXQgaW4gY2FzZSB0aGUgU1NFIGNvbm5lY3Rpb24gZG9lc24ndCBjbG9zZSBwcm9wZXJseVxuICAgICAgdGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBjb25zb2xlLndhcm4oJ0NvZGUgZWRpdGluZyB0aW1lZCBvdXQsIGNsb3NpbmcgU1NFIGNvbm5lY3Rpb24nKVxuICAgICAgICBldmVudFNvdXJjZS5jbG9zZSgpXG4gICAgICAgIHJlamVjdChuZXcgRXJyb3IoJ0NvZGUgZWRpdGluZyB0aW1lZCBvdXQnKSlcbiAgICAgIH0sIDEyMDAwMCkgLy8gMiBtaW51dGUgdGltZW91dFxuICAgICAgXG4gICAgICBjb25zdCBjbGVhbnVwID0gKCkgPT4ge1xuICAgICAgICBpZiAodGltZW91dCkge1xuICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KVxuICAgICAgICAgIHRpbWVvdXQgPSBudWxsXG4gICAgICAgIH1cbiAgICAgICAgZXZlbnRTb3VyY2UuY2xvc2UoKVxuICAgICAgfVxuICAgICAgXG4gICAgICBldmVudFNvdXJjZS5hZGRFdmVudExpc3RlbmVyKCdzdGFydCcsIChldmVudCkgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZygnQ29kZSBlZGl0aW5nIHN0YXJ0ZWQnKVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgZXZlbnRTb3VyY2UuYWRkRXZlbnRMaXN0ZW5lcignY29tcGxldGUnLCAoZXZlbnQpID0+IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCBkYXRhID0gSlNPTi5wYXJzZSgoZXZlbnQgYXMgTWVzc2FnZUV2ZW50KS5kYXRhKVxuICAgICAgICAgIGNvbnNvbGUubG9nKCdDb21wbGV0ZSBldmVudCByZWNlaXZlZDonLCBkYXRhKVxuICAgICAgICAgIFxuICAgICAgICAgIGlmIChkYXRhLmNvbnRlbnQpIHtcbiAgICAgICAgICAgIHJlc29sdmUoeyBjb250ZW50OiBkYXRhLmNvbnRlbnQgfSlcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVzb2x2ZShudWxsKVxuICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBwYXJzaW5nIGNvbXBsZXRlIGV2ZW50OicsIGVycm9yKVxuICAgICAgICAgIHJlamVjdChlcnJvcilcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICBjbGVhbnVwKClcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgZXZlbnRTb3VyY2UuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCAoZXZlbnQpID0+IHtcbiAgICAgICAgY29uc29sZS5lcnJvcignU1NFIGVycm9yIGV2ZW50IHJlY2VpdmVkJylcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCBkYXRhID0gSlNPTi5wYXJzZSgoZXZlbnQgYXMgTWVzc2FnZUV2ZW50KS5kYXRhKVxuICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoZGF0YS5lcnJvciB8fCAnRXJyb3IgZWRpdGluZyBjb2RlJykpXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICByZWplY3QobmV3IEVycm9yKCdVbmtub3duIGVycm9yIGluIGNvZGUgZWRpdGluZycpKVxuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgIGNsZWFudXAoKVxuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgXG4gICAgICAvLyBIYW5kbGUgZ2VuZXJhbCBlcnJvciBjYXNlXG4gICAgICBldmVudFNvdXJjZS5vbmVycm9yID0gKGVycm9yKSA9PiB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1NTRSBjb25uZWN0aW9uIGVycm9yOicsIGVycm9yKVxuICAgICAgICByZWplY3QobmV3IEVycm9yKCdFcnJvciB3aXRoIFNTRSBjb25uZWN0aW9uJykpXG4gICAgICAgIGNsZWFudXAoKVxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igc2V0dGluZyB1cCBTU0UgY29ubmVjdGlvbjonLCBlcnIpXG4gICAgICBpZiAodGltZW91dCkgY2xlYXJUaW1lb3V0KHRpbWVvdXQpXG4gICAgICByZWplY3QoZXJyKVxuICAgIH1cbiAgfSlcbn1cblxuZnVuY3Rpb24gcHJvY2Vzc1RocmVlSnNDb2RlKGNvZGU6IHN0cmluZyk6IHN0cmluZyB7XG4gIGxldCBwcm9jZXNzZWRDb2RlID0gY29kZTtcbiAgXG4gIC8vIEV4dHJhY3QgY29kZSBmcm9tIG1hcmtkb3duIGNvZGUgYmxvY2tzIGlmIHByZXNlbnRcbiAgY29uc3QganNQYXR0ZXJuID0gL2BgYGphdmFzY3JpcHRcXHMqXFxuKFtcXHNcXFNdKj8pYGBgLztcbiAgY29uc3QganNNYXRjaCA9IHByb2Nlc3NlZENvZGUubWF0Y2goanNQYXR0ZXJuKTtcbiAgXG4gIGlmIChqc01hdGNoICYmIGpzTWF0Y2hbMV0pIHtcbiAgICBwcm9jZXNzZWRDb2RlID0ganNNYXRjaFsxXTtcbiAgfSBlbHNlIHtcbiAgICAvLyBUcnkgdG8gZmluZCBhbnkgY29kZSBibG9jayB3aXRoIG9yIHdpdGhvdXQgbGFuZ3VhZ2Ugc3BlY2lmaWNhdGlvblxuICAgIGNvbnN0IGNvZGVQYXR0ZXJuID0gL2BgYCg/OlxcdypcXHMqKT9cXG4oW1xcc1xcU10qPylgYGAvO1xuICAgIGNvbnN0IGNvZGVNYXRjaCA9IHByb2Nlc3NlZENvZGUubWF0Y2goY29kZVBhdHRlcm4pO1xuICAgIGlmIChjb2RlTWF0Y2ggJiYgY29kZU1hdGNoWzFdKSB7XG4gICAgICBwcm9jZXNzZWRDb2RlID0gY29kZU1hdGNoWzFdO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBJZiBubyBtYXJrZG93biBjb2RlIGJsb2NrcyBmb3VuZCwgdHJ5IHRvIGZpbmQgc2NyaXB0IHRhZ3NcbiAgICAgIGNvbnN0IHNjcmlwdFBhdHRlcm4gPSAvPHNjcmlwdFtePl0qPihbXFxzXFxTXSo/KTxcXC9zY3JpcHQ+LztcbiAgICAgIGNvbnN0IHNjcmlwdE1hdGNoID0gcHJvY2Vzc2VkQ29kZS5tYXRjaChzY3JpcHRQYXR0ZXJuKTtcbiAgICAgIGlmIChzY3JpcHRNYXRjaCAmJiBzY3JpcHRNYXRjaFsxXSkge1xuICAgICAgICBwcm9jZXNzZWRDb2RlID0gc2NyaXB0TWF0Y2hbMV07XG4gICAgICB9XG4gICAgfVxuICB9XG4gIFxuICAvLyBQcm9jZXNzIHRoZSBjb2RlIHRvIGFkYXB0IHRvIHRoZSBub24tRVMgbW9kdWxlcyBlbnZpcm9ubWVudFxuICBwcm9jZXNzZWRDb2RlID0gcHJvY2Vzc2VkQ29kZS5yZXBsYWNlKC9eaW1wb3J0XFxzKy4qP2Zyb21cXHMrWydcIl0uKj9bJ1wiXTs/XFxzKiQvZ20sICcnKTtcbiAgcHJvY2Vzc2VkQ29kZSA9IHByb2Nlc3NlZENvZGUucmVwbGFjZSgvXmltcG9ydFxccytcXCpcXHMrYXNcXHMrLio/XFxzK2Zyb21cXHMrWydcIl0uKj9bJ1wiXTs/XFxzKiQvZ20sICcnKTtcbiAgcHJvY2Vzc2VkQ29kZSA9IHByb2Nlc3NlZENvZGUucmVwbGFjZSgvXmltcG9ydFxccytbJ1wiXS4qP1snXCJdOz9cXHMqJC9nbSwgJycpO1xuICBwcm9jZXNzZWRDb2RlID0gcHJvY2Vzc2VkQ29kZS5yZXBsYWNlKC9eY29uc3RcXHMrLio/XFxzKj1cXHMqcmVxdWlyZVxcKFsnXCJdLio/WydcIl1cXCk7P1xccyokL2dtLCAnJyk7XG4gIFxuICBwcm9jZXNzZWRDb2RlID0gcHJvY2Vzc2VkQ29kZS5yZXBsYWNlKC9pbXBvcnRcXHMrXFwqXFxzK2FzXFxzK1RIUkVFXFxzK2Zyb21cXHMrWydcIl10aHJlZVsnXCJdOz9cXHMqL2csICcnKTtcbiAgcHJvY2Vzc2VkQ29kZSA9IHByb2Nlc3NlZENvZGUucmVwbGFjZSgvaW1wb3J0XFxzK3tcXHMqT3JiaXRDb250cm9sc1xccyp9XFxzK2Zyb21cXHMrWydcIl10aHJlZVxcL2FkZG9uc1xcL2NvbnRyb2xzXFwvT3JiaXRDb250cm9sc1xcLmpzWydcIl07P1xccyovZywgJycpO1xuICBwcm9jZXNzZWRDb2RlID0gcHJvY2Vzc2VkQ29kZS5yZXBsYWNlKC9pbXBvcnRcXHMre1xccypbXn1dKlxccyp9XFxzK2Zyb21cXHMrWydcIl10aHJlZVsnXCJdOz9cXHMqL2csICcnKTtcbiAgcHJvY2Vzc2VkQ29kZSA9IHByb2Nlc3NlZENvZGUucmVwbGFjZSgvaW1wb3J0XFxzK1RIUkVFXFxzK2Zyb21cXHMrWydcIl10aHJlZVsnXCJdOz9cXHMqL2csICcnKTtcbiAgXG4gIHByb2Nlc3NlZENvZGUgPSBwcm9jZXNzZWRDb2RlLnJlcGxhY2UoL1RIUkVFXFwuT3JiaXRDb250cm9scy9nLCAnT3JiaXRDb250cm9scycpO1xuICBcbiAgcmV0dXJuIHByb2Nlc3NlZENvZGU7XG59ICJdLCJuYW1lcyI6WyJnZXRTdmdBc0ltYWdlIiwiZ2V0U2VsZWN0aW9uQXNUZXh0IiwiYmxvYlRvQmFzZTY0IiwiZWRpdDNEQ29kZSIsImVkaXRvciIsInNldElzRWRpdGluZyIsInNlbGVjdGVkU2hhcGVzIiwiZ2V0U2VsZWN0ZWRTaGFwZXMiLCJsZW5ndGgiLCJFcnJvciIsIm1vZGVsM2RTaGFwZXMiLCJmaWx0ZXIiLCJzaGFwZSIsInR5cGUiLCJub25Nb2RlbDNkU2hhcGVzIiwibW9kZWwzZFNoYXBlIiwidGhyZWVKc0NvZGUiLCJwcm9wcyIsInN2ZyIsImdldFN2ZyIsInNjYWxlIiwiYmFja2dyb3VuZCIsIklTX1NBRkFSSSIsInRlc3QiLCJuYXZpZ2F0b3IiLCJ1c2VyQWdlbnQiLCJibG9iIiwicXVhbGl0eSIsImRhdGFVcmwiLCJzZWxlY3Rpb25UZXh0IiwicmVzcG9uc2UiLCJmZXRjaCIsIm1ldGhvZCIsImhlYWRlcnMiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsInRocmVlanNfY29kZSIsInByb21wdCIsImltYWdlX2Jhc2U2NCIsIm9rIiwiZXJyb3JEYXRhIiwianNvbiIsImRldGFpbCIsInN0YXR1c1RleHQiLCJqc29uUmVzcG9uc2UiLCJlZGl0ZWRDb2RlRGF0YSIsIndhaXRGb3JDb2RlRWRpdGluZyIsInRhc2tfaWQiLCJjb250ZW50IiwiZWRpdGVkVGhyZWVKc0NvZGUiLCJwcm9jZXNzVGhyZWVKc0NvZGUiLCJjb25zb2xlIiwid2FybiIsInVwZGF0ZVNoYXBlIiwiaWQiLCJsb2ciLCJlIiwiZXJyb3IiLCJ0YXNrSWQiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsInRpbWVvdXQiLCJldmVudFNvdXJjZSIsIkV2ZW50U291cmNlIiwic2V0VGltZW91dCIsImNsb3NlIiwiY2xlYW51cCIsImNsZWFyVGltZW91dCIsImFkZEV2ZW50TGlzdGVuZXIiLCJldmVudCIsImRhdGEiLCJwYXJzZSIsIm9uZXJyb3IiLCJlcnIiLCJjb2RlIiwicHJvY2Vzc2VkQ29kZSIsImpzUGF0dGVybiIsImpzTWF0Y2giLCJtYXRjaCIsImNvZGVQYXR0ZXJuIiwiY29kZU1hdGNoIiwic2NyaXB0UGF0dGVybiIsInNjcmlwdE1hdGNoIiwicmVwbGFjZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./app/lib/edit3DCode.tsx\n");

/***/ }),

/***/ "(ssr)/./app/lib/getSelectionAsText.ts":
/*!***************************************!*\
  !*** ./app/lib/getSelectionAsText.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getSelectionAsText: () => (/* binding */ getSelectionAsText)\n/* harmony export */ });\nfunction getSelectionAsText(editor) {\n    const selectedShapeIds = editor.getSelectedShapeIds();\n    const selectedShapeDescendantIds = editor.getShapeAndDescendantIds(selectedShapeIds);\n    const texts = Array.from(selectedShapeDescendantIds).map((id)=>{\n        const shape = editor.getShape(id);\n        return shape;\n    }).filter((shape)=>{\n        return shape.type === \"text\" || shape.type === \"geo\" || shape.type === \"arrow\" || shape.type === \"note\";\n    }).sort((a, b)=>{\n        // top first, then left, based on page position\n        const pageBoundsA = editor.getShapePageBounds(a);\n        const pageBoundsB = editor.getShapePageBounds(b);\n        return pageBoundsA.y === pageBoundsB.y ? pageBoundsA.x < pageBoundsB.x ? -1 : 1 : pageBoundsA.y < pageBoundsB.y ? -1 : 1;\n    }).map((shape)=>{\n        if (!shape) return null;\n        const text = shape.props.text ?? null;\n        if (shape.props.color === \"red\") {\n            return `Annotation: ${text}`;\n        }\n        return text;\n    }).filter((v)=>!!v);\n    return texts.join(\"\\n\");\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9hcHAvbGliL2dldFNlbGVjdGlvbkFzVGV4dC50cyIsIm1hcHBpbmdzIjoiOzs7O0FBRU8sU0FBU0EsbUJBQW1CQyxNQUFjO0lBQ2hELE1BQU1DLG1CQUFtQkQsT0FBT0UsbUJBQW1CO0lBQ25ELE1BQU1DLDZCQUE2QkgsT0FBT0ksd0JBQXdCLENBQUNIO0lBRW5FLE1BQU1JLFFBQVFDLE1BQU1DLElBQUksQ0FBQ0osNEJBQ3ZCSyxHQUFHLENBQUMsQ0FBQ0M7UUFDTCxNQUFNQyxRQUFRVixPQUFPVyxRQUFRLENBQUNGO1FBQzlCLE9BQU9DO0lBQ1IsR0FDQ0UsTUFBTSxDQUFDLENBQUNGO1FBQ1IsT0FDQ0EsTUFBTUcsSUFBSSxLQUFLLFVBQ2ZILE1BQU1HLElBQUksS0FBSyxTQUNmSCxNQUFNRyxJQUFJLEtBQUssV0FDZkgsTUFBTUcsSUFBSSxLQUFLO0lBRWpCLEdBQ0NDLElBQUksQ0FBQyxDQUFDQyxHQUFHQztRQUNULCtDQUErQztRQUMvQyxNQUFNQyxjQUFjakIsT0FBT2tCLGtCQUFrQixDQUFDSDtRQUM5QyxNQUFNSSxjQUFjbkIsT0FBT2tCLGtCQUFrQixDQUFDRjtRQUU5QyxPQUFPQyxZQUFZRyxDQUFDLEtBQUtELFlBQVlDLENBQUMsR0FDbkNILFlBQVlJLENBQUMsR0FBR0YsWUFBWUUsQ0FBQyxHQUM1QixDQUFDLElBQ0QsSUFDREosWUFBWUcsQ0FBQyxHQUFHRCxZQUFZQyxDQUFDLEdBQzdCLENBQUMsSUFDRDtJQUNKLEdBQ0NaLEdBQUcsQ0FBQyxDQUFDRTtRQUNMLElBQUksQ0FBQ0EsT0FBTyxPQUFPO1FBQ25CLE1BQU1ZLE9BQU8sTUFBb0NDLEtBQUssQ0FBQ0QsSUFBSSxJQUFJO1FBQy9ELElBQUksTUFBb0NDLEtBQUssQ0FBQ0MsS0FBSyxLQUFLLE9BQU87WUFDOUQsT0FBTyxDQUFDLFlBQVksRUFBRUYsS0FBSyxDQUFDO1FBQzdCO1FBQ0EsT0FBT0E7SUFDUixHQUNDVixNQUFNLENBQUMsQ0FBQ2EsSUFBTSxDQUFDLENBQUNBO0lBRWxCLE9BQU9wQixNQUFNcUIsSUFBSSxDQUFDO0FBQ25CIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdmliZS0zZC1jb2RlLy4vYXBwL2xpYi9nZXRTZWxlY3Rpb25Bc1RleHQudHM/ZDMyNiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBFZGl0b3IsIFRMR2VvU2hhcGUsIFRMVGV4dFNoYXBlIH0gZnJvbSAnQHRsZHJhdy90bGRyYXcnXG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRTZWxlY3Rpb25Bc1RleHQoZWRpdG9yOiBFZGl0b3IpIHtcblx0Y29uc3Qgc2VsZWN0ZWRTaGFwZUlkcyA9IGVkaXRvci5nZXRTZWxlY3RlZFNoYXBlSWRzKClcblx0Y29uc3Qgc2VsZWN0ZWRTaGFwZURlc2NlbmRhbnRJZHMgPSBlZGl0b3IuZ2V0U2hhcGVBbmREZXNjZW5kYW50SWRzKHNlbGVjdGVkU2hhcGVJZHMpXG5cblx0Y29uc3QgdGV4dHMgPSBBcnJheS5mcm9tKHNlbGVjdGVkU2hhcGVEZXNjZW5kYW50SWRzKVxuXHRcdC5tYXAoKGlkKSA9PiB7XG5cdFx0XHRjb25zdCBzaGFwZSA9IGVkaXRvci5nZXRTaGFwZShpZCkhXG5cdFx0XHRyZXR1cm4gc2hhcGVcblx0XHR9KVxuXHRcdC5maWx0ZXIoKHNoYXBlKSA9PiB7XG5cdFx0XHRyZXR1cm4gKFxuXHRcdFx0XHRzaGFwZS50eXBlID09PSAndGV4dCcgfHxcblx0XHRcdFx0c2hhcGUudHlwZSA9PT0gJ2dlbycgfHxcblx0XHRcdFx0c2hhcGUudHlwZSA9PT0gJ2Fycm93JyB8fFxuXHRcdFx0XHRzaGFwZS50eXBlID09PSAnbm90ZSdcblx0XHRcdClcblx0XHR9KVxuXHRcdC5zb3J0KChhLCBiKSA9PiB7XG5cdFx0XHQvLyB0b3AgZmlyc3QsIHRoZW4gbGVmdCwgYmFzZWQgb24gcGFnZSBwb3NpdGlvblxuXHRcdFx0Y29uc3QgcGFnZUJvdW5kc0EgPSBlZGl0b3IuZ2V0U2hhcGVQYWdlQm91bmRzKGEpIVxuXHRcdFx0Y29uc3QgcGFnZUJvdW5kc0IgPSBlZGl0b3IuZ2V0U2hhcGVQYWdlQm91bmRzKGIpIVxuXG5cdFx0XHRyZXR1cm4gcGFnZUJvdW5kc0EueSA9PT0gcGFnZUJvdW5kc0IueVxuXHRcdFx0XHQ/IHBhZ2VCb3VuZHNBLnggPCBwYWdlQm91bmRzQi54XG5cdFx0XHRcdFx0PyAtMVxuXHRcdFx0XHRcdDogMVxuXHRcdFx0XHQ6IHBhZ2VCb3VuZHNBLnkgPCBwYWdlQm91bmRzQi55XG5cdFx0XHRcdD8gLTFcblx0XHRcdFx0OiAxXG5cdFx0fSlcblx0XHQubWFwKChzaGFwZSkgPT4ge1xuXHRcdFx0aWYgKCFzaGFwZSkgcmV0dXJuIG51bGxcblx0XHRcdGNvbnN0IHRleHQgPSAoc2hhcGUgYXMgVExUZXh0U2hhcGUgfCBUTEdlb1NoYXBlKS5wcm9wcy50ZXh0ID8/IG51bGxcblx0XHRcdGlmICgoc2hhcGUgYXMgVExUZXh0U2hhcGUgfCBUTEdlb1NoYXBlKS5wcm9wcy5jb2xvciA9PT0gJ3JlZCcpIHtcblx0XHRcdFx0cmV0dXJuIGBBbm5vdGF0aW9uOiAke3RleHR9YFxuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHRleHRcblx0XHR9KVxuXHRcdC5maWx0ZXIoKHYpID0+ICEhdilcblxuXHRyZXR1cm4gdGV4dHMuam9pbignXFxuJylcbn1cbiJdLCJuYW1lcyI6WyJnZXRTZWxlY3Rpb25Bc1RleHQiLCJlZGl0b3IiLCJzZWxlY3RlZFNoYXBlSWRzIiwiZ2V0U2VsZWN0ZWRTaGFwZUlkcyIsInNlbGVjdGVkU2hhcGVEZXNjZW5kYW50SWRzIiwiZ2V0U2hhcGVBbmREZXNjZW5kYW50SWRzIiwidGV4dHMiLCJBcnJheSIsImZyb20iLCJtYXAiLCJpZCIsInNoYXBlIiwiZ2V0U2hhcGUiLCJmaWx0ZXIiLCJ0eXBlIiwic29ydCIsImEiLCJiIiwicGFnZUJvdW5kc0EiLCJnZXRTaGFwZVBhZ2VCb3VuZHMiLCJwYWdlQm91bmRzQiIsInkiLCJ4IiwidGV4dCIsInByb3BzIiwiY29sb3IiLCJ2Iiwiam9pbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./app/lib/getSelectionAsText.ts\n");

/***/ }),

/***/ "(ssr)/./app/lib/improveDrawing.tsx":
/*!************************************!*\
  !*** ./app/lib/improveDrawing.tsx ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   improveDrawing: () => (/* binding */ improveDrawing)\n/* harmony export */ });\n/* harmony import */ var _tldraw_tldraw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/tldraw */ \"(ssr)/./node_modules/@tldraw/tldraw/dist-esm/index.mjs\");\n/* harmony import */ var _getSelectionAsText__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./getSelectionAsText */ \"(ssr)/./app/lib/getSelectionAsText.ts\");\n/* harmony import */ var _blobToBase64__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./blobToBase64 */ \"(ssr)/./app/lib/blobToBase64.ts\");\n\n\n\nasync function improveDrawing(editor) {\n    // Get the selected shapes (we need at least one)\n    const selectedShapes = editor.getSelectedShapes();\n    if (selectedShapes.length === 0) throw Error(\"First select something to improve.\");\n    // Filter out non-drawable shapes if needed\n    const drawableShapes = selectedShapes.filter((shape)=>shape.type !== \"model3d\");\n    if (drawableShapes.length === 0) throw Error(\"No drawable shapes selected.\");\n    // Get an SVG based on the selected shapes\n    const svg = await editor.getSvg(drawableShapes, {\n        scale: 1,\n        background: true\n    });\n    if (!svg) {\n        throw Error(\"Could not generate SVG from selection.\");\n    }\n    // Turn the SVG into a DataUrl\n    const IS_SAFARI = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\n    const blob = await (0,_tldraw_tldraw__WEBPACK_IMPORTED_MODULE_0__.getSvgAsImage)(svg, IS_SAFARI, {\n        type: \"png\",\n        quality: 0.8,\n        scale: 1\n    });\n    if (!blob) {\n        throw Error(\"Could not generate image from SVG.\");\n    }\n    const dataUrl = await (0,_blobToBase64__WEBPACK_IMPORTED_MODULE_2__.blobToBase64)(blob);\n    // Get any text from the selection\n    const selectionText = (0,_getSelectionAsText__WEBPACK_IMPORTED_MODULE_1__.getSelectionAsText)(editor);\n    try {\n        // Send the image and text to the backend\n        const response = await fetch(\"http://localhost:8000/api/queue/image\", {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify({\n                prompt: selectionText,\n                image_base64: dataUrl\n            })\n        });\n        if (!response.ok) {\n            const errorData = await response.json();\n            throw Error(`API error: ${errorData.detail || response.statusText}`);\n        }\n        // Get the response with task ID\n        const jsonResponse = await response.json();\n        // Now wait for the completed image via SSE\n        const generatedImageData = await waitForImageGeneration(jsonResponse.task_id);\n        // If we have an image, create a new TLDraw image shape\n        if (generatedImageData) {\n            // Get the selection bounds - handle the case when it's null\n            const selectionBounds = editor.getSelectionPageBounds();\n            if (!selectionBounds) {\n                throw Error(\"Could not determine selection bounds.\");\n            }\n            const { maxX, maxY } = selectionBounds;\n            const newShapeId = (0,_tldraw_tldraw__WEBPACK_IMPORTED_MODULE_0__.createShapeId)();\n            // Create an asset first\n            const assetId = _tldraw_tldraw__WEBPACK_IMPORTED_MODULE_0__.AssetRecordType.createId();\n            // Use the dimensions from the generated image\n            const imageWidth = generatedImageData.width;\n            const imageHeight = generatedImageData.height;\n            editor.createAssets([\n                {\n                    id: assetId,\n                    type: \"image\",\n                    typeName: \"asset\",\n                    props: {\n                        name: \"improved-drawing.png\",\n                        src: `data:image/png;base64,${generatedImageData.image}`,\n                        w: imageWidth,\n                        h: imageHeight,\n                        mimeType: \"image/png\",\n                        isAnimated: false\n                    },\n                    meta: {}\n                }\n            ]);\n            // Create a new Image element in TLDraw that references the asset\n            editor.createShape({\n                id: newShapeId,\n                type: \"image\",\n                x: maxX + 60,\n                y: maxY - 300,\n                props: {\n                    assetId: assetId,\n                    w: imageWidth,\n                    h: imageHeight\n                }\n            });\n            // Select the new image\n            editor.select(newShapeId);\n            return newShapeId;\n        } else {\n            throw Error(\"No image was generated\");\n        }\n    } catch (e) {\n        console.error(\"Error in improveDrawing:\", e);\n        throw e;\n    }\n}\n// Function to wait for the image generation to complete via SSE\nasync function waitForImageGeneration(taskId) {\n    return new Promise((resolve, reject)=>{\n        let timeout = null;\n        try {\n            const eventSource = new EventSource(`http://localhost:8000/api/subscribe/${taskId}`);\n            // Set a timeout in case the SSE connection doesn't close properly\n            timeout = setTimeout(()=>{\n                console.warn(\"Image generation timed out, closing SSE connection\");\n                eventSource.close();\n                reject(new Error(\"Image generation timed out\"));\n            }, 120000) // 2 minute timeout\n            ;\n            const cleanup = ()=>{\n                if (timeout) {\n                    clearTimeout(timeout);\n                    timeout = null;\n                }\n                eventSource.close();\n            };\n            eventSource.addEventListener(\"start\", (event)=>{\n                console.log(\"Image generation started\");\n            });\n            eventSource.addEventListener(\"complete\", (event)=>{\n                try {\n                    const data = JSON.parse(event.data);\n                    console.log(\"Complete event received:\", data);\n                    if (data.images && data.images.length > 0) {\n                        // Return the first generated image with its dimensions\n                        const imageData = data.images[0];\n                        resolve({\n                            image: imageData.image_base64,\n                            width: imageData.width || 500,\n                            height: imageData.height || 500 // Default height if not provided\n                        });\n                    } else {\n                        // If there's content but no images, log it\n                        if (data.content) {\n                            console.log(\"Response content:\", data.content);\n                        }\n                        resolve(null);\n                    }\n                } catch (error) {\n                    console.error(\"Error parsing complete event:\", error);\n                    reject(error);\n                } finally{\n                    cleanup();\n                }\n            });\n            eventSource.addEventListener(\"error\", (event)=>{\n                console.error(\"SSE error event received\");\n                try {\n                    const data = JSON.parse(event.data);\n                    reject(new Error(data.error || \"Error generating image\"));\n                } catch (e) {\n                    reject(new Error(\"Unknown error in image generation\"));\n                } finally{\n                    cleanup();\n                }\n            });\n            // Handle general error case\n            eventSource.onerror = (error)=>{\n                console.error(\"SSE connection error:\", error);\n                reject(new Error(\"Error with SSE connection\"));\n                cleanup();\n            };\n        } catch (err) {\n            console.error(\"Error setting up SSE connection:\", err);\n            if (timeout) clearTimeout(timeout);\n            reject(err);\n        }\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUMsRUFBRTt3QkFDaENmLFFBQVE7NEJBQ05mLE9BQU8rQixVQUFVMUQsWUFBWTs0QkFDN0JrQixPQUFPd0MsVUFBVXhDLEtBQUssSUFBSTs0QkFDMUJFLFFBQVFzQyxVQUFVdEMsTUFBTSxJQUFJLElBQUksaUNBQWlDO3dCQUNuRTtvQkFDRixPQUFPO3dCQUNMLDJDQUEyQzt3QkFDM0MsSUFBSW1DLEtBQUtJLE9BQU8sRUFBRTs0QkFDaEJyQixRQUFRZ0IsR0FBRyxDQUFDLHFCQUFxQkMsS0FBS0ksT0FBTzt3QkFDL0M7d0JBQ0FqQixRQUFRO29CQUNWO2dCQUNGLEVBQUUsT0FBT0gsT0FBTztvQkFDZEQsUUFBUUMsS0FBSyxDQUFDLGlDQUFpQ0E7b0JBQy9DSSxPQUFPSjtnQkFDVCxTQUFVO29CQUNSVztnQkFDRjtZQUNGO1lBRUFMLFlBQVlPLGdCQUFnQixDQUFDLFNBQVMsQ0FBQ0M7Z0JBQ3JDZixRQUFRQyxLQUFLLENBQUM7Z0JBQ2QsSUFBSTtvQkFDRixNQUFNZ0IsT0FBTzFELEtBQUsyRCxLQUFLLENBQUMsTUFBd0JELElBQUk7b0JBQ3BEWixPQUFPLElBQUlwRSxNQUFNZ0YsS0FBS2hCLEtBQUssSUFBSTtnQkFDakMsRUFBRSxPQUFPRixHQUFHO29CQUNWTSxPQUFPLElBQUlwRSxNQUFNO2dCQUNuQixTQUFVO29CQUNSMkU7Z0JBQ0Y7WUFDRjtZQUVBLDRCQUE0QjtZQUM1QkwsWUFBWWUsT0FBTyxHQUFHLENBQUNyQjtnQkFDckJELFFBQVFDLEtBQUssQ0FBQyx5QkFBeUJBO2dCQUN2Q0ksT0FBTyxJQUFJcEUsTUFBTTtnQkFDakIyRTtZQUNGO1FBQ0YsRUFBRSxPQUFPVyxLQUFLO1lBQ1p2QixRQUFRQyxLQUFLLENBQUMsb0NBQW9Dc0I7WUFDbEQsSUFBSWpCLFNBQVNPLGFBQWFQO1lBQzFCRCxPQUFPa0I7UUFDVDtJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92aWJlLTNkLWNvZGUvLi9hcHAvbGliL2ltcHJvdmVEcmF3aW5nLnRzeD8zODhlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEVkaXRvciwgY3JlYXRlU2hhcGVJZCwgZ2V0U3ZnQXNJbWFnZSwgVExJbWFnZVNoYXBlLCBBc3NldFJlY29yZFR5cGUgfSBmcm9tICdAdGxkcmF3L3RsZHJhdydcbmltcG9ydCB7IGdldFNlbGVjdGlvbkFzVGV4dCB9IGZyb20gJy4vZ2V0U2VsZWN0aW9uQXNUZXh0J1xuaW1wb3J0IHsgYmxvYlRvQmFzZTY0IH0gZnJvbSAnLi9ibG9iVG9CYXNlNjQnXG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBpbXByb3ZlRHJhd2luZyhlZGl0b3I6IEVkaXRvcikge1xuICAvLyBHZXQgdGhlIHNlbGVjdGVkIHNoYXBlcyAod2UgbmVlZCBhdCBsZWFzdCBvbmUpXG4gIGNvbnN0IHNlbGVjdGVkU2hhcGVzID0gZWRpdG9yLmdldFNlbGVjdGVkU2hhcGVzKClcbiAgaWYgKHNlbGVjdGVkU2hhcGVzLmxlbmd0aCA9PT0gMCkgdGhyb3cgRXJyb3IoJ0ZpcnN0IHNlbGVjdCBzb21ldGhpbmcgdG8gaW1wcm92ZS4nKVxuXG4gIC8vIEZpbHRlciBvdXQgbm9uLWRyYXdhYmxlIHNoYXBlcyBpZiBuZWVkZWRcbiAgY29uc3QgZHJhd2FibGVTaGFwZXMgPSBzZWxlY3RlZFNoYXBlcy5maWx0ZXIoKHNoYXBlKSA9PiBzaGFwZS50eXBlICE9PSAnbW9kZWwzZCcpXG4gIFxuICBpZiAoZHJhd2FibGVTaGFwZXMubGVuZ3RoID09PSAwKSB0aHJvdyBFcnJvcignTm8gZHJhd2FibGUgc2hhcGVzIHNlbGVjdGVkLicpXG5cbiAgLy8gR2V0IGFuIFNWRyBiYXNlZCBvbiB0aGUgc2VsZWN0ZWQgc2hhcGVzXG4gIGNvbnN0IHN2ZyA9IGF3YWl0IGVkaXRvci5nZXRTdmcoZHJhd2FibGVTaGFwZXMsIHtcbiAgICBzY2FsZTogMSxcbiAgICBiYWNrZ3JvdW5kOiB0cnVlLFxuICB9KVxuXG4gIGlmICghc3ZnKSB7XG4gICAgdGhyb3cgRXJyb3IoJ0NvdWxkIG5vdCBnZW5lcmF0ZSBTVkcgZnJvbSBzZWxlY3Rpb24uJylcbiAgfVxuXG4gIC8vIFR1cm4gdGhlIFNWRyBpbnRvIGEgRGF0YVVybFxuICBjb25zdCBJU19TQUZBUkkgPSAvXigoPyFjaHJvbWV8YW5kcm9pZCkuKSpzYWZhcmkvaS50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpXG4gIGNvbnN0IGJsb2IgPSBhd2FpdCBnZXRTdmdBc0ltYWdlKHN2ZywgSVNfU0FGQVJJLCB7XG4gICAgdHlwZTogJ3BuZycsXG4gICAgcXVhbGl0eTogMC44LFxuICAgIHNjYWxlOiAxLFxuICB9KVxuICBcbiAgaWYgKCFibG9iKSB7XG4gICAgdGhyb3cgRXJyb3IoJ0NvdWxkIG5vdCBnZW5lcmF0ZSBpbWFnZSBmcm9tIFNWRy4nKVxuICB9XG4gIFxuICBjb25zdCBkYXRhVXJsID0gYXdhaXQgYmxvYlRvQmFzZTY0KGJsb2IpXG5cbiAgLy8gR2V0IGFueSB0ZXh0IGZyb20gdGhlIHNlbGVjdGlvblxuICBjb25zdCBzZWxlY3Rpb25UZXh0ID0gZ2V0U2VsZWN0aW9uQXNUZXh0KGVkaXRvcilcblxuICB0cnkge1xuICAgIC8vIFNlbmQgdGhlIGltYWdlIGFuZCB0ZXh0IHRvIHRoZSBiYWNrZW5kXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnaHR0cDovL2xvY2FsaG9zdDo4MDAwL2FwaS9xdWV1ZS9pbWFnZScsIHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgfSxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgcHJvbXB0OiBzZWxlY3Rpb25UZXh0LFxuICAgICAgICBpbWFnZV9iYXNlNjQ6IGRhdGFVcmwsXG4gICAgICB9KSxcbiAgICB9KVxuXG4gICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgY29uc3QgZXJyb3JEYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpXG4gICAgICB0aHJvdyBFcnJvcihgQVBJIGVycm9yOiAke2Vycm9yRGF0YS5kZXRhaWwgfHwgcmVzcG9uc2Uuc3RhdHVzVGV4dH1gKVxuICAgIH1cblxuICAgIC8vIEdldCB0aGUgcmVzcG9uc2Ugd2l0aCB0YXNrIElEXG4gICAgY29uc3QganNvblJlc3BvbnNlID0gYXdhaXQgcmVzcG9uc2UuanNvbigpXG4gICAgXG4gICAgLy8gTm93IHdhaXQgZm9yIHRoZSBjb21wbGV0ZWQgaW1hZ2UgdmlhIFNTRVxuICAgIGNvbnN0IGdlbmVyYXRlZEltYWdlRGF0YSA9IGF3YWl0IHdhaXRGb3JJbWFnZUdlbmVyYXRpb24oanNvblJlc3BvbnNlLnRhc2tfaWQpXG4gICAgXG4gICAgLy8gSWYgd2UgaGF2ZSBhbiBpbWFnZSwgY3JlYXRlIGEgbmV3IFRMRHJhdyBpbWFnZSBzaGFwZVxuICAgIGlmIChnZW5lcmF0ZWRJbWFnZURhdGEpIHtcbiAgICAgIC8vIEdldCB0aGUgc2VsZWN0aW9uIGJvdW5kcyAtIGhhbmRsZSB0aGUgY2FzZSB3aGVuIGl0J3MgbnVsbFxuICAgICAgY29uc3Qgc2VsZWN0aW9uQm91bmRzID0gZWRpdG9yLmdldFNlbGVjdGlvblBhZ2VCb3VuZHMoKVxuICAgICAgXG4gICAgICBpZiAoIXNlbGVjdGlvbkJvdW5kcykge1xuICAgICAgICB0aHJvdyBFcnJvcignQ291bGQgbm90IGRldGVybWluZSBzZWxlY3Rpb24gYm91bmRzLicpXG4gICAgICB9XG4gICAgICBcbiAgICAgIGNvbnN0IHsgbWF4WCwgbWF4WSB9ID0gc2VsZWN0aW9uQm91bmRzXG4gICAgICBjb25zdCBuZXdTaGFwZUlkID0gY3JlYXRlU2hhcGVJZCgpXG4gICAgICBcbiAgICAgIC8vIENyZWF0ZSBhbiBhc3NldCBmaXJzdFxuICAgICAgY29uc3QgYXNzZXRJZCA9IEFzc2V0UmVjb3JkVHlwZS5jcmVhdGVJZCgpXG4gICAgICBcbiAgICAgIC8vIFVzZSB0aGUgZGltZW5zaW9ucyBmcm9tIHRoZSBnZW5lcmF0ZWQgaW1hZ2VcbiAgICAgIGNvbnN0IGltYWdlV2lkdGggPSBnZW5lcmF0ZWRJbWFnZURhdGEud2lkdGhcbiAgICAgIGNvbnN0IGltYWdlSGVpZ2h0ID0gZ2VuZXJhdGVkSW1hZ2VEYXRhLmhlaWdodFxuICAgICAgXG4gICAgICBlZGl0b3IuY3JlYXRlQXNzZXRzKFtcbiAgICAgICAge1xuICAgICAgICAgIGlkOiBhc3NldElkLFxuICAgICAgICAgIHR5cGU6ICdpbWFnZScsXG4gICAgICAgICAgdHlwZU5hbWU6ICdhc3NldCcsXG4gICAgICAgICAgcHJvcHM6IHtcbiAgICAgICAgICAgIG5hbWU6ICdpbXByb3ZlZC1kcmF3aW5nLnBuZycsXG4gICAgICAgICAgICBzcmM6IGBkYXRhOmltYWdlL3BuZztiYXNlNjQsJHtnZW5lcmF0ZWRJbWFnZURhdGEuaW1hZ2V9YCxcbiAgICAgICAgICAgIHc6IGltYWdlV2lkdGgsXG4gICAgICAgICAgICBoOiBpbWFnZUhlaWdodCxcbiAgICAgICAgICAgIG1pbWVUeXBlOiAnaW1hZ2UvcG5nJyxcbiAgICAgICAgICAgIGlzQW5pbWF0ZWQ6IGZhbHNlLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgbWV0YToge30sXG4gICAgICAgIH0sXG4gICAgICBdKVxuICAgICAgXG4gICAgICAvLyBDcmVhdGUgYSBuZXcgSW1hZ2UgZWxlbWVudCBpbiBUTERyYXcgdGhhdCByZWZlcmVuY2VzIHRoZSBhc3NldFxuICAgICAgZWRpdG9yLmNyZWF0ZVNoYXBlPFRMSW1hZ2VTaGFwZT4oe1xuICAgICAgICBpZDogbmV3U2hhcGVJZCxcbiAgICAgICAgdHlwZTogJ2ltYWdlJyxcbiAgICAgICAgeDogbWF4WCArIDYwLCAvLyBQbGFjZSB0byB0aGUgcmlnaHQgb2Ygc2VsZWN0aW9uXG4gICAgICAgIHk6IG1heFkgLSAzMDAsIC8vIEFkanVzdCBhcyBuZWVkZWRcbiAgICAgICAgcHJvcHM6IHtcbiAgICAgICAgICBhc3NldElkOiBhc3NldElkLFxuICAgICAgICAgIHc6IGltYWdlV2lkdGgsXG4gICAgICAgICAgaDogaW1hZ2VIZWlnaHQsXG4gICAgICAgIH0sXG4gICAgICB9KVxuICAgICAgXG4gICAgICAvLyBTZWxlY3QgdGhlIG5ldyBpbWFnZVxuICAgICAgZWRpdG9yLnNlbGVjdChuZXdTaGFwZUlkKVxuICAgICAgXG4gICAgICByZXR1cm4gbmV3U2hhcGVJZFxuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBFcnJvcignTm8gaW1hZ2Ugd2FzIGdlbmVyYXRlZCcpXG4gICAgfVxuICB9IGNhdGNoIChlKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgaW4gaW1wcm92ZURyYXdpbmc6JywgZSlcbiAgICB0aHJvdyBlXG4gIH1cbn1cblxuLy8gRnVuY3Rpb24gdG8gd2FpdCBmb3IgdGhlIGltYWdlIGdlbmVyYXRpb24gdG8gY29tcGxldGUgdmlhIFNTRVxuYXN5bmMgZnVuY3Rpb24gd2FpdEZvckltYWdlR2VuZXJhdGlvbih0YXNrSWQ6IHN0cmluZyk6IFByb21pc2U8eyBpbWFnZTogc3RyaW5nLCB3aWR0aDogbnVtYmVyLCBoZWlnaHQ6IG51bWJlciB9IHwgbnVsbD4ge1xuICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgIGxldCB0aW1lb3V0OiBOb2RlSlMuVGltZW91dCB8IG51bGwgPSBudWxsO1xuICAgIFxuICAgIHRyeSB7XG4gICAgICBjb25zdCBldmVudFNvdXJjZSA9IG5ldyBFdmVudFNvdXJjZShgaHR0cDovL2xvY2FsaG9zdDo4MDAwL2FwaS9zdWJzY3JpYmUvJHt0YXNrSWR9YClcbiAgICAgIFxuICAgICAgLy8gU2V0IGEgdGltZW91dCBpbiBjYXNlIHRoZSBTU0UgY29ubmVjdGlvbiBkb2Vzbid0IGNsb3NlIHByb3Blcmx5XG4gICAgICB0aW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIGNvbnNvbGUud2FybignSW1hZ2UgZ2VuZXJhdGlvbiB0aW1lZCBvdXQsIGNsb3NpbmcgU1NFIGNvbm5lY3Rpb24nKVxuICAgICAgICBldmVudFNvdXJjZS5jbG9zZSgpXG4gICAgICAgIHJlamVjdChuZXcgRXJyb3IoJ0ltYWdlIGdlbmVyYXRpb24gdGltZWQgb3V0JykpXG4gICAgICB9LCAxMjAwMDApIC8vIDIgbWludXRlIHRpbWVvdXRcbiAgICAgIFxuICAgICAgY29uc3QgY2xlYW51cCA9ICgpID0+IHtcbiAgICAgICAgaWYgKHRpbWVvdXQpIHtcbiAgICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dClcbiAgICAgICAgICB0aW1lb3V0ID0gbnVsbFxuICAgICAgICB9XG4gICAgICAgIGV2ZW50U291cmNlLmNsb3NlKClcbiAgICAgIH1cbiAgICAgIFxuICAgICAgZXZlbnRTb3VyY2UuYWRkRXZlbnRMaXN0ZW5lcignc3RhcnQnLCAoZXZlbnQpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coJ0ltYWdlIGdlbmVyYXRpb24gc3RhcnRlZCcpXG4gICAgICB9KVxuICAgICAgXG4gICAgICBldmVudFNvdXJjZS5hZGRFdmVudExpc3RlbmVyKCdjb21wbGV0ZScsIChldmVudCkgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IGRhdGEgPSBKU09OLnBhcnNlKChldmVudCBhcyBNZXNzYWdlRXZlbnQpLmRhdGEpXG4gICAgICAgICAgY29uc29sZS5sb2coJ0NvbXBsZXRlIGV2ZW50IHJlY2VpdmVkOicsIGRhdGEpXG4gICAgICAgICAgXG4gICAgICAgICAgaWYgKGRhdGEuaW1hZ2VzICYmIGRhdGEuaW1hZ2VzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIC8vIFJldHVybiB0aGUgZmlyc3QgZ2VuZXJhdGVkIGltYWdlIHdpdGggaXRzIGRpbWVuc2lvbnNcbiAgICAgICAgICAgIGNvbnN0IGltYWdlRGF0YSA9IGRhdGEuaW1hZ2VzWzBdXG4gICAgICAgICAgICByZXNvbHZlKHtcbiAgICAgICAgICAgICAgaW1hZ2U6IGltYWdlRGF0YS5pbWFnZV9iYXNlNjQsXG4gICAgICAgICAgICAgIHdpZHRoOiBpbWFnZURhdGEud2lkdGggfHwgNTAwLCAvLyBEZWZhdWx0IHdpZHRoIGlmIG5vdCBwcm92aWRlZFxuICAgICAgICAgICAgICBoZWlnaHQ6IGltYWdlRGF0YS5oZWlnaHQgfHwgNTAwIC8vIERlZmF1bHQgaGVpZ2h0IGlmIG5vdCBwcm92aWRlZFxuICAgICAgICAgICAgfSlcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gSWYgdGhlcmUncyBjb250ZW50IGJ1dCBubyBpbWFnZXMsIGxvZyBpdFxuICAgICAgICAgICAgaWYgKGRhdGEuY29udGVudCkge1xuICAgICAgICAgICAgICBjb25zb2xlLmxvZygnUmVzcG9uc2UgY29udGVudDonLCBkYXRhLmNvbnRlbnQpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXNvbHZlKG51bGwpXG4gICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHBhcnNpbmcgY29tcGxldGUgZXZlbnQ6JywgZXJyb3IpXG4gICAgICAgICAgcmVqZWN0KGVycm9yKVxuICAgICAgICB9IGZpbmFsbHkge1xuICAgICAgICAgIGNsZWFudXAoKVxuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgXG4gICAgICBldmVudFNvdXJjZS5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsIChldmVudCkgPT4ge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdTU0UgZXJyb3IgZXZlbnQgcmVjZWl2ZWQnKVxuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IGRhdGEgPSBKU09OLnBhcnNlKChldmVudCBhcyBNZXNzYWdlRXZlbnQpLmRhdGEpXG4gICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcihkYXRhLmVycm9yIHx8ICdFcnJvciBnZW5lcmF0aW5nIGltYWdlJykpXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICByZWplY3QobmV3IEVycm9yKCdVbmtub3duIGVycm9yIGluIGltYWdlIGdlbmVyYXRpb24nKSlcbiAgICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgICBjbGVhbnVwKClcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIFxuICAgICAgLy8gSGFuZGxlIGdlbmVyYWwgZXJyb3IgY2FzZVxuICAgICAgZXZlbnRTb3VyY2Uub25lcnJvciA9IChlcnJvcikgPT4ge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdTU0UgY29ubmVjdGlvbiBlcnJvcjonLCBlcnJvcilcbiAgICAgICAgcmVqZWN0KG5ldyBFcnJvcignRXJyb3Igd2l0aCBTU0UgY29ubmVjdGlvbicpKVxuICAgICAgICBjbGVhbnVwKClcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHNldHRpbmcgdXAgU1NFIGNvbm5lY3Rpb246JywgZXJyKVxuICAgICAgaWYgKHRpbWVvdXQpIGNsZWFyVGltZW91dCh0aW1lb3V0KVxuICAgICAgcmVqZWN0KGVycilcbiAgICB9XG4gIH0pXG59ICJdLCJuYW1lcyI6WyJjcmVhdGVTaGFwZUlkIiwiZ2V0U3ZnQXNJbWFnZSIsIkFzc2V0UmVjb3JkVHlwZSIsImdldFNlbGVjdGlvbkFzVGV4dCIsImJsb2JUb0Jhc2U2NCIsImltcHJvdmVEcmF3aW5nIiwiZWRpdG9yIiwic2VsZWN0ZWRTaGFwZXMiLCJnZXRTZWxlY3RlZFNoYXBlcyIsImxlbmd0aCIsIkVycm9yIiwiZHJhd2FibGVTaGFwZXMiLCJmaWx0ZXIiLCJzaGFwZSIsInR5cGUiLCJzdmciLCJnZXRTdmciLCJzY2FsZSIsImJhY2tncm91bmQiLCJJU19TQUZBUkkiLCJ0ZXN0IiwibmF2aWdhdG9yIiwidXNlckFnZW50IiwiYmxvYiIsInF1YWxpdHkiLCJkYXRhVXJsIiwic2VsZWN0aW9uVGV4dCIsInJlc3BvbnNlIiwiZmV0Y2giLCJtZXRob2QiLCJoZWFkZXJzIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJwcm9tcHQiLCJpbWFnZV9iYXNlNjQiLCJvayIsImVycm9yRGF0YSIsImpzb24iLCJkZXRhaWwiLCJzdGF0dXNUZXh0IiwianNvblJlc3BvbnNlIiwiZ2VuZXJhdGVkSW1hZ2VEYXRhIiwid2FpdEZvckltYWdlR2VuZXJhdGlvbiIsInRhc2tfaWQiLCJzZWxlY3Rpb25Cb3VuZHMiLCJnZXRTZWxlY3Rpb25QYWdlQm91bmRzIiwibWF4WCIsIm1heFkiLCJuZXdTaGFwZUlkIiwiYXNzZXRJZCIsImNyZWF0ZUlkIiwiaW1hZ2VXaWR0aCIsIndpZHRoIiwiaW1hZ2VIZWlnaHQiLCJoZWlnaHQiLCJjcmVhdGVBc3NldHMiLCJpZCIsInR5cGVOYW1lIiwicHJvcHMiLCJuYW1lIiwic3JjIiwiaW1hZ2UiLCJ3IiwiaCIsIm1pbWVUeXBlIiwiaXNBbmltYXRlZCIsIm1ldGEiLCJjcmVhdGVTaGFwZSIsIngiLCJ5Iiwic2VsZWN0IiwiZSIsImNvbnNvbGUiLCJlcnJvciIsInRhc2tJZCIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwidGltZW91dCIsImV2ZW50U291cmNlIiwiRXZlbnRTb3VyY2UiLCJzZXRUaW1lb3V0Iiwid2FybiIsImNsb3NlIiwiY2xlYW51cCIsImNsZWFyVGltZW91dCIsImFkZEV2ZW50TGlzdGVuZXIiLCJldmVudCIsImxvZyIsImRhdGEiLCJwYXJzZSIsImltYWdlcyIsImltYWdlRGF0YSIsImNvbnRlbnQiLCJvbmVycm9yIiwiZXJyIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./app/lib/improveDrawing.tsx\n");

/***/ }),

/***/ "(ssr)/./app/lib/vibe3DCode.tsx":
/*!********************************!*\
  !*** ./app/lib/vibe3DCode.tsx ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   vibe3DCode: () => (/* binding */ vibe3DCode)\n/* harmony export */ });\n/* harmony import */ var _tldraw_tldraw__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @tldraw/tldraw */ \"(ssr)/./node_modules/@tldraw/tldraw/dist-esm/index.mjs\");\n/* harmony import */ var _getSelectionAsText__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./getSelectionAsText */ \"(ssr)/./app/lib/getSelectionAsText.ts\");\n/* harmony import */ var _blobToBase64__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./blobToBase64 */ \"(ssr)/./app/lib/blobToBase64.ts\");\n\n\n\nasync function vibe3DCode(editor, shapeId = null, thinkingMode = false) {\n    // Get the selected shapes (we need at least one)\n    const selectedShapes = editor.getSelectedShapes();\n    if (selectedShapes.length === 0) throw Error(\"First select something to make real.\");\n    // Create the preview shape for the 3D model\n    if (!shapeId) {\n        const { maxX, midY } = editor.getSelectionPageBounds();\n        shapeId = (0,_tldraw_tldraw__WEBPACK_IMPORTED_MODULE_0__.createShapeId)();\n        editor.createShape({\n            id: shapeId,\n            type: \"model3d\",\n            x: maxX + 60,\n            y: midY - 540 * 2 / 3 / 2,\n            props: {\n                threeJsCode: \"\",\n                selectedShapes: selectedShapes,\n                gltfUrl: \"\" // Initialize gltfUrl property\n            }\n        });\n    }\n    const selectedShapesWithoutModel3d = selectedShapes.filter((shape)=>shape.type !== \"model3d\");\n    // Get an SVG based on the selected shapes\n    const svg = await editor.getSvg(selectedShapesWithoutModel3d, {\n        scale: 1,\n        background: true\n    });\n    if (!svg) {\n        return;\n    }\n    // Turn the SVG into a DataUrl\n    const IS_SAFARI = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\n    const blob = await (0,_tldraw_tldraw__WEBPACK_IMPORTED_MODULE_0__.getSvgAsImage)(svg, IS_SAFARI, {\n        type: \"png\",\n        quality: 0.8,\n        scale: 1\n    });\n    const dataUrl = await (0,_blobToBase64__WEBPACK_IMPORTED_MODULE_2__.blobToBase64)(blob);\n    // Get the text from the selection\n    const selectionText = (0,_getSelectionAsText__WEBPACK_IMPORTED_MODULE_1__.getSelectionAsText)(editor);\n    try {\n        if (thinkingMode) {\n            const response = await fetch(\"http://localhost:8000/api/trellis/task\", {\n                method: \"POST\",\n                headers: {\n                    \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify({\n                    model: \"Qubico/trellis\",\n                    task_type: \"image-to-3d\",\n                    input: {\n                        image: dataUrl,\n                        seed: 0,\n                        ss_sampling_steps: 50,\n                        slat_sampling_steps: 50,\n                        ss_guidance_strength: 7.5,\n                        slat_guidance_strength: 3\n                    }\n                })\n            });\n            if (!response.ok) {\n                const errorData = await response.json();\n                throw Error(`API error: ${errorData.detail || response.statusText}`);\n            }\n            const jsonResponse = await response.json();\n            console.log(\"jsonResponse\", jsonResponse);\n            console.log(\"jsonResponse.data\", jsonResponse.data);\n            const taskId = jsonResponse.data.task_id;\n            console.log(\"Task ID:\", taskId);\n            // wait for websocket to send back the task result\n            const gltfUrl = await waitForTaskResult(taskId);\n            console.log(\"GLTF URL received:\", gltfUrl);\n            // Update the shape with the new props including the gltf URL\n            editor.updateShape({\n                id: shapeId,\n                type: \"model3d\",\n                props: {\n                    gltfUrl,\n                    isGltf: true\n                }\n            });\n            /* \n      // Automatic GLTF loading is now handled by the plus button instead\n      try {\n        // Since we can't use hooks directly in this file, we'll use a custom event\n        window.dispatchEvent(new CustomEvent('add-gltf-object', { \n          detail: { url: gltfUrl, shapeId }\n        }));\n      } catch (error) {\n        console.error(\"Failed to add GLTF to 3D world:\", error);\n      }\n      */ return;\n        } else {\n            // Send the image and text to the backend\n            const response = await fetch(\"http://localhost:8000/api/queue/3d\", {\n                method: \"POST\",\n                headers: {\n                    \"Content-Type\": \"application/json\"\n                },\n                body: JSON.stringify({\n                    prompt: selectionText,\n                    image_base64: dataUrl\n                })\n            });\n            if (!response.ok) {\n                const errorData = await response.json();\n                throw Error(`API error: ${errorData.detail || response.statusText}`);\n            }\n            // Get the response with task ID\n            const jsonResponse = await response.json();\n            // Now wait for the completed code via SSE\n            const generatedCodeData = await waitForCodeGeneration(jsonResponse.task_id);\n            if (generatedCodeData && generatedCodeData.content) {\n                // Extract the Three.js code from the response\n                const threeJsCode = processThreeJsCode(generatedCodeData.content);\n                // Make sure we have code\n                if (threeJsCode.length < 100) {\n                    console.warn(generatedCodeData.content);\n                    throw Error(\"Could not generate a 3D model from those wireframes.\");\n                }\n                // Update the shape with the new props\n                editor.updateShape({\n                    id: shapeId,\n                    type: \"model3d\",\n                    props: {\n                        threeJsCode,\n                        isGltf: false\n                    }\n                });\n                console.log(`Response received from backend`);\n            } else {\n                throw Error(\"No code was generated\");\n            }\n        }\n    } catch (e) {\n        // If anything went wrong, delete the shape\n        editor.deleteShape(shapeId);\n        throw e;\n    }\n}\n// Function to wait for the code generation to complete via SSE\nasync function waitForCodeGeneration(taskId) {\n    return new Promise((resolve, reject)=>{\n        const eventSource = new EventSource(`http://localhost:8000/api/subscribe/${taskId}`);\n        eventSource.onmessage = (event)=>{\n            try {\n                const data = JSON.parse(event.data);\n                if (data.status === \"completed\") {\n                    console.log(\"Code generation completed:\", data);\n                    if (data.content) {\n                        resolve({\n                            content: data.content\n                        });\n                    } else {\n                        resolve(null);\n                    }\n                    eventSource.close();\n                } else if (data.status === \"failed\" || data.status === \"error\") {\n                    console.error(\"Code generation error:\", data.message);\n                    reject(new Error(data.message || \"Error generating code\"));\n                    eventSource.close();\n                } else {\n                    console.log(\"Code generation status update:\", data.message || data.status);\n                }\n            } catch (error) {\n                console.error(\"Error parsing event data:\", error);\n                reject(error);\n                eventSource.close();\n            }\n        };\n        // Keeping these event listeners for backward compatibility\n        eventSource.addEventListener(\"start\", (event)=>{\n            console.log(\"Code generation started\");\n        });\n        eventSource.addEventListener(\"complete\", (event)=>{\n            try {\n                const data = JSON.parse(event.data);\n                console.log(\"Complete event received:\", data);\n                if (data.content) {\n                    resolve({\n                        content: data.content\n                    });\n                } else {\n                    resolve(null);\n                }\n                eventSource.close();\n            } catch (error) {\n                console.error(\"Error parsing complete event:\", error);\n                reject(error);\n                eventSource.close();\n            }\n        });\n        eventSource.addEventListener(\"error\", (event)=>{\n            console.error(\"SSE error event received\");\n            try {\n                const data = JSON.parse(event.data);\n                reject(new Error(data.error || \"Error generating code\"));\n            } catch (e) {\n                reject(new Error(\"Unknown error in code generation\"));\n            } finally{\n                eventSource.close();\n            }\n        });\n        // Handle general error case\n        eventSource.onerror = (error)=>{\n            console.error(\"SSE connection error:\", error);\n            reject(new Error(\"Error with SSE connection\"));\n            eventSource.close();\n        };\n        // Set a timeout in case the SSE connection doesn't close properly\n        setTimeout(()=>{\n            if (eventSource.readyState !== EventSource.CLOSED) {\n                console.warn(\"Code generation timed out, closing SSE connection\");\n                eventSource.close();\n                reject(new Error(\"Code generation timed out\"));\n            }\n        }, 300000); // 5 minute timeout\n    });\n}\nasync function waitForTaskResult(taskId) {\n    return new Promise((resolve, reject)=>{\n        const eventSource = new WebSocket(`http://localhost:8000/api/trellis/task/ws/${taskId}`);\n        eventSource.onmessage = (event)=>{\n            const data = JSON.parse(event.data);\n            if (data.status === \"completed\") {\n                console.log(\"3D model ready:\", data.data);\n                resolve(data.data);\n                eventSource.close();\n            } else if (data.status === \"failed\" || data.status === \"error\") {\n                console.error(\"Error:\", data.message);\n                reject(new Error(data.message || \"Unknown error occurred\"));\n                eventSource.close();\n            } else {\n                console.log(\"Status update:\", data.message);\n            }\n        };\n        eventSource.onerror = (event)=>{\n            console.error(\"WebSocket connection error:\", event);\n            reject(new Error(\"Error with WebSocket connection\"));\n            eventSource.close();\n        };\n        eventSource.onopen = ()=>{\n            console.log(\"WebSocket connection opened\");\n        };\n        eventSource.onclose = ()=>{\n            console.log(\"WebSocket connection closed\");\n        };\n        // Set a timeout in case the WebSocket connection doesn't close properly\n        setTimeout(()=>{\n            if (eventSource.readyState !== WebSocket.CLOSED) {\n                console.warn(\"Task timed out, closing WebSocket connection\");\n                eventSource.close();\n                reject(new Error(\"Task timed out\"));\n            }\n        }, 120000); // 2 minute timeout\n    });\n}\nfunction processThreeJsCode(code) {\n    let processedCode = code;\n    // Extract code from markdown code blocks if present\n    const jsPattern = /```javascript\\s*\\n([\\s\\S]*?)```/;\n    const jsMatch = processedCode.match(jsPattern);\n    if (jsMatch && jsMatch[1]) {\n        processedCode = jsMatch[1];\n    } else {\n        // Try to find any code block with or without language specification\n        const codePattern = /```(?:\\w*\\s*)?\\n([\\s\\S]*?)```/;\n        const codeMatch = processedCode.match(codePattern);\n        if (codeMatch && codeMatch[1]) {\n            processedCode = codeMatch[1];\n        } else {\n            // If no markdown code blocks found, try to find script tags\n            const scriptPattern = /<script[^>]*>([\\s\\S]*?)<\\/script>/;\n            const scriptMatch = processedCode.match(scriptPattern);\n            if (scriptMatch && scriptMatch[1]) {\n                processedCode = scriptMatch[1];\n            }\n        }\n    }\n    // Process the code to adapt to the non-ES modules environment\n    processedCode = processedCode.replace(/^import\\s+.*?from\\s+['\"].*?['\"];?\\s*$/gm, \"\");\n    processedCode = processedCode.replace(/^import\\s+\\*\\s+as\\s+.*?\\s+from\\s+['\"].*?['\"];?\\s*$/gm, \"\");\n    processedCode = processedCode.replace(/^import\\s+['\"].*?['\"];?\\s*$/gm, \"\");\n    processedCode = processedCode.replace(/^const\\s+.*?\\s*=\\s*require\\(['\"].*?['\"]\\);?\\s*$/gm, \"\");\n    processedCode = processedCode.replace(/import\\s+\\*\\s+as\\s+THREE\\s+from\\s+['\"]three['\"];?\\s*/g, \"\");\n    processedCode = processedCode.replace(/import\\s+{\\s*OrbitControls\\s*}\\s+from\\s+['\"]three\\/addons\\/controls\\/OrbitControls\\.js['\"];?\\s*/g, \"\");\n    processedCode = processedCode.replace(/import\\s+{\\s*[^}]*\\s*}\\s+from\\s+['\"]three['\"];?\\s*/g, \"\");\n    processedCode = processedCode.replace(/import\\s+THREE\\s+from\\s+['\"]three['\"];?\\s*/g, \"\");\n    processedCode = processedCode.replace(/THREE\\.OrbitControls/g, \"OrbitControls\");\n    return processedCode;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SUFFcEIsb0RBQW9EO0lBQ3BELE1BQU1FLFlBQVk7SUFDbEIsTUFBTUMsVUFBVUYsY0FBY0csS0FBSyxDQUFDRjtJQUVwQyxJQUFJQyxXQUFXQSxPQUFPLENBQUMsRUFBRSxFQUFFO1FBQ3pCRixnQkFBZ0JFLE9BQU8sQ0FBQyxFQUFFO0lBQzVCLE9BQU87UUFDTCxvRUFBb0U7UUFDcEUsTUFBTUUsY0FBYztRQUNwQixNQUFNQyxZQUFZTCxjQUFjRyxLQUFLLENBQUNDO1FBQ3RDLElBQUlDLGFBQWFBLFNBQVMsQ0FBQyxFQUFFLEVBQUU7WUFDN0JMLGdCQUFnQkssU0FBUyxDQUFDLEVBQUU7UUFDOUIsT0FBTztZQUNMLDREQUE0RDtZQUM1RCxNQUFNQyxnQkFBZ0I7WUFDdEIsTUFBTUMsY0FBY1AsY0FBY0csS0FBSyxDQUFDRztZQUN4QyxJQUFJQyxlQUFlQSxXQUFXLENBQUMsRUFBRSxFQUFFO2dCQUNqQ1AsZ0JBQWdCTyxXQUFXLENBQUMsRUFBRTtZQUNoQztRQUNGO0lBQ0Y7SUFFQSw4REFBOEQ7SUFDOURQLGdCQUFnQkEsY0FBY1EsT0FBTyxDQUFDLDJDQUEyQztJQUNqRlIsZ0JBQWdCQSxjQUFjUSxPQUFPLENBQUMsd0RBQXdEO0lBQzlGUixnQkFBZ0JBLGNBQWNRLE9BQU8sQ0FBQyxpQ0FBaUM7SUFDdkVSLGdCQUFnQkEsY0FBY1EsT0FBTyxDQUFDLHFEQUFxRDtJQUUzRlIsZ0JBQWdCQSxjQUFjUSxPQUFPLENBQUMseURBQXlEO0lBQy9GUixnQkFBZ0JBLGNBQWNRLE9BQU8sQ0FBQyxvR0FBb0c7SUFDMUlSLGdCQUFnQkEsY0FBY1EsT0FBTyxDQUFDLHVEQUF1RDtJQUM3RlIsZ0JBQWdCQSxjQUFjUSxPQUFPLENBQUMsK0NBQStDO0lBRXJGUixnQkFBZ0JBLGNBQWNRLE9BQU8sQ0FBQyx5QkFBeUI7SUFFL0QsT0FBT1I7QUFDVCIsInNvdXJjZXMiOlsid2VicGFjazovL3ZpYmUtM2QtY29kZS8uL2FwcC9saWIvdmliZTNEQ29kZS50c3g/OGU4OCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBFZGl0b3IsIGNyZWF0ZVNoYXBlSWQsIGdldFN2Z0FzSW1hZ2UsIFRMU2hhcGVJZCB9IGZyb20gJ0B0bGRyYXcvdGxkcmF3J1xuaW1wb3J0IHsgZ2V0U2VsZWN0aW9uQXNUZXh0IH0gZnJvbSAnLi9nZXRTZWxlY3Rpb25Bc1RleHQnXG5pbXBvcnQgeyBibG9iVG9CYXNlNjQgfSBmcm9tICcuL2Jsb2JUb0Jhc2U2NCdcbmltcG9ydCB7IE1vZGVsM0RQcmV2aWV3U2hhcGUgfSBmcm9tICcuLi9QcmV2aWV3U2hhcGUvTW9kZWwzRFByZXZpZXdTaGFwZSdcbmltcG9ydCB7IHVzZU9iamVjdFN0b3JlIH0gZnJvbSAnLi4vc3RvcmUvYXBwU3RvcmUnXG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB2aWJlM0RDb2RlKGVkaXRvcjogRWRpdG9yLCBzaGFwZUlkOiBUTFNoYXBlSWQgfCBudWxsID0gbnVsbCwgdGhpbmtpbmdNb2RlOiBib29sZWFuID0gZmFsc2UpIHtcbiAgLy8gR2V0IHRoZSBzZWxlY3RlZCBzaGFwZXMgKHdlIG5lZWQgYXQgbGVhc3Qgb25lKVxuICBjb25zdCBzZWxlY3RlZFNoYXBlcyA9IGVkaXRvci5nZXRTZWxlY3RlZFNoYXBlcygpXG5cbiAgaWYgKHNlbGVjdGVkU2hhcGVzLmxlbmd0aCA9PT0gMCkgdGhyb3cgRXJyb3IoJ0ZpcnN0IHNlbGVjdCBzb21ldGhpbmcgdG8gbWFrZSByZWFsLicpXG5cbiAgLy8gQ3JlYXRlIHRoZSBwcmV2aWV3IHNoYXBlIGZvciB0aGUgM0QgbW9kZWxcbiAgaWYgKCFzaGFwZUlkKSB7XG4gICAgY29uc3QgeyBtYXhYLCBtaWRZIH0gPSBlZGl0b3IuZ2V0U2VsZWN0aW9uUGFnZUJvdW5kcygpIVxuICAgIHNoYXBlSWQgPSBjcmVhdGVTaGFwZUlkKClcbiAgICBlZGl0b3IuY3JlYXRlU2hhcGU8TW9kZWwzRFByZXZpZXdTaGFwZT4oe1xuICAgICAgaWQ6IHNoYXBlSWQsXG4gICAgICB0eXBlOiAnbW9kZWwzZCcsXG4gICAgICB4OiBtYXhYICsgNjAsIC8vIHRvIHRoZSByaWdodCBvZiB0aGUgc2VsZWN0aW9uXG4gICAgICB5OiBtaWRZIC0gKDU0MCAqIDIpIC8gMyAvIDIsIC8vIGhhbGYgdGhlIGhlaWdodCBvZiB0aGUgcHJldmlldydzIGluaXRpYWwgc2hhcGVcbiAgICAgIHByb3BzOiB7IFxuICAgICAgICB0aHJlZUpzQ29kZTogJycsIFxuICAgICAgICBzZWxlY3RlZFNoYXBlczogc2VsZWN0ZWRTaGFwZXMsXG4gICAgICAgIGdsdGZVcmw6ICcnIC8vIEluaXRpYWxpemUgZ2x0ZlVybCBwcm9wZXJ0eVxuICAgICAgfSxcbiAgICB9KVxuICB9XG5cbiAgY29uc3Qgc2VsZWN0ZWRTaGFwZXNXaXRob3V0TW9kZWwzZCA9IHNlbGVjdGVkU2hhcGVzLmZpbHRlcigoc2hhcGUpID0+IHNoYXBlLnR5cGUgIT09ICdtb2RlbDNkJylcblxuICAvLyBHZXQgYW4gU1ZHIGJhc2VkIG9uIHRoZSBzZWxlY3RlZCBzaGFwZXNcbiAgY29uc3Qgc3ZnID0gYXdhaXQgZWRpdG9yLmdldFN2ZyhzZWxlY3RlZFNoYXBlc1dpdGhvdXRNb2RlbDNkLCB7XG4gICAgc2NhbGU6IDEsXG4gICAgYmFja2dyb3VuZDogdHJ1ZSxcbiAgfSlcblxuICBpZiAoIXN2Zykge1xuICAgIHJldHVyblxuICB9XG5cbiAgLy8gVHVybiB0aGUgU1ZHIGludG8gYSBEYXRhVXJsXG4gIGNvbnN0IElTX1NBRkFSSSA9IC9eKCg/IWNocm9tZXxhbmRyb2lkKS4pKnNhZmFyaS9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudClcbiAgY29uc3QgYmxvYiA9IGF3YWl0IGdldFN2Z0FzSW1hZ2Uoc3ZnLCBJU19TQUZBUkksIHtcbiAgICB0eXBlOiAncG5nJyxcbiAgICBxdWFsaXR5OiAwLjgsXG4gICAgc2NhbGU6IDEsXG4gIH0pXG4gIGNvbnN0IGRhdGFVcmwgPSBhd2FpdCBibG9iVG9CYXNlNjQoYmxvYiEpXG5cbiAgLy8gR2V0IHRoZSB0ZXh0IGZyb20gdGhlIHNlbGVjdGlvblxuICBjb25zdCBzZWxlY3Rpb25UZXh0ID0gZ2V0U2VsZWN0aW9uQXNUZXh0KGVkaXRvcilcblxuICB0cnkge1xuICAgIGlmICh0aGlua2luZ01vZGUpIHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goJ2h0dHA6Ly9sb2NhbGhvc3Q6ODAwMC9hcGkvdHJlbGxpcy90YXNrJywge1xuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgIH0sXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICBtb2RlbDogXCJRdWJpY28vdHJlbGxpc1wiLFxuICAgICAgICAgIHRhc2tfdHlwZTogXCJpbWFnZS10by0zZFwiLFxuICAgICAgICAgIGlucHV0OiB7XG4gICAgICAgICAgICBpbWFnZTogZGF0YVVybCxcbiAgICAgICAgICAgIHNlZWQ6IDAsXG4gICAgICAgICAgICBzc19zYW1wbGluZ19zdGVwczogNTAsXG4gICAgICAgICAgICBzbGF0X3NhbXBsaW5nX3N0ZXBzOiA1MCxcbiAgICAgICAgICAgIHNzX2d1aWRhbmNlX3N0cmVuZ3RoOiA3LjUsXG4gICAgICAgICAgICBzbGF0X2d1aWRhbmNlX3N0cmVuZ3RoOiAzLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0pLFxuICAgICAgfSk7XG5cbiAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgY29uc3QgZXJyb3JEYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpXG4gICAgICAgIHRocm93IEVycm9yKGBBUEkgZXJyb3I6ICR7ZXJyb3JEYXRhLmRldGFpbCB8fCByZXNwb25zZS5zdGF0dXNUZXh0fWApXG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGpzb25SZXNwb25zZSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKVxuICAgICAgXG4gICAgICBjb25zb2xlLmxvZyhcImpzb25SZXNwb25zZVwiLCBqc29uUmVzcG9uc2UpXG4gICAgICBcbiAgICAgIGNvbnNvbGUubG9nKFwianNvblJlc3BvbnNlLmRhdGFcIiwganNvblJlc3BvbnNlLmRhdGEpXG5cbiAgICAgIGNvbnN0IHRhc2tJZCA9IGpzb25SZXNwb25zZS5kYXRhLnRhc2tfaWQ7XG5cbiAgICAgIGNvbnNvbGUubG9nKFwiVGFzayBJRDpcIiwgdGFza0lkKVxuXG4gICAgICAvLyB3YWl0IGZvciB3ZWJzb2NrZXQgdG8gc2VuZCBiYWNrIHRoZSB0YXNrIHJlc3VsdFxuICAgICAgY29uc3QgZ2x0ZlVybCA9IGF3YWl0IHdhaXRGb3JUYXNrUmVzdWx0KHRhc2tJZCk7XG5cbiAgICAgIGNvbnNvbGUubG9nKFwiR0xURiBVUkwgcmVjZWl2ZWQ6XCIsIGdsdGZVcmwpXG5cbiAgICAgIC8vIFVwZGF0ZSB0aGUgc2hhcGUgd2l0aCB0aGUgbmV3IHByb3BzIGluY2x1ZGluZyB0aGUgZ2x0ZiBVUkxcbiAgICAgIGVkaXRvci51cGRhdGVTaGFwZTxNb2RlbDNEUHJldmlld1NoYXBlPih7XG4gICAgICAgIGlkOiBzaGFwZUlkLFxuICAgICAgICB0eXBlOiAnbW9kZWwzZCcsXG4gICAgICAgIHByb3BzOiB7XG4gICAgICAgICAgZ2x0ZlVybCxcbiAgICAgICAgICBpc0dsdGY6IHRydWUsIC8vIEFkZCBmbGFnIHRvIGluZGljYXRlIHRoaXMgaXMgYSBHTFRGIG1vZGVsXG4gICAgICAgIH0sXG4gICAgICB9KVxuXG4gICAgICAvKiBcbiAgICAgIC8vIEF1dG9tYXRpYyBHTFRGIGxvYWRpbmcgaXMgbm93IGhhbmRsZWQgYnkgdGhlIHBsdXMgYnV0dG9uIGluc3RlYWRcbiAgICAgIHRyeSB7XG4gICAgICAgIC8vIFNpbmNlIHdlIGNhbid0IHVzZSBob29rcyBkaXJlY3RseSBpbiB0aGlzIGZpbGUsIHdlJ2xsIHVzZSBhIGN1c3RvbSBldmVudFxuICAgICAgICB3aW5kb3cuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoJ2FkZC1nbHRmLW9iamVjdCcsIHsgXG4gICAgICAgICAgZGV0YWlsOiB7IHVybDogZ2x0ZlVybCwgc2hhcGVJZCB9XG4gICAgICAgIH0pKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJGYWlsZWQgdG8gYWRkIEdMVEYgdG8gM0Qgd29ybGQ6XCIsIGVycm9yKTtcbiAgICAgIH1cbiAgICAgICovXG5cbiAgICAgIHJldHVybjtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gU2VuZCB0aGUgaW1hZ2UgYW5kIHRleHQgdG8gdGhlIGJhY2tlbmRcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goJ2h0dHA6Ly9sb2NhbGhvc3Q6ODAwMC9hcGkvcXVldWUvM2QnLCB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgfSxcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgIHByb21wdDogc2VsZWN0aW9uVGV4dCxcbiAgICAgICAgICBpbWFnZV9iYXNlNjQ6IGRhdGFVcmwsXG4gICAgICAgIH0pLFxuICAgICAgfSlcblxuICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICBjb25zdCBlcnJvckRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKClcbiAgICAgICAgdGhyb3cgRXJyb3IoYEFQSSBlcnJvcjogJHtlcnJvckRhdGEuZGV0YWlsIHx8IHJlc3BvbnNlLnN0YXR1c1RleHR9YClcbiAgICAgIH1cblxuICAgICAgLy8gR2V0IHRoZSByZXNwb25zZSB3aXRoIHRhc2sgSURcbiAgICAgIGNvbnN0IGpzb25SZXNwb25zZSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKVxuICAgICAgXG4gICAgICAvLyBOb3cgd2FpdCBmb3IgdGhlIGNvbXBsZXRlZCBjb2RlIHZpYSBTU0VcbiAgICAgIGNvbnN0IGdlbmVyYXRlZENvZGVEYXRhID0gYXdhaXQgd2FpdEZvckNvZGVHZW5lcmF0aW9uKGpzb25SZXNwb25zZS50YXNrX2lkKVxuICAgICAgXG4gICAgICBpZiAoZ2VuZXJhdGVkQ29kZURhdGEgJiYgZ2VuZXJhdGVkQ29kZURhdGEuY29udGVudCkge1xuICAgICAgICAvLyBFeHRyYWN0IHRoZSBUaHJlZS5qcyBjb2RlIGZyb20gdGhlIHJlc3BvbnNlXG4gICAgICAgIGNvbnN0IHRocmVlSnNDb2RlID0gcHJvY2Vzc1RocmVlSnNDb2RlKGdlbmVyYXRlZENvZGVEYXRhLmNvbnRlbnQpO1xuICAgICAgICBcbiAgICAgICAgLy8gTWFrZSBzdXJlIHdlIGhhdmUgY29kZVxuICAgICAgICBpZiAodGhyZWVKc0NvZGUubGVuZ3RoIDwgMTAwKSB7XG4gICAgICAgICAgY29uc29sZS53YXJuKGdlbmVyYXRlZENvZGVEYXRhLmNvbnRlbnQpXG4gICAgICAgICAgdGhyb3cgRXJyb3IoJ0NvdWxkIG5vdCBnZW5lcmF0ZSBhIDNEIG1vZGVsIGZyb20gdGhvc2Ugd2lyZWZyYW1lcy4nKVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gVXBkYXRlIHRoZSBzaGFwZSB3aXRoIHRoZSBuZXcgcHJvcHNcbiAgICAgICAgZWRpdG9yLnVwZGF0ZVNoYXBlPE1vZGVsM0RQcmV2aWV3U2hhcGU+KHtcbiAgICAgICAgICBpZDogc2hhcGVJZCxcbiAgICAgICAgICB0eXBlOiAnbW9kZWwzZCcsXG4gICAgICAgICAgcHJvcHM6IHtcbiAgICAgICAgICAgIHRocmVlSnNDb2RlLFxuICAgICAgICAgICAgaXNHbHRmOiBmYWxzZSxcbiAgICAgICAgICB9LFxuICAgICAgICB9KVxuXG4gICAgICAgIGNvbnNvbGUubG9nKGBSZXNwb25zZSByZWNlaXZlZCBmcm9tIGJhY2tlbmRgKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhyb3cgRXJyb3IoJ05vIGNvZGUgd2FzIGdlbmVyYXRlZCcpXG4gICAgICB9XG4gICAgfVxuICB9IGNhdGNoIChlKSB7XG4gICAgLy8gSWYgYW55dGhpbmcgd2VudCB3cm9uZywgZGVsZXRlIHRoZSBzaGFwZVxuICAgIGVkaXRvci5kZWxldGVTaGFwZShzaGFwZUlkKVxuICAgIHRocm93IGVcbiAgfVxufVxuXG4vLyBGdW5jdGlvbiB0byB3YWl0IGZvciB0aGUgY29kZSBnZW5lcmF0aW9uIHRvIGNvbXBsZXRlIHZpYSBTU0VcbmFzeW5jIGZ1bmN0aW9uIHdhaXRGb3JDb2RlR2VuZXJhdGlvbih0YXNrSWQ6IHN0cmluZyk6IFByb21pc2U8eyBjb250ZW50OiBzdHJpbmcgfSB8IG51bGw+IHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICBjb25zdCBldmVudFNvdXJjZSA9IG5ldyBFdmVudFNvdXJjZShgaHR0cDovL2xvY2FsaG9zdDo4MDAwL2FwaS9zdWJzY3JpYmUvJHt0YXNrSWR9YCk7XG4gICAgXG4gICAgZXZlbnRTb3VyY2Uub25tZXNzYWdlID0gKGV2ZW50KSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBkYXRhID0gSlNPTi5wYXJzZSgoZXZlbnQgYXMgTWVzc2FnZUV2ZW50KS5kYXRhKTtcbiAgICAgICAgXG4gICAgICAgIGlmIChkYXRhLnN0YXR1cyA9PT0gJ2NvbXBsZXRlZCcpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnQ29kZSBnZW5lcmF0aW9uIGNvbXBsZXRlZDonLCBkYXRhKTtcbiAgICAgICAgICBpZiAoZGF0YS5jb250ZW50KSB7XG4gICAgICAgICAgICByZXNvbHZlKHsgY29udGVudDogZGF0YS5jb250ZW50IH0pO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXNvbHZlKG51bGwpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBldmVudFNvdXJjZS5jbG9zZSgpO1xuICAgICAgICB9IGVsc2UgaWYgKGRhdGEuc3RhdHVzID09PSAnZmFpbGVkJyB8fCBkYXRhLnN0YXR1cyA9PT0gJ2Vycm9yJykge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0NvZGUgZ2VuZXJhdGlvbiBlcnJvcjonLCBkYXRhLm1lc3NhZ2UpO1xuICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoZGF0YS5tZXNzYWdlIHx8ICdFcnJvciBnZW5lcmF0aW5nIGNvZGUnKSk7XG4gICAgICAgICAgZXZlbnRTb3VyY2UuY2xvc2UoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygnQ29kZSBnZW5lcmF0aW9uIHN0YXR1cyB1cGRhdGU6JywgZGF0YS5tZXNzYWdlIHx8IGRhdGEuc3RhdHVzKTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgcGFyc2luZyBldmVudCBkYXRhOicsIGVycm9yKTtcbiAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgICAgZXZlbnRTb3VyY2UuY2xvc2UoKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIFxuICAgIC8vIEtlZXBpbmcgdGhlc2UgZXZlbnQgbGlzdGVuZXJzIGZvciBiYWNrd2FyZCBjb21wYXRpYmlsaXR5XG4gICAgZXZlbnRTb3VyY2UuYWRkRXZlbnRMaXN0ZW5lcignc3RhcnQnLCAoZXZlbnQpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKCdDb2RlIGdlbmVyYXRpb24gc3RhcnRlZCcpO1xuICAgIH0pO1xuICAgIFxuICAgIGV2ZW50U291cmNlLmFkZEV2ZW50TGlzdGVuZXIoJ2NvbXBsZXRlJywgKGV2ZW50KSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBkYXRhID0gSlNPTi5wYXJzZSgoZXZlbnQgYXMgTWVzc2FnZUV2ZW50KS5kYXRhKTtcbiAgICAgICAgY29uc29sZS5sb2coJ0NvbXBsZXRlIGV2ZW50IHJlY2VpdmVkOicsIGRhdGEpO1xuICAgICAgICBcbiAgICAgICAgaWYgKGRhdGEuY29udGVudCkge1xuICAgICAgICAgIHJlc29sdmUoeyBjb250ZW50OiBkYXRhLmNvbnRlbnQgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVzb2x2ZShudWxsKTtcbiAgICAgICAgfVxuICAgICAgICBldmVudFNvdXJjZS5jbG9zZSgpO1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgcGFyc2luZyBjb21wbGV0ZSBldmVudDonLCBlcnJvcik7XG4gICAgICAgIHJlamVjdChlcnJvcik7XG4gICAgICAgIGV2ZW50U291cmNlLmNsb3NlKCk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgXG4gICAgZXZlbnRTb3VyY2UuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCAoZXZlbnQpID0+IHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1NTRSBlcnJvciBldmVudCByZWNlaXZlZCcpO1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgZGF0YSA9IEpTT04ucGFyc2UoKGV2ZW50IGFzIE1lc3NhZ2VFdmVudCkuZGF0YSk7XG4gICAgICAgIHJlamVjdChuZXcgRXJyb3IoZGF0YS5lcnJvciB8fCAnRXJyb3IgZ2VuZXJhdGluZyBjb2RlJykpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICByZWplY3QobmV3IEVycm9yKCdVbmtub3duIGVycm9yIGluIGNvZGUgZ2VuZXJhdGlvbicpKTtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIGV2ZW50U291cmNlLmNsb3NlKCk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgXG4gICAgLy8gSGFuZGxlIGdlbmVyYWwgZXJyb3IgY2FzZVxuICAgIGV2ZW50U291cmNlLm9uZXJyb3IgPSAoZXJyb3IpID0+IHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1NTRSBjb25uZWN0aW9uIGVycm9yOicsIGVycm9yKTtcbiAgICAgIHJlamVjdChuZXcgRXJyb3IoJ0Vycm9yIHdpdGggU1NFIGNvbm5lY3Rpb24nKSk7XG4gICAgICBldmVudFNvdXJjZS5jbG9zZSgpO1xuICAgIH07XG4gICAgXG4gICAgLy8gU2V0IGEgdGltZW91dCBpbiBjYXNlIHRoZSBTU0UgY29ubmVjdGlvbiBkb2Vzbid0IGNsb3NlIHByb3Blcmx5XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBpZiAoZXZlbnRTb3VyY2UucmVhZHlTdGF0ZSAhPT0gRXZlbnRTb3VyY2UuQ0xPU0VEKSB7XG4gICAgICAgIGNvbnNvbGUud2FybignQ29kZSBnZW5lcmF0aW9uIHRpbWVkIG91dCwgY2xvc2luZyBTU0UgY29ubmVjdGlvbicpO1xuICAgICAgICBldmVudFNvdXJjZS5jbG9zZSgpO1xuICAgICAgICByZWplY3QobmV3IEVycm9yKCdDb2RlIGdlbmVyYXRpb24gdGltZWQgb3V0JykpO1xuICAgICAgfVxuICAgIH0sIDMwMDAwMCk7IC8vIDUgbWludXRlIHRpbWVvdXRcbiAgfSk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIHdhaXRGb3JUYXNrUmVzdWx0KHRhc2tJZDogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICBjb25zdCBldmVudFNvdXJjZSA9IG5ldyBXZWJTb2NrZXQoYGh0dHA6Ly9sb2NhbGhvc3Q6ODAwMC9hcGkvdHJlbGxpcy90YXNrL3dzLyR7dGFza0lkfWApO1xuXG4gICAgZXZlbnRTb3VyY2Uub25tZXNzYWdlID0gKGV2ZW50KSA9PiB7XG4gICAgICBjb25zdCBkYXRhID0gSlNPTi5wYXJzZSgoZXZlbnQgYXMgTWVzc2FnZUV2ZW50KS5kYXRhKTtcbiAgICAgIFxuICAgICAgaWYgKGRhdGEuc3RhdHVzID09PSAnY29tcGxldGVkJykge1xuICAgICAgICBjb25zb2xlLmxvZygnM0QgbW9kZWwgcmVhZHk6JywgZGF0YS5kYXRhKTtcbiAgICAgICAgcmVzb2x2ZShkYXRhLmRhdGEpO1xuICAgICAgICBldmVudFNvdXJjZS5jbG9zZSgpO1xuICAgICAgfSBlbHNlIGlmIChkYXRhLnN0YXR1cyA9PT0gJ2ZhaWxlZCcgfHwgZGF0YS5zdGF0dXMgPT09ICdlcnJvcicpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3I6JywgZGF0YS5tZXNzYWdlKTtcbiAgICAgICAgcmVqZWN0KG5ldyBFcnJvcihkYXRhLm1lc3NhZ2UgfHwgJ1Vua25vd24gZXJyb3Igb2NjdXJyZWQnKSk7XG4gICAgICAgIGV2ZW50U291cmNlLmNsb3NlKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zb2xlLmxvZygnU3RhdHVzIHVwZGF0ZTonLCBkYXRhLm1lc3NhZ2UpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBldmVudFNvdXJjZS5vbmVycm9yID0gKGV2ZW50KSA9PiB7XG4gICAgICBjb25zb2xlLmVycm9yKCdXZWJTb2NrZXQgY29ubmVjdGlvbiBlcnJvcjonLCBldmVudCk7XG4gICAgICByZWplY3QobmV3IEVycm9yKCdFcnJvciB3aXRoIFdlYlNvY2tldCBjb25uZWN0aW9uJykpO1xuICAgICAgZXZlbnRTb3VyY2UuY2xvc2UoKTtcbiAgICB9O1xuXG4gICAgZXZlbnRTb3VyY2Uub25vcGVuID0gKCkgPT4ge1xuICAgICAgY29uc29sZS5sb2coJ1dlYlNvY2tldCBjb25uZWN0aW9uIG9wZW5lZCcpO1xuICAgIH07XG5cbiAgICBldmVudFNvdXJjZS5vbmNsb3NlID0gKCkgPT4ge1xuICAgICAgY29uc29sZS5sb2coJ1dlYlNvY2tldCBjb25uZWN0aW9uIGNsb3NlZCcpO1xuICAgIH07XG4gICAgXG4gICAgLy8gU2V0IGEgdGltZW91dCBpbiBjYXNlIHRoZSBXZWJTb2NrZXQgY29ubmVjdGlvbiBkb2Vzbid0IGNsb3NlIHByb3Blcmx5XG4gICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBpZiAoZXZlbnRTb3VyY2UucmVhZHlTdGF0ZSAhPT0gV2ViU29ja2V0LkNMT1NFRCkge1xuICAgICAgICBjb25zb2xlLndhcm4oJ1Rhc2sgdGltZWQgb3V0LCBjbG9zaW5nIFdlYlNvY2tldCBjb25uZWN0aW9uJyk7XG4gICAgICAgIGV2ZW50U291cmNlLmNsb3NlKCk7XG4gICAgICAgIHJlamVjdChuZXcgRXJyb3IoJ1Rhc2sgdGltZWQgb3V0JykpO1xuICAgICAgfVxuICAgIH0sIDEyMDAwMCk7IC8vIDIgbWludXRlIHRpbWVvdXRcbiAgfSk7XG59XG5cblxuZnVuY3Rpb24gcHJvY2Vzc1RocmVlSnNDb2RlKGNvZGU6IHN0cmluZyk6IHN0cmluZyB7XG4gIGxldCBwcm9jZXNzZWRDb2RlID0gY29kZTtcbiAgXG4gIC8vIEV4dHJhY3QgY29kZSBmcm9tIG1hcmtkb3duIGNvZGUgYmxvY2tzIGlmIHByZXNlbnRcbiAgY29uc3QganNQYXR0ZXJuID0gL2BgYGphdmFzY3JpcHRcXHMqXFxuKFtcXHNcXFNdKj8pYGBgLztcbiAgY29uc3QganNNYXRjaCA9IHByb2Nlc3NlZENvZGUubWF0Y2goanNQYXR0ZXJuKTtcbiAgXG4gIGlmIChqc01hdGNoICYmIGpzTWF0Y2hbMV0pIHtcbiAgICBwcm9jZXNzZWRDb2RlID0ganNNYXRjaFsxXTtcbiAgfSBlbHNlIHtcbiAgICAvLyBUcnkgdG8gZmluZCBhbnkgY29kZSBibG9jayB3aXRoIG9yIHdpdGhvdXQgbGFuZ3VhZ2Ugc3BlY2lmaWNhdGlvblxuICAgIGNvbnN0IGNvZGVQYXR0ZXJuID0gL2BgYCg/OlxcdypcXHMqKT9cXG4oW1xcc1xcU10qPylgYGAvO1xuICAgIGNvbnN0IGNvZGVNYXRjaCA9IHByb2Nlc3NlZENvZGUubWF0Y2goY29kZVBhdHRlcm4pO1xuICAgIGlmIChjb2RlTWF0Y2ggJiYgY29kZU1hdGNoWzFdKSB7XG4gICAgICBwcm9jZXNzZWRDb2RlID0gY29kZU1hdGNoWzFdO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBJZiBubyBtYXJrZG93biBjb2RlIGJsb2NrcyBmb3VuZCwgdHJ5IHRvIGZpbmQgc2NyaXB0IHRhZ3NcbiAgICAgIGNvbnN0IHNjcmlwdFBhdHRlcm4gPSAvPHNjcmlwdFtePl0qPihbXFxzXFxTXSo/KTxcXC9zY3JpcHQ+LztcbiAgICAgIGNvbnN0IHNjcmlwdE1hdGNoID0gcHJvY2Vzc2VkQ29kZS5tYXRjaChzY3JpcHRQYXR0ZXJuKTtcbiAgICAgIGlmIChzY3JpcHRNYXRjaCAmJiBzY3JpcHRNYXRjaFsxXSkge1xuICAgICAgICBwcm9jZXNzZWRDb2RlID0gc2NyaXB0TWF0Y2hbMV07XG4gICAgICB9XG4gICAgfVxuICB9XG4gIFxuICAvLyBQcm9jZXNzIHRoZSBjb2RlIHRvIGFkYXB0IHRvIHRoZSBub24tRVMgbW9kdWxlcyBlbnZpcm9ubWVudFxuICBwcm9jZXNzZWRDb2RlID0gcHJvY2Vzc2VkQ29kZS5yZXBsYWNlKC9eaW1wb3J0XFxzKy4qP2Zyb21cXHMrWydcIl0uKj9bJ1wiXTs/XFxzKiQvZ20sICcnKTtcbiAgcHJvY2Vzc2VkQ29kZSA9IHByb2Nlc3NlZENvZGUucmVwbGFjZSgvXmltcG9ydFxccytcXCpcXHMrYXNcXHMrLio/XFxzK2Zyb21cXHMrWydcIl0uKj9bJ1wiXTs/XFxzKiQvZ20sICcnKTtcbiAgcHJvY2Vzc2VkQ29kZSA9IHByb2Nlc3NlZENvZGUucmVwbGFjZSgvXmltcG9ydFxccytbJ1wiXS4qP1snXCJdOz9cXHMqJC9nbSwgJycpO1xuICBwcm9jZXNzZWRDb2RlID0gcHJvY2Vzc2VkQ29kZS5yZXBsYWNlKC9eY29uc3RcXHMrLio/XFxzKj1cXHMqcmVxdWlyZVxcKFsnXCJdLio/WydcIl1cXCk7P1xccyokL2dtLCAnJyk7XG4gIFxuICBwcm9jZXNzZWRDb2RlID0gcHJvY2Vzc2VkQ29kZS5yZXBsYWNlKC9pbXBvcnRcXHMrXFwqXFxzK2FzXFxzK1RIUkVFXFxzK2Zyb21cXHMrWydcIl10aHJlZVsnXCJdOz9cXHMqL2csICcnKTtcbiAgcHJvY2Vzc2VkQ29kZSA9IHByb2Nlc3NlZENvZGUucmVwbGFjZSgvaW1wb3J0XFxzK3tcXHMqT3JiaXRDb250cm9sc1xccyp9XFxzK2Zyb21cXHMrWydcIl10aHJlZVxcL2FkZG9uc1xcL2NvbnRyb2xzXFwvT3JiaXRDb250cm9sc1xcLmpzWydcIl07P1xccyovZywgJycpO1xuICBwcm9jZXNzZWRDb2RlID0gcHJvY2Vzc2VkQ29kZS5yZXBsYWNlKC9pbXBvcnRcXHMre1xccypbXn1dKlxccyp9XFxzK2Zyb21cXHMrWydcIl10aHJlZVsnXCJdOz9cXHMqL2csICcnKTtcbiAgcHJvY2Vzc2VkQ29kZSA9IHByb2Nlc3NlZENvZGUucmVwbGFjZSgvaW1wb3J0XFxzK1RIUkVFXFxzK2Zyb21cXHMrWydcIl10aHJlZVsnXCJdOz9cXHMqL2csICcnKTtcbiAgXG4gIHByb2Nlc3NlZENvZGUgPSBwcm9jZXNzZWRDb2RlLnJlcGxhY2UoL1RIUkVFXFwuT3JiaXRDb250cm9scy9nLCAnT3JiaXRDb250cm9scycpO1xuICBcbiAgcmV0dXJuIHByb2Nlc3NlZENvZGU7XG59Il0sIm5hbWVzIjpbImNyZWF0ZVNoYXBlSWQiLCJnZXRTdmdBc0ltYWdlIiwiZ2V0U2VsZWN0aW9uQXNUZXh0IiwiYmxvYlRvQmFzZTY0IiwidmliZTNEQ29kZSIsImVkaXRvciIsInNoYXBlSWQiLCJ0aGlua2luZ01vZGUiLCJzZWxlY3RlZFNoYXBlcyIsImdldFNlbGVjdGVkU2hhcGVzIiwibGVuZ3RoIiwiRXJyb3IiLCJtYXhYIiwibWlkWSIsImdldFNlbGVjdGlvblBhZ2VCb3VuZHMiLCJjcmVhdGVTaGFwZSIsImlkIiwidHlwZSIsIngiLCJ5IiwicHJvcHMiLCJ0aHJlZUpzQ29kZSIsImdsdGZVcmwiLCJzZWxlY3RlZFNoYXBlc1dpdGhvdXRNb2RlbDNkIiwiZmlsdGVyIiwic2hhcGUiLCJzdmciLCJnZXRTdmciLCJzY2FsZSIsImJhY2tncm91bmQiLCJJU19TQUZBUkkiLCJ0ZXN0IiwibmF2aWdhdG9yIiwidXNlckFnZW50IiwiYmxvYiIsInF1YWxpdHkiLCJkYXRhVXJsIiwic2VsZWN0aW9uVGV4dCIsInJlc3BvbnNlIiwiZmV0Y2giLCJtZXRob2QiLCJoZWFkZXJzIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJtb2RlbCIsInRhc2tfdHlwZSIsImlucHV0IiwiaW1hZ2UiLCJzZWVkIiwic3Nfc2FtcGxpbmdfc3RlcHMiLCJzbGF0X3NhbXBsaW5nX3N0ZXBzIiwic3NfZ3VpZGFuY2Vfc3RyZW5ndGgiLCJzbGF0X2d1aWRhbmNlX3N0cmVuZ3RoIiwib2siLCJlcnJvckRhdGEiLCJqc29uIiwiZGV0YWlsIiwic3RhdHVzVGV4dCIsImpzb25SZXNwb25zZSIsImNvbnNvbGUiLCJsb2ciLCJkYXRhIiwidGFza0lkIiwidGFza19pZCIsIndhaXRGb3JUYXNrUmVzdWx0IiwidXBkYXRlU2hhcGUiLCJpc0dsdGYiLCJwcm9tcHQiLCJpbWFnZV9iYXNlNjQiLCJnZW5lcmF0ZWRDb2RlRGF0YSIsIndhaXRGb3JDb2RlR2VuZXJhdGlvbiIsImNvbnRlbnQiLCJwcm9jZXNzVGhyZWVKc0NvZGUiLCJ3YXJuIiwiZSIsImRlbGV0ZVNoYXBlIiwiUHJvbWlzZSIsInJlc29sdmUiLCJyZWplY3QiLCJldmVudFNvdXJjZSIsIkV2ZW50U291cmNlIiwib25tZXNzYWdlIiwiZXZlbnQiLCJwYXJzZSIsInN0YXR1cyIsImNsb3NlIiwiZXJyb3IiLCJtZXNzYWdlIiwiYWRkRXZlbnRMaXN0ZW5lciIsIm9uZXJyb3IiLCJzZXRUaW1lb3V0IiwicmVhZHlTdGF0ZSIsIkNMT1NFRCIsIldlYlNvY2tldCIsIm9ub3BlbiIsIm9uY2xvc2UiLCJjb2RlIiwicHJvY2Vzc2VkQ29kZSIsImpzUGF0dGVybiIsImpzTWF0Y2giLCJtYXRjaCIsImNvZGVQYXR0ZXJuIiwiY29kZU1hdGNoIiwic2NyaXB0UGF0dGVybiIsInNjcmlwdE1hdGNoIiwicmVwbGFjZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./app/lib/vibe3DCode.tsx\n");

/***/ }),

/***/ "(ssr)/./app/page.tsx":
/*!**********************!*\
  !*** ./app/page.tsx ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ App)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(ssr)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dynamic__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dynamic */ \"(ssr)/./node_modules/next/dist/shared/lib/app-dynamic.js\");\n/* harmony import */ var next_dynamic__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(next_dynamic__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _tldraw_css__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./tldraw.css */ \"(ssr)/./app/tldraw.css\");\n/* harmony import */ var _components_Vibe3DCodeButton__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./components/Vibe3DCodeButton */ \"(ssr)/./app/components/Vibe3DCodeButton.tsx\");\n/* harmony import */ var _components_AutoDrawButton__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./components/AutoDrawButton */ \"(ssr)/./app/components/AutoDrawButton.tsx\");\n/* harmony import */ var _components_ImproveDrawingButton__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./components/ImproveDrawingButton */ \"(ssr)/./app/components/ImproveDrawingButton.tsx\");\n/* harmony import */ var _PreviewShape_PreviewShape__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./PreviewShape/PreviewShape */ \"(ssr)/./app/PreviewShape/PreviewShape.tsx\");\n/* harmony import */ var _PreviewShape_Model3DPreviewShape__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./PreviewShape/Model3DPreviewShape */ \"(ssr)/./app/PreviewShape/Model3DPreviewShape.tsx\");\n/* harmony import */ var _components_three_canvas__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./components/three/canvas */ \"(ssr)/./app/components/three/canvas.tsx\");\n/* harmony import */ var _store_appStore__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./store/appStore */ \"(ssr)/./app/store/appStore.ts\");\n/* harmony import */ var _components_TestAddCodeButton__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./components/TestAddCodeButton */ \"(ssr)/./app/components/TestAddCodeButton.tsx\");\n/* harmony import */ var _components_TldrawLogo__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./components/TldrawLogo */ \"(ssr)/./app/components/TldrawLogo.tsx\");\n/* __next_internal_client_entry_do_not_use__ default auto */ \n\n\n\n\n\n\n\n\n\n\n\nconst Tldraw = next_dynamic__WEBPACK_IMPORTED_MODULE_1___default()(async ()=>{\n     true && /*require.resolve*/(null /* weak dependency, without id */);\n}, {\n    loadableGenerated: {\n        modules: [\n            \"/Users/kevinizadi/websockets/CoCo/frontend/app/page.tsx -> \" + \"@tldraw/tldraw\"\n        ]\n    },\n    ssr: false\n});\nconst shapeUtils = [\n    _PreviewShape_PreviewShape__WEBPACK_IMPORTED_MODULE_6__.PreviewShapeUtil,\n    _PreviewShape_Model3DPreviewShape__WEBPACK_IMPORTED_MODULE_7__.Model3DPreviewShapeUtil\n];\nconst TabGroup = ({ activeTab, setActiveTab })=>{\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n        style: {\n            position: \"fixed\",\n            top: \"20px\",\n            left: \"50%\",\n            transform: \"translateX(-50%)\",\n            zIndex: 9999999,\n            display: \"flex\",\n            gap: \"6px\",\n            padding: \"6px\",\n            borderRadius: \"8px\",\n            backgroundColor: \"white\",\n            boxShadow: \"0 4px 12px rgba(0,0,0,0.15)\"\n        },\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                style: {\n                    padding: \"6px 12px\",\n                    border: \"none\",\n                    borderRadius: \"4px\",\n                    backgroundColor: activeTab === \"tldraw\" ? \"#007bff\" : \"#f0f0f0\",\n                    color: activeTab === \"tldraw\" ? \"white\" : \"black\",\n                    cursor: \"pointer\",\n                    transition: \"background-color 0.2s\"\n                },\n                onClick: ()=>setActiveTab(\"tldraw\"),\n                children: \"2D Canvas\"\n            }, void 0, false, {\n                fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/page.tsx\",\n                lineNumber: 43,\n                columnNumber: 4\n            }, undefined),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"button\", {\n                style: {\n                    padding: \"6px 12px\",\n                    border: \"none\",\n                    borderRadius: \"4px\",\n                    backgroundColor: activeTab === \"threejs\" ? \"#007bff\" : \"#f0f0f0\",\n                    color: activeTab === \"threejs\" ? \"white\" : \"black\",\n                    cursor: \"pointer\",\n                    transition: \"background-color 0.2s\"\n                },\n                onClick: ()=>setActiveTab(\"threejs\"),\n                children: \"3D World\"\n            }, void 0, false, {\n                fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/page.tsx\",\n                lineNumber: 57,\n                columnNumber: 4\n            }, undefined)\n        ]\n    }, void 0, true, {\n        fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/page.tsx\",\n        lineNumber: 30,\n        columnNumber: 3\n    }, undefined);\n};\nfunction App() {\n    const { activeTab, setActiveTab } = (0,_store_appStore__WEBPACK_IMPORTED_MODULE_9__.useTabStore)();\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {\n        children: [\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(TabGroup, {\n                activeTab: activeTab,\n                setActiveTab: setActiveTab\n            }, void 0, false, {\n                fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/page.tsx\",\n                lineNumber: 80,\n                columnNumber: 4\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                className: \"editor\",\n                children: [\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                        style: {\n                            position: \"absolute\",\n                            width: \"100%\",\n                            height: \"100%\",\n                            visibility: activeTab === \"tldraw\" ? \"visible\" : \"hidden\",\n                            zIndex: activeTab === \"tldraw\" ? 2 : 1\n                        },\n                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(Tldraw, {\n                            persistenceKey: \"vibe-3d-code\",\n                            shareZone: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"div\", {\n                                style: {\n                                    display: \"flex\"\n                                },\n                                children: [\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_Vibe3DCodeButton__WEBPACK_IMPORTED_MODULE_3__.Vibe3DCodeButton, {}, void 0, false, {\n                                        fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/page.tsx\",\n                                        lineNumber: 93,\n                                        columnNumber: 9\n                                    }, void 0),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ImproveDrawingButton__WEBPACK_IMPORTED_MODULE_5__.ImproveDrawingButton, {}, void 0, false, {\n                                        fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/page.tsx\",\n                                        lineNumber: 94,\n                                        columnNumber: 9\n                                    }, void 0),\n                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_AutoDrawButton__WEBPACK_IMPORTED_MODULE_4__.AutoDrawButton, {}, void 0, false, {\n                                        fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/page.tsx\",\n                                        lineNumber: 95,\n                                        columnNumber: 9\n                                    }, void 0)\n                                ]\n                            }, void 0, true, {\n                                fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/page.tsx\",\n                                lineNumber: 92,\n                                columnNumber: 8\n                            }, void 0),\n                            shapeUtils: shapeUtils,\n                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_TldrawLogo__WEBPACK_IMPORTED_MODULE_11__.TldrawLogo, {}, void 0, false, {\n                                fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/page.tsx\",\n                                lineNumber: 100,\n                                columnNumber: 7\n                            }, this)\n                        }, void 0, false, {\n                            fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/page.tsx\",\n                            lineNumber: 89,\n                            columnNumber: 6\n                        }, this)\n                    }, void 0, false, {\n                        fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/page.tsx\",\n                        lineNumber: 82,\n                        columnNumber: 5\n                    }, this),\n                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_three_canvas__WEBPACK_IMPORTED_MODULE_8__[\"default\"], {\n                        visible: activeTab === \"threejs\"\n                    }, void 0, false, {\n                        fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/page.tsx\",\n                        lineNumber: 103,\n                        columnNumber: 5\n                    }, this)\n                ]\n            }, void 0, true, {\n                fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/page.tsx\",\n                lineNumber: 81,\n                columnNumber: 4\n            }, this),\n            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_TestAddCodeButton__WEBPACK_IMPORTED_MODULE_10__[\"default\"], {\n                activeTab: activeTab,\n                setActiveTab: setActiveTab\n            }, void 0, false, {\n                fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/page.tsx\",\n                lineNumber: 105,\n                columnNumber: 4\n            }, this)\n        ]\n    }, void 0, true);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9hcHAvcGFnZS50c3giLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUVrQztBQUNiO0FBQzJDO0FBQ0o7QUFDWTtBQUNWO0FBQ2M7QUFDdkI7QUFDUDtBQUNnQjtBQUNWO0FBRXBELE1BQU1VLFNBQVNWLG1EQUFPQTs7Ozs7Ozs7SUFDckJXLEtBQUs7O0FBR04sTUFBTUMsYUFBYTtJQUFDUix3RUFBZ0JBO0lBQUVDLHNGQUF1QkE7Q0FBQztBQVM5RCxNQUFNUSxXQUFXLENBQUMsRUFBRUMsU0FBUyxFQUFFQyxZQUFZLEVBQWlCO0lBQzNELHFCQUNDLDhEQUFDQztRQUFJQyxPQUFPO1lBQ1hDLFVBQVU7WUFDVkMsS0FBSztZQUNMQyxNQUFNO1lBQ05DLFdBQVc7WUFDWEMsUUFBUTtZQUNSQyxTQUFTO1lBQ1RDLEtBQUs7WUFDTEMsU0FBUztZQUNUQyxjQUFjO1lBQ2RDLGlCQUFpQjtZQUNqQkMsV0FBVztRQUNaOzswQkFDQyw4REFBQ0M7Z0JBQ0FaLE9BQU87b0JBQ05RLFNBQVM7b0JBQ1RLLFFBQVE7b0JBQ1JKLGNBQWM7b0JBQ2RDLGlCQUFpQmIsY0FBYyxXQUFXLFlBQVk7b0JBQ3REaUIsT0FBT2pCLGNBQWMsV0FBVyxVQUFVO29CQUMxQ2tCLFFBQVE7b0JBQ1JDLFlBQVk7Z0JBQ2I7Z0JBQ0FDLFNBQVMsSUFBTW5CLGFBQWE7MEJBQzVCOzs7Ozs7MEJBR0QsOERBQUNjO2dCQUNBWixPQUFPO29CQUNOUSxTQUFTO29CQUNUSyxRQUFRO29CQUNSSixjQUFjO29CQUNkQyxpQkFBaUJiLGNBQWMsWUFBWSxZQUFZO29CQUN2RGlCLE9BQU9qQixjQUFjLFlBQVksVUFBVTtvQkFDM0NrQixRQUFRO29CQUNSQyxZQUFZO2dCQUNiO2dCQUNBQyxTQUFTLElBQU1uQixhQUFhOzBCQUM1Qjs7Ozs7Ozs7Ozs7O0FBS0o7QUFFZSxTQUFTb0I7SUFDdkIsTUFBTSxFQUFFckIsU0FBUyxFQUFFQyxZQUFZLEVBQUUsR0FBR1IsNERBQVdBO0lBRS9DLHFCQUNDOzswQkFDQyw4REFBQ007Z0JBQVNDLFdBQVdBO2dCQUFXQyxjQUFjQTs7Ozs7OzBCQUM5Qyw4REFBQ0M7Z0JBQUlvQixXQUFVOztrQ0FDZCw4REFBQ3BCO3dCQUFJQyxPQUFPOzRCQUNYQyxVQUFVOzRCQUNWbUIsT0FBTzs0QkFDUEMsUUFBUTs0QkFDUkMsWUFBWXpCLGNBQWMsV0FBVyxZQUFZOzRCQUNqRFEsUUFBUVIsY0FBYyxXQUFXLElBQUk7d0JBQ3RDO2tDQUNDLDRFQUFDSjs0QkFDQThCLGdCQUFlOzRCQUNmQyx5QkFDQyw4REFBQ3pCO2dDQUFJQyxPQUFPO29DQUFFTSxTQUFTO2dDQUFPOztrREFDN0IsOERBQUN0QiwwRUFBZ0JBOzs7OztrREFDakIsOERBQUNFLGtGQUFvQkE7Ozs7O2tEQUNyQiw4REFBQ0Qsc0VBQWNBOzs7Ozs7Ozs7Ozs0QkFHakJVLFlBQVlBO3NDQUVaLDRFQUFDSCwrREFBVUE7Ozs7Ozs7Ozs7Ozs7OztrQ0FHYiw4REFBQ0gsZ0VBQWFBO3dCQUFDb0MsU0FBUzVCLGNBQWM7Ozs7Ozs7Ozs7OzswQkFFdkMsOERBQUNOLHNFQUFpQkE7Z0JBQUNNLFdBQVdBO2dCQUFXQyxjQUFjQTs7Ozs7Ozs7QUFHMUQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92aWJlLTNkLWNvZGUvLi9hcHAvcGFnZS50c3g/NzYwMyJdLCJzb3VyY2VzQ29udGVudCI6WyIndXNlIGNsaWVudCdcblxuaW1wb3J0IGR5bmFtaWMgZnJvbSAnbmV4dC9keW5hbWljJ1xuaW1wb3J0ICcuL3RsZHJhdy5jc3MnXG5pbXBvcnQgeyBWaWJlM0RDb2RlQnV0dG9uIH0gZnJvbSAnLi9jb21wb25lbnRzL1ZpYmUzRENvZGVCdXR0b24nXG5pbXBvcnQgeyBBdXRvRHJhd0J1dHRvbiB9IGZyb20gJy4vY29tcG9uZW50cy9BdXRvRHJhd0J1dHRvbidcbmltcG9ydCB7IEltcHJvdmVEcmF3aW5nQnV0dG9uIH0gZnJvbSAnLi9jb21wb25lbnRzL0ltcHJvdmVEcmF3aW5nQnV0dG9uJ1xuaW1wb3J0IHsgUHJldmlld1NoYXBlVXRpbCB9IGZyb20gJy4vUHJldmlld1NoYXBlL1ByZXZpZXdTaGFwZSdcbmltcG9ydCB7IE1vZGVsM0RQcmV2aWV3U2hhcGVVdGlsIH0gZnJvbSAnLi9QcmV2aWV3U2hhcGUvTW9kZWwzRFByZXZpZXdTaGFwZSdcbmltcG9ydCBUaHJlZUpTQ2FudmFzIGZyb20gJy4vY29tcG9uZW50cy90aHJlZS9jYW52YXMnXG5pbXBvcnQgeyB1c2VUYWJTdG9yZSB9IGZyb20gJy4vc3RvcmUvYXBwU3RvcmUnXG5pbXBvcnQgVGVzdEFkZENvZGVCdXR0b24gZnJvbSAnLi9jb21wb25lbnRzL1Rlc3RBZGRDb2RlQnV0dG9uJ1xuaW1wb3J0IHsgVGxkcmF3TG9nbyB9IGZyb20gJy4vY29tcG9uZW50cy9UbGRyYXdMb2dvJ1xuXG5jb25zdCBUbGRyYXcgPSBkeW5hbWljKGFzeW5jICgpID0+IChhd2FpdCBpbXBvcnQoJ0B0bGRyYXcvdGxkcmF3JykpLlRsZHJhdywge1xuXHRzc3I6IGZhbHNlLFxufSlcblxuY29uc3Qgc2hhcGVVdGlscyA9IFtQcmV2aWV3U2hhcGVVdGlsLCBNb2RlbDNEUHJldmlld1NoYXBlVXRpbF1cblxudHlwZSBUYWJUeXBlID0gJ3RsZHJhdycgfCAndGhyZWVqcydcblxuaW50ZXJmYWNlIFRhYkdyb3VwUHJvcHMge1xuXHRhY3RpdmVUYWI6IFRhYlR5cGU7XG5cdHNldEFjdGl2ZVRhYjogKHRhYjogVGFiVHlwZSkgPT4gdm9pZDtcbn1cblxuY29uc3QgVGFiR3JvdXAgPSAoeyBhY3RpdmVUYWIsIHNldEFjdGl2ZVRhYiB9OiBUYWJHcm91cFByb3BzKSA9PiB7XG5cdHJldHVybiAoXG5cdFx0PGRpdiBzdHlsZT17e1xuXHRcdFx0cG9zaXRpb246ICdmaXhlZCcsIFxuXHRcdFx0dG9wOiAnMjBweCcsIFxuXHRcdFx0bGVmdDogJzUwJScsIFxuXHRcdFx0dHJhbnNmb3JtOiAndHJhbnNsYXRlWCgtNTAlKScsXG5cdFx0XHR6SW5kZXg6IDk5OTk5OTksIFxuXHRcdFx0ZGlzcGxheTogJ2ZsZXgnLFxuXHRcdFx0Z2FwOiAnNnB4Jyxcblx0XHRcdHBhZGRpbmc6ICc2cHgnLFxuXHRcdFx0Ym9yZGVyUmFkaXVzOiAnOHB4Jyxcblx0XHRcdGJhY2tncm91bmRDb2xvcjogJ3doaXRlJyxcblx0XHRcdGJveFNoYWRvdzogJzAgNHB4IDEycHggcmdiYSgwLDAsMCwwLjE1KSdcblx0XHR9fT5cblx0XHRcdDxidXR0b24gXG5cdFx0XHRcdHN0eWxlPXt7XG5cdFx0XHRcdFx0cGFkZGluZzogJzZweCAxMnB4JywgXG5cdFx0XHRcdFx0Ym9yZGVyOiAnbm9uZScsIFxuXHRcdFx0XHRcdGJvcmRlclJhZGl1czogJzRweCcsXG5cdFx0XHRcdFx0YmFja2dyb3VuZENvbG9yOiBhY3RpdmVUYWIgPT09ICd0bGRyYXcnID8gJyMwMDdiZmYnIDogJyNmMGYwZjAnLCBcblx0XHRcdFx0XHRjb2xvcjogYWN0aXZlVGFiID09PSAndGxkcmF3JyA/ICd3aGl0ZScgOiAnYmxhY2snLFxuXHRcdFx0XHRcdGN1cnNvcjogJ3BvaW50ZXInLFxuXHRcdFx0XHRcdHRyYW5zaXRpb246ICdiYWNrZ3JvdW5kLWNvbG9yIDAuMnMnXG5cdFx0XHRcdH19XG5cdFx0XHRcdG9uQ2xpY2s9eygpID0+IHNldEFjdGl2ZVRhYigndGxkcmF3Jyl9XG5cdFx0XHQ+XG5cdFx0XHRcdDJEIENhbnZhc1xuXHRcdFx0PC9idXR0b24+XG5cdFx0XHQ8YnV0dG9uIFxuXHRcdFx0XHRzdHlsZT17e1xuXHRcdFx0XHRcdHBhZGRpbmc6ICc2cHggMTJweCcsIFxuXHRcdFx0XHRcdGJvcmRlcjogJ25vbmUnLCBcblx0XHRcdFx0XHRib3JkZXJSYWRpdXM6ICc0cHgnLFxuXHRcdFx0XHRcdGJhY2tncm91bmRDb2xvcjogYWN0aXZlVGFiID09PSAndGhyZWVqcycgPyAnIzAwN2JmZicgOiAnI2YwZjBmMCcsIFxuXHRcdFx0XHRcdGNvbG9yOiBhY3RpdmVUYWIgPT09ICd0aHJlZWpzJyA/ICd3aGl0ZScgOiAnYmxhY2snLFxuXHRcdFx0XHRcdGN1cnNvcjogJ3BvaW50ZXInLFxuXHRcdFx0XHRcdHRyYW5zaXRpb246ICdiYWNrZ3JvdW5kLWNvbG9yIDAuMnMnXG5cdFx0XHRcdH19XG5cdFx0XHRcdG9uQ2xpY2s9eygpID0+IHNldEFjdGl2ZVRhYigndGhyZWVqcycpfVxuXHRcdFx0PlxuXHRcdFx0XHQzRCBXb3JsZFxuXHRcdFx0PC9idXR0b24+XG5cdFx0PC9kaXY+XG5cdClcbn1cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gQXBwKCkge1xuXHRjb25zdCB7IGFjdGl2ZVRhYiwgc2V0QWN0aXZlVGFiIH0gPSB1c2VUYWJTdG9yZSgpXG5cblx0cmV0dXJuIChcblx0XHQ8PlxuXHRcdFx0PFRhYkdyb3VwIGFjdGl2ZVRhYj17YWN0aXZlVGFifSBzZXRBY3RpdmVUYWI9e3NldEFjdGl2ZVRhYn0gLz5cblx0XHRcdDxkaXYgY2xhc3NOYW1lPVwiZWRpdG9yXCI+XG5cdFx0XHRcdDxkaXYgc3R5bGU9e3sgXG5cdFx0XHRcdFx0cG9zaXRpb246ICdhYnNvbHV0ZScsIFxuXHRcdFx0XHRcdHdpZHRoOiAnMTAwJScsIFxuXHRcdFx0XHRcdGhlaWdodDogJzEwMCUnLCBcblx0XHRcdFx0XHR2aXNpYmlsaXR5OiBhY3RpdmVUYWIgPT09ICd0bGRyYXcnID8gJ3Zpc2libGUnIDogJ2hpZGRlbicsXG5cdFx0XHRcdFx0ekluZGV4OiBhY3RpdmVUYWIgPT09ICd0bGRyYXcnID8gMiA6IDFcblx0XHRcdFx0fX0+XG5cdFx0XHRcdFx0PFRsZHJhdyBcblx0XHRcdFx0XHRcdHBlcnNpc3RlbmNlS2V5PVwidmliZS0zZC1jb2RlXCIgXG5cdFx0XHRcdFx0XHRzaGFyZVpvbmU9e1xuXHRcdFx0XHRcdFx0XHQ8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6ICdmbGV4JyB9fT5cblx0XHRcdFx0XHRcdFx0XHQ8VmliZTNEQ29kZUJ1dHRvbiAvPlxuXHRcdFx0XHRcdFx0XHRcdDxJbXByb3ZlRHJhd2luZ0J1dHRvbiAvPlxuXHRcdFx0XHRcdFx0XHRcdDxBdXRvRHJhd0J1dHRvbiAvPlxuXHRcdFx0XHRcdFx0XHQ8L2Rpdj5cblx0XHRcdFx0XHRcdH0gXG5cdFx0XHRcdFx0XHRzaGFwZVV0aWxzPXtzaGFwZVV0aWxzfVxuXHRcdFx0XHRcdD5cblx0XHRcdFx0XHRcdDxUbGRyYXdMb2dvIC8+XG5cdFx0XHRcdFx0PC9UbGRyYXc+XG5cdFx0XHRcdDwvZGl2PlxuXHRcdFx0XHQ8VGhyZWVKU0NhbnZhcyB2aXNpYmxlPXthY3RpdmVUYWIgPT09ICd0aHJlZWpzJ30gLz5cblx0XHRcdDwvZGl2PlxuXHRcdFx0PFRlc3RBZGRDb2RlQnV0dG9uIGFjdGl2ZVRhYj17YWN0aXZlVGFifSBzZXRBY3RpdmVUYWI9e3NldEFjdGl2ZVRhYn0gLz5cblx0XHQ8Lz5cblx0KVxufVxuIl0sIm5hbWVzIjpbImR5bmFtaWMiLCJWaWJlM0RDb2RlQnV0dG9uIiwiQXV0b0RyYXdCdXR0b24iLCJJbXByb3ZlRHJhd2luZ0J1dHRvbiIsIlByZXZpZXdTaGFwZVV0aWwiLCJNb2RlbDNEUHJldmlld1NoYXBlVXRpbCIsIlRocmVlSlNDYW52YXMiLCJ1c2VUYWJTdG9yZSIsIlRlc3RBZGRDb2RlQnV0dG9uIiwiVGxkcmF3TG9nbyIsIlRsZHJhdyIsInNzciIsInNoYXBlVXRpbHMiLCJUYWJHcm91cCIsImFjdGl2ZVRhYiIsInNldEFjdGl2ZVRhYiIsImRpdiIsInN0eWxlIiwicG9zaXRpb24iLCJ0b3AiLCJsZWZ0IiwidHJhbnNmb3JtIiwiekluZGV4IiwiZGlzcGxheSIsImdhcCIsInBhZGRpbmciLCJib3JkZXJSYWRpdXMiLCJiYWNrZ3JvdW5kQ29sb3IiLCJib3hTaGFkb3ciLCJidXR0b24iLCJib3JkZXIiLCJjb2xvciIsImN1cnNvciIsInRyYW5zaXRpb24iLCJvbkNsaWNrIiwiQXBwIiwiY2xhc3NOYW1lIiwid2lkdGgiLCJoZWlnaHQiLCJ2aXNpYmlsaXR5IiwicGVyc2lzdGVuY2VLZXkiLCJzaGFyZVpvbmUiLCJ2aXNpYmxlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./app/page.tsx\n");

/***/ }),

/***/ "(ssr)/./app/store/appStore.ts":
/*!*******************************!*\
  !*** ./app/store/appStore.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useAppStore: () => (/* binding */ useAppStore),\n/* harmony export */   useObjectStore: () => (/* binding */ useObjectStore),\n/* harmony export */   useTabStore: () => (/* binding */ useTabStore)\n/* harmony export */ });\n/* harmony import */ var zustand__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zustand */ \"(ssr)/./node_modules/zustand/esm/react.mjs\");\n/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! three */ \"(ssr)/./node_modules/three/build/three.core.js\");\n/* harmony import */ var three__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! three */ \"(ssr)/./node_modules/three/build/three.module.js\");\n\n\nconst useAppStore = (0,zustand__WEBPACK_IMPORTED_MODULE_0__.create)((set)=>({\n        // Initial state\n        isUIFocused: false,\n        isCodeEditorOpen: false,\n        selectedObject: null,\n        transformMode: \"translate\",\n        isDeleting: false,\n        // Actions\n        setUIFocused: (focused)=>set({\n                isUIFocused: focused\n            }),\n        setCodeEditorOpen: (open)=>set({\n                isCodeEditorOpen: open\n            }),\n        setSelectedObject: (object)=>set((state)=>{\n                // Prevent selection changes during deletion\n                if (state.isDeleting) return state;\n                return {\n                    selectedObject: object\n                };\n            }),\n        setTransformMode: (mode)=>set({\n                transformMode: mode\n            }),\n        setIsDeleting: (isDeleting)=>set({\n                isDeleting\n            })\n    }));\nconst useTabStore = (0,zustand__WEBPACK_IMPORTED_MODULE_0__.create)((set)=>({\n        activeTab: \"tldraw\",\n        setActiveTab: (tab)=>set({\n                activeTab: tab\n            })\n    }));\n// Helper to convert a THREE.Object3D to a StoredObject\nconst threeObjectToStoredObject = (object)=>{\n    console.log(`Storing object: ${object.uuid}, type: ${object.type}`);\n    // Use the UUID consistently - critical for object identity\n    const id = object.uuid;\n    const name = object.userData?.name || `Object ${id.substring(0, 8)}`;\n    const position = [\n        object.position.x,\n        object.position.y,\n        object.position.z\n    ];\n    const rotation = [\n        object.rotation.x,\n        object.rotation.y,\n        object.rotation.z\n    ];\n    const scale = [\n        object.scale.x,\n        object.scale.y,\n        object.scale.z\n    ];\n    // Ensure the userData.id is set consistently\n    object.userData.id = id;\n    object.userData.isSerializedFromCode = true;\n    // Store as global reference to prevent garbage collection\n    if (!window.__objectReferences) {\n        window.__objectReferences = new Map();\n    }\n    window.__objectReferences.set(id, object);\n    if (object instanceof three__WEBPACK_IMPORTED_MODULE_1__.Mesh) {\n        console.log(`Storing mesh: ${id}, geometry: ${object.geometry.type}`);\n        // Get original geometry and material to preserve as much data as possible\n        const geo = object.geometry;\n        const mat = object.material;\n        // Store references to prevent garbage collection\n        window.__objectReferences.set(`${id}_geometry`, geo);\n        window.__objectReferences.set(`${id}_material`, mat);\n        return {\n            id,\n            type: \"mesh\",\n            name,\n            position,\n            rotation,\n            scale,\n            userData: {\n                ...object.userData\n            },\n            geometry: {\n                type: geo.type,\n                parameters: {\n                    // We store the ID to look it up later\n                    objectId: id\n                }\n            },\n            material: {\n                type: mat.type,\n                color: mat instanceof three__WEBPACK_IMPORTED_MODULE_1__.MeshStandardMaterial ? mat.color?.getHexString() || \"ffffff\" : \"ffffff\",\n                parameters: {\n                    // We store the ID to look it up later\n                    objectId: id\n                }\n            }\n        };\n    } else if (object instanceof three__WEBPACK_IMPORTED_MODULE_1__.Group) {\n        console.log(`Storing group: ${id}, children: ${object.children.length}`);\n        // Process children\n        const children = [];\n        object.children.forEach((child)=>{\n            if (child instanceof three__WEBPACK_IMPORTED_MODULE_1__.Object3D) {\n                children.push(threeObjectToStoredObject(child));\n            }\n        });\n        return {\n            id,\n            type: \"group\",\n            name,\n            position,\n            rotation,\n            scale,\n            userData: {\n                ...object.userData\n            },\n            children\n        };\n    }\n    // Handle generic THREE.Object3D objects\n    console.log(`Storing generic object3D: ${id}`);\n    // Process children if any\n    const children = [];\n    if (object.children.length > 0) {\n        object.children.forEach((child)=>{\n            if (child instanceof three__WEBPACK_IMPORTED_MODULE_1__.Object3D) {\n                children.push(threeObjectToStoredObject(child));\n            }\n        });\n    }\n    return {\n        id,\n        type: \"object\",\n        name,\n        position,\n        rotation,\n        scale,\n        userData: {\n            ...object.userData\n        },\n        children: children.length > 0 ? children : undefined\n    };\n};\n// Helper function to prepare materials for proper rendering\nconst prepareMaterial = (material)=>{\n    // Common fixes for materials\n    if (material) {\n        // Ensure the material is using appropriate side setting (GLTF often uses backside only)\n        material.side = three__WEBPACK_IMPORTED_MODULE_1__.DoubleSide;\n        // Ensure color is properly set for common material types\n        if (material instanceof three__WEBPACK_IMPORTED_MODULE_1__.MeshStandardMaterial) {\n            // Make sure color has a proper value and not black by default\n            if (!material.color || material.color.getHex() === 0x000000) {\n                material.color.set(0xcccccc); // Set a light gray as fallback\n            }\n            // Increase emission for better visibility\n            if (material.emissive && material.emissive.getHex() === 0) {\n                material.emissive.set(0x111111);\n            }\n            // Make sure materials reflect light properly\n            material.metalness = material.metalness || 0.3;\n            material.roughness = material.roughness || 0.7;\n        } else if (material instanceof three__WEBPACK_IMPORTED_MODULE_1__.MeshBasicMaterial) {\n            // For basic materials, ensure color is not black\n            if (!material.color || material.color.getHex() === 0x000000) {\n                material.color.set(0xcccccc);\n            }\n        } else if (material instanceof three__WEBPACK_IMPORTED_MODULE_1__.MeshPhongMaterial || material instanceof three__WEBPACK_IMPORTED_MODULE_1__.MeshLambertMaterial) {\n            // Ensure the material color isn't black\n            if (!material.color || material.color.getHex() === 0x000000) {\n                material.color.set(0xcccccc);\n            }\n        }\n        // Ensure textures are properly set up if present\n        if (\"map\" in material && material.map) {\n            // Use proper casting for TypeScript\n            material.map.colorSpace = three__WEBPACK_IMPORTED_MODULE_1__.SRGBColorSpace;\n            material.needsUpdate = true;\n        }\n        // Update the material to apply changes\n        material.needsUpdate = true;\n    }\n};\nconst useObjectStore = (0,zustand__WEBPACK_IMPORTED_MODULE_0__.create)()((set, get)=>({\n        // Initial state\n        objects: [],\n        meshCount: 0,\n        // Actions\n        incrementMeshCount: ()=>set((state)=>({\n                    meshCount: state.meshCount + 1\n                })),\n        addObject: (object)=>{\n            const storedObject = threeObjectToStoredObject(object);\n            set((state)=>({\n                    objects: [\n                        ...state.objects,\n                        storedObject\n                    ],\n                    meshCount: state.meshCount + 1\n                }));\n        },\n        updateObject: (id, updates)=>{\n            set((state)=>({\n                    objects: state.objects.map((obj)=>obj.id === id ? {\n                            ...obj,\n                            ...updates\n                        } : obj)\n                }));\n        },\n        removeObject: (id)=>{\n            // Get current state\n            const appState = useAppStore.getState();\n            const { selectedObject, setSelectedObject } = appState;\n            // Update the objects array first\n            set((state)=>({\n                    objects: state.objects.filter((obj)=>obj.id !== id)\n                }));\n            // If we're removing the selected object, clear the selection\n            // Use direct state setting instead of the setter function\n            if (selectedObject && (selectedObject.uuid === id || selectedObject.userData?.id === id)) {\n                // Use direct setState to avoid setter function which may have additional logic\n                useAppStore.setState({\n                    selectedObject: null\n                });\n                // Wait a tick before clearing the deletion flag to ensure all updates have propagated\n                setTimeout(()=>{\n                    useAppStore.setState({\n                        isDeleting: false\n                    });\n                }, 10);\n            } else {\n                // Not deleting the selected object, so just turn off deleting flag\n                setTimeout(()=>{\n                    useAppStore.setState({\n                        isDeleting: false\n                    });\n                }, 10);\n            }\n        },\n        clearObjects: ()=>{\n            set({\n                objects: [],\n                meshCount: 0\n            });\n            useAppStore.getState().setSelectedObject(null);\n        },\n        addObjectFromCode: (code)=>{\n            try {\n                // Create a function from the code string\n                const createObjectFunction = new Function(\"THREE\", code);\n                // Execute the function with THREE library as parameter\n                const object = createObjectFunction(three__WEBPACK_IMPORTED_MODULE_2__);\n                // Check that the object is a valid THREE.Object3D type (Mesh, Group, or generic Object3D)\n                if (!(object instanceof three__WEBPACK_IMPORTED_MODULE_1__.Object3D)) {\n                    console.log(\"object:\", object);\n                    console.error(\"The code must return a THREE.Object3D, THREE.Mesh, or THREE.Group object\");\n                    return null;\n                }\n                // Log the specific type for debugging\n                if (object instanceof three__WEBPACK_IMPORTED_MODULE_1__.Mesh) {\n                    console.log(\"Adding Mesh from code\");\n                } else if (object instanceof three__WEBPACK_IMPORTED_MODULE_1__.Group) {\n                    console.log(\"Adding Group from code\");\n                } else if (object instanceof three__WEBPACK_IMPORTED_MODULE_1__.Object3D) {\n                    console.log(\"Adding generic Object3D from code\");\n                }\n                // Set properties\n                object.userData.isUserCreated = true;\n                object.userData.name = `User Object ${get().meshCount + 1}`;\n                // Add to store - threeObjectToStoredObject will handle the specific type\n                get().addObject(object);\n                return object;\n            } catch (err) {\n                console.error(\"Error executing code:\", err);\n                return null;\n            }\n        },\n        addObjectWithGltf: async (url)=>{\n            try {\n                // Dynamically import GLTFLoader\n                const { GLTFLoader } = await __webpack_require__.e(/*! import() */ \"vendor-chunks/three\").then(__webpack_require__.bind(__webpack_require__, /*! three/addons/loaders/GLTFLoader.js */ \"(ssr)/./node_modules/three/examples/jsm/loaders/GLTFLoader.js\"));\n                const loader = new GLTFLoader();\n                return new Promise((resolve, reject)=>{\n                    loader.load(url, (gltf)=>{\n                        const model = gltf.scene;\n                        if (!(model instanceof three__WEBPACK_IMPORTED_MODULE_1__.Object3D)) {\n                            console.error(\"The GLTF file did not return a valid THREE.Object3D\");\n                            resolve(null);\n                            return;\n                        }\n                        // Fix materials - traverse the model and ensure materials are properly configured\n                        model.traverse((object)=>{\n                            if (object instanceof three__WEBPACK_IMPORTED_MODULE_1__.Mesh) {\n                                // Enable shadows\n                                object.castShadow = true;\n                                object.receiveShadow = true;\n                                // Fix materials\n                                if (object.material) {\n                                    // If it's a single material\n                                    if (!Array.isArray(object.material)) {\n                                        prepareMaterial(object.material);\n                                    } else {\n                                        // If it's an array of materials\n                                        object.material.forEach((mat)=>prepareMaterial(mat));\n                                    }\n                                }\n                            }\n                        });\n                        // Set properties\n                        model.userData.isUserCreated = true;\n                        model.userData.name = `GLTF Model ${get().meshCount + 1}`;\n                        // Position the model slightly above the ground to prevent clipping\n                        model.position.set(0, 1, 0);\n                        // Add to store\n                        get().addObject(model);\n                        console.log(\"Added GLTF model to scene:\", model);\n                        resolve(model);\n                    }, // Progress callback\n                    (xhr)=>{\n                        console.log(`${xhr.loaded / xhr.total * 100}% loaded`);\n                    }, // Error callback\n                    (error)=>{\n                        console.error(\"Error loading GLTF model:\", error);\n                        reject(error);\n                    });\n                });\n            } catch (err) {\n                console.error(\"Error importing or loading GLTF model:\", err);\n                return null;\n            }\n        }\n    }));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RCxPQUFPO1lBQ1Q7UUFDRjtJQUNGLElBQUciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92aWJlLTNkLWNvZGUvLi9hcHAvc3RvcmUvYXBwU3RvcmUudHM/ZTJmZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGUgfSBmcm9tICd6dXN0YW5kJ1xuaW1wb3J0ICogYXMgVEhSRUUgZnJvbSAndGhyZWUnXG5cbi8vIERlY2xhcmUgZ2xvYmFsIHdpbmRvdyBpbnRlcmZhY2UgZm9yIG91ciBvYmplY3QgcmVmZXJlbmNlc1xuZGVjbGFyZSBnbG9iYWwge1xuICBpbnRlcmZhY2UgV2luZG93IHtcbiAgICBfX29iamVjdFJlZmVyZW5jZXM/OiBNYXA8c3RyaW5nLCBhbnk+XG4gIH1cbn1cblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIFNoYXJlZCB0eXBlc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbmV4cG9ydCB0eXBlIFRyYW5zZm9ybU1vZGUgPSAndHJhbnNsYXRlJyB8ICdyb3RhdGUnIHwgJ3NjYWxlJztcblxuLy8gRGVmaW5lIGEgc2ltcGxpZmllZCBvYmplY3Qgc3RydWN0dXJlIGZvciBzdG9yYWdlXG5leHBvcnQgaW50ZXJmYWNlIFN0b3JlZE9iamVjdCB7XG4gIGlkOiBzdHJpbmc7XG4gIHR5cGU6ICdtZXNoJyB8ICdncm91cCcgfCAnb2JqZWN0JztcbiAgbmFtZTogc3RyaW5nO1xuICBwb3NpdGlvbjogW251bWJlciwgbnVtYmVyLCBudW1iZXJdO1xuICByb3RhdGlvbjogW251bWJlciwgbnVtYmVyLCBudW1iZXJdO1xuICBzY2FsZTogW251bWJlciwgbnVtYmVyLCBudW1iZXJdO1xuICB1c2VyRGF0YTogUmVjb3JkPHN0cmluZywgYW55PjtcbiAgLy8gRm9yIGEgbWVzaCwgZGVmaW5lIGl0cyBnZW9tZXRyeSBhbmQgbWF0ZXJpYWxcbiAgZ2VvbWV0cnk/OiB7XG4gICAgdHlwZTogc3RyaW5nO1xuICAgIHBhcmFtZXRlcnM6IFJlY29yZDxzdHJpbmcsIGFueT47XG4gIH07XG4gIG1hdGVyaWFsPzoge1xuICAgIHR5cGU6IHN0cmluZztcbiAgICBjb2xvcjogc3RyaW5nO1xuICAgIHBhcmFtZXRlcnM6IFJlY29yZDxzdHJpbmcsIGFueT47XG4gIH07XG4gIC8vIEZvciBhIGdyb3VwLCBkZWZpbmUgaXRzIGNoaWxkcmVuXG4gIGNoaWxkcmVuPzogU3RvcmVkT2JqZWN0W107XG59XG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBVSSBTdGF0ZSBTdG9yZSAobm90IHBlcnNpc3RlZClcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5pbnRlcmZhY2UgQXBwVUlTdGF0ZSB7XG4gIC8vIFVJIGludGVyYWN0aW9uIHN0YXRlXG4gIGlzVUlGb2N1c2VkOiBib29sZWFuXG4gIGlzQ29kZUVkaXRvck9wZW46IGJvb2xlYW5cbiAgc2VsZWN0ZWRPYmplY3Q6IFRIUkVFLk9iamVjdDNEIHwgbnVsbFxuICB0cmFuc2Zvcm1Nb2RlOiBUcmFuc2Zvcm1Nb2RlXG4gIGlzRGVsZXRpbmc6IGJvb2xlYW5cbiAgXG4gIC8vIEFjdGlvbnNcbiAgc2V0VUlGb2N1c2VkOiAoZm9jdXNlZDogYm9vbGVhbikgPT4gdm9pZFxuICBzZXRDb2RlRWRpdG9yT3BlbjogKG9wZW46IGJvb2xlYW4pID0+IHZvaWRcbiAgc2V0U2VsZWN0ZWRPYmplY3Q6IChvYmplY3Q6IFRIUkVFLk9iamVjdDNEIHwgbnVsbCkgPT4gdm9pZFxuICBzZXRUcmFuc2Zvcm1Nb2RlOiAobW9kZTogVHJhbnNmb3JtTW9kZSkgPT4gdm9pZFxuICBzZXRJc0RlbGV0aW5nOiAoaXNEZWxldGluZzogYm9vbGVhbikgPT4gdm9pZFxufVxuXG5leHBvcnQgY29uc3QgdXNlQXBwU3RvcmUgPSBjcmVhdGU8QXBwVUlTdGF0ZT4oKHNldCkgPT4gKHtcbiAgLy8gSW5pdGlhbCBzdGF0ZVxuICBpc1VJRm9jdXNlZDogZmFsc2UsXG4gIGlzQ29kZUVkaXRvck9wZW46IGZhbHNlLFxuICBzZWxlY3RlZE9iamVjdDogbnVsbCxcbiAgdHJhbnNmb3JtTW9kZTogJ3RyYW5zbGF0ZScsXG4gIGlzRGVsZXRpbmc6IGZhbHNlLFxuICBcbiAgLy8gQWN0aW9uc1xuICBzZXRVSUZvY3VzZWQ6IChmb2N1c2VkKSA9PiBzZXQoeyBpc1VJRm9jdXNlZDogZm9jdXNlZCB9KSxcbiAgc2V0Q29kZUVkaXRvck9wZW46IChvcGVuKSA9PiBzZXQoeyBpc0NvZGVFZGl0b3JPcGVuOiBvcGVuIH0pLFxuICBzZXRTZWxlY3RlZE9iamVjdDogKG9iamVjdCkgPT4gc2V0KChzdGF0ZSkgPT4ge1xuICAgIC8vIFByZXZlbnQgc2VsZWN0aW9uIGNoYW5nZXMgZHVyaW5nIGRlbGV0aW9uXG4gICAgaWYgKHN0YXRlLmlzRGVsZXRpbmcpIHJldHVybiBzdGF0ZTtcbiAgICByZXR1cm4geyBzZWxlY3RlZE9iamVjdDogb2JqZWN0IH07XG4gIH0pLFxuICBzZXRUcmFuc2Zvcm1Nb2RlOiAobW9kZSkgPT4gc2V0KHsgdHJhbnNmb3JtTW9kZTogbW9kZSB9KSxcbiAgc2V0SXNEZWxldGluZzogKGlzRGVsZXRpbmcpID0+IHNldCh7IGlzRGVsZXRpbmcgfSlcbn0pKVxuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gVGFiIFN0YXRlIFN0b3JlXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuaW50ZXJmYWNlIFRhYlN0b3JlU3RhdGUge1xuICBhY3RpdmVUYWI6ICd0bGRyYXcnIHwgJ3RocmVlanMnXG4gIHNldEFjdGl2ZVRhYjogKHRhYjogJ3RsZHJhdycgfCAndGhyZWVqcycpID0+IHZvaWRcbn1cblxuZXhwb3J0IGNvbnN0IHVzZVRhYlN0b3JlID0gY3JlYXRlPFRhYlN0b3JlU3RhdGU+KChzZXQpID0+ICh7XG4gIGFjdGl2ZVRhYjogJ3RsZHJhdycsXG4gIHNldEFjdGl2ZVRhYjogKHRhYikgPT4gc2V0KHsgYWN0aXZlVGFiOiB0YWIgfSksXG59KSlcblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIE9iamVjdCBTdG9yZSAobm8gbG9uZ2VyIHBlcnNpc3RlZClcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5pbnRlcmZhY2UgT2JqZWN0U3RvcmVTdGF0ZSB7XG4gIC8vIFN0b3JhZ2VcbiAgb2JqZWN0czogU3RvcmVkT2JqZWN0W11cbiAgbWVzaENvdW50OiBudW1iZXJcbiAgXG4gIC8vIEFjdGlvbnNcbiAgaW5jcmVtZW50TWVzaENvdW50OiAoKSA9PiB2b2lkXG4gIGFkZE9iamVjdDogKG9iamVjdDogVEhSRUUuT2JqZWN0M0QpID0+IHZvaWRcbiAgdXBkYXRlT2JqZWN0OiAoaWQ6IHN0cmluZywgdXBkYXRlczogUGFydGlhbDxTdG9yZWRPYmplY3Q+KSA9PiB2b2lkXG4gIHJlbW92ZU9iamVjdDogKGlkOiBzdHJpbmcpID0+IHZvaWRcbiAgY2xlYXJPYmplY3RzOiAoKSA9PiB2b2lkXG4gIGFkZE9iamVjdEZyb21Db2RlOiAoY29kZTogc3RyaW5nKSA9PiBUSFJFRS5PYmplY3QzRCB8IG51bGxcbiAgYWRkT2JqZWN0V2l0aEdsdGY6ICh1cmw6IHN0cmluZykgPT4gUHJvbWlzZTxUSFJFRS5PYmplY3QzRCB8IG51bGw+XG59XG5cbi8vIEhlbHBlciB0byBjb252ZXJ0IGEgVEhSRUUuT2JqZWN0M0QgdG8gYSBTdG9yZWRPYmplY3RcbmNvbnN0IHRocmVlT2JqZWN0VG9TdG9yZWRPYmplY3QgPSAob2JqZWN0OiBUSFJFRS5PYmplY3QzRCk6IFN0b3JlZE9iamVjdCA9PiB7XG4gIGNvbnNvbGUubG9nKGBTdG9yaW5nIG9iamVjdDogJHtvYmplY3QudXVpZH0sIHR5cGU6ICR7b2JqZWN0LnR5cGV9YCk7XG4gIFxuICAvLyBVc2UgdGhlIFVVSUQgY29uc2lzdGVudGx5IC0gY3JpdGljYWwgZm9yIG9iamVjdCBpZGVudGl0eVxuICBjb25zdCBpZCA9IG9iamVjdC51dWlkO1xuICBjb25zdCBuYW1lID0gb2JqZWN0LnVzZXJEYXRhPy5uYW1lIHx8IGBPYmplY3QgJHtpZC5zdWJzdHJpbmcoMCwgOCl9YDtcbiAgY29uc3QgcG9zaXRpb246IFtudW1iZXIsIG51bWJlciwgbnVtYmVyXSA9IFtvYmplY3QucG9zaXRpb24ueCwgb2JqZWN0LnBvc2l0aW9uLnksIG9iamVjdC5wb3NpdGlvbi56XTtcbiAgY29uc3Qgcm90YXRpb246IFtudW1iZXIsIG51bWJlciwgbnVtYmVyXSA9IFtvYmplY3Qucm90YXRpb24ueCwgb2JqZWN0LnJvdGF0aW9uLnksIG9iamVjdC5yb3RhdGlvbi56XTtcbiAgY29uc3Qgc2NhbGU6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyXSA9IFtvYmplY3Quc2NhbGUueCwgb2JqZWN0LnNjYWxlLnksIG9iamVjdC5zY2FsZS56XTtcbiAgXG4gIC8vIEVuc3VyZSB0aGUgdXNlckRhdGEuaWQgaXMgc2V0IGNvbnNpc3RlbnRseVxuICBvYmplY3QudXNlckRhdGEuaWQgPSBpZDtcbiAgb2JqZWN0LnVzZXJEYXRhLmlzU2VyaWFsaXplZEZyb21Db2RlID0gdHJ1ZTtcbiAgXG4gIC8vIFN0b3JlIGFzIGdsb2JhbCByZWZlcmVuY2UgdG8gcHJldmVudCBnYXJiYWdlIGNvbGxlY3Rpb25cbiAgaWYgKCF3aW5kb3cuX19vYmplY3RSZWZlcmVuY2VzKSB7XG4gICAgd2luZG93Ll9fb2JqZWN0UmVmZXJlbmNlcyA9IG5ldyBNYXAoKTtcbiAgfVxuICB3aW5kb3cuX19vYmplY3RSZWZlcmVuY2VzLnNldChpZCwgb2JqZWN0KTtcbiAgXG4gIGlmIChvYmplY3QgaW5zdGFuY2VvZiBUSFJFRS5NZXNoKSB7XG4gICAgY29uc29sZS5sb2coYFN0b3JpbmcgbWVzaDogJHtpZH0sIGdlb21ldHJ5OiAke29iamVjdC5nZW9tZXRyeS50eXBlfWApO1xuICAgIC8vIEdldCBvcmlnaW5hbCBnZW9tZXRyeSBhbmQgbWF0ZXJpYWwgdG8gcHJlc2VydmUgYXMgbXVjaCBkYXRhIGFzIHBvc3NpYmxlXG4gICAgY29uc3QgZ2VvID0gb2JqZWN0Lmdlb21ldHJ5O1xuICAgIGNvbnN0IG1hdCA9IG9iamVjdC5tYXRlcmlhbCBhcyBUSFJFRS5NYXRlcmlhbDtcbiAgICBcbiAgICAvLyBTdG9yZSByZWZlcmVuY2VzIHRvIHByZXZlbnQgZ2FyYmFnZSBjb2xsZWN0aW9uXG4gICAgd2luZG93Ll9fb2JqZWN0UmVmZXJlbmNlcy5zZXQoYCR7aWR9X2dlb21ldHJ5YCwgZ2VvKTtcbiAgICB3aW5kb3cuX19vYmplY3RSZWZlcmVuY2VzLnNldChgJHtpZH1fbWF0ZXJpYWxgLCBtYXQpO1xuICAgIFxuICAgIHJldHVybiB7XG4gICAgICBpZCxcbiAgICAgIHR5cGU6ICdtZXNoJyxcbiAgICAgIG5hbWUsXG4gICAgICBwb3NpdGlvbixcbiAgICAgIHJvdGF0aW9uLFxuICAgICAgc2NhbGUsXG4gICAgICB1c2VyRGF0YTogeyAuLi5vYmplY3QudXNlckRhdGEgfSxcbiAgICAgIGdlb21ldHJ5OiB7XG4gICAgICAgIHR5cGU6IGdlby50eXBlLFxuICAgICAgICBwYXJhbWV0ZXJzOiB7XG4gICAgICAgICAgLy8gV2Ugc3RvcmUgdGhlIElEIHRvIGxvb2sgaXQgdXAgbGF0ZXJcbiAgICAgICAgICBvYmplY3RJZDogaWRcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgICBtYXRlcmlhbDoge1xuICAgICAgICB0eXBlOiBtYXQudHlwZSxcbiAgICAgICAgY29sb3I6IG1hdCBpbnN0YW5jZW9mIFRIUkVFLk1lc2hTdGFuZGFyZE1hdGVyaWFsID8gXG4gICAgICAgICAgICAgICBtYXQuY29sb3I/LmdldEhleFN0cmluZygpIHx8ICdmZmZmZmYnIDogJ2ZmZmZmZicsXG4gICAgICAgIHBhcmFtZXRlcnM6IHtcbiAgICAgICAgICAvLyBXZSBzdG9yZSB0aGUgSUQgdG8gbG9vayBpdCB1cCBsYXRlclxuICAgICAgICAgIG9iamVjdElkOiBpZFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICB9O1xuICB9IGVsc2UgaWYgKG9iamVjdCBpbnN0YW5jZW9mIFRIUkVFLkdyb3VwKSB7XG4gICAgY29uc29sZS5sb2coYFN0b3JpbmcgZ3JvdXA6ICR7aWR9LCBjaGlsZHJlbjogJHtvYmplY3QuY2hpbGRyZW4ubGVuZ3RofWApO1xuICAgIC8vIFByb2Nlc3MgY2hpbGRyZW5cbiAgICBjb25zdCBjaGlsZHJlbjogU3RvcmVkT2JqZWN0W10gPSBbXTtcbiAgICBvYmplY3QuY2hpbGRyZW4uZm9yRWFjaChjaGlsZCA9PiB7XG4gICAgICBpZiAoY2hpbGQgaW5zdGFuY2VvZiBUSFJFRS5PYmplY3QzRCkge1xuICAgICAgICBjaGlsZHJlbi5wdXNoKHRocmVlT2JqZWN0VG9TdG9yZWRPYmplY3QoY2hpbGQpKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICBcbiAgICByZXR1cm4ge1xuICAgICAgaWQsXG4gICAgICB0eXBlOiAnZ3JvdXAnLFxuICAgICAgbmFtZSxcbiAgICAgIHBvc2l0aW9uLFxuICAgICAgcm90YXRpb24sXG4gICAgICBzY2FsZSxcbiAgICAgIHVzZXJEYXRhOiB7IC4uLm9iamVjdC51c2VyRGF0YSB9LFxuICAgICAgY2hpbGRyZW4sXG4gICAgfTtcbiAgfVxuICBcbiAgLy8gSGFuZGxlIGdlbmVyaWMgVEhSRUUuT2JqZWN0M0Qgb2JqZWN0c1xuICBjb25zb2xlLmxvZyhgU3RvcmluZyBnZW5lcmljIG9iamVjdDNEOiAke2lkfWApO1xuICBcbiAgLy8gUHJvY2VzcyBjaGlsZHJlbiBpZiBhbnlcbiAgY29uc3QgY2hpbGRyZW46IFN0b3JlZE9iamVjdFtdID0gW107XG4gIGlmIChvYmplY3QuY2hpbGRyZW4ubGVuZ3RoID4gMCkge1xuICAgIG9iamVjdC5jaGlsZHJlbi5mb3JFYWNoKGNoaWxkID0+IHtcbiAgICAgIGlmIChjaGlsZCBpbnN0YW5jZW9mIFRIUkVFLk9iamVjdDNEKSB7XG4gICAgICAgIGNoaWxkcmVuLnB1c2godGhyZWVPYmplY3RUb1N0b3JlZE9iamVjdChjaGlsZCkpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG4gIFxuICByZXR1cm4ge1xuICAgIGlkLFxuICAgIHR5cGU6ICdvYmplY3QnLFxuICAgIG5hbWUsXG4gICAgcG9zaXRpb24sXG4gICAgcm90YXRpb24sXG4gICAgc2NhbGUsXG4gICAgdXNlckRhdGE6IHsgLi4ub2JqZWN0LnVzZXJEYXRhIH0sXG4gICAgY2hpbGRyZW46IGNoaWxkcmVuLmxlbmd0aCA+IDAgPyBjaGlsZHJlbiA6IHVuZGVmaW5lZFxuICB9O1xufTtcblxuLy8gSGVscGVyIGZ1bmN0aW9uIHRvIHByZXBhcmUgbWF0ZXJpYWxzIGZvciBwcm9wZXIgcmVuZGVyaW5nXG5jb25zdCBwcmVwYXJlTWF0ZXJpYWwgPSAobWF0ZXJpYWw6IFRIUkVFLk1hdGVyaWFsKSA9PiB7XG4gIC8vIENvbW1vbiBmaXhlcyBmb3IgbWF0ZXJpYWxzXG4gIGlmIChtYXRlcmlhbCkge1xuICAgIC8vIEVuc3VyZSB0aGUgbWF0ZXJpYWwgaXMgdXNpbmcgYXBwcm9wcmlhdGUgc2lkZSBzZXR0aW5nIChHTFRGIG9mdGVuIHVzZXMgYmFja3NpZGUgb25seSlcbiAgICBtYXRlcmlhbC5zaWRlID0gVEhSRUUuRG91YmxlU2lkZTtcbiAgICBcbiAgICAvLyBFbnN1cmUgY29sb3IgaXMgcHJvcGVybHkgc2V0IGZvciBjb21tb24gbWF0ZXJpYWwgdHlwZXNcbiAgICBpZiAobWF0ZXJpYWwgaW5zdGFuY2VvZiBUSFJFRS5NZXNoU3RhbmRhcmRNYXRlcmlhbCkge1xuICAgICAgLy8gTWFrZSBzdXJlIGNvbG9yIGhhcyBhIHByb3BlciB2YWx1ZSBhbmQgbm90IGJsYWNrIGJ5IGRlZmF1bHRcbiAgICAgIGlmICghbWF0ZXJpYWwuY29sb3IgfHwgbWF0ZXJpYWwuY29sb3IuZ2V0SGV4KCkgPT09IDB4MDAwMDAwKSB7XG4gICAgICAgIG1hdGVyaWFsLmNvbG9yLnNldCgweGNjY2NjYyk7IC8vIFNldCBhIGxpZ2h0IGdyYXkgYXMgZmFsbGJhY2tcbiAgICAgIH1cbiAgICAgIC8vIEluY3JlYXNlIGVtaXNzaW9uIGZvciBiZXR0ZXIgdmlzaWJpbGl0eVxuICAgICAgaWYgKG1hdGVyaWFsLmVtaXNzaXZlICYmIG1hdGVyaWFsLmVtaXNzaXZlLmdldEhleCgpID09PSAwKSB7XG4gICAgICAgIG1hdGVyaWFsLmVtaXNzaXZlLnNldCgweDExMTExMSk7XG4gICAgICB9XG4gICAgICAvLyBNYWtlIHN1cmUgbWF0ZXJpYWxzIHJlZmxlY3QgbGlnaHQgcHJvcGVybHlcbiAgICAgIG1hdGVyaWFsLm1ldGFsbmVzcyA9IG1hdGVyaWFsLm1ldGFsbmVzcyB8fCAwLjM7XG4gICAgICBtYXRlcmlhbC5yb3VnaG5lc3MgPSBtYXRlcmlhbC5yb3VnaG5lc3MgfHwgMC43O1xuICAgIH0gZWxzZSBpZiAobWF0ZXJpYWwgaW5zdGFuY2VvZiBUSFJFRS5NZXNoQmFzaWNNYXRlcmlhbCkge1xuICAgICAgLy8gRm9yIGJhc2ljIG1hdGVyaWFscywgZW5zdXJlIGNvbG9yIGlzIG5vdCBibGFja1xuICAgICAgaWYgKCFtYXRlcmlhbC5jb2xvciB8fCBtYXRlcmlhbC5jb2xvci5nZXRIZXgoKSA9PT0gMHgwMDAwMDApIHtcbiAgICAgICAgbWF0ZXJpYWwuY29sb3Iuc2V0KDB4Y2NjY2NjKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKG1hdGVyaWFsIGluc3RhbmNlb2YgVEhSRUUuTWVzaFBob25nTWF0ZXJpYWwgfHwgXG4gICAgICAgICAgICAgICBtYXRlcmlhbCBpbnN0YW5jZW9mIFRIUkVFLk1lc2hMYW1iZXJ0TWF0ZXJpYWwpIHtcbiAgICAgIC8vIEVuc3VyZSB0aGUgbWF0ZXJpYWwgY29sb3IgaXNuJ3QgYmxhY2tcbiAgICAgIGlmICghbWF0ZXJpYWwuY29sb3IgfHwgbWF0ZXJpYWwuY29sb3IuZ2V0SGV4KCkgPT09IDB4MDAwMDAwKSB7XG4gICAgICAgIG1hdGVyaWFsLmNvbG9yLnNldCgweGNjY2NjYyk7XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8vIEVuc3VyZSB0ZXh0dXJlcyBhcmUgcHJvcGVybHkgc2V0IHVwIGlmIHByZXNlbnRcbiAgICBpZiAoJ21hcCcgaW4gbWF0ZXJpYWwgJiYgbWF0ZXJpYWwubWFwKSB7XG4gICAgICAvLyBVc2UgcHJvcGVyIGNhc3RpbmcgZm9yIFR5cGVTY3JpcHRcbiAgICAgIChtYXRlcmlhbC5tYXAgYXMgVEhSRUUuVGV4dHVyZSkuY29sb3JTcGFjZSA9IFRIUkVFLlNSR0JDb2xvclNwYWNlO1xuICAgICAgbWF0ZXJpYWwubmVlZHNVcGRhdGUgPSB0cnVlO1xuICAgIH1cbiAgICBcbiAgICAvLyBVcGRhdGUgdGhlIG1hdGVyaWFsIHRvIGFwcGx5IGNoYW5nZXNcbiAgICBtYXRlcmlhbC5uZWVkc1VwZGF0ZSA9IHRydWU7XG4gIH1cbn07XG5cbmV4cG9ydCBjb25zdCB1c2VPYmplY3RTdG9yZSA9IGNyZWF0ZTxPYmplY3RTdG9yZVN0YXRlPigpKChzZXQsIGdldCkgPT4gKHtcbiAgLy8gSW5pdGlhbCBzdGF0ZVxuICBvYmplY3RzOiBbXSxcbiAgbWVzaENvdW50OiAwLFxuICBcbiAgLy8gQWN0aW9uc1xuICBpbmNyZW1lbnRNZXNoQ291bnQ6ICgpID0+IHNldCgoc3RhdGUpID0+ICh7IG1lc2hDb3VudDogc3RhdGUubWVzaENvdW50ICsgMSB9KSksXG4gIFxuICBhZGRPYmplY3Q6IChvYmplY3Q6IFRIUkVFLk9iamVjdDNEKSA9PiB7XG4gICAgY29uc3Qgc3RvcmVkT2JqZWN0ID0gdGhyZWVPYmplY3RUb1N0b3JlZE9iamVjdChvYmplY3QpO1xuICAgIHNldCgoc3RhdGUpID0+ICh7XG4gICAgICBvYmplY3RzOiBbLi4uc3RhdGUub2JqZWN0cywgc3RvcmVkT2JqZWN0XSxcbiAgICAgIG1lc2hDb3VudDogc3RhdGUubWVzaENvdW50ICsgMSxcbiAgICB9KSk7XG4gIH0sXG4gIFxuICB1cGRhdGVPYmplY3Q6IChpZDogc3RyaW5nLCB1cGRhdGVzOiBQYXJ0aWFsPFN0b3JlZE9iamVjdD4pID0+IHtcbiAgICBzZXQoKHN0YXRlKSA9PiAoe1xuICAgICAgb2JqZWN0czogc3RhdGUub2JqZWN0cy5tYXAob2JqID0+IFxuICAgICAgICBvYmouaWQgPT09IGlkID8geyAuLi5vYmosIC4uLnVwZGF0ZXMgfSA6IG9ialxuICAgICAgKSxcbiAgICB9KSk7XG4gIH0sXG4gIFxuICByZW1vdmVPYmplY3Q6IChpZDogc3RyaW5nKSA9PiB7XG4gICAgLy8gR2V0IGN1cnJlbnQgc3RhdGVcbiAgICBjb25zdCBhcHBTdGF0ZSA9IHVzZUFwcFN0b3JlLmdldFN0YXRlKCk7XG4gICAgY29uc3QgeyBzZWxlY3RlZE9iamVjdCwgc2V0U2VsZWN0ZWRPYmplY3QgfSA9IGFwcFN0YXRlO1xuICAgIFxuICAgIC8vIFVwZGF0ZSB0aGUgb2JqZWN0cyBhcnJheSBmaXJzdFxuICAgIHNldCgoc3RhdGUpID0+ICh7XG4gICAgICBvYmplY3RzOiBzdGF0ZS5vYmplY3RzLmZpbHRlcihvYmogPT4gb2JqLmlkICE9PSBpZCksXG4gICAgfSkpO1xuICAgIFxuICAgIC8vIElmIHdlJ3JlIHJlbW92aW5nIHRoZSBzZWxlY3RlZCBvYmplY3QsIGNsZWFyIHRoZSBzZWxlY3Rpb25cbiAgICAvLyBVc2UgZGlyZWN0IHN0YXRlIHNldHRpbmcgaW5zdGVhZCBvZiB0aGUgc2V0dGVyIGZ1bmN0aW9uXG4gICAgaWYgKHNlbGVjdGVkT2JqZWN0ICYmIChzZWxlY3RlZE9iamVjdC51dWlkID09PSBpZCB8fCBzZWxlY3RlZE9iamVjdC51c2VyRGF0YT8uaWQgPT09IGlkKSkge1xuICAgICAgLy8gVXNlIGRpcmVjdCBzZXRTdGF0ZSB0byBhdm9pZCBzZXR0ZXIgZnVuY3Rpb24gd2hpY2ggbWF5IGhhdmUgYWRkaXRpb25hbCBsb2dpY1xuICAgICAgdXNlQXBwU3RvcmUuc2V0U3RhdGUoeyBzZWxlY3RlZE9iamVjdDogbnVsbCB9KTtcbiAgICAgIFxuICAgICAgLy8gV2FpdCBhIHRpY2sgYmVmb3JlIGNsZWFyaW5nIHRoZSBkZWxldGlvbiBmbGFnIHRvIGVuc3VyZSBhbGwgdXBkYXRlcyBoYXZlIHByb3BhZ2F0ZWRcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICB1c2VBcHBTdG9yZS5zZXRTdGF0ZSh7IGlzRGVsZXRpbmc6IGZhbHNlIH0pO1xuICAgICAgfSwgMTApO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBOb3QgZGVsZXRpbmcgdGhlIHNlbGVjdGVkIG9iamVjdCwgc28ganVzdCB0dXJuIG9mZiBkZWxldGluZyBmbGFnXG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgdXNlQXBwU3RvcmUuc2V0U3RhdGUoeyBpc0RlbGV0aW5nOiBmYWxzZSB9KTtcbiAgICAgIH0sIDEwKTtcbiAgICB9XG4gIH0sXG4gIFxuICBjbGVhck9iamVjdHM6ICgpID0+IHtcbiAgICBzZXQoeyBvYmplY3RzOiBbXSwgbWVzaENvdW50OiAwIH0pO1xuICAgIHVzZUFwcFN0b3JlLmdldFN0YXRlKCkuc2V0U2VsZWN0ZWRPYmplY3QobnVsbCk7XG4gIH0sXG4gIFxuICBhZGRPYmplY3RGcm9tQ29kZTogKGNvZGU6IHN0cmluZykgPT4ge1xuICAgIHRyeSB7XG4gICAgICAvLyBDcmVhdGUgYSBmdW5jdGlvbiBmcm9tIHRoZSBjb2RlIHN0cmluZ1xuICAgICAgY29uc3QgY3JlYXRlT2JqZWN0RnVuY3Rpb24gPSBuZXcgRnVuY3Rpb24oJ1RIUkVFJywgY29kZSk7XG4gICAgICBcbiAgICAgIC8vIEV4ZWN1dGUgdGhlIGZ1bmN0aW9uIHdpdGggVEhSRUUgbGlicmFyeSBhcyBwYXJhbWV0ZXJcbiAgICAgIGNvbnN0IG9iamVjdCA9IGNyZWF0ZU9iamVjdEZ1bmN0aW9uKFRIUkVFKSBhcyBUSFJFRS5PYmplY3QzRDtcbiAgICAgIFxuICAgICAgLy8gQ2hlY2sgdGhhdCB0aGUgb2JqZWN0IGlzIGEgdmFsaWQgVEhSRUUuT2JqZWN0M0QgdHlwZSAoTWVzaCwgR3JvdXAsIG9yIGdlbmVyaWMgT2JqZWN0M0QpXG4gICAgICBpZiAoIShvYmplY3QgaW5zdGFuY2VvZiBUSFJFRS5PYmplY3QzRCkpIHtcbiAgICAgICAgY29uc29sZS5sb2coXCJvYmplY3Q6XCIsIG9iamVjdCk7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1RoZSBjb2RlIG11c3QgcmV0dXJuIGEgVEhSRUUuT2JqZWN0M0QsIFRIUkVFLk1lc2gsIG9yIFRIUkVFLkdyb3VwIG9iamVjdCcpO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gTG9nIHRoZSBzcGVjaWZpYyB0eXBlIGZvciBkZWJ1Z2dpbmdcbiAgICAgIGlmIChvYmplY3QgaW5zdGFuY2VvZiBUSFJFRS5NZXNoKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdBZGRpbmcgTWVzaCBmcm9tIGNvZGUnKTtcbiAgICAgIH0gZWxzZSBpZiAob2JqZWN0IGluc3RhbmNlb2YgVEhSRUUuR3JvdXApIHtcbiAgICAgICAgY29uc29sZS5sb2coJ0FkZGluZyBHcm91cCBmcm9tIGNvZGUnKTtcbiAgICAgIH0gZWxzZSBpZiAob2JqZWN0IGluc3RhbmNlb2YgVEhSRUUuT2JqZWN0M0QpIHtcbiAgICAgICAgY29uc29sZS5sb2coJ0FkZGluZyBnZW5lcmljIE9iamVjdDNEIGZyb20gY29kZScpO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBTZXQgcHJvcGVydGllc1xuICAgICAgb2JqZWN0LnVzZXJEYXRhLmlzVXNlckNyZWF0ZWQgPSB0cnVlO1xuICAgICAgb2JqZWN0LnVzZXJEYXRhLm5hbWUgPSBgVXNlciBPYmplY3QgJHtnZXQoKS5tZXNoQ291bnQgKyAxfWA7XG4gICAgICBcbiAgICAgIC8vIEFkZCB0byBzdG9yZSAtIHRocmVlT2JqZWN0VG9TdG9yZWRPYmplY3Qgd2lsbCBoYW5kbGUgdGhlIHNwZWNpZmljIHR5cGVcbiAgICAgIGdldCgpLmFkZE9iamVjdChvYmplY3QpO1xuICAgICAgXG4gICAgICByZXR1cm4gb2JqZWN0O1xuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZXhlY3V0aW5nIGNvZGU6JywgZXJyKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfSxcbiAgXG4gIGFkZE9iamVjdFdpdGhHbHRmOiBhc3luYyAodXJsOiBzdHJpbmcpID0+IHtcbiAgICB0cnkge1xuICAgICAgLy8gRHluYW1pY2FsbHkgaW1wb3J0IEdMVEZMb2FkZXJcbiAgICAgIGNvbnN0IHsgR0xURkxvYWRlciB9ID0gYXdhaXQgaW1wb3J0KCd0aHJlZS9hZGRvbnMvbG9hZGVycy9HTFRGTG9hZGVyLmpzJyk7XG4gICAgICBjb25zdCBsb2FkZXIgPSBuZXcgR0xURkxvYWRlcigpO1xuICAgICAgXG4gICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICBsb2FkZXIubG9hZChcbiAgICAgICAgICB1cmwsXG4gICAgICAgICAgKGdsdGYpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG1vZGVsID0gZ2x0Zi5zY2VuZTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKCEobW9kZWwgaW5zdGFuY2VvZiBUSFJFRS5PYmplY3QzRCkpIHtcbiAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignVGhlIEdMVEYgZmlsZSBkaWQgbm90IHJldHVybiBhIHZhbGlkIFRIUkVFLk9iamVjdDNEJyk7XG4gICAgICAgICAgICAgIHJlc29sdmUobnVsbCk7XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gRml4IG1hdGVyaWFscyAtIHRyYXZlcnNlIHRoZSBtb2RlbCBhbmQgZW5zdXJlIG1hdGVyaWFscyBhcmUgcHJvcGVybHkgY29uZmlndXJlZFxuICAgICAgICAgICAgbW9kZWwudHJhdmVyc2UoKG9iamVjdCkgPT4ge1xuICAgICAgICAgICAgICBpZiAob2JqZWN0IGluc3RhbmNlb2YgVEhSRUUuTWVzaCkge1xuICAgICAgICAgICAgICAgIC8vIEVuYWJsZSBzaGFkb3dzXG4gICAgICAgICAgICAgICAgb2JqZWN0LmNhc3RTaGFkb3cgPSB0cnVlO1xuICAgICAgICAgICAgICAgIG9iamVjdC5yZWNlaXZlU2hhZG93ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBGaXggbWF0ZXJpYWxzXG4gICAgICAgICAgICAgICAgaWYgKG9iamVjdC5tYXRlcmlhbCkge1xuICAgICAgICAgICAgICAgICAgLy8gSWYgaXQncyBhIHNpbmdsZSBtYXRlcmlhbFxuICAgICAgICAgICAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KG9iamVjdC5tYXRlcmlhbCkpIHtcbiAgICAgICAgICAgICAgICAgICAgcHJlcGFyZU1hdGVyaWFsKG9iamVjdC5tYXRlcmlhbCk7XG4gICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAvLyBJZiBpdCdzIGFuIGFycmF5IG9mIG1hdGVyaWFsc1xuICAgICAgICAgICAgICAgICAgICBvYmplY3QubWF0ZXJpYWwuZm9yRWFjaChtYXQgPT4gcHJlcGFyZU1hdGVyaWFsKG1hdCkpO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFNldCBwcm9wZXJ0aWVzXG4gICAgICAgICAgICBtb2RlbC51c2VyRGF0YS5pc1VzZXJDcmVhdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIG1vZGVsLnVzZXJEYXRhLm5hbWUgPSBgR0xURiBNb2RlbCAke2dldCgpLm1lc2hDb3VudCArIDF9YDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gUG9zaXRpb24gdGhlIG1vZGVsIHNsaWdodGx5IGFib3ZlIHRoZSBncm91bmQgdG8gcHJldmVudCBjbGlwcGluZ1xuICAgICAgICAgICAgbW9kZWwucG9zaXRpb24uc2V0KDAsIDEsIDApO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBBZGQgdG8gc3RvcmVcbiAgICAgICAgICAgIGdldCgpLmFkZE9iamVjdChtb2RlbCk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnQWRkZWQgR0xURiBtb2RlbCB0byBzY2VuZTonLCBtb2RlbCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHJlc29sdmUobW9kZWwpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgLy8gUHJvZ3Jlc3MgY2FsbGJhY2tcbiAgICAgICAgICAoeGhyKSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgJHsoeGhyLmxvYWRlZCAvIHhoci50b3RhbCAqIDEwMCl9JSBsb2FkZWRgKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIC8vIEVycm9yIGNhbGxiYWNrXG4gICAgICAgICAgKGVycm9yKSA9PiB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBsb2FkaW5nIEdMVEYgbW9kZWw6JywgZXJyb3IpO1xuICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcbiAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgICB9KTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGltcG9ydGluZyBvciBsb2FkaW5nIEdMVEYgbW9kZWw6JywgZXJyKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfVxufSkpICJdLCJuYW1lcyI6WyJjcmVhdGUiLCJUSFJFRSIsInVzZUFwcFN0b3JlIiwic2V0IiwiaXNVSUZvY3VzZWQiLCJpc0NvZGVFZGl0b3JPcGVuIiwic2VsZWN0ZWRPYmplY3QiLCJ0cmFuc2Zvcm1Nb2RlIiwiaXNEZWxldGluZyIsInNldFVJRm9jdXNlZCIsImZvY3VzZWQiLCJzZXRDb2RlRWRpdG9yT3BlbiIsIm9wZW4iLCJzZXRTZWxlY3RlZE9iamVjdCIsIm9iamVjdCIsInN0YXRlIiwic2V0VHJhbnNmb3JtTW9kZSIsIm1vZGUiLCJzZXRJc0RlbGV0aW5nIiwidXNlVGFiU3RvcmUiLCJhY3RpdmVUYWIiLCJzZXRBY3RpdmVUYWIiLCJ0YWIiLCJ0aHJlZU9iamVjdFRvU3RvcmVkT2JqZWN0IiwiY29uc29sZSIsImxvZyIsInV1aWQiLCJ0eXBlIiwiaWQiLCJuYW1lIiwidXNlckRhdGEiLCJzdWJzdHJpbmciLCJwb3NpdGlvbiIsIngiLCJ5IiwieiIsInJvdGF0aW9uIiwic2NhbGUiLCJpc1NlcmlhbGl6ZWRGcm9tQ29kZSIsIndpbmRvdyIsIl9fb2JqZWN0UmVmZXJlbmNlcyIsIk1hcCIsIk1lc2giLCJnZW9tZXRyeSIsImdlbyIsIm1hdCIsIm1hdGVyaWFsIiwicGFyYW1ldGVycyIsIm9iamVjdElkIiwiY29sb3IiLCJNZXNoU3RhbmRhcmRNYXRlcmlhbCIsImdldEhleFN0cmluZyIsIkdyb3VwIiwiY2hpbGRyZW4iLCJsZW5ndGgiLCJmb3JFYWNoIiwiY2hpbGQiLCJPYmplY3QzRCIsInB1c2giLCJ1bmRlZmluZWQiLCJwcmVwYXJlTWF0ZXJpYWwiLCJzaWRlIiwiRG91YmxlU2lkZSIsImdldEhleCIsImVtaXNzaXZlIiwibWV0YWxuZXNzIiwicm91Z2huZXNzIiwiTWVzaEJhc2ljTWF0ZXJpYWwiLCJNZXNoUGhvbmdNYXRlcmlhbCIsIk1lc2hMYW1iZXJ0TWF0ZXJpYWwiLCJtYXAiLCJjb2xvclNwYWNlIiwiU1JHQkNvbG9yU3BhY2UiLCJuZWVkc1VwZGF0ZSIsInVzZU9iamVjdFN0b3JlIiwiZ2V0Iiwib2JqZWN0cyIsIm1lc2hDb3VudCIsImluY3JlbWVudE1lc2hDb3VudCIsImFkZE9iamVjdCIsInN0b3JlZE9iamVjdCIsInVwZGF0ZU9iamVjdCIsInVwZGF0ZXMiLCJvYmoiLCJyZW1vdmVPYmplY3QiLCJhcHBTdGF0ZSIsImdldFN0YXRlIiwiZmlsdGVyIiwic2V0U3RhdGUiLCJzZXRUaW1lb3V0IiwiY2xlYXJPYmplY3RzIiwiYWRkT2JqZWN0RnJvbUNvZGUiLCJjb2RlIiwiY3JlYXRlT2JqZWN0RnVuY3Rpb24iLCJGdW5jdGlvbiIsImVycm9yIiwiaXNVc2VyQ3JlYXRlZCIsImVyciIsImFkZE9iamVjdFdpdGhHbHRmIiwidXJsIiwiR0xURkxvYWRlciIsImxvYWRlciIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwibG9hZCIsImdsdGYiLCJtb2RlbCIsInNjZW5lIiwidHJhdmVyc2UiLCJjYXN0U2hhZG93IiwicmVjZWl2ZVNoYWRvdyIsIkFycmF5IiwiaXNBcnJheSIsInhociIsImxvYWRlZCIsInRvdGFsIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./app/store/appStore.ts\n");

/***/ }),

/***/ "(ssr)/./app/components/three/App.css":
/*!**************************************!*\
  !*** ./app/components/three/App.css ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (\"e6188b7e4196\");\nif (false) {}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9hcHAvY29tcG9uZW50cy90aHJlZS9BcHAuY3NzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQSxpRUFBZSxjQUFjO0FBQzdCLElBQUksS0FBVSxFQUFFLEVBQXVCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdmliZS0zZC1jb2RlLy4vYXBwL2NvbXBvbmVudHMvdGhyZWUvQXBwLmNzcz9jODE3Il0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IFwiZTYxODhiN2U0MTk2XCJcbmlmIChtb2R1bGUuaG90KSB7IG1vZHVsZS5ob3QuYWNjZXB0KCkgfVxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./app/components/three/App.css\n");

/***/ }),

/***/ "(rsc)/./app/globals.css":
/*!*************************!*\
  !*** ./app/globals.css ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (\"6a31ebced958\");\nif (false) {}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvZ2xvYmFscy5jc3MiLCJtYXBwaW5ncyI6Ijs7OztBQUFBLGlFQUFlLGNBQWM7QUFDN0IsSUFBSSxLQUFVLEVBQUUsRUFBdUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92aWJlLTNkLWNvZGUvLi9hcHAvZ2xvYmFscy5jc3M/OTBjMCJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBcIjZhMzFlYmNlZDk1OFwiXG5pZiAobW9kdWxlLmhvdCkgeyBtb2R1bGUuaG90LmFjY2VwdCgpIH1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/globals.css\n");

/***/ }),

/***/ "(ssr)/./app/tldraw.css":
/*!************************!*\
  !*** ./app/tldraw.css ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (\"6fea965ca941\");\nif (false) {}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9hcHAvdGxkcmF3LmNzcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUEsaUVBQWUsY0FBYztBQUM3QixJQUFJLEtBQVUsRUFBRSxFQUF1QiIsInNvdXJjZXMiOlsid2VicGFjazovL3ZpYmUtM2QtY29kZS8uL2FwcC90bGRyYXcuY3NzPzNjYzMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgXCI2ZmVhOTY1Y2E5NDFcIlxuaWYgKG1vZHVsZS5ob3QpIHsgbW9kdWxlLmhvdC5hY2NlcHQoKSB9XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./app/tldraw.css\n");

/***/ }),

/***/ "(rsc)/./app/layout.tsx":
/*!************************!*\
  !*** ./app/layout.tsx ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ RootLayout),\n/* harmony export */   metadata: () => (/* binding */ metadata)\n/* harmony export */ });\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react/jsx-dev-runtime */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-page/vendored/rsc/react-jsx-dev-runtime.js\");\n/* harmony import */ var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_font_google_target_css_path_app_layout_tsx_import_Inter_arguments_subsets_latin_variableName_inter___WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/font/google/target.css?{\"path\":\"app/layout.tsx\",\"import\":\"Inter\",\"arguments\":[{\"subsets\":[\"latin\"]}],\"variableName\":\"inter\"} */ \"(rsc)/./node_modules/next/font/google/target.css?{\\\"path\\\":\\\"app/layout.tsx\\\",\\\"import\\\":\\\"Inter\\\",\\\"arguments\\\":[{\\\"subsets\\\":[\\\"latin\\\"]}],\\\"variableName\\\":\\\"inter\\\"}\");\n/* harmony import */ var next_font_google_target_css_path_app_layout_tsx_import_Inter_arguments_subsets_latin_variableName_inter___WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_font_google_target_css_path_app_layout_tsx_import_Inter_arguments_subsets_latin_variableName_inter___WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _globals_css__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./globals.css */ \"(rsc)/./app/globals.css\");\n\n\n\nconst metadata = {\n    title: \"CoCo\",\n    description: \"draw a 3d model and make it real\",\n    manifest: \"/manifest.json\",\n    icons: [\n        {\n            rel: \"icon\",\n            url: \"/icon.jpeg\"\n        }\n    ]\n};\nfunction RootLayout({ children }) {\n    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"html\", {\n        lang: \"en\",\n        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(\"body\", {\n            className: (next_font_google_target_css_path_app_layout_tsx_import_Inter_arguments_subsets_latin_variableName_inter___WEBPACK_IMPORTED_MODULE_2___default().className),\n            children: children\n        }, void 0, false, {\n            fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/layout.tsx\",\n            lineNumber: 22,\n            columnNumber: 4\n        }, this)\n    }, void 0, false, {\n        fileName: \"/Users/kevinizadi/websockets/CoCo/frontend/app/layout.tsx\",\n        lineNumber: 21,\n        columnNumber: 3\n    }, this);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvbGF5b3V0LnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUlNQTtBQUZnQjtBQUlmLE1BQU1DLFdBQXFCO0lBQ2pDQyxPQUFPO0lBQ1BDLGFBQWE7SUFDYkMsVUFBVTtJQUNWQyxPQUFPO1FBQ047WUFDQ0MsS0FBSztZQUNMQyxLQUFLO1FBQ047S0FDQTtBQUNGLEVBQUM7QUFFYyxTQUFTQyxXQUFXLEVBQUVDLFFBQVEsRUFBaUM7SUFDN0UscUJBQ0MsOERBQUNDO1FBQUtDLE1BQUs7a0JBQ1YsNEVBQUNDO1lBQUtDLFdBQVdiLDJKQUFlO3NCQUFHUzs7Ozs7Ozs7Ozs7QUFHdEMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly92aWJlLTNkLWNvZGUvLi9hcHAvbGF5b3V0LnRzeD85OTg4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHsgTWV0YWRhdGEgfSBmcm9tICduZXh0J1xuaW1wb3J0IHsgSW50ZXIgfSBmcm9tICduZXh0L2ZvbnQvZ29vZ2xlJ1xuaW1wb3J0ICcuL2dsb2JhbHMuY3NzJ1xuXG5jb25zdCBpbnRlciA9IEludGVyKHsgc3Vic2V0czogWydsYXRpbiddIH0pXG5cbmV4cG9ydCBjb25zdCBtZXRhZGF0YTogTWV0YWRhdGEgPSB7XG5cdHRpdGxlOiAnQ29DbycsXG5cdGRlc2NyaXB0aW9uOiAnZHJhdyBhIDNkIG1vZGVsIGFuZCBtYWtlIGl0IHJlYWwnLFxuXHRtYW5pZmVzdDogJy9tYW5pZmVzdC5qc29uJyxcblx0aWNvbnM6IFtcblx0XHR7XG5cdFx0XHRyZWw6ICdpY29uJyxcblx0XHRcdHVybDogJy9pY29uLmpwZWcnLFxuXHRcdH0sXG5cdF0sXG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFJvb3RMYXlvdXQoeyBjaGlsZHJlbiB9OiB7IGNoaWxkcmVuOiBSZWFjdC5SZWFjdE5vZGUgfSkge1xuXHRyZXR1cm4gKFxuXHRcdDxodG1sIGxhbmc9XCJlblwiPlxuXHRcdFx0PGJvZHkgY2xhc3NOYW1lPXtpbnRlci5jbGFzc05hbWV9PntjaGlsZHJlbn08L2JvZHk+XG5cdFx0PC9odG1sPlxuXHQpXG59XG4iXSwibmFtZXMiOlsiaW50ZXIiLCJtZXRhZGF0YSIsInRpdGxlIiwiZGVzY3JpcHRpb24iLCJtYW5pZmVzdCIsImljb25zIiwicmVsIiwidXJsIiwiUm9vdExheW91dCIsImNoaWxkcmVuIiwiaHRtbCIsImxhbmciLCJib2R5IiwiY2xhc3NOYW1lIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/layout.tsx\n");

/***/ }),

/***/ "(rsc)/./app/page.tsx":
/*!**********************!*\
  !*** ./app/page.tsx ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   $$typeof: () => (/* binding */ $$typeof),
/* harmony export */   __esModule: () => (/* binding */ __esModule),
/* harmony export */   "default": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* harmony import */ var next_dist_build_webpack_loaders_next_flight_loader_module_proxy__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/build/webpack/loaders/next-flight-loader/module-proxy */ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-loader/module-proxy.js");

const proxy = (0,next_dist_build_webpack_loaders_next_flight_loader_module_proxy__WEBPACK_IMPORTED_MODULE_0__.createProxy)(String.raw`/Users/kevinizadi/websockets/CoCo/frontend/app/page.tsx`)

// Accessing the __esModule property and exporting $$typeof are required here.
// The __esModule getter forces the proxy target to create the default export
// and the $$typeof value is for rendering logic to determine if the module
// is a client boundary.
const { __esModule, $$typeof } = proxy;
const __default__ = proxy.default;


/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (__default__);

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/three","vendor-chunks/next","vendor-chunks/@tldraw","vendor-chunks/core-js","vendor-chunks/@react-three","vendor-chunks/@radix-ui","vendor-chunks/leva","vendor-chunks/react-remove-scroll","vendor-chunks/@use-gesture","vendor-chunks/@swc","vendor-chunks/react-reconciler","vendor-chunks/@floating-ui","vendor-chunks/prop-types","vendor-chunks/react-style-singleton","vendor-chunks/react-remove-scroll-bar","vendor-chunks/three-stdlib","vendor-chunks/use-callback-ref","vendor-chunks/set-value","vendor-chunks/file-selector","vendor-chunks/zustand","vendor-chunks/idb","vendor-chunks/colord","vendor-chunks/use-sidecar","vendor-chunks/styled-jsx","vendor-chunks/split-string","vendor-chunks/react-is","vendor-chunks/react-dropzone","vendor-chunks/is-extendable","vendor-chunks/extend-shallow","vendor-chunks/tslib","vendor-chunks/react-use-measure","vendor-chunks/react-colorful","vendor-chunks/its-fine","vendor-chunks/dequal","vendor-chunks/@stitches","vendor-chunks/@babel","vendor-chunks/classnames","vendor-chunks/v8n","vendor-chunks/suspend-react","vendor-chunks/react-merge-refs","vendor-chunks/object-assign","vendor-chunks/mixin-deep","vendor-chunks/merge-value","vendor-chunks/lz-string","vendor-chunks/lodash.uniq","vendor-chunks/lodash.throttle","vendor-chunks/lodash.pick","vendor-chunks/lodash.omit","vendor-chunks/lodash.isequal","vendor-chunks/isobject","vendor-chunks/hotkeys-js","vendor-chunks/get-value","vendor-chunks/get-nonce","vendor-chunks/for-in","vendor-chunks/eventemitter3","vendor-chunks/canvas-size","vendor-chunks/attr-accept","vendor-chunks/assign-symbols","vendor-chunks/aria-hidden"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fpage&page=%2Fpage&appPaths=%2Fpage&pagePath=private-next-app-dir%2Fpage.tsx&appDir=%2FUsers%2Fkevinizadi%2Fwebsockets%2FCoCo%2Ffrontend%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fkevinizadi%2Fwebsockets%2FCoCo%2Ffrontend&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();